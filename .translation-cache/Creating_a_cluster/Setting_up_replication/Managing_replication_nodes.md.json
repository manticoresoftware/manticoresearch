{
  "e60c4fc36107f4004c5c34beec83a92afc40c073b57bf6a79420a687080efb49": {
    "original": "# Managing replication nodes\n\n<!-- example managing replication nodes 1 -->\n\nThe `ALTER CLUSTER <cluster_name> UPDATE nodes`  statement updates the node lists on each node within the specified cluster to include all active nodes in the cluster. For more information on node lists, see [Joining a cluster](../../Creating_a_cluster/Setting_up_replication/Joining_a_replication_cluster.md).\n\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_0\n\n<!-- request JSON -->\n\nCODE_BLOCK_1\n\n<!-- request PHP -->\n\nCODE_BLOCK_2\n\n<!-- intro -->\n\n##### Python:\n\n<!-- request Python -->\n\nCODE_BLOCK_3\n\n<!-- response Python -->\n\nCODE_BLOCK_4\n\n<!-- intro -->\n\n##### Python-asyncio:\n\n<!-- request Python-asyncio -->\n\nCODE_BLOCK_5\n\n<!-- response Python-asyncio -->\n\nCODE_BLOCK_6\n\n<!-- intro -->\n\n##### Javascript:\n\n<!-- request javascript -->\n\nCODE_BLOCK_7\n\n<!-- response javascript -->\n\nCODE_BLOCK_8\n\n<!-- intro -->\n\n##### java:\n\n<!-- request Java -->\n\nCODE_BLOCK_9\n\n<!-- intro -->\n\n##### C#:\n\n<!-- request C# -->\n\nCODE_BLOCK_10\n\n<!-- intro -->\n\n##### Rust:\n\n<!-- request Rust -->\n\nCODE_BLOCK_11\n\n<!-- end -->\n\nFor instance, when the cluster was initially established, the list of nodes used to rejoin the cluster was `10.10.0.1:9312,10.10.1.1:9312`. Since then, other nodes joined the cluster and now the active nodes are `10.10.0.1:9312,10.10.1.1:9312,10.15.0.1:9312,10.15.0.3:9312`.However, the list of nodes used to rejoin the cluster has not been updated.\n\nTo rectify this, you can run the `ALTER CLUSTER ... UPDATE nodes` statement to copy the list of active nodes to the list of nodes used to rejoin the cluster. After this, the list of nodes used to rejoin the cluster will include all the active nodes in the cluster.\n\nBoth lists of nodes can be viewed using the [Cluster status](../../Creating_a_cluster/Setting_up_replication/Replication_cluster_status.md) statement (`cluster_post_nodes_set` and `cluster_post_nodes_view`).\n\n## Removing node from cluster\n\nTo remove a node from the replication cluster, follow these steps:\n\n1. Stop the node\n\n2. Remove the information about the cluster from  `<data_dir>/manticore.json` (usually `/var/lib/manticore/manticore.json`) on the node that has been stopped.\n\n3. Run `ALTER CLUSTER cluster_name UPDATE nodes` on any other node.\n\nAfter these steps, the other nodes will forget about the detached node and the detached node will forget about the cluster. This action will not impact the tables in the cluster or on the detached node.\n\n<!-- proofread -->",
    "translations": {
      "chinese": "# 管理复制节点\n\n<!-- example managing replication nodes 1 -->\n\n`ALTER CLUSTER <cluster_name> UPDATE nodes` 语句会更新指定集群中每个节点上的节点列表，以包含集群中的所有活动节点。有关节点列表的更多信息，请参见 [加入集群](../../Creating_a_cluster/Setting_up_replication/Joining_a_replication_cluster.md)。\n\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_0\n\n<!-- request JSON -->\n\nCODE_BLOCK_1\n\n<!-- request PHP -->\n\nCODE_BLOCK_2\n\n<!-- intro -->\n\n##### Python:\n\n<!-- request Python -->\n\nCODE_BLOCK_3\n\n<!-- response Python -->\n\nCODE_BLOCK_4\n\n<!-- intro -->\n\n##### Python-asyncio:\n\n<!-- request Python-asyncio -->\n\nCODE_BLOCK_5\n\n<!-- response Python-asyncio -->\n\nCODE_BLOCK_6\n\n<!-- intro -->\n\n##### Javascript:\n\n<!-- request javascript -->\n\nCODE_BLOCK_7\n\n<!-- response javascript -->\n\nCODE_BLOCK_8\n\n<!-- intro -->\n\n##### java:\n\n<!-- request Java -->\n\nCODE_BLOCK_9\n\n<!-- intro -->\n\n##### C#:\n\n<!-- request C# -->\n\nCODE_BLOCK_10\n\n<!-- intro -->\n\n##### Rust:\n\n<!-- request Rust -->\n\nCODE_BLOCK_11\n\n<!-- end -->\n\n例如，当集群最初建立时，用于重新加入集群的节点列表是 `10.10.0.1:9312,10.10.1.1:9312`。此后，其他节点加入了集群，现在的活动节点是 `10.10.0.1:9312,10.10.1.1:9312,10.15.0.1:9312,10.15.0.3:9312`。然而，用于重新加入集群的节点列表尚未更新。\n\n为了解决此问题，您可以运行 `ALTER CLUSTER ... UPDATE nodes` 语句，将活动节点列表复制到用于重新加入集群的节点列表中。之后，用于重新加入集群的节点列表将包含集群中的所有活动节点。\n\n两个节点列表都可以通过使用 [集群状态](../../Creating_a_cluster/Setting_up_replication/Replication_cluster_status.md) 语句查看（`cluster_post_nodes_set` 和 `cluster_post_nodes_view`）。\n\n## 从集群中移除节点\n\n要从复制集群中移除节点，请执行以下步骤：\n\n1. 停止该节点\n\n2. 从已停止节点的 `<data_dir>/manticore.json`（通常是 `/var/lib/manticore/manticore.json`）中删除有关集群的信息。\n\n3. 在其他任一节点上运行 `ALTER CLUSTER cluster_name UPDATE nodes`。\n\n完成这些步骤后，其他节点将忘记已分离的节点，已分离的节点也将忘记该集群。此操作不会影响集群中或已分离节点上的表。\n\n<!-- proofread -->",
      "russian": "# Управление узлами репликации\n\n<!-- example managing replication nodes 1 -->\n\nОператор `ALTER CLUSTER <cluster_name> UPDATE nodes` обновляет списки узлов на каждом узле в указанном кластере, чтобы включить все активные узлы в кластере. Для получения дополнительной информации о списках узлов смотрите [Присоединение к кластеру](../../Creating_a_cluster/Setting_up_replication/Joining_a_replication_cluster.md).\n\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_0\n\n<!-- request JSON -->\n\nCODE_BLOCK_1\n\n<!-- request PHP -->\n\nCODE_BLOCK_2\n\n<!-- intro -->\n\n##### Python:\n\n<!-- request Python -->\n\nCODE_BLOCK_3\n\n<!-- response Python -->\n\nCODE_BLOCK_4\n\n<!-- intro -->\n\n##### Python-asyncio:\n\n<!-- request Python-asyncio -->\n\nCODE_BLOCK_5\n\n<!-- response Python-asyncio -->\n\nCODE_BLOCK_6\n\n<!-- intro -->\n\n##### Javascript:\n\n<!-- request javascript -->\n\nCODE_BLOCK_7\n\n<!-- response javascript -->\n\nCODE_BLOCK_8\n\n<!-- intro -->\n\n##### java:\n\n<!-- request Java -->\n\nCODE_BLOCK_9\n\n<!-- intro -->\n\n##### C#:\n\n<!-- request C# -->\n\nCODE_BLOCK_10\n\n<!-- intro -->\n\n##### Rust:\n\n<!-- request Rust -->\n\nCODE_BLOCK_11\n\n<!-- end -->\n\nНапример, когда кластер был изначально создан, список узлов, используемых для повторного присоединения к кластеру, был `10.10.0.1:9312,10.10.1.1:9312`. С тех пор к кластеру присоединились другие узлы, и теперь активные узлы — `10.10.0.1:9312,10.10.1.1:9312,10.15.0.1:9312,10.15.0.3:9312`. Однако список узлов, используемых для повторного присоединения к кластеру, не был обновлен.\n\nЧтобы исправить это, вы можете выполнить оператор `ALTER CLUSTER ... UPDATE nodes`, чтобы скопировать список активных узлов в список узлов, используемых для повторного присоединения к кластеру. После этого список узлов, используемых для повторного присоединения к кластеру, будет включать все активные узлы в кластере.\n\nОба списка узлов можно просмотреть с помощью оператора [Статус кластера](../../Creating_a_cluster/Setting_up_replication/Replication_cluster_status.md) (`cluster_post_nodes_set` и `cluster_post_nodes_view`).\n\n## Удаление узла из кластера\n\nЧтобы удалить узел из кластера репликации, выполните следующие шаги:\n\n1. Остановите узел\n\n2. Удалите информацию о кластере из `<data_dir>/manticore.json` (обычно `/var/lib/manticore/manticore.json`) на остановленном узле.\n\n3. Выполните `ALTER CLUSTER cluster_name UPDATE nodes` на любом другом узле.\n\nПосле этих шагов остальные узлы забудут об отключенном узле, а отключенный узел забудет о кластере. Это действие не повлияет на таблицы в кластере или на отключенном узле.\n\n<!-- proofread -->"
    },
    "is_code_or_comment": false
  }
}
