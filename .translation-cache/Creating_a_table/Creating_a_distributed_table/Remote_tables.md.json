{
    "ae84fce951e4fb63805f4cfa9b3cc69d38f73bfd8d731fb02ed0c0c3315d3443": {
        "original": "The `listen_tfo` option allows for the use of the TCP_FASTOPEN flag for all listeners. By default, it is managed by the system, but it can be explicitly turned off by setting it to '0'.\n\nFor more information about the TCP Fast Open extension, please refer to [Wikipedia](https://en.wikipedia.org/wiki/TCP_Fast_Open).  In short, it allows to eliminate one TCP round-trip when establishing a connection.\n\nIn practice, using TFO can optimize the client-agent network efficiency, similar to when `agent_persistent`  is in use, but without holding active connections and without limitations on the maximum number of connections.\n\nMost modern operating systems support TFO. Linux (as one of the most progressive) has supported it since 2011, with kernels starting from 3.7 (for the server side). Windows has supported it since some builds of Windows 10. Other systems, such as FreeBSD and MacOS, are also in the game.\n\nFor Linux systems, the server checks the variable `/proc/sys/net/ipv4/tcp_fastopen` and behaves accordingly. Bit 0 manages the client side, while bit 1 rules the listeners. By default, the system has this parameter set to 1, i.e., clients are enabled and listeners are disabled.\n\n### persistent_connections_limit\n\nCODE_BLOCK_13\n\nThe `persistent_connections_limit` option defines the maximum number of simultaneous persistent connections to remote persistent agents. This is an instance-wide setting and must be defined in the searchd configuration section. Each time a connection to an agent defined under `agent_persistent` is made, we attempt to reuse an existing connection (if one exists) or create a new connection and save it for future use. However, in some cases it may be necessary to limit the number of persistent connections. This directive defines the limit and affects the number of connections to each agent's host across all distributed tables.\n\nIt is recommended to set this value equal to or less than the [max_connections](../../Server_settings/Searchd.md#max_connections) option in the agent's configuration.\n\n## Distributed snippets creation\n\nA special case of a distributed table is a single local and multiple remotes, which is used exclusively for  [distributed snippets creation](../../Creating_a_table/Creating_a_distributed_table/Remote_tables.md#Distributed-snippets-creation), when snippets are sourced from files. In this case, the local table may act as a \"template\" table, providing settings for tokenization when building snippets.\n\n### snippets_file_prefix\n\nCODE_BLOCK_14\n\nThe `snippets_file_prefix` is an optional prefix that can be added to the local file names when generating snippets. The default value is the current working folder.\n\nTo learn more about distributed snippets creation, see  [CALL SNIPPETS](../../Searching/Highlighting.md).\n\n## Distributed percolate tables (DPQ tables)\n\nYou can create a distributed table from multiple [percolate](../../Creating_a_table/Local_tables/Percolate_table.md) tables. The syntax for constructing this type of table is the same as for other distributed tables, and can include multiple`local` tables as well as `agents`.\n\nFor DPQ, the operations of listing stored queries and searching through them (using [CALL PQ](../../Searching/Percolate_query.md#Performing-a-percolate-query-with-CALL-PQ)) are transparent and work as if all the tables were one single local table. However, data manipulation statements such as `insert`, `replace`, `truncate` are not available.\n\nIf you include a non-percolate table in the list of agents, the behavior will be undefined. If the incorrect agent has the same schema as the outer schema of the PQ table (id, query, tags, filters), it will not trigger an error when listing stored PQ rules, and may pollute the list of actual PQ rules stored in PQ tables with its own non-PQ strings. As a result, be cautious and aware of the confusion that this may cause. A`CALL PQ` to such an incorrect agent will trigger an error.\n\nFor more information on making queries to a distributed percolate table, see [making queries to a distribute percolate table](../../Searching/Percolate_query.md#Performing-a-percolate-query-with-CALL-PQ).\n<!-- proofread -->\n\n",
        "translations": {
            "chinese": "`listen_tfo` \u9009\u9879\u5141\u8bb8\u5bf9\u6240\u6709\u76d1\u542c\u5668\u4f7f\u7528 TCP_FASTOPEN \u6807\u5fd7\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u9009\u9879\u7531\u7cfb\u7edf\u7ba1\u7406\uff0c\u4f46\u53ef\u4ee5\u901a\u8fc7\u5c06\u5176\u8bbe\u7f6e\u4e3a '0' \u663e\u5f0f\u5173\u95ed\u3002\n\n\u6709\u5173 TCP Fast Open \u6269\u5c55\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 [Wikipedia](https://en.wikipedia.org/wiki/TCP_Fast_Open)\u3002\u7b80\u800c\u8a00\u4e4b\uff0c\u5b83\u5141\u8bb8\u5728\u5efa\u7acb\u8fde\u63a5\u65f6\u6d88\u9664\u4e00\u6b21 TCP \u5f80\u8fd4\u3002\n\n\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u4f7f\u7528 TFO \u53ef\u4ee5\u4f18\u5316\u5ba2\u6237\u7aef\u4e0e\u4ee3\u7406\u4e4b\u95f4\u7684\u7f51\u7edc\u6548\u7387\uff0c\u7c7b\u4f3c\u4e8e\u4f7f\u7528 `agent_persistent` \u65f6\uff0c\u4f46\u65e0\u9700\u4fdd\u6301\u6d3b\u52a8\u8fde\u63a5\uff0c\u4e5f\u6ca1\u6709\u6700\u5927\u8fde\u63a5\u6570\u7684\u9650\u5236\u3002\n\n\u5927\u591a\u6570\u73b0\u4ee3\u64cd\u4f5c\u7cfb\u7edf\u90fd\u652f\u6301 TFO\u3002Linux\uff08\u4f5c\u4e3a\u8f83\u4e3a\u5148\u8fdb\u7684\u7cfb\u7edf\u4e4b\u4e00\uff09\u81ea 2011 \u5e74\u8d77\u652f\u6301\u5b83\uff0c\u5185\u6838\u7248\u672c\u4ece 3.7 \u5f00\u59cb\u652f\u6301\uff08\u670d\u52a1\u5668\u7aef\uff09\u3002Windows \u81ea Windows 10 \u7684\u67d0\u4e9b\u7248\u672c\u5f00\u59cb\u652f\u6301\u8be5\u529f\u80fd\u3002\u5176\u4ed6\u7cfb\u7edf\uff0c\u5982 FreeBSD \u548c MacOS\uff0c\u4e5f\u5728\u652f\u6301\u8303\u56f4\u5185\u3002\n\n\u5bf9\u4e8e Linux \u7cfb\u7edf\uff0c\u670d\u52a1\u5668\u4f1a\u68c0\u67e5\u53d8\u91cf `/proc/sys/net/ipv4/tcp_fastopen` \u5e76\u636e\u6b64\u884c\u4e3a\u3002\u4f4d 0 \u7ba1\u7406\u5ba2\u6237\u7aef\uff0c\u4f4d 1 \u7ba1\u7406\u76d1\u542c\u5668\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u7cfb\u7edf\u5c06\u6b64\u53c2\u6570\u8bbe\u7f6e\u4e3a 1\uff0c\u5373\u5ba2\u6237\u7aef\u542f\u7528\uff0c\u76d1\u542c\u5668\u7981\u7528\u3002\n\n### persistent_connections_limit\n\nCODE_BLOCK_13\n\n`persistent_connections_limit` \u9009\u9879\u5b9a\u4e49\u4e86\u4e0e\u8fdc\u7a0b\u6301\u4e45\u4ee3\u7406\u7684\u6700\u5927\u540c\u65f6\u6301\u4e45\u8fde\u63a5\u6570\u3002\u8fd9\u662f\u4e00\u4e2a\u5b9e\u4f8b\u7ea7\u522b\u7684\u8bbe\u7f6e\uff0c\u5fc5\u987b\u5728 searchd \u914d\u7f6e\u90e8\u5206\u4e2d\u5b9a\u4e49\u3002\u6bcf\u5f53\u8fde\u63a5\u5230\u5728 `agent_persistent` \u4e0b\u5b9a\u4e49\u7684\u4ee3\u7406\u65f6\uff0c\u6211\u4eec\u4f1a\u5c1d\u8bd5\u91cd\u7528\u73b0\u6709\u8fde\u63a5\uff08\u5982\u679c\u5b58\u5728\uff09\uff0c\u6216\u521b\u5efa\u65b0\u8fde\u63a5\u5e76\u4fdd\u5b58\u4ee5\u4fbf\u5c06\u6765\u4f7f\u7528\u3002\u7136\u800c\uff0c\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u53ef\u80fd\u9700\u8981\u9650\u5236\u6301\u4e45\u8fde\u63a5\u7684\u6570\u91cf\u3002\u8be5\u6307\u4ee4\u5b9a\u4e49\u4e86\u9650\u5236\uff0c\u5e76\u5f71\u54cd\u6240\u6709\u5206\u5e03\u5f0f\u8868\u4e2d\u6bcf\u4e2a\u4ee3\u7406\u4e3b\u673a\u7684\u8fde\u63a5\u6570\u3002\n\n\u5efa\u8bae\u5c06\u6b64\u503c\u8bbe\u7f6e\u4e3a\u4e0d\u5927\u4e8e\u4ee3\u7406\u914d\u7f6e\u4e2d\u7684 [max_connections](../../Server_settings/Searchd.md#max_connections) \u9009\u9879\u3002\n\n## \u5206\u5e03\u5f0f\u7247\u6bb5\u521b\u5efa\n\n\u5206\u5e03\u5f0f\u8868\u7684\u4e00\u4e2a\u7279\u6b8a\u60c5\u51b5\u662f\u4e00\u5f20\u672c\u5730\u8868\u548c\u591a\u5f20\u8fdc\u7a0b\u8868\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e13\u95e8\u7528\u4e8e [\u5206\u5e03\u5f0f\u7247\u6bb5\u521b\u5efa](../../Creating_a_table/Creating_a_distributed_table/Remote_tables.md#Distributed-snippets-creation)\uff0c\u5f53\u7247\u6bb5\u6e90\u81ea\u6587\u4ef6\u65f6\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u672c\u5730\u8868\u53ef\u4f5c\u4e3a\u201c\u6a21\u677f\u201d\u8868\uff0c\u63d0\u4f9b\u6784\u5efa\u7247\u6bb5\u65f6\u7684\u5206\u8bcd\u8bbe\u7f6e\u3002\n\n### snippets_file_prefix\n\nCODE_BLOCK_14\n\n`snippets_file_prefix` \u662f\u4e00\u4e2a\u53ef\u9009\u7684\u524d\u7f00\uff0c\u53ef\u4ee5\u5728\u751f\u6210\u7247\u6bb5\u65f6\u6dfb\u52a0\u5230\u672c\u5730\u6587\u4ef6\u540d\u3002\u9ed8\u8ba4\u503c\u4e3a\u5f53\u524d\u5de5\u4f5c\u6587\u4ef6\u5939\u3002\n\n\u5982\u9700\u4e86\u89e3\u66f4\u591a\u5173\u4e8e\u5206\u5e03\u5f0f\u7247\u6bb5\u521b\u5efa\u7684\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 [CALL SNIPPETS](../../Searching/Highlighting.md)\u3002\n\n## \u5206\u5e03\u5f0f\u9884\u67e5\u8be2\u8868\uff08DPQ \u8868\uff09\n\n\u60a8\u53ef\u4ee5\u4ece\u591a\u4e2a [percolate](../../Creating_a_table/Local_tables/Percolate_table.md) \u8868\u521b\u5efa\u4e00\u4e2a\u5206\u5e03\u5f0f\u8868\u3002\u6784\u9020\u6b64\u7c7b\u8868\u7684\u8bed\u6cd5\u4e0e\u5176\u4ed6\u5206\u5e03\u5f0f\u8868\u76f8\u540c\uff0c\u53ef\u4ee5\u5305\u542b\u591a\u4e2a `local` \u8868\u4ee5\u53ca `agents`\u3002\n\n\u5bf9\u4e8e DPQ\uff0c\u5217\u51fa\u5b58\u50a8\u67e5\u8be2\u548c\u901a\u8fc7\u5b83\u4eec\u641c\u7d22\uff08\u4f7f\u7528 [CALL PQ](../../Searching/Percolate_query.md#Performing-a-percolate-query-with-CALL-PQ)\uff09\u64cd\u4f5c\u662f\u900f\u660e\u7684\uff0c\u4e14\u8868\u73b0\u5f97\u5982\u540c\u6240\u6709\u8868\u5408\u5e76\u6210\u4e00\u4e2a\u672c\u5730\u8868\u3002\u7136\u800c\uff0c\u8bf8\u5982 `insert`\u3001`replace`\u3001`truncate` \u4e4b\u7c7b\u7684\u6570\u636e\u64cd\u4f5c\u8bed\u53e5\u4e0d\u53ef\u7528\u3002\n\n\u5982\u679c\u60a8\u5728\u4ee3\u7406\u5217\u8868\u4e2d\u5305\u542b\u4e86\u975e\u9884\u67e5\u8be2\u8868\uff0c\u5176\u884c\u4e3a\u5c06\u65e0\u6cd5\u5b9a\u4e49\u3002\u5982\u679c\u9519\u8bef\u4ee3\u7406\u4e0e PQ \u8868\u7684\u5916\u5c42\u67b6\u6784\uff08id\u3001query\u3001tags\u3001filters\uff09\u76f8\u540c\uff0c\u5728\u5217\u51fa\u5b58\u50a8\u7684 PQ \u89c4\u5219\u65f6\u4e0d\u4f1a\u5f15\u53d1\u9519\u8bef\uff0c\u5e76\u4e14\u53ef\u80fd\u4f1a\u7528\u5176\u975e PQ \u5b57\u7b26\u4e32\u6c61\u67d3 PQ \u8868\u4e2d\u5b9e\u9645\u5b58\u50a8\u7684 PQ \u89c4\u5219\u5217\u8868\u3002\u56e0\u6b64\uff0c\u52a1\u5fc5\u8c28\u614e\uff0c\u5e76\u610f\u8bc6\u5230\u8fd9\u53ef\u80fd\u5e26\u6765\u7684\u6df7\u6dc6\u3002\u5bf9\u8be5\u9519\u8bef\u4ee3\u7406\u6267\u884c `CALL PQ` \u5c06\u5f15\u53d1\u9519\u8bef\u3002\n\n\u6709\u5173\u5bf9\u5206\u5e03\u5f0f\u9884\u67e5\u8be2\u8868\u8fdb\u884c\u67e5\u8be2\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 [\u5bf9\u5206\u5e03\u5f0f\u9884\u67e5\u8be2\u8868\u8fdb\u884c\u67e5\u8be2](../../Searching/Percolate_query.md#Performing-a-percolate-query-with-CALL-PQ)\u3002\n<!-- proofread -->",
            "russian": "\u041e\u043f\u0446\u0438\u044f `listen_tfo` \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0444\u043b\u0430\u0433 TCP_FASTOPEN \u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u0441\u043b\u0443\u0448\u0430\u0442\u0435\u043b\u0435\u0439. \u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u043e\u043d\u0430 \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u043e\u0439, \u043d\u043e \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u044f\u0432\u043d\u043e \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u0430, \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0432 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 '0'.\n\n\u0414\u043b\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0438 TCP Fast Open, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u043a [Wikipedia](https://en.wikipedia.org/wiki/TCP_Fast_Open). \u041a\u0440\u0430\u0442\u043a\u043e, \u043e\u043d\u043e \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0438\u0441\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043e\u0434\u0438\u043d \u043a\u0440\u0443\u0433 \u043e\u0431\u043c\u0435\u043d\u0430 TCP \u043f\u0440\u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f.\n\n\u041d\u0430 \u043f\u0440\u0430\u043a\u0442\u0438\u043a\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 TFO \u043c\u043e\u0436\u0435\u0442 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0435\u0442\u0435\u0432\u0443\u044e \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442-\u0430\u0433\u0435\u043d\u0442\u0430, \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044e `agent_persistent`, \u043d\u043e \u0431\u0435\u0437 \u0443\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u044f \u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0445 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439 \u0438 \u0431\u0435\u0437 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0439 \u043d\u0430 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439.\n\n\u0411\u043e\u043b\u044c\u0448\u0438\u043d\u0441\u0442\u0432\u043e \u0441\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0441\u0438\u0441\u0442\u0435\u043c \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442 TFO. Linux (\u043a\u0430\u043a \u043e\u0434\u043d\u0430 \u0438\u0437 \u0441\u0430\u043c\u044b\u0445 \u043f\u0440\u043e\u0433\u0440\u0435\u0441\u0441\u0438\u0432\u043d\u044b\u0445) \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0435\u0433\u043e \u0441 2011 \u0433\u043e\u0434\u0430, \u043d\u0430\u0447\u0438\u043d\u0430\u044f \u0441 \u044f\u0434\u0440\u0430 3.7 (\u0434\u043b\u044f \u0441\u0435\u0440\u0432\u0435\u0440\u043d\u043e\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u044b). Windows \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0435\u0433\u043e \u0441 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0441\u0431\u043e\u0440\u043e\u043a Windows 10. \u0414\u0440\u0443\u0433\u0438\u0435 \u0441\u0438\u0441\u0442\u0435\u043c\u044b, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a FreeBSD \u0438 MacOS, \u0442\u0430\u043a\u0436\u0435 \u0443\u0447\u0430\u0441\u0442\u0432\u0443\u044e\u0442.\n\n\u0414\u043b\u044f \u0441\u0438\u0441\u0442\u0435\u043c Linux \u0441\u0435\u0440\u0432\u0435\u0440 \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e `/proc/sys/net/ipv4/tcp_fastopen` \u0438 \u0434\u0435\u0439\u0441\u0442\u0432\u0443\u0435\u0442 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e. \u0411\u0438\u0442 0 \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u043a\u043b\u0438\u0435\u043d\u0442\u0441\u043a\u043e\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u043e\u0439, \u0430 \u0431\u0438\u0442 1 \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u0441\u043b\u0443\u0448\u0430\u0442\u0435\u043b\u044f\u043c\u0438. \u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u0438\u043c\u0435\u0435\u0442 \u044d\u0442\u043e\u0442 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440, \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u0439 \u0432 1, \u0442\u043e \u0435\u0441\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u044b \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u044b, \u0430 \u0441\u043b\u0443\u0448\u0430\u0442\u0435\u043b\u0438 \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u044b.\n\n### persistent_connections_limit\n\nCODE_BLOCK_13\n\n\u041e\u043f\u0446\u0438\u044f `persistent_connections_limit` \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u044b\u0445 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439 \u0441 \u0443\u0434\u0430\u043b\u0451\u043d\u043d\u044b\u043c\u0438 \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u044b\u043c\u0438 \u0430\u0433\u0435\u043d\u0442\u0430\u043c\u0438. \u042d\u0442\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043d\u0430 \u0443\u0440\u043e\u0432\u043d\u0435 \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u0430 \u0438 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0430 \u0432 \u0441\u0435\u043a\u0446\u0438\u0438 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 searchd. \u041a\u0430\u0436\u0434\u044b\u0439 \u0440\u0430\u0437 \u043f\u0440\u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0441 \u0430\u0433\u0435\u043d\u0442\u043e\u043c, \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u044b\u043c \u0432 `agent_persistent`, \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \u043f\u043e\u043f\u044b\u0442\u043a\u0430 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 (\u0435\u0441\u043b\u0438 \u043e\u043d\u043e \u0435\u0441\u0442\u044c) \u0438\u043b\u0438 \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u043e\u0435 \u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0435\u0433\u043e \u0434\u043b\u044f \u0431\u0443\u0434\u0443\u0449\u0435\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f. \u041e\u0434\u043d\u0430\u043a\u043e \u0432 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0441\u043b\u0443\u0447\u0430\u044f\u0445 \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u0442\u0440\u0435\u0431\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0438\u0442\u044c \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u044b\u0445 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439. \u042d\u0442\u0430 \u0434\u0438\u0440\u0435\u043a\u0442\u0438\u0432\u0430 \u0437\u0430\u0434\u0430\u0451\u0442 \u043b\u0438\u043c\u0438\u0442 \u0438 \u0432\u043b\u0438\u044f\u0435\u0442 \u043d\u0430 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439 \u0441 \u043a\u0430\u0436\u0434\u044b\u043c \u0445\u043e\u0441\u0442\u043e\u043c \u0430\u0433\u0435\u043d\u0442\u0430 \u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u044b\u0445 \u0442\u0430\u0431\u043b\u0438\u0446.\n\n\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u044d\u0442\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0440\u0430\u0432\u043d\u044b\u043c \u0438\u043b\u0438 \u043c\u0435\u043d\u044c\u0448\u0438\u043c, \u0447\u0435\u043c \u043e\u043f\u0446\u0438\u044f [max_connections](../../Server_settings/Searchd.md#max_connections) \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u0430\u0433\u0435\u043d\u0442\u0430.\n\n## \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u044b\u0445 \u0441\u043d\u0438\u043f\u043f\u0435\u0442\u043e\u0432\n\n\u041e\u0441\u043e\u0431\u044b\u0439 \u0441\u043b\u0443\u0447\u0430\u0439 \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u2014 \u043e\u0434\u043d\u0430 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u0430\u044f \u0438 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0443\u0434\u0430\u043b\u0451\u043d\u043d\u044b\u0445, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0438\u0441\u043a\u043b\u044e\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f [\u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u044b\u0445 \u0441\u043d\u0438\u043f\u043f\u0435\u0442\u043e\u0432](../../Creating_a_table/Creating_a_distributed_table/Remote_tables.md#Distributed-snippets-creation), \u043a\u043e\u0433\u0434\u0430 \u0441\u043d\u0438\u043f\u043f\u0435\u0442\u044b \u0431\u0435\u0440\u0443\u0442\u0441\u044f \u0438\u0437 \u0444\u0430\u0439\u043b\u043e\u0432. \u0412 \u044d\u0442\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u043c\u043e\u0436\u0435\u0442 \u0432\u044b\u0441\u0442\u0443\u043f\u0430\u0442\u044c \u0432 \u0440\u043e\u043b\u0438 \"\u0448\u0430\u0431\u043b\u043e\u043d\u043d\u043e\u0439\" \u0442\u0430\u0431\u043b\u0438\u0446\u044b, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0434\u043b\u044f \u0442\u043e\u043a\u0435\u043d\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u0440\u0438 \u043f\u043e\u0441\u0442\u0440\u043e\u0435\u043d\u0438\u0438 \u0441\u043d\u0438\u043f\u043f\u0435\u0442\u043e\u0432.\n\n### snippets_file_prefix\n\nCODE_BLOCK_14\n\n\u041e\u043f\u0446\u0438\u044f `snippets_file_prefix` \u2014 \u044d\u0442\u043e \u043d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u043f\u0440\u0435\u0444\u0438\u043a\u0441, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043c\u043e\u0436\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a \u0438\u043c\u0435\u043d\u0430\u043c \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0445 \u0444\u0430\u0439\u043b\u043e\u0432 \u043f\u0440\u0438 \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 \u0441\u043d\u0438\u043f\u043f\u0435\u0442\u043e\u0432. \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u2014 \u0442\u0435\u043a\u0443\u0449\u0430\u044f \u0440\u0430\u0431\u043e\u0447\u0430\u044f \u043f\u0430\u043f\u043a\u0430.\n\n\u0427\u0442\u043e\u0431\u044b \u0443\u0437\u043d\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u044b\u0445 \u0441\u043d\u0438\u043f\u043f\u0435\u0442\u043e\u0432, \u0441\u043c\u043e\u0442\u0440\u0438\u0442\u0435 [CALL SNIPPETS](../../Searching/Highlighting.md).\n\n## \u0420\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u044b\u0435 \u043f\u0435\u0440\u043a\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b (DPQ \u0442\u0430\u0431\u043b\u0438\u0446\u044b)\n\n\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u0443\u044e \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u0438\u0437 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 [\u043f\u0435\u0440\u043a\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u044b\u0445](../../Creating_a_table/Local_tables/Percolate_table.md) \u0442\u0430\u0431\u043b\u0438\u0446. \u0421\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441 \u043f\u043e\u0441\u0442\u0440\u043e\u0435\u043d\u0438\u044f \u0442\u0430\u043a\u043e\u0433\u043e \u0442\u0438\u043f\u0430 \u0442\u0430\u0431\u043b\u0438\u0446 \u0442\u0430\u043a\u043e\u0439 \u0436\u0435, \u043a\u0430\u043a \u0438 \u0434\u043b\u044f \u0434\u0440\u0443\u0433\u0438\u0445 \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u044b\u0445 \u0442\u0430\u0431\u043b\u0438\u0446, \u0438 \u043c\u043e\u0436\u0435\u0442 \u0432\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e `local` \u0442\u0430\u0431\u043b\u0438\u0446, \u0430 \u0442\u0430\u043a\u0436\u0435 `agents`.\n\n\u0414\u043b\u044f DPQ \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0445 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0438 \u043f\u043e\u0438\u0441\u043a\u0430 \u043f\u043e \u043d\u0438\u043c (\u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c [CALL PQ](../../Searching/Percolate_query.md#Performing-a-percolate-query-with-CALL-PQ)) \u043f\u0440\u043e\u0437\u0440\u0430\u0447\u043d\u044b \u0438 \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0442 \u0442\u0430\u043a, \u043a\u0430\u043a \u0435\u0441\u043b\u0438 \u0431\u044b \u0432\u0441\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0431\u044b\u043b\u0438 \u043e\u0434\u043d\u043e\u0439 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435\u0439. \u041e\u0434\u043d\u0430\u043a\u043e \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043c\u0430\u043d\u0438\u043f\u0443\u043b\u044f\u0446\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u043c\u0438, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a `insert`, `replace`, `truncate`, \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442.\n\n\u0415\u0441\u043b\u0438 \u0432 \u0441\u043f\u0438\u0441\u043e\u043a \u0430\u0433\u0435\u043d\u0442\u043e\u0432 \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043d\u0435 \u043f\u0435\u0440\u043a\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0430\u0431\u043b\u0438\u0446\u0443, \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u0431\u0443\u0434\u0435\u0442 \u043d\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u044b\u043c. \u0415\u0441\u043b\u0438 \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0430\u0433\u0435\u043d\u0442 \u0438\u043c\u0435\u0435\u0442 \u0442\u0443 \u0436\u0435 \u0441\u0445\u0435\u043c\u0443, \u0447\u0442\u043e \u0438 \u0432\u043d\u0435\u0448\u043d\u044f\u044f \u0441\u0445\u0435\u043c\u0430 PQ \u0442\u0430\u0431\u043b\u0438\u0446\u044b (id, query, tags, filters), \u044d\u0442\u043e \u043d\u0435 \u0432\u044b\u0437\u043e\u0432\u0435\u0442 \u043e\u0448\u0438\u0431\u043a\u0443 \u043f\u0440\u0438 \u043f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0445 \u043f\u0440\u0430\u0432\u0438\u043b PQ \u0438 \u043c\u043e\u0436\u0435\u0442 \u0437\u0430\u0441\u043e\u0440\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0444\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u043f\u0440\u0430\u0432\u0438\u043b PQ, \u0445\u0440\u0430\u043d\u044f\u0449\u0438\u0445\u0441\u044f \u0432 PQ \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u0445, \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u043c\u0438 \u043d\u0435-PQ \u0441\u0442\u0440\u043e\u043a\u0430\u043c\u0438. \u0412 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0435 \u0431\u0443\u0434\u044c\u0442\u0435 \u043e\u0441\u0442\u043e\u0440\u043e\u0436\u043d\u044b \u0438 \u043f\u043e\u043d\u0438\u043c\u0430\u0435\u0442\u0435 \u043f\u0443\u0442\u0430\u043d\u0438\u0446\u0443, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u044d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0432\u044b\u0437\u0432\u0430\u0442\u044c. \u0412\u044b\u0437\u043e\u0432 `CALL PQ` \u043a \u0442\u0430\u043a\u043e\u043c\u0443 \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u043c\u0443 \u0430\u0433\u0435\u043d\u0442\u0443 \u0432\u044b\u0437\u043e\u0432\u0435\u0442 \u043e\u0448\u0438\u0431\u043a\u0443.\n\n\u0414\u043b\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u043a \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u043e\u0439 \u043f\u0435\u0440\u043a\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 \u0441\u043c\u043e\u0442\u0440\u0438\u0442\u0435 [\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u043a \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u043e\u0439 \u043f\u0435\u0440\u043a\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435](../../Searching/Percolate_query.md#Performing-a-percolate-query-with-CALL-PQ).\n<!-- proofread -->"
        },
        "is_code_or_comment": false,
        "model": "openai:gpt-4.1-mini",
        "updated_at": 1766369454
    },
    "494be1f63d433cbdf17e81194af606f36bd8e3e688fef4b5a1c80e753b2b50ed": {
        "original": "Using persistent master-agent connections reduces TCP port pressure and saves time on connection handshakes, making it more efficient.\n\n## agent_blackhole\n\nCODE_BLOCK_9\n\nThe `agent_blackhole` directive allows you to forward queries to remote agents without waiting for or processing their responses. This is useful for debugging or testing production clusters, as you can set up a separate debugging/testing instance and forward requests to it from the production master (aggregator) instance, without interfering with production work. The master searchd will attempt to connect to the blackhole agent and send queries as normal, but will not wait for or process any responses, and all network errors on the blackhole agents will be ignored. The format of the value is identical to that of the regular `agent` directive.\n\n## agent_connect_timeout\n\nCODE_BLOCK_10\n\nThe `agent_connect_timeout` directive defines the timeout for connecting to remote agents. By default, the value is assumed to be in milliseconds, but can have [another suffix](../../Server_settings/Special_suffixes.md)). The default value is 1000 (1 second).\n\nWhen connecting to remote agents, `searchd` will wait for this amount of time at most to complete the connection successfully. If the timeout is reached but the connection has not been established, and `retries` are enabled, a retry will be initiated.\n\n## agent_query_timeout\n\nCODE_BLOCK_11\n\nThe `agent_query_timeout` sets the amount of time that searchd will wait for a remote agent to complete a query. The default value is 3000 milliseconds (3 seconds), but can be `suffixed` to indicate a different unit of time.\n\nAfter establishing a connection, `searchd` will wait for a maximum of agent_query_timeout for remote queries to complete. Note that this timeout is separate from the `agent_connection_timeout` and the total possible delay caused by a remote agent will be the sum of both values. If the agent_query_timeout is reached, the query will **not** be retried, instead, a warning will be produced.\n\nNote that behavior is also affected by [reset_network_timeout_on_packet](../../Server_settings/Searchd.md#reset_network_timeout_on_packet)\n\n## agent_retry_count\n\nThe `agent_retry_count` is an integer that specifies how many times Manticore will attempt to connect and query remote agents in a distributed table before reporting a fatal query error. It works similarly to `agent_retry_count` defined in the \"searchd\" section of the configuration file but applies specifically to the table.\n\n## mirror_retry_count\n\n`mirror_retry_count` serves the same purpose as `agent_retry_count`.  If both values are provided, `mirror_retry_count` will take precedence, and a warning will be raised.\n\n## Instance-wide options\n\nThe following options manage the overall behavior of remote agents and are specified in **the searchd section of the configuration file**. They set default values for the entire Manticore instance.\n\n* `agent_connect_timeout` - default value for the `agent_connect_timeout` parameter.\n* `agent_query_timeout` - default value for the `agent_query_timeout` parameter. This can also be overridden on a per-query basis using the same setting name in a distributed (network) table.\n* `agent_retry_count` is an integer that specifies the number of times Manticore will attempt to connect and query remote agents in a distributed table before reporting a fatal query error. The default value is 0 (i.e.\u00a0no retries). This value can also be specified on a per-query basis using the 'OPTION retry_count=XXX' clause. If a per-query option is provided, it will take precedence over the value specified in the config.\n\nNote, that if you use **agent mirrors** in the definition of your distributed table, the server will select a different mirror before each connection attempt according to the specified [ha_strategy](../../Creating_a_cluster/Remote_nodes/Load_balancing.md#ha_strategy) specified. In this case the [agent_retry_count](../../Creating_a_table/Creating_a_distributed_table/Remote_tables.md#agent_retry_count) will be aggregated for all mirrors in the set.\n\nFor example, if you have 10 mirrors and set `agent_retry_count=5`, he server will attempt up to 50 retries (assuming an average of 5 tries per every 10 mirrors). In case of the option `ha_strategy = roundrobin`, it will actually be exactly 5 tries per mirror.\n\nAt the same time, the value provided as the [retry_count](../../Searching/Options.md#retry_count) option in the `agent` definition serves as an absolute limit. In other words, the `[retry_count=2]` option in the agent definition means there will be a maximum of 2 tries, regardless of whether there is 1 or 10 mirrors in the line.\n\n### agent_retry_delay\n\nThe `agent_retry_delay` is an integer value that determines the amount of time, in milliseconds, that Manticore Search will wait before retrying to query a remote agent in case of a failure. This value can be specified either globally in the searchd configuration or on a per-query basis using the `OPTION retry_delay=XXX` clause. If both options are provided, the per-query option will take precedence over the global one. The default value is 500 milliseconds (0.5 seconds). This option is only relevant if agent_retry_count or the per-query `OPTION retry_count` are non-zero.\n\n### client_timeout\n\nThe `client_timeout` option sets the maximum waiting time between requests when using persistent connections. This value is expressed in seconds or with a time suffix. The default value is 5 minutes.\n\nExample:\n\nCODE_BLOCK_12\n\n### hostname_lookup\n\nThe `hostname_lookup` option defines the strategy for renewing hostnames. By default, the IP addresses of agent host names are cached at server start to avoid excessive access to DNS. However, in some cases, the IP can change dynamically (e.g.\u00a0cloud hosting) and it may be desirable to not cache the IPs. Setting this option to `request` disables the caching and queries the DNS for each query. The IP addresses can also be manually renewed using the `FLUSH HOSTNAMES` command.\n\n### listen_tfo",
        "translations": {
            "chinese": "\u4f7f\u7528\u6301\u4e45\u4e3b\u4ece\u4ee3\u7406\u8fde\u63a5\u53ef\u4ee5\u51cf\u5c11 TCP \u7aef\u53e3\u538b\u529b\uff0c\u8282\u7701\u8fde\u63a5\u63e1\u624b\u65f6\u95f4\uff0c\u4ece\u800c\u63d0\u9ad8\u6548\u7387\u3002\n\n## agent_blackhole\n\nCODE_BLOCK_9\n\n`agent_blackhole` \u6307\u4ee4\u5141\u8bb8\u4f60\u5c06\u67e5\u8be2\u8f6c\u53d1\u5230\u8fdc\u7a0b\u4ee3\u7406\uff0c\u800c\u65e0\u9700\u7b49\u5f85\u6216\u5904\u7406\u5b83\u4eec\u7684\u54cd\u5e94\u3002\u8fd9\u5bf9\u4e8e\u8c03\u8bd5\u6216\u6d4b\u8bd5\u751f\u4ea7\u96c6\u7fa4\u975e\u5e38\u6709\u7528\uff0c\u56e0\u4e3a\u4f60\u53ef\u4ee5\u8bbe\u7f6e\u4e00\u4e2a\u5355\u72ec\u7684\u8c03\u8bd5/\u6d4b\u8bd5\u5b9e\u4f8b\uff0c\u5e76\u4ece\u751f\u4ea7\u4e3b\u670d\u52a1\u5668\uff08\u805a\u5408\u5668\uff09\u5b9e\u4f8b\u8f6c\u53d1\u8bf7\u6c42\u5230\u8be5\u5b9e\u4f8b\uff0c\u800c\u4e0d\u5e72\u6270\u751f\u4ea7\u5de5\u4f5c\u3002\u4e3b searchd \u5c06\u5c1d\u8bd5\u8fde\u63a5\u5230\u9ed1\u6d1e\u4ee3\u7406\u5e76\u50cf\u5f80\u5e38\u4e00\u6837\u53d1\u9001\u67e5\u8be2\uff0c\u4f46\u4e0d\u4f1a\u7b49\u5f85\u6216\u5904\u7406\u4efb\u4f55\u54cd\u5e94\uff0c\u6240\u6709\u9ed1\u6d1e\u4ee3\u7406\u7684\u7f51\u7edc\u9519\u8bef\u5c06\u88ab\u5ffd\u7565\u3002\u8be5\u503c\u7684\u683c\u5f0f\u4e0e\u5e38\u89c4\u7684 `agent` \u6307\u4ee4\u76f8\u540c\u3002\n\n## agent_connect_timeout\n\nCODE_BLOCK_10\n\n`agent_connect_timeout` \u6307\u4ee4\u5b9a\u4e49\u4e86\u8fde\u63a5\u8fdc\u7a0b\u4ee3\u7406\u7684\u8d85\u65f6\u65f6\u95f4\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u503c\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff0c\u4f46\u53ef\u4ee5\u6709[\u5176\u4ed6\u540e\u7f00](../../Server_settings/Special_suffixes.md))\u3002\u9ed8\u8ba4\u503c\u4e3a 1000\uff081 \u79d2\uff09\u3002\n\n\u8fde\u63a5\u8fdc\u7a0b\u4ee3\u7406\u65f6\uff0c`searchd` \u6700\u591a\u7b49\u5f85\u6b64\u65f6\u95f4\u4ee5\u6210\u529f\u5b8c\u6210\u8fde\u63a5\u3002\u5982\u679c\u8d85\u65f6\u5230\u8fbe\u4f46\u8fde\u63a5\u672a\u5efa\u7acb\uff0c\u5e76\u4e14\u542f\u7528\u4e86 `retries`\uff0c\u5219\u4f1a\u8fdb\u884c\u91cd\u8bd5\u3002\n\n## agent_query_timeout\n\nCODE_BLOCK_11\n\n`agent_query_timeout` \u8bbe\u7f6e searchd \u7b49\u5f85\u8fdc\u7a0b\u4ee3\u7406\u5b8c\u6210\u67e5\u8be2\u7684\u65f6\u95f4\u3002\u9ed8\u8ba4\u503c\u4e3a 3000 \u6beb\u79d2\uff083 \u79d2\uff09\uff0c\u4f46\u53ef\u4ee5\u901a\u8fc7\u6dfb\u52a0\u540e\u7f00\u6307\u793a\u4e0d\u540c\u65f6\u95f4\u5355\u4f4d\u3002\n\n\u5efa\u7acb\u8fde\u63a5\u540e\uff0c`searchd` \u5c06\u7b49\u5f85\u6700\u591a agent_query_timeout \u65f6\u95f4\u6765\u5b8c\u6210\u8fdc\u7a0b\u67e5\u8be2\u3002\u8bf7\u6ce8\u610f\uff0c\u6b64\u8d85\u65f6\u4e0e `agent_connection_timeout` \u662f\u72ec\u7acb\u7684\uff0c\u8fdc\u7a0b\u4ee3\u7406\u53ef\u80fd\u5bfc\u81f4\u7684\u5ef6\u8fdf\u603b\u548c\u4e3a\u4e24\u8005\u4e4b\u548c\u3002\u5982\u679c\u8fbe\u5230 agent_query_timeout\uff0c\u67e5\u8be2\u5c06**\u4e0d\u4f1a**\u91cd\u8bd5\uff0c\u800c\u662f\u4ea7\u751f\u8b66\u544a\u3002\n\n\u8bf7\u6ce8\u610f\uff0c\u884c\u4e3a\u8fd8\u53d7\u5230[reset_network_timeout_on_packet](../../Server_settings/Searchd.md#reset_network_timeout_on_packet)\u7684\u5f71\u54cd\u3002\n\n## agent_retry_count\n\n`agent_retry_count` \u662f\u4e00\u4e2a\u6574\u6570\uff0c\u6307\u5b9a Manticore \u5728\u62a5\u544a\u81f4\u547d\u67e5\u8be2\u9519\u8bef\u4e4b\u524d\uff0c\u5c06\u5c1d\u8bd5\u8fde\u63a5\u548c\u67e5\u8be2\u5206\u5e03\u5f0f\u8868\u4e2d\u7684\u8fdc\u7a0b\u4ee3\u7406\u7684\u6b21\u6570\u3002\u5b83\u7684\u5de5\u4f5c\u65b9\u5f0f\u7c7b\u4f3c\u4e8e\u914d\u7f6e\u6587\u4ef6\u4e2d \u201csearchd\u201d \u90e8\u5206\u5b9a\u4e49\u7684 `agent_retry_count`\uff0c\u4f46\u4e13\u95e8\u5e94\u7528\u4e8e\u8be5\u8868\u3002\n\n## mirror_retry_count\n\n`mirror_retry_count` \u7684\u4f5c\u7528\u4e0e `agent_retry_count` \u76f8\u540c\u3002\u5982\u679c\u4e24\u4e2a\u503c\u90fd\u63d0\u4f9b\uff0c`mirror_retry_count` \u4f18\u5148\uff0c\u5e76\u4e14\u4f1a\u53d1\u51fa\u8b66\u544a\u3002\n\n## \u5b9e\u4f8b\u8303\u56f4\u9009\u9879\n\n\u4ee5\u4e0b\u9009\u9879\u7ba1\u7406\u8fdc\u7a0b\u4ee3\u7406\u7684\u6574\u4f53\u884c\u4e3a\uff0c\u5e76\u5728**\u914d\u7f6e\u6587\u4ef6\u7684 searchd \u90e8\u5206**\u6307\u5b9a\u3002\u5b83\u4eec\u4e3a\u6574\u4e2a Manticore \u5b9e\u4f8b\u8bbe\u7f6e\u9ed8\u8ba4\u503c\u3002\n\n* `agent_connect_timeout` \u2014 `agent_connect_timeout` \u53c2\u6570\u7684\u9ed8\u8ba4\u503c\u3002\n* `agent_query_timeout` \u2014 `agent_query_timeout` \u53c2\u6570\u7684\u9ed8\u8ba4\u503c\u3002\u6b64\u503c\u4e5f\u53ef\u4ee5\u5728\u5206\u5e03\u5f0f\uff08\u7f51\u7edc\uff09\u8868\u4e2d\u4f7f\u7528\u76f8\u540c\u8bbe\u7f6e\u540d\u79f0\u6309\u67e5\u8be2\u5355\u72ec\u8986\u76d6\u3002\n* `agent_retry_count` \u662f\u4e00\u4e2a\u6574\u6570\uff0c\u6307\u5b9a Manticore \u5728\u62a5\u544a\u81f4\u547d\u67e5\u8be2\u9519\u8bef\u4e4b\u524d\uff0c\u5c06\u5c1d\u8bd5\u8fde\u63a5\u548c\u67e5\u8be2\u5206\u5e03\u5f0f\u8868\u4e2d\u7684\u8fdc\u7a0b\u4ee3\u7406\u7684\u6b21\u6570\u3002\u9ed8\u8ba4\u503c\u4e3a 0\uff08\u5373\u4e0d\u91cd\u8bd5\uff09\u3002\u6b64\u503c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u67e5\u8be2\u9009\u9879 'OPTION retry_count=XXX' \u5355\u72ec\u6307\u5b9a\u3002\u82e5\u63d0\u4f9b\u4e86\u6b64\u67e5\u8be2\u9009\u9879\uff0c\u5c06\u4f18\u5148\u4e8e\u914d\u7f6e\u4e2d\u7684\u503c\u3002\n\n\u6ce8\u610f\uff0c\u5982\u679c\u4f60\u5728\u5b9a\u4e49\u5206\u5e03\u5f0f\u8868\u65f6\u4f7f\u7528**\u4ee3\u7406\u955c\u50cf**\uff0c\u670d\u52a1\u5668\u5c06\u5728\u6bcf\u6b21\u8fde\u63a5\u5c1d\u8bd5\u4e4b\u524d\u6839\u636e\u6307\u5b9a\u7684[ha_strategy](../../Creating_a_cluster/Remote_nodes/Load_balancing.md#ha_strategy)\u9009\u62e9\u4e0d\u540c\u7684\u955c\u50cf\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c[agent_retry_count](../../Creating_a_table/Creating_a_distributed_table/Remote_tables.md#agent_retry_count) \u5c06\u5bf9\u8be5\u96c6\u5408\u4e2d\u6240\u6709\u955c\u50cf\u8fdb\u884c\u6c47\u603b\u3002\n\n\u4f8b\u5982\uff0c\u5982\u679c\u4f60\u6709 10 \u4e2a\u955c\u50cf\u5e76\u8bbe\u7f6e `agent_retry_count=5`\uff0c\u670d\u52a1\u5668\u6700\u591a\u5c1d\u8bd5 50 \u6b21\u91cd\u8bd5\uff08\u5047\u8bbe\u6bcf 10 \u4e2a\u955c\u50cf\u5e73\u5747\u5c1d\u8bd5 5 \u6b21\uff09\u3002\u5982\u679c\u9009\u62e9 `ha_strategy = roundrobin`\uff0c\u5b9e\u9645\u4e0a\u6bcf\u4e2a\u955c\u50cf\u4f1a\u5c1d\u8bd5 5 \u6b21\u3002\n\n\u4e0e\u6b64\u540c\u65f6\uff0c\u5728 `agent` \u5b9a\u4e49\u4e2d\u4f5c\u4e3a [retry_count](../../Searching/Options.md#retry_count) \u9009\u9879\u63d0\u4f9b\u7684\u503c\u4f5c\u4e3a\u7edd\u5bf9\u9650\u5236\u3002\u6362\u8a00\u4e4b\uff0c\u4ee3\u7406\u5b9a\u4e49\u4e2d\u7684 `[retry_count=2]` \u9009\u9879\u610f\u5473\u7740\u6700\u591a\u4f1a\u5c1d\u8bd5 2 \u6b21\uff0c\u65e0\u8bba\u662f\u5426\u6709 1 \u4e2a\u6216 10 \u4e2a\u955c\u50cf\u3002\n\n### agent_retry_delay\n\n`agent_retry_delay` \u662f\u4e00\u4e2a\u6574\u6570\u503c\uff0c\u8868\u793a Manticore Search \u5728\u8fdc\u7a0b\u4ee3\u7406\u67e5\u8be2\u5931\u8d25\u540e\u7b49\u5f85\u91cd\u8bd5\u7684\u65f6\u95f4\uff08\u6beb\u79d2\uff09\u3002\u53ef\u4ee5\u5728 searchd \u5168\u5c40\u914d\u7f6e\u4e2d\u6307\u5b9a\uff0c\u4e5f\u53ef\u4ee5\u5728\u67e5\u8be2\u4e2d\u901a\u8fc7 `OPTION retry_delay=XXX` \u8bed\u53e5\u5355\u72ec\u6307\u5b9a\u3002\u5982\u679c\u4e24\u8005\u90fd\u5b58\u5728\uff0c\u5219\u67e5\u8be2\u7ea7\u522b\u9009\u9879\u4f18\u5148\u3002\u9ed8\u8ba4\u503c\u4e3a 500 \u6beb\u79d2\uff080.5 \u79d2\uff09\u3002\u5982\u679c `agent_retry_count` \u6216\u67e5\u8be2\u9009\u9879 `OPTION retry_count` \u4e3a\u96f6\uff0c\u5219\u8be5\u9009\u9879\u65e0\u6548\u3002\n\n### client_timeout\n\n`client_timeout` \u9009\u9879\u8bbe\u7f6e\u4f7f\u7528\u6301\u4e45\u8fde\u63a5\u65f6\u8bf7\u6c42\u95f4\u7684\u6700\u5927\u7b49\u5f85\u65f6\u95f4\u3002\u8be5\u503c\u4ee5\u79d2\u6216\u5e26\u65f6\u95f4\u540e\u7f00\u7684\u5f62\u5f0f\u8868\u793a\u3002\u9ed8\u8ba4\u503c\u4e3a 5 \u5206\u949f\u3002\n\n\u793a\u4f8b\uff1a\n\nCODE_BLOCK_12\n\n### hostname_lookup\n\n`hostname_lookup` \u9009\u9879\u5b9a\u4e49\u4e86\u4e3b\u673a\u540d\u7684\u66f4\u65b0\u7b56\u7565\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4ee3\u7406\u4e3b\u673a\u540d\u7684 IP \u5730\u5740\u5728\u670d\u52a1\u5668\u542f\u52a8\u65f6\u7f13\u5b58\uff0c\u4ee5\u907f\u514d\u9891\u7e41\u8bbf\u95ee DNS\u3002\u7136\u800c\uff0c\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff08\u4f8b\u5982\u4e91\u6258\u7ba1\u73af\u5883\uff09\uff0cIP \u4f1a\u52a8\u6001\u53d8\u5316\uff0c\u53ef\u80fd\u5e0c\u671b\u4e0d\u7f13\u5b58 IP\u3002\u5c06\u6b64\u9009\u9879\u8bbe\u7f6e\u4e3a `request` \u53ef\u7981\u7528\u7f13\u5b58\uff0c\u6bcf\u6b21\u67e5\u8be2\u65f6\u90fd\u4f1a\u67e5\u8be2 DNS\u3002IP \u5730\u5740\u4e5f\u53ef\u4ee5\u901a\u8fc7 `FLUSH HOSTNAMES` \u547d\u4ee4\u624b\u52a8\u5237\u65b0\u3002\n\n### listen_tfo",
            "russian": "\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u044b\u0445 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439 \u043c\u0430\u0441\u0442\u0435\u0440-\u0430\u0433\u0435\u043d\u0442 \u0441\u043d\u0438\u0436\u0430\u0435\u0442 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443 \u043d\u0430 TCP-\u043f\u043e\u0440\u0442\u044b \u0438 \u044d\u043a\u043e\u043d\u043e\u043c\u0438\u0442 \u0432\u0440\u0435\u043c\u044f \u043d\u0430 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0443 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439, \u0434\u0435\u043b\u0430\u044f \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u0431\u043e\u043b\u0435\u0435 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u044b\u043c.\n\n## agent_blackhole\n\nCODE_BLOCK_9\n\n\u0414\u0438\u0440\u0435\u043a\u0442\u0438\u0432\u0430 `agent_blackhole` \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043f\u0435\u0440\u0435\u0441\u044b\u043b\u0430\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u043a \u0443\u0434\u0430\u043b\u0451\u043d\u043d\u044b\u043c \u0430\u0433\u0435\u043d\u0442\u0430\u043c \u0431\u0435\u0437 \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u044f \u0438\u043b\u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0438\u0445 \u043e\u0442\u0432\u0435\u0442\u043e\u0432. \u042d\u0442\u043e \u043f\u043e\u043b\u0435\u0437\u043d\u043e \u0434\u043b\u044f \u043e\u0442\u043b\u0430\u0434\u043a\u0438 \u0438\u043b\u0438 \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043f\u0440\u043e\u0434\u0430\u043a\u0448\u043d-\u043a\u043b\u0430\u0441\u0442\u0435\u0440\u043e\u0432, \u0442\u0430\u043a \u043a\u0430\u043a \u043c\u043e\u0436\u043d\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0439 \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 \u0434\u043b\u044f \u043e\u0442\u043b\u0430\u0434\u043a\u0438/\u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0438 \u043f\u0435\u0440\u0435\u0441\u044b\u043b\u0430\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u043a \u043d\u0435\u043c\u0443 \u0441 \u043f\u0440\u043e\u0434\u0430\u043a\u0448\u043d-\u043c\u0430\u0441\u0442\u0435\u0440\u0430 (\u0430\u0433\u0440\u0435\u0433\u0430\u0442\u043e\u0440\u0430) \u0431\u0435\u0437 \u0432\u043c\u0435\u0448\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430 \u0432 \u043f\u0440\u043e\u0434\u0430\u043a\u0448\u043d-\u0440\u0430\u0431\u043e\u0442\u0443. \u041c\u0430\u0441\u0442\u0435\u0440 searchd \u0431\u0443\u0434\u0435\u0442 \u043f\u044b\u0442\u0430\u0442\u044c\u0441\u044f \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u043a \u0430\u0433\u0435\u043d\u0442\u0443-\u0447\u0435\u0440\u043d\u043e\u0439 \u0434\u044b\u0440\u0435 \u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u043a\u0430\u043a \u043e\u0431\u044b\u0447\u043d\u043e, \u043d\u043e \u043d\u0435 \u0431\u0443\u0434\u0435\u0442 \u0436\u0434\u0430\u0442\u044c \u0438 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0442\u044c \u043e\u0442\u0432\u0435\u0442\u044b, \u0430 \u0432\u0441\u0435 \u0441\u0435\u0442\u0435\u0432\u044b\u0435 \u043e\u0448\u0438\u0431\u043a\u0438 \u043d\u0430 \u0430\u0433\u0435\u043d\u0442\u0430\u0445-\u0447\u0435\u0440\u043d\u044b\u0445 \u0434\u044b\u0440\u0430\u0445 \u0431\u0443\u0434\u0443\u0442 \u0438\u0433\u043d\u043e\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f. \u0424\u043e\u0440\u043c\u0430\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0438\u0434\u0435\u043d\u0442\u0438\u0447\u0435\u043d \u0434\u0438\u0440\u0435\u043a\u0442\u0438\u0432\u0435 `agent`.\n\n## agent_connect_timeout\n\nCODE_BLOCK_10\n\n\u0414\u0438\u0440\u0435\u043a\u0442\u0438\u0432\u0430 `agent_connect_timeout` \u0437\u0430\u0434\u0430\u0435\u0442 \u0442\u0430\u0439\u043c\u0430\u0443\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0443\u0434\u0430\u043b\u0451\u043d\u043d\u044b\u043c \u0430\u0433\u0435\u043d\u0442\u0430\u043c. \u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0441\u0447\u0438\u0442\u0430\u0435\u0442\u0441\u044f \u0432 \u043c\u0438\u043b\u043b\u0438\u0441\u0435\u043a\u0443\u043d\u0434\u0430\u0445, \u043d\u043e \u043c\u043e\u0436\u0435\u0442 \u0438\u043c\u0435\u0442\u044c [\u0434\u0440\u0443\u0433\u043e\u0439 \u0441\u0443\u0444\u0444\u0438\u043a\u0441](../../Server_settings/Special_suffixes.md)). \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u2014 1000 (1 \u0441\u0435\u043a\u0443\u043d\u0434\u0430).\n\n\u041f\u0440\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u043a \u0443\u0434\u0430\u043b\u0451\u043d\u043d\u044b\u043c \u0430\u0433\u0435\u043d\u0442\u0430\u043c `searchd` \u0431\u0443\u0434\u0435\u0442 \u0436\u0434\u0430\u0442\u044c \u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c \u044d\u0442\u043e \u0432\u0440\u0435\u043c\u044f, \u0447\u0442\u043e\u0431\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435. \u0415\u0441\u043b\u0438 \u0442\u0430\u0439\u043c\u0430\u0443\u0442 \u0434\u043e\u0441\u0442\u0438\u0433\u043d\u0443\u0442, \u043d\u043e \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0442\u0430\u043a \u0438 \u043d\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e, \u0438 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u044b `retries`, \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430 \u043f\u043e\u043f\u044b\u0442\u043a\u0430 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e\u0433\u043e \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f.\n\n## agent_query_timeout\n\nCODE_BLOCK_11\n\n`agent_query_timeout` \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442 \u0432\u0440\u0435\u043c\u044f, \u0432 \u0442\u0435\u0447\u0435\u043d\u0438\u0435 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e searchd \u0431\u0443\u0434\u0435\u0442 \u0436\u0434\u0430\u0442\u044c \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043e\u0442 \u0443\u0434\u0430\u043b\u0451\u043d\u043d\u043e\u0433\u043e \u0430\u0433\u0435\u043d\u0442\u0430. \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u2014 3000 \u043c\u0438\u043b\u043b\u0438\u0441\u0435\u043a\u0443\u043d\u0434 (3 \u0441\u0435\u043a\u0443\u043d\u0434\u044b), \u043d\u043e \u043e\u043d\u043e \u043c\u043e\u0436\u0435\u0442 \u0438\u043c\u0435\u0442\u044c `\u0441\u0443\u0444\u0444\u0438\u043a\u0441` \u0434\u043b\u044f \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u044f \u0434\u0440\u0443\u0433\u043e\u0439 \u0435\u0434\u0438\u043d\u0438\u0446\u044b \u0432\u0440\u0435\u043c\u0435\u043d\u0438.\n\n\u041f\u043e\u0441\u043b\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f `searchd` \u0431\u0443\u0434\u0435\u0442 \u0436\u0434\u0430\u0442\u044c \u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c agent_query_timeout \u0434\u043b\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0443\u0434\u0430\u043b\u0451\u043d\u043d\u044b\u0445 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432. \u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435, \u0447\u0442\u043e \u044d\u0442\u043e\u0442 \u0442\u0430\u0439\u043c\u0430\u0443\u0442 \u043e\u0442\u043b\u0438\u0447\u0430\u0435\u0442\u0441\u044f \u043e\u0442 `agent_connect_timeout`, \u0438 \u043e\u0431\u0449\u0430\u044f \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430, \u0432\u044b\u0437\u0432\u0430\u043d\u043d\u0430\u044f \u0443\u0434\u0430\u043b\u0451\u043d\u043d\u044b\u043c \u0430\u0433\u0435\u043d\u0442\u043e\u043c, \u0431\u0443\u0434\u0435\u0442 \u0441\u0443\u043c\u043c\u043e\u0439 \u043e\u0431\u043e\u0438\u0445 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439. \u0415\u0441\u043b\u0438 \u0432\u0440\u0435\u043c\u044f agent_query_timeout \u0438\u0441\u0442\u0435\u0447\u0451\u0442, \u0437\u0430\u043f\u0440\u043e\u0441 **\u043d\u0435** \u0431\u0443\u0434\u0435\u0442 \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u0442\u044c\u0441\u044f, \u0432\u043c\u0435\u0441\u0442\u043e \u044d\u0442\u043e\u0433\u043e \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u0432\u0435\u0434\u0435\u043d\u043e \u043f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0435.\n\n\u0422\u0430\u043a\u0436\u0435 \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 [reset_network_timeout_on_packet](../../Server_settings/Searchd.md#reset_network_timeout_on_packet)\n\n## agent_retry_count\n\n`agent_retry_count` \u2014 \u0446\u0435\u043b\u043e\u0435 \u0447\u0438\u0441\u043b\u043e, \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u044e\u0449\u0435\u0435, \u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0440\u0430\u0437 Manticore \u043f\u043e\u043f\u044b\u0442\u0430\u0435\u0442\u0441\u044f \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441 \u0443\u0434\u0430\u043b\u0451\u043d\u043d\u044b\u043c \u0430\u0433\u0435\u043d\u0442\u0430\u043c \u0432 \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 \u0434\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043e \u0444\u0430\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u043e\u0448\u0438\u0431\u043a\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u0430. \u0420\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u043e `agent_retry_count`, \u0437\u0430\u0434\u0430\u043d\u043d\u043e\u043c\u0443 \u0432 \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \"searchd\" \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430, \u043d\u043e \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e \u0434\u043b\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u044b.\n\n## mirror_retry_count\n\n`mirror_retry_count` \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 \u0442\u0443 \u0436\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u044e, \u0447\u0442\u043e \u0438 `agent_retry_count`. \u0415\u0441\u043b\u0438 \u0437\u0430\u0434\u0430\u043d\u044b \u043e\u0431\u0430 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f, \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442 \u0431\u0443\u0434\u0435\u0442 \u0443 `mirror_retry_count`, \u0438 \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u0432\u0435\u0434\u0435\u043d\u043e \u043f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0435.\n\n## \u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0443\u0440\u043e\u0432\u043d\u044f \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u0430\n\n\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u044e\u0442 \u043e\u0431\u0449\u0438\u043c \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435\u043c \u0443\u0434\u0430\u043b\u0451\u043d\u043d\u044b\u0445 \u0430\u0433\u0435\u043d\u0442\u043e\u0432 \u0438 \u0437\u0430\u0434\u0430\u044e\u0442\u0441\u044f **\u0432 \u0440\u0430\u0437\u0434\u0435\u043b\u0435 searchd \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430**. \u041e\u043d\u0438 \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u044e\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0434\u043b\u044f \u0432\u0441\u0435\u0433\u043e \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u0430 Manticore.\n\n* `agent_connect_timeout` \u2014 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0434\u043b\u044f \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430 `agent_connect_timeout`.\n* `agent_query_timeout` \u2014 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0434\u043b\u044f \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430 `agent_query_timeout`. \u0422\u0430\u043a\u0436\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043e \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0442\u043e\u0433\u043e \u0436\u0435 \u0438\u043c\u0435\u043d\u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430 \u0432 \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u043e\u0439 (\u0441\u0435\u0442\u0435\u0432\u043e\u0439) \u0442\u0430\u0431\u043b\u0438\u0446\u0435.\n* `agent_retry_count` \u2014 \u0446\u0435\u043b\u043e\u0435 \u0447\u0438\u0441\u043b\u043e, \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0449\u0435\u0435, \u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0440\u0430\u0437 Manticore \u0431\u0443\u0434\u0435\u0442 \u043f\u044b\u0442\u0430\u0442\u044c\u0441\u044f \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0442\u044c\u0441\u044f \u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u0443\u0434\u0430\u043b\u0451\u043d\u043d\u044b\u043c \u0430\u0433\u0435\u043d\u0442\u0430\u043c \u0432 \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 \u0434\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043e \u0444\u0430\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u043e\u0448\u0438\u0431\u043a\u0435. \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u2014 0 (\u0442.\u0435. \u0431\u0435\u0437 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0445 \u043f\u043e\u043f\u044b\u0442\u043e\u043a). \u042d\u0442\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0442\u0430\u043a\u0436\u0435 \u043c\u043e\u0436\u043d\u043e \u0437\u0430\u0434\u0430\u0442\u044c \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043e\u043f\u0446\u0438\u0438 'OPTION retry_count=XXX'. \u0415\u0441\u043b\u0438 \u0437\u0430\u0434\u0430\u043d \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u0434\u043b\u044f \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0430, \u043e\u043d \u0431\u0443\u0434\u0435\u0442 \u0438\u043c\u0435\u0442\u044c \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442 \u043d\u0430\u0434 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u043c \u0438\u0437 \u043a\u043e\u043d\u0444\u0438\u0433\u0430.\n\n\u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435, \u0447\u0442\u043e \u043f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 **\u0437\u0435\u0440\u043a\u0430\u043b \u0430\u0433\u0435\u043d\u0442\u043e\u0432** \u0432 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0438 \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0441\u0435\u0440\u0432\u0435\u0440 \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u0431\u0438\u0440\u0430\u0442\u044c \u0434\u0440\u0443\u0433\u043e\u0435 \u0437\u0435\u0440\u043a\u0430\u043b\u043e \u043f\u0435\u0440\u0435\u0434 \u043a\u0430\u0436\u0434\u043e\u0439 \u043f\u043e\u043f\u044b\u0442\u043a\u043e\u0439 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0432 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0438 \u0441 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0439 [ha_strategy](../../Creating_a_cluster/Remote_nodes/Load_balancing.md#ha_strategy). \u0412 \u044d\u0442\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 [agent_retry_count](../../Creating_a_table/Creating_a_distributed_table/Remote_tables.md#agent_retry_count) \u0430\u0433\u0440\u0435\u0433\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u0437\u0435\u0440\u043a\u0430\u043b \u0432 \u043d\u0430\u0431\u043e\u0440\u0435.\n\n\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0435\u0441\u043b\u0438 \u0443 \u0432\u0430\u0441 \u0435\u0441\u0442\u044c 10 \u0437\u0435\u0440\u043a\u0430\u043b \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e `agent_retry_count=5`, \u0441\u0435\u0440\u0432\u0435\u0440 \u0441\u0434\u0435\u043b\u0430\u0435\u0442 \u0434\u043e 50 \u043f\u043e\u043f\u044b\u0442\u043e\u043a (\u043f\u0440\u0438\u0431\u043b\u0438\u0437\u0438\u0442\u0435\u043b\u044c\u043d\u043e 5 \u043f\u043e\u043f\u044b\u0442\u043e\u043a \u043d\u0430 \u043a\u0430\u0436\u0434\u044b\u0435 10 \u0437\u0435\u0440\u043a\u0430\u043b). \u0412 \u0441\u043b\u0443\u0447\u0430\u0435 \u043e\u043f\u0446\u0438\u0438 `ha_strategy = roundrobin` \u044d\u0442\u043e \u0431\u0443\u0434\u0435\u0442 \u0440\u043e\u0432\u043d\u043e \u043f\u043e 5 \u043f\u043e\u043f\u044b\u0442\u043e\u043a \u043d\u0430 \u043a\u0430\u0436\u0434\u043e\u0435 \u0437\u0435\u0440\u043a\u0430\u043b\u043e.\n\n\u041f\u0440\u0438 \u044d\u0442\u043e\u043c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435, \u0437\u0430\u0434\u0430\u043d\u043d\u043e\u0435 \u0432 \u043e\u043f\u0446\u0438\u0438 [retry_count](../../Searching/Options.md#retry_count) \u0432 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0438 `agent` \u0441\u043b\u0443\u0436\u0438\u0442 \u0430\u0431\u0441\u043e\u043b\u044e\u0442\u043d\u044b\u043c \u043b\u0438\u043c\u0438\u0442\u043e\u043c. \u0414\u0440\u0443\u0433\u0438\u043c\u0438 \u0441\u043b\u043e\u0432\u0430\u043c\u0438, \u043e\u043f\u0446\u0438\u044f `[retry_count=2]` \u0432 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0438 \u0430\u0433\u0435\u043d\u0442\u0430 \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442 \u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 2 \u043f\u043e\u043f\u044b\u0442\u043a\u0438, \u043d\u0435\u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e \u043e\u0442 \u0442\u043e\u0433\u043e, \u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0437\u0435\u0440\u043a\u0430\u043b (1 \u0438\u043b\u0438 10) \u0432 \u0441\u0442\u0440\u043e\u043a\u0435.\n\n### agent_retry_delay\n\n`agent_retry_delay` \u2014 \u0446\u0435\u043b\u043e\u0447\u0438\u0441\u043b\u0435\u043d\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435, \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u044e\u0449\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u0432 \u043c\u0438\u043b\u043b\u0438\u0441\u0435\u043a\u0443\u043d\u0434\u0430\u0445, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 Manticore Search \u0431\u0443\u0434\u0435\u0442 \u0436\u0434\u0430\u0442\u044c \u043f\u0435\u0440\u0435\u0434 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e\u0439 \u043f\u043e\u043f\u044b\u0442\u043a\u043e\u0439 \u0437\u0430\u043f\u0440\u043e\u0441\u0438\u0442\u044c \u0443\u0434\u0430\u043b\u0451\u043d\u043d\u043e\u0433\u043e \u0430\u0433\u0435\u043d\u0442\u0430 \u0432 \u0441\u043b\u0443\u0447\u0430\u0435 \u0441\u0431\u043e\u044f. \u042d\u0442\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043c\u043e\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 searchd \u0438\u043b\u0438 \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u0434\u0438\u0440\u0435\u043a\u0442\u0438\u0432\u044b `OPTION retry_delay=XXX`. \u0415\u0441\u043b\u0438 \u043e\u0431\u0435 \u043e\u043f\u0446\u0438\u0438 \u0437\u0430\u0434\u0430\u043d\u044b, \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442 \u0431\u0443\u0434\u0435\u0442 \u0443 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430 \u0434\u043b\u044f \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0430. \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u2014 500 \u043c\u0438\u043b\u043b\u0438\u0441\u0435\u043a\u0443\u043d\u0434 (0,5 \u0441\u0435\u043a\u0443\u043d\u0434\u044b). \u042d\u0442\u043e\u0442 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u0430\u043a\u0442\u0443\u0430\u043b\u0435\u043d \u0442\u043e\u043b\u044c\u043a\u043e \u0435\u0441\u043b\u0438 `agent_retry_count` \u0438\u043b\u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 `OPTION retry_count` \u0434\u043b\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u0431\u043e\u043b\u044c\u0448\u0435 \u043d\u0443\u043b\u044f.\n\n### client_timeout\n\n\u041e\u043f\u0446\u0438\u044f `client_timeout` \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u044f \u043c\u0435\u0436\u0434\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0430\u043c\u0438 \u043f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u044b\u0445 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439. \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0451\u0442\u0441\u044f \u0432 \u0441\u0435\u043a\u0443\u043d\u0434\u0430\u0445 \u0438\u043b\u0438 \u0441 \u0441\u0443\u0444\u0444\u0438\u043a\u0441\u043e\u043c \u0432\u0440\u0435\u043c\u0435\u043d\u0438. \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u2014 5 \u043c\u0438\u043d\u0443\u0442.\n\n\u041f\u0440\u0438\u043c\u0435\u0440:\n\nCODE_BLOCK_12\n\n### hostname_lookup\n\n\u041e\u043f\u0446\u0438\u044f `hostname_lookup` \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0438\u043c\u0451\u043d \u0445\u043e\u0441\u0442\u043e\u0432. \u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e IP-\u0430\u0434\u0440\u0435\u0441\u0430 host-\u0438\u043c\u0451\u043d \u0430\u0433\u0435\u043d\u0442\u043e\u0432 \u043a\u0435\u0448\u0438\u0440\u0443\u044e\u0442\u0441\u044f \u043f\u0440\u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0435 \u0441\u0435\u0440\u0432\u0435\u0440\u0430, \u0447\u0442\u043e\u0431\u044b \u0438\u0437\u0431\u0435\u0436\u0430\u0442\u044c \u0447\u0440\u0435\u0437\u043c\u0435\u0440\u043d\u043e\u0433\u043e \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f \u043a DNS. \u041e\u0434\u043d\u0430\u043a\u043e \u0432 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0441\u043b\u0443\u0447\u0430\u044f\u0445 IP \u043c\u043e\u0436\u0435\u0442 \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0438 \u043c\u0435\u043d\u044f\u0442\u044c\u0441\u044f (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043e\u0431\u043b\u0430\u0447\u043d\u044b\u0439 \u0445\u043e\u0441\u0442\u0438\u043d\u0433), \u0438 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043d\u0435 \u043a\u0435\u0448\u0438\u0440\u043e\u0432\u0430\u0442\u044c IP. \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u044d\u0442\u043e\u0439 \u043e\u043f\u0446\u0438\u0438 \u0432 `request` \u043e\u0442\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u043a\u0435\u0448\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u043a DNS \u043f\u0440\u0438 \u043a\u0430\u0436\u0434\u043e\u043c \u0437\u0430\u043f\u0440\u043e\u0441\u0435. IP-\u0430\u0434\u0440\u0435\u0441\u0430 \u0442\u0430\u043a\u0436\u0435 \u043c\u043e\u0436\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u044f\u0442\u044c \u0432\u0440\u0443\u0447\u043d\u0443\u044e \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043a\u043e\u043c\u0430\u043d\u0434\u044b `FLUSH HOSTNAMES`.\n\n### listen_tfo"
        },
        "is_code_or_comment": false,
        "model": "openai:gpt-4.1-mini",
        "updated_at": 1766369466
    },
    "d892ed8f80d40959a2ef40442f9300f18e6f52e92762a11aeedad04a667009fd": {
        "original": "# Remote tables\n\nA remote table in Manticore Search is represented by the [agent](../../Creating_a_table/Creating_a_distributed_table/Creating_a_distributed_table.md) prefix in the definition of a distributed table. A distributed table can include a combination of local and remote tables. If there are no local tables provided, the distributed table will be purely remote and serve as a proxy only. For example, you might have a Manticore instance that listens on multiple ports and serves different protocols, and then redirects queries to backend servers that only accept connections via Manticore's internal binary protocol, using persistent connections to reduce the overhead of establishing connections.\nEven though a purely remote distributed table doesn't serve local tables itself, it still consumes machine resources, as it still needs to perform final calculations, such as merging results and calculating final aggregated values.\n\n## agent\n\nCODE_BLOCK_0\n\n`agent` directive declares the remote agents that are searched each time the enclosing distributed table is searched. These agents are essentially pointers to networked tables. The value specified includes the address and can also include multiple alternatives (agent mirrors) for either the address only or the address and table list.\n\nThe address specification must be one of the following:\n\nCODE_BLOCK_1\n\nThe `hostname` is the remote host name, `port` is the remote TCP port number, `table-list` is a comma-separated list of table names, and square brackets [] indicate an optional clause.\n\nIf the table name is omitted, it is assumed to be the same table as the one where this line is defined. In other words, when defining agents for the 'mycoolindex' distributed table, you can simply point to the address, and it will be assumed that you are querying the mycoolindex table on the agent's endpoints.\n\nIf the port number is omitted, it is assumed to be **9312**. If it is defined but invalid (e.g. 70000), the agent will be skipped.\n\nYou can point each agent to one or more remote tables residing on one or more networked servers with no restrictions. This enables several different usage modes:\n* Sharding over multiple agent servers and creating an arbitrary cluster topology\n* Sharding over multiple agent servers mirrored for high availability and load balancing purposes\n* Sharding within localhost to utilize multiple cores (however, it is simpler just to use multiple local tables)\n\nAll agents are searched in parallel. The index list is passed verbatim to the remote agent. The exact way that list is searched within the agent (i.e. sequentially or in parallel) depends solely on the agent's configuration (see the [threads](../../Server_settings/Searchd.md#threads) setting). The master has no remote control over this.\n\nIt is important to note that the `LIMIT`, option is ignored in agent queries. This is because each agent can contain different tables, so it is the responsibility of the client to apply the limit to the final result set. This is why the query to a physical table is different from the query to a distributed table when viewed in the query logs. The query cannot be a simple copy of the original query, as this would not produce the correct results.\n\nFor example, if a client makes a query SELECT ... LIMIT 10, 10, and there are two agents, with the second agent having only 10 documents, broadcasting the original `LIMIT 10, 10` query would result in receiving 0 documents from the second agent. However, `LIMIT 10,10` should return documents 10-20 from the resulting set. To resolve this, the query must be sent to the agents with a broader limit, such as the default max_matches value of 1000.\n\nFor instance, if there is a distributed table dist that refers to the remote table user, a client query `SELECT * FROM dist LIMIT 10,10` would be converted to `SELECT * FROM user LIMIT 0,1000` and sent to the remote table user. Once the distributed table receives the result, it will apply the LIMIT 10,10 and return the requested 10 documents.\n\nCODE_BLOCK_2\n\nthe query will be converted to:\n\nCODE_BLOCK_3\n\nAdditionally, the value can specify options for each individual agent, such as:\n* [ha_strategy](../../Creating_a_cluster/Remote_nodes/Load_balancing.md#ha_strategy) - `random`, `roundrobin`, `nodeads`, `noerrors` (overrides the global `ha_strategy` setting for the particular agent)\n* `conn` - `pconn`, persistent (equivalent to setting `agent_persistent` at the table level)\n* `blackhole` `0`,`1` (identical to the [agent_blackhole](../../Creating_a_table/Creating_a_distributed_table/Remote_tables.md#agent_blackhole) setting for the agent)\n* `retry_count` an integer value (corresponding to [agent_retry_count](../../Creating_a_table/Creating_a_distributed_table/Remote_tables.md#agent_retry_count) , but the provided value will not be multiplied by the number of mirrors)\n\nCODE_BLOCK_4\n\nExample:\n\nCODE_BLOCK_5\n\nFor optimal performance, it's recommended to place remote tables that reside on the same server within the same record. For instance, instead of:\nCODE_BLOCK_6\nyou should prefer:\nCODE_BLOCK_7\n\n## agent_persistent\n\nCODE_BLOCK_8\n\nThe `agent_persistent` option allows you to persistently connect to an agent, meaning the connection will not be dropped after a query is executed. The syntax for this directive is the same as the `agent` directive. However, instead of opening a new connection to the agent for each query and then closing it, the master will keep a connection open and reuse it for subsequent queries. The maximum number of persistent connections per agent host is defined by the [persistent_connections_limit](../../Server_settings/Searchd.md#persistent_connections_limit) option in the searchd section.\n\nIt's important to note that the [persistent_connections_limit](../../Server_settings/Searchd.md#persistent_connections_limit) must be set to a value greater than 0 in order to use persistent agent connections. If it's not defined, it defaults to 0, and the `agent_persistent` directive will act the same as the `agent`directive.",
        "translations": {
            "chinese": "# \u8fdc\u7a0b\u8868\n\nManticore Search \u4e2d\u7684\u8fdc\u7a0b\u8868\u901a\u8fc7\u5206\u5e03\u5f0f\u8868\u5b9a\u4e49\u4e2d\u7684 [agent](../../Creating_a_table/Creating_a_distributed_table/Creating_a_distributed_table.md) \u524d\u7f00\u8868\u793a\u3002\u5206\u5e03\u5f0f\u8868\u53ef\u4ee5\u5305\u542b\u672c\u5730\u8868\u548c\u8fdc\u7a0b\u8868\u7684\u7ec4\u5408\u3002\u5982\u679c\u6ca1\u6709\u63d0\u4f9b\u672c\u5730\u8868\uff0c\u5206\u5e03\u5f0f\u8868\u5c06\u7eaf\u7cb9\u662f\u8fdc\u7a0b\u7684\uff0c\u4ec5\u4f5c\u4e3a\u4ee3\u7406\u3002\u4f8b\u5982\uff0c\u60a8\u53ef\u80fd\u6709\u4e00\u4e2a\u76d1\u542c\u591a\u4e2a\u7aef\u53e3\u5e76\u670d\u52a1\u4e0d\u540c\u534f\u8bae\u7684 Manticore \u5b9e\u4f8b\uff0c\u7136\u540e\u91cd\u5b9a\u5411\u67e5\u8be2\u5230\u4ec5\u901a\u8fc7 Manticore \u5185\u90e8\u4e8c\u8fdb\u5236\u534f\u8bae\u63a5\u53d7\u8fde\u63a5\u7684\u540e\u7aef\u670d\u52a1\u5668\uff0c\u4f7f\u7528\u6301\u4e45\u8fde\u63a5\u4ee5\u51cf\u5c11\u5efa\u7acb\u8fde\u63a5\u7684\u5f00\u9500\u3002\n\u5c3d\u7ba1\u7eaf\u8fdc\u7a0b\u5206\u5e03\u5f0f\u8868\u672c\u8eab\u4e0d\u63d0\u4f9b\u672c\u5730\u8868\uff0c\u4f46\u5b83\u4ecd\u7136\u6d88\u8017\u673a\u5668\u8d44\u6e90\uff0c\u56e0\u4e3a\u5b83\u4ecd\u9700\u8981\u6267\u884c\u6700\u7ec8\u8ba1\u7b97\uff0c\u5982\u5408\u5e76\u7ed3\u679c\u548c\u8ba1\u7b97\u6700\u7ec8\u7684\u805a\u5408\u503c\u3002\n\n## agent\n\nCODE_BLOCK_0\n\n`agent` \u6307\u4ee4\u58f0\u660e\u6bcf\u6b21\u641c\u7d22\u5305\u542b\u7684\u5206\u5e03\u5f0f\u8868\u65f6\u90fd\u4f1a\u88ab\u641c\u7d22\u7684\u8fdc\u7a0b\u4ee3\u7406\u3002\u8fd9\u4e9b\u4ee3\u7406\u672c\u8d28\u4e0a\u662f\u6307\u5411\u7f51\u7edc\u8868\u7684\u6307\u9488\u3002\u6307\u5b9a\u7684\u503c\u5305\u62ec\u5730\u5740\uff0c\u4e5f\u53ef\u4ee5\u5305\u62ec\u591a\u4e2a\u5907\u9009\uff08\u4ee3\u7406\u955c\u50cf\uff09\uff0c\u7528\u4e8e\u4ec5\u5730\u5740\u6216\u5730\u5740\u548c\u8868\u5217\u8868\u3002\n\n\u5730\u5740\u89c4\u8303\u5fc5\u987b\u662f\u4ee5\u4e0b\u4e4b\u4e00\uff1a\n\nCODE_BLOCK_1\n\n`hostname` \u662f\u8fdc\u7a0b\u4e3b\u673a\u540d\uff0c`port` \u662f\u8fdc\u7a0b TCP \u7aef\u53e3\u53f7\uff0c`table-list` \u662f\u7528\u9017\u53f7\u5206\u9694\u7684\u8868\u540d\u5217\u8868\uff0c\u65b9\u62ec\u53f7 [] \u8868\u793a\u53ef\u9009\u5b50\u53e5\u3002\n\n\u5982\u679c\u7701\u7565\u8868\u540d\uff0c\u5047\u5b9a\u4e3a\u5b9a\u4e49\u8be5\u884c\u7684\u540c\u4e00\u8868\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u5f53\u4e3a\u5206\u5e03\u5f0f\u8868 'mycoolindex' \u5b9a\u4e49\u4ee3\u7406\u65f6\uff0c\u53ef\u4ee5\u7b80\u5355\u6307\u5411\u5730\u5740\uff0c\u9ed8\u8ba4\u67e5\u8be2\u8be5\u4ee3\u7406\u7aef\u70b9\u4e0a\u7684 mycoolindex \u8868\u3002\n\n\u5982\u679c\u7701\u7565\u7aef\u53e3\u53f7\uff0c\u9ed8\u8ba4\u662f **9312**\u3002\u5982\u679c\u5b9a\u4e49\u4f46\u65e0\u6548\uff08\u4f8b\u5982 70000\uff09\uff0c\u5219\u8df3\u8fc7\u8be5\u4ee3\u7406\u3002\n\n\u53ef\u4ee5\u5c06\u6bcf\u4e2a\u4ee3\u7406\u6307\u5411\u4e00\u4e2a\u6216\u591a\u4e2a\u4f4d\u4e8e\u4e00\u4e2a\u6216\u591a\u4e2a\u7f51\u7edc\u670d\u52a1\u5668\u4e0a\u7684\u8fdc\u7a0b\u8868\uff0c\u6ca1\u6709\u9650\u5236\u3002\u8fd9\u4f7f\u5f97\u51e0\u79cd\u4e0d\u540c\u7684\u4f7f\u7528\u6a21\u5f0f\u6210\u4e3a\u53ef\u80fd\uff1a\n* \u5728\u591a\u4e2a\u4ee3\u7406\u670d\u52a1\u5668\u4e0a\u5206\u7247\u5e76\u521b\u5efa\u4efb\u610f\u7684\u96c6\u7fa4\u62d3\u6251\n* \u5728\u591a\u4e2a\u4ee3\u7406\u670d\u52a1\u5668\u4e0a\u5206\u7247\u5e76\u8fdb\u884c\u955c\u50cf\uff0c\u4ee5\u5b9e\u73b0\u9ad8\u53ef\u7528\u6027\u548c\u8d1f\u8f7d\u5747\u8861\n* \u5728\u672c\u5730\u4e3b\u673a\u4e2d\u5206\u7247\u4ee5\u5229\u7528\u591a\u4e2a\u6838\u5fc3\uff08\u4e0d\u8fc7\uff0c\u66f4\u7b80\u5355\u7684\u662f\u4f7f\u7528\u591a\u4e2a\u672c\u5730\u8868\uff09\n\n\u6240\u6709\u4ee3\u7406\u90fd\u662f\u5e76\u884c\u641c\u7d22\u7684\u3002\u7d22\u5f15\u5217\u8868\u76f4\u63a5\u4f20\u9012\u7ed9\u8fdc\u7a0b\u4ee3\u7406\u3002\u8be5\u5217\u8868\u5728\u4ee3\u7406\u5185\u5177\u4f53\u5982\u4f55\u641c\u7d22\uff08\u987a\u5e8f\u6216\u5e76\u884c\uff09\u5b8c\u5168\u53d6\u51b3\u4e8e\u4ee3\u7406\u7684\u914d\u7f6e\uff08\u53c2\u89c1[threads](../../Server_settings/Searchd.md#threads)\u8bbe\u7f6e\uff09\u3002\u4e3b\u63a7\u65e0\u6cd5\u8fdc\u7a0b\u63a7\u5236\u6b64\u884c\u4e3a\u3002\n\n\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4ee3\u7406\u67e5\u8be2\u4e2d\u4f1a\u5ffd\u7565 `LIMIT` \u9009\u9879\u3002\u8fd9\u662f\u56e0\u4e3a\u6bcf\u4e2a\u4ee3\u7406\u53ef\u80fd\u5305\u542b\u4e0d\u540c\u7684\u8868\uff0c\u56e0\u6b64\u5ba2\u6237\u7aef\u8d1f\u8d23\u5728\u6700\u7ec8\u7ed3\u679c\u96c6\u4e0a\u5e94\u7528\u9650\u5236\u3002\u8fd9\u5c31\u662f\u4e3a\u4f55\u5bf9\u7269\u7406\u8868\u7684\u67e5\u8be2\u4e0e\u5bf9\u5206\u5e03\u5f0f\u8868\u7684\u67e5\u8be2\u5728\u67e5\u8be2\u65e5\u5fd7\u4e2d\u4f53\u73b0\u4e0d\u540c\u3002\u67e5\u8be2\u4e0d\u80fd\u7b80\u5355\u590d\u5236\u539f\u59cb\u67e5\u8be2\uff0c\u5426\u5219\u4e0d\u4f1a\u4ea7\u751f\u6b63\u786e\u7ed3\u679c\u3002\n\n\u4f8b\u5982\uff0c\u5982\u679c\u5ba2\u6237\u7aef\u6267\u884c\u67e5\u8be2 SELECT ... LIMIT 10, 10\uff0c\u4e14\u6709\u4e24\u4e2a\u4ee3\u7406\uff0c\u7b2c\u4e8c\u4e2a\u4ee3\u7406\u53ea\u6709 10 \u6761\u6587\u6863\uff0c\u5e7f\u64ad\u539f\u59cb `LIMIT 10, 10` \u67e5\u8be2\u4f1a\u5bfc\u81f4\u7b2c\u4e8c\u4e2a\u4ee3\u7406\u8fd4\u56de 0 \u6761\u6587\u6863\u3002\u7136\u800c\uff0c`LIMIT 10,10` \u5e94\u8be5\u8fd4\u56de\u7ed3\u679c\u96c6\u4e2d\u7684\u7b2c10\u523020\u6761\u3002\u4e3a\u89e3\u51b3\u6b64\u95ee\u9898\uff0c\u5fc5\u987b\u5411\u4ee3\u7406\u53d1\u9001\u66f4\u5bbd\u677e\u9650\u5236\u7684\u67e5\u8be2\uff0c\u4f8b\u5982\u9ed8\u8ba4 max_matches \u503c 1000\u3002\n\n\u6bd4\u5982\uff0c\u82e5\u6709\u5206\u5e03\u5f0f\u8868 dist \u6307\u5411\u8fdc\u7a0b\u8868 user\uff0c\u5ba2\u6237\u7aef\u67e5\u8be2 `SELECT * FROM dist LIMIT 10,10` \u4f1a\u88ab\u8f6c\u6362\u4e3a `SELECT * FROM user LIMIT 0,1000` \u5e76\u53d1\u9001\u81f3\u8fdc\u7a0b\u8868 user\u3002\u4e00\u65e6\u5206\u5e03\u5f0f\u8868\u6536\u5230\u7ed3\u679c\uff0c\u5b83\u5c06\u5e94\u7528 LIMIT 10,10\uff0c\u8fd4\u56de\u8bf7\u6c42\u7684 10 \u6761\u6587\u6863\u3002\n\nCODE_BLOCK_2\n\n\u67e5\u8be2\u5c06\u88ab\u8f6c\u6362\u4e3a\uff1a\n\nCODE_BLOCK_3\n\n\u53e6\u5916\uff0c\u503c\u53ef\u4ee5\u4e3a\u6bcf\u4e2a\u5355\u72ec\u4ee3\u7406\u6307\u5b9a\u9009\u9879\uff0c\u4f8b\u5982\uff1a\n* [ha_strategy](../../Creating_a_cluster/Remote_nodes/Load_balancing.md#ha_strategy) - `random`, `roundrobin`, `nodeads`, `noerrors`\uff08\u9488\u5bf9\u7279\u5b9a\u4ee3\u7406\u8986\u76d6\u5168\u5c40 `ha_strategy` \u8bbe\u7f6e\uff09\n* `conn` - `pconn`\uff0c\u6301\u4e45\u8fde\u63a5\uff08\u76f8\u5f53\u4e8e\u5728\u8868\u7ea7\u8bbe\u7f6e `agent_persistent`\uff09\n* `blackhole` `0`,`1`\uff08\u4e0e\u4ee3\u7406\u7684 [agent_blackhole](../../Creating_a_table/Creating_a_distributed_table/Remote_tables.md#agent_blackhole) \u8bbe\u7f6e\u76f8\u540c\uff09\n* `retry_count` \u6574\u6570\u503c\uff08\u5bf9\u5e94 [agent_retry_count](../../Creating_a_table/Creating_a_distributed_table/Remote_tables.md#agent_retry_count) \uff0c\u4f46\u63d0\u4f9b\u7684\u503c\u4e0d\u4f1a\u4e58\u4ee5\u955c\u50cf\u6570\u91cf\uff09\n\nCODE_BLOCK_4\n\n\u793a\u4f8b\uff1a\n\nCODE_BLOCK_5\n\n\u4e3a\u4e86\u83b7\u5f97\u6700\u4f73\u6027\u80fd\uff0c\u5efa\u8bae\u5c06\u4f4d\u4e8e\u540c\u4e00\u670d\u52a1\u5668\u4e0a\u7684\u8fdc\u7a0b\u8868\u7f6e\u4e8e\u76f8\u540c\u8bb0\u5f55\u4e2d\u3002\u4f8b\u5982\uff0c\u4e0d\u8981\uff1a\nCODE_BLOCK_6\n\u5efa\u8bae\u4f7f\u7528\uff1a\nCODE_BLOCK_7\n\n## agent_persistent\n\nCODE_BLOCK_8\n\n`agent_persistent` \u9009\u9879\u5141\u8bb8\u4f60\u6301\u4e45\u8fde\u63a5\u5230\u4ee3\u7406\uff0c\u5373\u67e5\u8be2\u6267\u884c\u540e\u8fde\u63a5\u4e0d\u4f1a\u65ad\u5f00\u3002\u8be5\u6307\u4ee4\u8bed\u6cd5\u4e0e `agent` \u6307\u4ee4\u76f8\u540c\u3002\u4f46\u4e0d\u540c\u7684\u662f\uff0c\u4e3b\u63a7\u4e0d\u4f1a\u4e3a\u6bcf\u4e2a\u67e5\u8be2\u6253\u5f00\u65b0\u8fde\u63a5\u7136\u540e\u5173\u95ed\uff0c\u800c\u662f\u4fdd\u6301\u8fde\u63a5\u5e76\u91cd\u7528\u4ee5\u8fdb\u884c\u540e\u7eed\u67e5\u8be2\u3002\u6bcf\u4e2a\u4ee3\u7406\u4e3b\u673a\u7684\u6700\u5927\u6301\u4e45\u8fde\u63a5\u6570\u7531 searchd \u90e8\u5206\u7684 [persistent_connections_limit](../../Server_settings/Searchd.md#persistent_connections_limit) \u9009\u9879\u5b9a\u4e49\u3002\n\n\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5fc5\u987b\u5c06 [persistent_connections_limit](../../Server_settings/Searchd.md#persistent_connections_limit) \u8bbe\u7f6e\u4e3a\u5927\u4e8e 0 \u7684\u503c\u624d\u80fd\u4f7f\u7528\u6301\u4e45\u4ee3\u7406\u8fde\u63a5\u3002\u5982\u679c\u672a\u5b9a\u4e49\uff0c\u9ed8\u8ba4\u4e3a 0\uff0c`agent_persistent` \u6307\u4ee4\u7684\u884c\u4e3a\u5c06\u4e0e `agent` \u6307\u4ee4\u76f8\u540c\u3002",
            "russian": "# \u0423\u0434\u0430\u043b\u0451\u043d\u043d\u044b\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b\n\n\u0423\u0434\u0430\u043b\u0451\u043d\u043d\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u0432 Manticore Search \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0430 \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u043e\u043c [agent](../../Creating_a_table/Creating_a_distributed_table/Creating_a_distributed_table.md) \u0432 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0438 \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b. \u0420\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u043c\u043e\u0436\u0435\u0442 \u0432\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u0441\u043e\u0447\u0435\u0442\u0430\u043d\u0438\u0435 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0445 \u0438 \u0443\u0434\u0430\u043b\u0451\u043d\u043d\u044b\u0445 \u0442\u0430\u0431\u043b\u0438\u0446. \u0415\u0441\u043b\u0438 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u044b, \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u0431\u0443\u0434\u0435\u0442 \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u0443\u0434\u0430\u043b\u0451\u043d\u043d\u043e\u0439 \u0438 \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u0441\u0442\u0443\u043f\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u043a\u0430\u043a \u043f\u0440\u043e\u043a\u0441\u0438. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0443 \u0432\u0430\u0441 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 Manticore, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0441\u043b\u0443\u0448\u0430\u0435\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043f\u043e\u0440\u0442\u043e\u0432 \u0438 \u043e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u0435\u0442 \u0440\u0430\u0437\u043d\u044b\u0435 \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u044b, \u0430 \u0437\u0430\u0442\u0435\u043c \u043f\u0435\u0440\u0435\u043d\u0430\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u044b backend, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u044e\u0442 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u0447\u0435\u0440\u0435\u0437 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0439 \u0431\u0438\u043d\u0430\u0440\u043d\u044b\u0439 \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b Manticore, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u044b\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0434\u043b\u044f \u0443\u043c\u0435\u043d\u044c\u0448\u0435\u043d\u0438\u044f \u043d\u0430\u043a\u043b\u0430\u0434\u043d\u044b\u0445 \u0440\u0430\u0441\u0445\u043e\u0434\u043e\u0432 \u043f\u0440\u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439.  \n\u0425\u043e\u0442\u044f \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430, \u0441\u043e\u0441\u0442\u043e\u044f\u0449\u0430\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0443\u0434\u0430\u043b\u0451\u043d\u043d\u044b\u0445, \u0441\u0430\u043c\u0430 \u043d\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0445 \u0442\u0430\u0431\u043b\u0438\u0446, \u043e\u043d\u0430 \u0432\u0441\u0451 \u0440\u0430\u0432\u043d\u043e \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u044f\u0435\u0442 \u0440\u0435\u0441\u0443\u0440\u0441\u044b \u043c\u0430\u0448\u0438\u043d\u044b, \u043f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443 \u0434\u043e\u043b\u0436\u043d\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u043e\u043a\u043e\u043d\u0447\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a \u0441\u043b\u0438\u044f\u043d\u0438\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432 \u0438 \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0435 \u0438\u0442\u043e\u0433\u043e\u0432\u044b\u0445 \u0430\u0433\u0440\u0435\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0445 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439.\n\n## agent\n\nCODE_BLOCK_0\n\n\u0414\u0438\u0440\u0435\u043a\u0442\u0438\u0432\u0430 `agent` \u043e\u0431\u044a\u044f\u0432\u043b\u044f\u0435\u0442 \u0443\u0434\u0430\u043b\u0451\u043d\u043d\u044b\u0445 \u0430\u0433\u0435\u043d\u0442\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043e\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u043a\u0430\u0436\u0434\u044b\u0439 \u0440\u0430\u0437 \u043f\u0440\u0438 \u043f\u043e\u0438\u0441\u043a\u0435 \u0432 \u043e\u043a\u0440\u0443\u0436\u0430\u044e\u0449\u0435\u0439 \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435. \u042d\u0442\u0438 \u0430\u0433\u0435\u043d\u0442\u044b \u0444\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f\u043c\u0438 \u043d\u0430 \u0441\u0435\u0442\u0435\u0432\u044b\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b. \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435, \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0435 \u0432 \u0434\u0438\u0440\u0435\u043a\u0442\u0438\u0432\u0435, \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u0430\u0434\u0440\u0435\u0441 \u0438 \u043c\u043e\u0436\u0435\u0442 \u0442\u0430\u043a\u0436\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0430\u043b\u044c\u0442\u0435\u0440\u043d\u0430\u0442\u0438\u0432 (\u0437\u0435\u0440\u043a\u0430\u043b \u0430\u0433\u0435\u043d\u0442\u043e\u0432) \u043b\u0438\u0431\u043e \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f \u0430\u0434\u0440\u0435\u0441\u0430, \u043b\u0438\u0431\u043e \u0434\u043b\u044f \u0430\u0434\u0440\u0435\u0441\u0430 \u0432\u043c\u0435\u0441\u0442\u0435 \u0441\u043e \u0441\u043f\u0438\u0441\u043a\u043e\u043c \u0442\u0430\u0431\u043b\u0438\u0446.\n\n\u0421\u043f\u0435\u0446\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f \u0430\u0434\u0440\u0435\u0441\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043e\u0434\u043d\u043e\u0439 \u0438\u0437 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445:\n\nCODE_BLOCK_1\n\n`hostname` \u2014 \u044d\u0442\u043e \u0438\u043c\u044f \u0443\u0434\u0430\u043b\u0451\u043d\u043d\u043e\u0433\u043e \u0445\u043e\u0441\u0442\u0430, `port` \u2014 \u0443\u0434\u0430\u043b\u0451\u043d\u043d\u044b\u0439 TCP-\u043f\u043e\u0440\u0442, `table-list` \u2014 \u044d\u0442\u043e \u0441\u043f\u0438\u0441\u043e\u043a \u0438\u043c\u0451\u043d \u0442\u0430\u0431\u043b\u0438\u0446, \u0440\u0430\u0437\u0434\u0435\u043b\u0451\u043d\u043d\u044b\u0445 \u0437\u0430\u043f\u044f\u0442\u044b\u043c\u0438, \u0430 \u043a\u0432\u0430\u0434\u0440\u0430\u0442\u043d\u044b\u0435 \u0441\u043a\u043e\u0431\u043a\u0438 [] \u043e\u0431\u043e\u0437\u043d\u0430\u0447\u0430\u044e\u0442 \u043d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u0435.\n\n\u0415\u0441\u043b\u0438 \u0438\u043c\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u043e\u043f\u0443\u0449\u0435\u043d\u043e, \u043f\u0440\u0435\u0434\u043f\u043e\u043b\u0430\u0433\u0430\u0435\u0442\u0441\u044f, \u0447\u0442\u043e \u044d\u0442\u043e \u0442\u0430 \u0436\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u0430, \u0433\u0434\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0430 \u044d\u0442\u0430 \u0441\u0442\u0440\u043e\u043a\u0430. \u0414\u0440\u0443\u0433\u0438\u043c\u0438 \u0441\u043b\u043e\u0432\u0430\u043c\u0438, \u043f\u0440\u0438 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0438 \u0430\u0433\u0435\u043d\u0442\u043e\u0432 \u0434\u043b\u044f \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b 'mycoolindex' \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u043e\u0441\u0442\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0430\u0434\u0440\u0435\u0441, \u0438 \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u0435\u0434\u043f\u043e\u043b\u0430\u0433\u0430\u0442\u044c\u0441\u044f, \u0447\u0442\u043e \u0437\u0430\u043f\u0440\u043e\u0441 \u0438\u0434\u0451\u0442 \u043a \u0442\u0430\u0431\u043b\u0438\u0446\u0435 mycoolindex \u043d\u0430 \u043a\u043e\u043d\u0435\u0447\u043d\u044b\u0445 \u0442\u043e\u0447\u043a\u0430\u0445 \u0430\u0433\u0435\u043d\u0442\u0430.\n\n\u0415\u0441\u043b\u0438 \u043d\u043e\u043c\u0435\u0440 \u043f\u043e\u0440\u0442\u0430 \u043e\u043f\u0443\u0449\u0435\u043d, \u0441\u0447\u0438\u0442\u0430\u0435\u0442\u0441\u044f, \u0447\u0442\u043e \u043e\u043d \u0440\u0430\u0432\u0435\u043d **9312**. \u0415\u0441\u043b\u0438 \u043e\u043d \u0437\u0430\u0434\u0430\u043d, \u043d\u043e \u043d\u0435\u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, 70000), \u0430\u0433\u0435\u043d\u0442 \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u043e\u043f\u0443\u0449\u0435\u043d.\n\n\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0430\u0433\u0435\u043d\u0442\u0430 \u043a \u043e\u0434\u043d\u043e\u0439 \u0438\u043b\u0438 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u043c \u0443\u0434\u0430\u043b\u0451\u043d\u043d\u044b\u043c \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u043c, \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u043c \u043d\u0430 \u043e\u0434\u043d\u043e\u043c \u0438\u043b\u0438 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0441\u0435\u0442\u0435\u0432\u044b\u0445 \u0441\u0435\u0440\u0432\u0435\u0440\u0430\u0445 \u0431\u0435\u0437 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0439. \u042d\u0442\u043e \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u0440\u0435\u0436\u0438\u043c\u043e\u0432 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f:\n* \u0428\u0430\u0440\u0434\u0438\u043d\u0433 \u043f\u043e \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u043c \u0441\u0435\u0440\u0432\u0435\u0440\u0430\u043c \u0430\u0433\u0435\u043d\u0442\u043e\u0432 \u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u043b\u044c\u043d\u043e\u0439 \u0442\u043e\u043f\u043e\u043b\u043e\u0433\u0438\u0438 \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0430\n* \u0428\u0430\u0440\u0434\u0438\u043d\u0433 \u043f\u043e \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u043c \u0441\u0435\u0440\u0432\u0435\u0440\u0430\u043c \u0430\u0433\u0435\u043d\u0442\u043e\u0432, \u0437\u0435\u0440\u043a\u0430\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u043c \u0434\u043b\u044f \u0432\u044b\u0441\u043e\u043a\u043e\u0439 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u0438 \u0438 \u0431\u0430\u043b\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u043a\u0438 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438\n* \u0428\u0430\u0440\u0434\u0438\u043d\u0433 \u0432\u043d\u0443\u0442\u0440\u0438 localhost \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u044f\u0434\u0435\u0440 (\u0445\u043e\u0442\u044f \u043f\u0440\u043e\u0449\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0445 \u0442\u0430\u0431\u043b\u0438\u0446)\n\n\u0412\u0441\u0435 \u0430\u0433\u0435\u043d\u0442\u044b \u043e\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u043f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u044c\u043d\u043e. \u0421\u043f\u0438\u0441\u043e\u043a \u0438\u043d\u0434\u0435\u043a\u0441\u043e\u0432 \u043f\u0435\u0440\u0435\u0434\u0430\u0451\u0442\u0441\u044f \u0443\u0434\u0430\u043b\u0451\u043d\u043d\u043e\u043c\u0443 \u0430\u0433\u0435\u043d\u0442\u0443 \u0431\u0435\u0437 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439. \u0422\u043e\u0447\u043d\u044b\u0439 \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u0438\u0441\u043a\u0430 \u043f\u043e \u044d\u0442\u043e\u043c\u0443 \u0441\u043f\u0438\u0441\u043a\u0443 \u0432 \u0430\u0433\u0435\u043d\u0442\u0435 (\u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0438\u043b\u0438 \u043f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u044c\u043d\u043e) \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u043e\u0442 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u0430\u0433\u0435\u043d\u0442\u0430 (\u0441\u043c. \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0443 [threads](../../Server_settings/Searchd.md#threads)). \u041c\u0430\u0441\u0442\u0435\u0440 \u043d\u0435 \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u044d\u0442\u0438\u043c \u0443\u0434\u0430\u043b\u0451\u043d\u043d\u043e.\n\n\u0412\u0430\u0436\u043d\u043e \u043e\u0442\u043c\u0435\u0442\u0438\u0442\u044c, \u0447\u0442\u043e \u043e\u043f\u0446\u0438\u044f `LIMIT` \u0438\u0433\u043d\u043e\u0440\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u0432 \u0437\u0430\u043f\u0440\u043e\u0441\u0430\u0445 \u043a \u0430\u0433\u0435\u043d\u0442\u0430\u043c. \u042d\u0442\u043e \u0441\u0432\u044f\u0437\u0430\u043d\u043e \u0441 \u0442\u0435\u043c, \u0447\u0442\u043e \u043a\u0430\u0436\u0434\u044b\u0439 \u0430\u0433\u0435\u043d\u0442 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0440\u0430\u0437\u043d\u044b\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b, \u0438 \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0441\u0442\u044c \u0437\u0430 \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u043a \u0438\u0442\u043e\u0433\u043e\u0432\u043e\u043c\u0443 \u043d\u0430\u0431\u043e\u0440\u0443 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432 \u043b\u0435\u0436\u0438\u0442 \u043d\u0430 \u043a\u043b\u0438\u0435\u043d\u0442\u0435. \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441 \u043a \u0444\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 \u043e\u0442\u043b\u0438\u0447\u0430\u0435\u0442\u0441\u044f \u043e\u0442 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043a \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435, \u0435\u0441\u043b\u0438 \u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432 \u043b\u043e\u0433\u0430\u0445 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432. \u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u043a\u043e\u043f\u0438\u0435\u0439 \u0438\u0441\u0445\u043e\u0434\u043d\u043e\u0433\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0430, \u0442\u0430\u043a \u043a\u0430\u043a \u044d\u0442\u043e \u043f\u0440\u0438\u0432\u0435\u0434\u0451\u0442 \u043a \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u043c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430\u043c.\n\n\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0435\u0441\u043b\u0438 \u043a\u043b\u0438\u0435\u043d\u0442 \u0434\u0435\u043b\u0430\u0435\u0442 \u0437\u0430\u043f\u0440\u043e\u0441 SELECT ... LIMIT 10, 10, \u0430 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0434\u0432\u0430 \u0430\u0433\u0435\u043d\u0442\u0430, \u043f\u0440\u0438 \u044d\u0442\u043e\u043c \u0432\u0442\u043e\u0440\u043e\u0439 \u0430\u0433\u0435\u043d\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u0442\u043e\u043b\u044c\u043a\u043e 10 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432, \u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0446\u0438\u044f \u0438\u0441\u0445\u043e\u0434\u043d\u043e\u0433\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0430 `LIMIT 10, 10` \u043f\u0440\u0438\u0432\u0435\u0434\u0451\u0442 \u043a \u0442\u043e\u043c\u0443, \u0447\u0442\u043e \u043e\u0442 \u0432\u0442\u043e\u0440\u043e\u0433\u043e \u0430\u0433\u0435\u043d\u0442\u0430 \u0431\u0443\u0434\u0443\u0442 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u044b 0 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432. \u041e\u0434\u043d\u0430\u043a\u043e \u0437\u0430\u043f\u0440\u043e\u0441 `LIMIT 10,10` \u0434\u043e\u043b\u0436\u0435\u043d \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b \u0441 10 \u043f\u043e 20 \u0438\u0437 \u0438\u0442\u043e\u0433\u043e\u0432\u043e\u0433\u043e \u043d\u0430\u0431\u043e\u0440\u0430. \u0427\u0442\u043e\u0431\u044b \u0440\u0435\u0448\u0438\u0442\u044c \u044d\u0442\u0443 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0443, \u0437\u0430\u043f\u0440\u043e\u0441 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u044e\u0442 \u0430\u0433\u0435\u043d\u0442\u0430\u043c \u0441 \u0431\u043e\u043b\u0435\u0435 \u0448\u0438\u0440\u043e\u043a\u0438\u043c \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435\u043c, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 max_matches \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e 1000.\n\n\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0435\u0441\u043b\u0438 \u0435\u0441\u0442\u044c \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430 dist, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0441\u0441\u044b\u043b\u0430\u0435\u0442\u0441\u044f \u043d\u0430 \u0443\u0434\u0430\u043b\u0451\u043d\u043d\u0443\u044e \u0442\u0430\u0431\u043b\u0438\u0446\u0443 user, \u0437\u0430\u043f\u0440\u043e\u0441 \u043a\u043b\u0438\u0435\u043d\u0442\u0430 `SELECT * FROM dist LIMIT 10,10` \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d \u0432 \u0437\u0430\u043f\u0440\u043e\u0441 `SELECT * FROM user LIMIT 0,1000` \u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d \u0443\u0434\u0430\u043b\u0451\u043d\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 user. \u041f\u043e\u0441\u043b\u0435 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430 \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u0442 LIMIT 10,10 \u0438 \u0432\u0435\u0440\u043d\u0451\u0442 \u0437\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u043c\u044b\u0435 10 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432.\n\nCODE_BLOCK_2\n\n\u0437\u0430\u043f\u0440\u043e\u0441 \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d \u0432:\n\nCODE_BLOCK_3\n\n\u041a\u0440\u043e\u043c\u0435 \u0442\u043e\u0433\u043e, \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043e\u043f\u0446\u0438\u0438 \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u0430\u0433\u0435\u043d\u0442\u0430, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a:\n* [ha_strategy](../../Creating_a_cluster/Remote_nodes/Load_balancing.md#ha_strategy) - `random`, `roundrobin`, `nodeads`, `noerrors` (\u043f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u0443\u044e \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0443 `ha_strategy` \u0434\u043b\u044f \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0433\u043e \u0430\u0433\u0435\u043d\u0442\u0430)\n* `conn` - `pconn`, persistent (\u044d\u043a\u0432\u0438\u0432\u0430\u043b\u0435\u043d\u0442\u043d\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0435 `agent_persistent` \u043d\u0430 \u0443\u0440\u043e\u0432\u043d\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b)\n* `blackhole` `0`,`1` (\u0438\u0434\u0435\u043d\u0442\u0438\u0447\u043d\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0435 [agent_blackhole](../../Creating_a_table/Creating_a_distributed_table/Remote_tables.md#agent_blackhole) \u0434\u043b\u044f \u0430\u0433\u0435\u043d\u0442\u0430)\n* `retry_count` \u0446\u0435\u043b\u043e\u0447\u0438\u0441\u043b\u0435\u043d\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 (\u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 [agent_retry_count](../../Creating_a_table/Creating_a_distributed_table/Remote_tables.md#agent_retry_count), \u043d\u043e \u0437\u0430\u0434\u0430\u043d\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043d\u0435 \u0443\u043c\u043d\u043e\u0436\u0430\u0435\u0442\u0441\u044f \u043d\u0430 \u0447\u0438\u0441\u043b\u043e \u0437\u0435\u0440\u043a\u0430\u043b)\n\nCODE_BLOCK_4\n\n\u041f\u0440\u0438\u043c\u0435\u0440:\n\nCODE_BLOCK_5\n\n\u0414\u043b\u044f \u043e\u043f\u0442\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0439 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u043f\u043e\u043c\u0435\u0449\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0451\u043d\u043d\u044b\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b, \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0435 \u043d\u0430 \u043e\u0434\u043d\u043e\u043c \u0441\u0435\u0440\u0432\u0435\u0440\u0435, \u0432 \u043e\u0434\u043d\u0443 \u0437\u0430\u043f\u0438\u0441\u044c. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0432\u043c\u0435\u0441\u0442\u043e:\nCODE_BLOCK_6\n\u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0435\u0441\u0442\u044c:\nCODE_BLOCK_7\n\n## agent_persistent\n\nCODE_BLOCK_8\n\n\u041e\u043f\u0446\u0438\u044f `agent_persistent` \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u043e\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0441 \u0430\u0433\u0435\u043d\u0442\u043e\u043c, \u0442\u043e \u0435\u0441\u0442\u044c \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u043d\u0435 \u0437\u0430\u043a\u0440\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u043f\u043e\u0441\u043b\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u0430. \u0421\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441 \u044d\u0442\u043e\u0439 \u0434\u0438\u0440\u0435\u043a\u0442\u0438\u0432\u044b \u0442\u0430\u043a\u043e\u0439 \u0436\u0435, \u043a\u0430\u043a \u0443 \u0434\u0438\u0440\u0435\u043a\u0442\u0438\u0432\u044b `agent`. \u041e\u0434\u043d\u0430\u043a\u043e \u0432\u043c\u0435\u0441\u0442\u043e \u043e\u0442\u043a\u0440\u044b\u0442\u0438\u044f \u043d\u043e\u0432\u043e\u0433\u043e \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0441 \u0430\u0433\u0435\u043d\u0442\u043e\u043c \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u0438 \u043f\u043e\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0433\u043e \u0435\u0433\u043e \u0437\u0430\u043a\u0440\u044b\u0442\u0438\u044f \u043c\u0430\u0441\u0442\u0435\u0440 \u0431\u0443\u0434\u0435\u0442 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0442\u044c \u043e\u0442\u043a\u0440\u044b\u0442\u043e\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0438 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0435\u0433\u043e \u0434\u043b\u044f \u043f\u043e\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432. \u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u044b\u0445 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439 \u043d\u0430 \u0445\u043e\u0441\u0442 \u0430\u0433\u0435\u043d\u0442\u0430 \u0437\u0430\u0434\u0430\u0451\u0442\u0441\u044f \u043e\u043f\u0446\u0438\u0435\u0439 [persistent_connections_limit](../../Server_settings/Searchd.md#persistent_connections_limit) \u0432 \u0441\u0435\u043a\u0446\u0438\u0438 searchd.\n\n\u0412\u0430\u0436\u043d\u043e \u043e\u0442\u043c\u0435\u0442\u0438\u0442\u044c, \u0447\u0442\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 [persistent_connections_limit](../../Server_settings/Searchd.md#persistent_connections_limit) \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 0 \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u044b\u0445 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439 \u0441 \u0430\u0433\u0435\u043d\u0442\u043e\u043c. \u0415\u0441\u043b\u0438 \u043e\u043d\u043e \u043d\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043e, \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0440\u0430\u0432\u043d\u043e 0, \u0438 \u0434\u0438\u0440\u0435\u043a\u0442\u0438\u0432\u0430 `agent_persistent` \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0442\u0430\u043a \u0436\u0435, \u043a\u0430\u043a `agent`."
        },
        "is_code_or_comment": false,
        "model": "openai:gpt-4.1-mini",
        "updated_at": 1766369462
    },
    "__meta": {
        "source_text": "# Remote tables\n\nA remote table in Manticore Search is represented by the [agent](../../Creating_a_table/Creating_a_distributed_table/Creating_a_distributed_table.md) prefix in the definition of a distributed table. A distributed table can include a combination of local and remote tables. If there are no local tables provided, the distributed table will be purely remote and serve as a proxy only. For example, you might have a Manticore instance that listens on multiple ports and serves different protocols, and then redirects queries to backend servers that only accept connections via Manticore's internal binary protocol, using persistent connections to reduce the overhead of establishing connections.\nEven though a purely remote distributed table doesn't serve local tables itself, it still consumes machine resources, as it still needs to perform final calculations, such as merging results and calculating final aggregated values.\n\n## agent\n\n```ini\nagent = address1 [ | address2 [...] ][:table-list]\nagent = address1[:table-list [ | address2[:table-list [...] ] ] ]\n```\n\n`agent` directive declares the remote agents that are searched each time the enclosing distributed table is searched. These agents are essentially pointers to networked tables. The value specified includes the address and can also include multiple alternatives (agent mirrors) for either the address only or the address and table list.\n\nThe address specification must be one of the following:\n\n```ini\naddress = hostname[:port] # eg. server2:9312\naddress = /absolute/unix/socket/path # eg. /var/run/manticore2.sock\n```\n\nThe `hostname` is the remote host name, `port` is the remote TCP port number, `table-list` is a comma-separated list of table names, and square brackets [] indicate an optional clause.\n\nIf the table name is omitted, it is assumed to be the same table as the one where this line is defined. In other words, when defining agents for the 'mycoolindex' distributed table, you can simply point to the address, and it will be assumed that you are querying the mycoolindex table on the agent's endpoints.\n\nIf the port number is omitted, it is assumed to be **9312**. If it is defined but invalid (e.g. 70000), the agent will be skipped.\n\nYou can point each agent to one or more remote tables residing on one or more networked servers with no restrictions. This enables several different usage modes:\n* Sharding over multiple agent servers and creating an arbitrary cluster topology\n* Sharding over multiple agent servers mirrored for high availability and load balancing purposes\n* Sharding within localhost to utilize multiple cores (however, it is simpler just to use multiple local tables)\n\nAll agents are searched in parallel. The index list is passed verbatim to the remote agent. The exact way that list is searched within the agent (i.e. sequentially or in parallel) depends solely on the agent's configuration (see the [threads](../../Server_settings/Searchd.md#threads) setting). The master has no remote control over this.\n\nIt is important to note that the `LIMIT`, option is ignored in agent queries. This is because each agent can contain different tables, so it is the responsibility of the client to apply the limit to the final result set. This is why the query to a physical table is different from the query to a distributed table when viewed in the query logs. The query cannot be a simple copy of the original query, as this would not produce the correct results.\n\nFor example, if a client makes a query SELECT ... LIMIT 10, 10, and there are two agents, with the second agent having only 10 documents, broadcasting the original `LIMIT 10, 10` query would result in receiving 0 documents from the second agent. However, `LIMIT 10,10` should return documents 10-20 from the resulting set. To resolve this, the query must be sent to the agents with a broader limit, such as the default max_matches value of 1000.\n\nFor instance, if there is a distributed table dist that refers to the remote table user, a client query `SELECT * FROM dist LIMIT 10,10` would be converted to `SELECT * FROM user LIMIT 0,1000` and sent to the remote table user. Once the distributed table receives the result, it will apply the LIMIT 10,10 and return the requested 10 documents.\n\n```sql\nSELECT * FROM dist LIMIT 10,10;\n```\n\nthe query will be converted to:\n\n```sql\nSELECT * FROM user LIMIT 0,1000\n```\n\nAdditionally, the value can specify options for each individual agent, such as:\n* [ha_strategy](../../Creating_a_cluster/Remote_nodes/Load_balancing.md#ha_strategy) - `random`, `roundrobin`, `nodeads`, `noerrors` (overrides the global `ha_strategy` setting for the particular agent)\n* `conn` - `pconn`, persistent (equivalent to setting `agent_persistent` at the table level)\n* `blackhole` `0`,`1` (identical to the [agent_blackhole](../../Creating_a_table/Creating_a_distributed_table/Remote_tables.md#agent_blackhole) setting for the agent)\n* `retry_count` an integer value (corresponding to [agent_retry_count](../../Creating_a_table/Creating_a_distributed_table/Remote_tables.md#agent_retry_count) , but the provided value will not be multiplied by the number of mirrors)\n\n```ini\nagent = address1:table-list[[ha_strategy=value, conn=value, blackhole=value]]\n```\n\nExample:\n\n```ini\n# config on box1\n# sharding a table over 3 servers\nagent = box2:9312:shard1\nagent = box3:9312:shard2\n\n# config on box2\n# sharding a table over 3 servers\nagent = box1:9312:shard2\nagent = box3:9312:shard3\n\n# config on box3\n# sharding a table over 3 servers\nagent = box1:9312:shard1\nagent = box2:9312:shard3\n\n# per agent options\nagent = box1:9312:shard1[ha_strategy=nodeads]\nagent = box2:9312:shard2[conn=pconn]\nagent = box2:9312:shard2[conn=pconn,ha_strategy=nodeads]\nagent = test:9312:any[blackhole=1]\nagent = test:9312|box2:9312|box3:9312:any2[retry_count=2]\nagent = test:9312|box2:9312:any2[retry_count=2,conn=pconn,ha_strategy=noerrors]\n```\n\nFor optimal performance, it's recommended to place remote tables that reside on the same server within the same record. For instance, instead of:\n```ini\nagent = remote:9312:idx1\nagent = remote:9312:idx2\n```\nyou should prefer:\n```ini\nagent = remote:9312:idx1,idx2\n```\n\n## agent_persistent\n\n```ini\nagent_persistent = remotebox:9312:index2\n```\n\nThe `agent_persistent` option allows you to persistently connect to an agent, meaning the connection will not be dropped after a query is executed. The syntax for this directive is the same as the `agent` directive. However, instead of opening a new connection to the agent for each query and then closing it, the master will keep a connection open and reuse it for subsequent queries. The maximum number of persistent connections per agent host is defined by the [persistent_connections_limit](../../Server_settings/Searchd.md#persistent_connections_limit) option in the searchd section.\n\nIt's important to note that the [persistent_connections_limit](../../Server_settings/Searchd.md#persistent_connections_limit) must be set to a value greater than 0 in order to use persistent agent connections. If it's not defined, it defaults to 0, and the `agent_persistent` directive will act the same as the `agent`directive.\n\nUsing persistent master-agent connections reduces TCP port pressure and saves time on connection handshakes, making it more efficient.\n\n## agent_blackhole\n\n```ini\nagent_blackhole = testbox:9312:testindex1,testindex2\n````\n\nThe `agent_blackhole` directive allows you to forward queries to remote agents without waiting for or processing their responses. This is useful for debugging or testing production clusters, as you can set up a separate debugging/testing instance and forward requests to it from the production master (aggregator) instance, without interfering with production work. The master searchd will attempt to connect to the blackhole agent and send queries as normal, but will not wait for or process any responses, and all network errors on the blackhole agents will be ignored. The format of the value is identical to that of the regular `agent` directive.\n\n## agent_connect_timeout\n\n```ini\nagent_connect_timeout = 300\n````\n\nThe `agent_connect_timeout` directive defines the timeout for connecting to remote agents. By default, the value is assumed to be in milliseconds, but can have [another suffix](../../Server_settings/Special_suffixes.md)). The default value is 1000 (1 second).\n\nWhen connecting to remote agents, `searchd` will wait for this amount of time at most to complete the connection successfully. If the timeout is reached but the connection has not been established, and `retries` are enabled, a retry will be initiated.\n\n## agent_query_timeout\n\n```ini\nagent_query_timeout = 10000 # our query can be long, allow up to 10 sec\n```\n\nThe `agent_query_timeout` sets the amount of time that searchd will wait for a remote agent to complete a query. The default value is 3000 milliseconds (3 seconds), but can be `suffixed` to indicate a different unit of time.\n\nAfter establishing a connection, `searchd` will wait for a maximum of agent_query_timeout for remote queries to complete. Note that this timeout is separate from the `agent_connection_timeout` and the total possible delay caused by a remote agent will be the sum of both values. If the agent_query_timeout is reached, the query will **not** be retried, instead, a warning will be produced.\n\nNote that behavior is also affected by [reset_network_timeout_on_packet](../../Server_settings/Searchd.md#reset_network_timeout_on_packet)\n\n## agent_retry_count\n\nThe `agent_retry_count` is an integer that specifies how many times Manticore will attempt to connect and query remote agents in a distributed table before reporting a fatal query error. It works similarly to `agent_retry_count` defined in the \"searchd\" section of the configuration file but applies specifically to the table.\n\n## mirror_retry_count\n\n`mirror_retry_count` serves the same purpose as `agent_retry_count`.  If both values are provided, `mirror_retry_count` will take precedence, and a warning will be raised.\n\n## Instance-wide options\n\nThe following options manage the overall behavior of remote agents and are specified in **the searchd section of the configuration file**. They set default values for the entire Manticore instance.\n\n* `agent_connect_timeout` - default value for the `agent_connect_timeout` parameter.\n* `agent_query_timeout` - default value for the `agent_query_timeout` parameter. This can also be overridden on a per-query basis using the same setting name in a distributed (network) table.\n* `agent_retry_count` is an integer that specifies the number of times Manticore will attempt to connect and query remote agents in a distributed table before reporting a fatal query error. The default value is 0 (i.e.\u00a0no retries). This value can also be specified on a per-query basis using the 'OPTION retry_count=XXX' clause. If a per-query option is provided, it will take precedence over the value specified in the config.\n\nNote, that if you use **agent mirrors** in the definition of your distributed table, the server will select a different mirror before each connection attempt according to the specified [ha_strategy](../../Creating_a_cluster/Remote_nodes/Load_balancing.md#ha_strategy) specified. In this case the [agent_retry_count](../../Creating_a_table/Creating_a_distributed_table/Remote_tables.md#agent_retry_count) will be aggregated for all mirrors in the set.\n\nFor example, if you have 10 mirrors and set `agent_retry_count=5`, he server will attempt up to 50 retries (assuming an average of 5 tries per every 10 mirrors). In case of the option `ha_strategy = roundrobin`, it will actually be exactly 5 tries per mirror.\n\nAt the same time, the value provided as the [retry_count](../../Searching/Options.md#retry_count) option in the `agent` definition serves as an absolute limit. In other words, the `[retry_count=2]` option in the agent definition means there will be a maximum of 2 tries, regardless of whether there is 1 or 10 mirrors in the line.\n\n### agent_retry_delay\n\nThe `agent_retry_delay` is an integer value that determines the amount of time, in milliseconds, that Manticore Search will wait before retrying to query a remote agent in case of a failure. This value can be specified either globally in the searchd configuration or on a per-query basis using the `OPTION retry_delay=XXX` clause. If both options are provided, the per-query option will take precedence over the global one. The default value is 500 milliseconds (0.5 seconds). This option is only relevant if agent_retry_count or the per-query `OPTION retry_count` are non-zero.\n\n### client_timeout\n\nThe `client_timeout` option sets the maximum waiting time between requests when using persistent connections. This value is expressed in seconds or with a time suffix. The default value is 5 minutes.\n\nExample:\n\n```ini\nclient_timeout = 1h\n```\n\n### hostname_lookup\n\nThe `hostname_lookup` option defines the strategy for renewing hostnames. By default, the IP addresses of agent host names are cached at server start to avoid excessive access to DNS. However, in some cases, the IP can change dynamically (e.g.\u00a0cloud hosting) and it may be desirable to not cache the IPs. Setting this option to `request` disables the caching and queries the DNS for each query. The IP addresses can also be manually renewed using the `FLUSH HOSTNAMES` command.\n\n### listen_tfo\n\nThe `listen_tfo` option allows for the use of the TCP_FASTOPEN flag for all listeners. By default, it is managed by the system, but it can be explicitly turned off by setting it to '0'.\n\nFor more information about the TCP Fast Open extension, please refer to [Wikipedia](https://en.wikipedia.org/wiki/TCP_Fast_Open).  In short, it allows to eliminate one TCP round-trip when establishing a connection.\n\nIn practice, using TFO can optimize the client-agent network efficiency, similar to when `agent_persistent`  is in use, but without holding active connections and without limitations on the maximum number of connections.\n\nMost modern operating systems support TFO. Linux (as one of the most progressive) has supported it since 2011, with kernels starting from 3.7 (for the server side). Windows has supported it since some builds of Windows 10. Other systems, such as FreeBSD and MacOS, are also in the game.\n\nFor Linux systems, the server checks the variable `/proc/sys/net/ipv4/tcp_fastopen` and behaves accordingly. Bit 0 manages the client side, while bit 1 rules the listeners. By default, the system has this parameter set to 1, i.e., clients are enabled and listeners are disabled.\n\n### persistent_connections_limit\n\n```ini\npersistent_connections_limit = 29 # assume that each host of agents has max_connections = 30 (or 29).\n```\n\nThe `persistent_connections_limit` option defines the maximum number of simultaneous persistent connections to remote persistent agents. This is an instance-wide setting and must be defined in the searchd configuration section. Each time a connection to an agent defined under `agent_persistent` is made, we attempt to reuse an existing connection (if one exists) or create a new connection and save it for future use. However, in some cases it may be necessary to limit the number of persistent connections. This directive defines the limit and affects the number of connections to each agent's host across all distributed tables.\n\nIt is recommended to set this value equal to or less than the [max_connections](../../Server_settings/Searchd.md#max_connections) option in the agent's configuration.\n\n## Distributed snippets creation\n\nA special case of a distributed table is a single local and multiple remotes, which is used exclusively for  [distributed snippets creation](../../Creating_a_table/Creating_a_distributed_table/Remote_tables.md#Distributed-snippets-creation), when snippets are sourced from files. In this case, the local table may act as a \"template\" table, providing settings for tokenization when building snippets.\n\n### snippets_file_prefix\n\n```ini\nsnippets_file_prefix = /mnt/common/server1/\n```\n\nThe `snippets_file_prefix` is an optional prefix that can be added to the local file names when generating snippets. The default value is the current working folder.\n\nTo learn more about distributed snippets creation, see  [CALL SNIPPETS](../../Searching/Highlighting.md).\n\n## Distributed percolate tables (DPQ tables)\n\nYou can create a distributed table from multiple [percolate](../../Creating_a_table/Local_tables/Percolate_table.md) tables. The syntax for constructing this type of table is the same as for other distributed tables, and can include multiple`local` tables as well as `agents`.\n\nFor DPQ, the operations of listing stored queries and searching through them (using [CALL PQ](../../Searching/Percolate_query.md#Performing-a-percolate-query-with-CALL-PQ)) are transparent and work as if all the tables were one single local table. However, data manipulation statements such as `insert`, `replace`, `truncate` are not available.\n\nIf you include a non-percolate table in the list of agents, the behavior will be undefined. If the incorrect agent has the same schema as the outer schema of the PQ table (id, query, tags, filters), it will not trigger an error when listing stored PQ rules, and may pollute the list of actual PQ rules stored in PQ tables with its own non-PQ strings. As a result, be cautious and aware of the confusion that this may cause. A`CALL PQ` to such an incorrect agent will trigger an error.\n\nFor more information on making queries to a distributed percolate table, see [making queries to a distribute percolate table](../../Searching/Percolate_query.md#Performing-a-percolate-query-with-CALL-PQ).\n<!-- proofread -->\n\n",
        "updated_at": 1768530797,
        "source_md5": "4b7b326ae8a823625bb50eba2203dc20"
    }
}