{
  "3a03952856d7381a66ac6cca65205e4c770b06b5626f966ba06fe381aa314a45": {
    "original": "Under certain occasions it might be hard or even impossible to guarantee that the incoming XMLpipe2 document bodies are in perfectly valid and conforming UTF-8 encoding. For instance, documents with national single-byte encodings could sneak into the stream. libexpat XML parser is fragile, meaning that it will stop processing in such cases. UTF8 fixup feature lets you avoid that. When fixup is enabled, Manticore will preprocess the incoming stream before passing it to the XML parser and replace invalid UTF-8 sequences with spaces.\n\nCODE_BLOCK_1\n\nExample of XML source without schema in configuration:\n\nCODE_BLOCK_2\n\nExample of XML source with schema in configuration:\n\nCODE_BLOCK_3\n\n<!-- proofread -->",
    "translations": {
      "chinese": "在某些情况下，可能很难甚至不可能保证传入的 XMLpipe2 文档主体是完全有效且符合规范的 UTF-8 编码。例如，带有国家单字节编码的文档可能会混入流中。libexpat XML 解析器比较脆弱，这意味着在这种情况下它会停止处理。UTF8 修复功能可以让你避免这种情况。当启用修复时，Manticore 会在将传入流传递给 XML 解析器之前进行预处理，并用空格替换无效的 UTF-8 序列。\n\nCODE_BLOCK_1\n\n配置中无模式的 XML 源示例：\n\nCODE_BLOCK_2\n\n配置中带模式的 XML 源示例：\n\nCODE_BLOCK_3\n\n<!-- proofread -->",
      "russian": "В определённых случаях может быть сложно или даже невозможно гарантировать, что входящие тела документов XMLpipe2 имеют идеально корректное и соответствующее кодирование UTF-8. Например, в поток могут попасть документы с национальными однобайтовыми кодировками. XML-парсер libexpat является хрупким, что означает, что он прекратит обработку в таких случаях. Функция исправления UTF8 позволяет избежать этого. Когда исправление включено, Manticore будет предварительно обрабатывать входящий поток перед передачей его XML-парсеру и заменять некорректные последовательности UTF-8 пробелами.\n\nCODE_BLOCK_1\n\nПример XML-источника без схемы в конфигурации:\n\nCODE_BLOCK_2\n\nПример XML-источника со схемой в конфигурации:\n\nCODE_BLOCK_3\n\n<!-- proofread -->"
    },
    "is_code_or_comment": false
  },
  "3eae6ab5205d9894ebdda68df8c9dcfea03ede96c2e1aa25ab1e67b94576de86": {
    "original": "# Fetching from XML streams\n\nThe `xmlpipe2` source type allows for passing custom full-text and attribute data to Manticore in a custom XML format, with the schema (i.e., set of fields and attributes) specified in either the XML stream itself or in the source settings.\n\n## Declaration of XML stream\n\nTo declare the XML stream, the `xmlpipe_command` directive is mandatory and contains the shell command that produces the XML stream to be indexed. This can be a file, but it can also be a program that generates XML content on-the-fly.\n\n## XML file format\n\nWhen indexing an xmlpipe2 source, the indexer runs the specified command, opens a pipe to its stdout, and expects a well-formed XML stream.\n\nHere's an example of what the XML stream data might look like:\n\nCODE_BLOCK_0\n\nArbitrary fields and attributes are allowed. They can also occur in the stream in arbitrary order within each document; the order is ignored. There is a restriction on the maximum field length; fields longer than 2 MB will be truncated to 2 MB (this limit can be changed in the source).\n\nThe schema, i.e., complete fields and attributes list, must be declared before any document can be parsed. This can be done either in the configuration file by using `xmlpipe_field` and `xmlpipe_attr_XXX` settings, or right in the stream using `<sphinx:schema>` element. `<sphinx:schema>` is optional. It is only allowed to occur as the very first sub-element in `<sphinx:docset>`. If there is no in-stream schema definition, settings from the configuration file will be used. Otherwise, stream settings take precedence. Note that the document id should be specified as a property  `id` of tag `<sphinx:document>` (e.g. `<sphinx:document id=\"1235\">`) and is supposed to be a unique-signed positive non-zero 64-bit integer.\n\nUnknown tags (which were not declared neither as fields nor as attributes) will be ignored with a warning. In the example above, `<misc>` will be ignored. All embedded tags and their attributes (such as `<strong>` in `<subject>` in the example above) will be silently ignored.\n\nSupport for incoming stream encodings depends on whether `iconv` is installed on the system. xmlpipe2 is parsed using the `libexpat` parser, which understands US-ASCII, ISO-8859-1, UTF-8, and a few UTF-16 variants natively. Manticore's `configure` script will also check for `libiconv` presence and utilize it to handle other encodings. `libexpat` also enforces the requirement to use the UTF-8 charset on the Manticore side because the parsed data it returns is always in UTF-8.\n\nXML elements (tags) recognized by xmlpipe2 (and their attributes where applicable) are:\n\n* `sphinx:docset` - Mandatory top-level element, denotes and contains the xmlpipe2 document set.\n\n* `sphinx:schema` -  Optional element, must either occur as the very first child of sphinx:docset or never occur at all. Declares the document schema and contains field and attribute declarations. If present, it overrides per-source settings from the configuration file.\n\n* `sphinx:field` - Optional element, child of sphinx:schema. Declares a full-text field. Known attributes are:\n\n    *   \"name\", specifies the XML element name that will be treated as a full-text field in the subsequent documents.\n\n    *   attr\", specifies whether to also index this field as a string. Possible value is \"string\".\n\n* `sphinx:attr` - Optional element, child of sphinx:schema. Declares an attribute. Known attributes are:\n\n    *   \"name\", specifies the element name that should be treated as an attribute in the subsequent documents.\n\n    *   \"type\", specifies the attribute type. Possible values are \"int\", \"bigint\", \"timestamp\", \"bool\", \"float\", \"multi\" and \"json\".\n\n    *   \"bits\", specifies the bit size for the \"int\" attribute type. Valid values are 1 to 32.\n\n    *   \"default\", specifies the default value for this attribute that should be used if the attribute's element is not present in the document.\n\n* `sphinx:document` - Mandatory element, must be a child of sphinx:docset. Contains arbitrary other elements with field and attribute values to be indexed, as declared either using sphinx:field and sphinx:attr elements or in the configuration file. The only known attribute is \"id\" that must contain the unique integer document ID.\n\n* `sphinx:killlist` - Optional element, child of sphinx:docset. Contains a number of \"id\" elements whose contents are document IDs to be put into a kill-list of the table. The kill-list is used in multi-table searches to suppress documents found in other tables of the search.\n\n## Data definition in source configuration\n\nIf the XML doesn't define a schema, the data types of tables elements must be defined in the source configuration.\n\n* `xmlpipe_field` -  declares a `text` field.\n\n* `xmlpipe_field_string` - declares a text field/string attribute. The column will be both indexed as a text field but also stored as a string attribute.\n\n* `xmlpipe_attr_uint` - declares an integer attribute\n\n* `xmlpipe_attr_timestamp` - declares a timestamp attribute\n\n* `xmlpipe_attr_bool` -  declares a boolean attribute\n\n* `xmlpipe_attr_float` - declares a float attribute\n\n* `xmlpipe_attr_bigint` - declares a big integer attribute\n\n* `xmlpipe_attr_multi` - declares a multi-value attribute with integers\n\n* `xmlpipe_attr_multi_64` - declares a multi-value attribute with 64-bit integers\n\n* `xmlpipe_attr_string` - declares a string attribute\n\n* `xmlpipe_attr_json` - declares a JSON attribute\n\n### Specific XML source settings\n\nIf `xmlpipe_fixup_utf8` is set it will enable Manticore-side UTF-8 validation and filtering to prevent XML parser from choking on non-UTF-8 documents. By default, this option is disabled.",
    "translations": {
      "chinese": "# 从 XML 流获取数据\n\n`xmlpipe2` 源类型允许以自定义 XML 格式向 Manticore 传递自定义全文和属性数据，模式（即字段和属性的集合）可以在 XML 流本身或源设置中指定。\n\n## XML 流的声明\n\n声明 XML 流时，`xmlpipe_command` 指令是必需的，包含生成要索引的 XML 流的 shell 命令。它可以是一个文件，也可以是一个动态生成 XML 内容的程序。\n\n## XML 文件格式\n\n在索引 xmlpipe2 源时，索引器运行指定的命令，打开其 stdout 的管道，并期望得到一个格式良好的 XML 流。\n\n下面是 XML 流数据可能的示例：\n\nCODE_BLOCK_0\n\n允许任意字段和属性。它们也可以在每个文档中以任意顺序出现；顺序会被忽略。字段长度有最大限制；超过 2 MB 的字段将被截断为 2 MB（此限制可在源中更改）。\n\n模式，即完整的字段和属性列表，必须在解析任何文档之前声明。可以通过配置文件中的 `xmlpipe_field` 和 `xmlpipe_attr_XXX` 设置声明，也可以直接在流中使用 `<sphinx:schema>` 元素声明。`<sphinx:schema>` 是可选的。它只允许作为 `<sphinx:docset>` 的第一个子元素出现。如果没有流内模式定义，将使用配置文件中的设置。否则，流内设置优先。注意，文档 id 应作为 `<sphinx:document>` 标签的属性 `id` 指定（例如 `<sphinx:document id=\"1235\">`），且应为唯一的带符号正非零 64 位整数。\n\n未知标签（既未声明为字段也未声明为属性）将被忽略并发出警告。在上述示例中，`<misc>` 会被忽略。所有嵌套标签及其属性（如示例中 `<subject>` 内的 `<strong>`）将被静默忽略。\n\n对输入流编码的支持取决于系统是否安装了 `iconv`。xmlpipe2 使用 `libexpat` 解析器解析，该解析器原生支持 US-ASCII、ISO-8859-1、UTF-8 及部分 UTF-16 变体。Manticore 的 `configure` 脚本也会检查 `libiconv` 是否存在，并利用它处理其他编码。`libexpat` 还强制要求 Manticore 端使用 UTF-8 字符集，因为它返回的解析数据始终是 UTF-8。\n\nxmlpipe2 识别的 XML 元素（标签）及其属性（如适用）包括：\n\n* `sphinx:docset` - 必需的顶级元素，表示并包含 xmlpipe2 文档集。\n\n* `sphinx:schema` - 可选元素，必须作为 sphinx:docset 的第一个子元素出现或完全不出现。声明文档模式，包含字段和属性声明。如果存在，覆盖配置文件中的每个源设置。\n\n* `sphinx:field` - 可选元素，sphinx:schema 的子元素。声明全文字段。已知属性有：\n\n    *   \"name\"，指定将在后续文档中作为全文字段处理的 XML 元素名称。\n\n    *   \"attr\"，指定是否也将此字段索引为字符串。可能的值是 \"string\"。\n\n* `sphinx:attr` - 可选元素，sphinx:schema 的子元素。声明属性。已知属性有：\n\n    *   \"name\"，指定应在后续文档中作为属性处理的元素名称。\n\n    *   \"type\"，指定属性类型。可能的值有 \"int\"、\"bigint\"、\"timestamp\"、\"bool\"、\"float\"、\"multi\" 和 \"json\"。\n\n    *   \"bits\"，指定 \"int\" 属性类型的位大小。有效值为 1 到 32。\n\n    *   \"default\"，指定如果文档中不存在该属性元素时应使用的默认值。\n\n* `sphinx:document` - 必需元素，必须是 sphinx:docset 的子元素。包含任意其他元素，这些元素包含要索引的字段和属性值，这些字段和属性通过 sphinx:field 和 sphinx:attr 元素或配置文件声明。唯一已知属性是 \"id\"，必须包含唯一的整数文档 ID。\n\n* `sphinx:killlist` - 可选元素，sphinx:docset 的子元素。包含多个 \"id\" 元素，其内容是要放入表的 kill-list 中的文档 ID。kill-list 用于多表搜索中抑制在其他搜索表中找到的文档。\n\n## 源配置中的数据定义\n\n如果 XML 未定义模式，表元素的数据类型必须在源配置中定义。\n\n* `xmlpipe_field` - 声明一个 `text` 字段。\n\n* `xmlpipe_field_string` - 声明一个文本字段/字符串属性。该列既作为文本字段索引，也作为字符串属性存储。\n\n* `xmlpipe_attr_uint` - 声明一个整数属性。\n\n* `xmlpipe_attr_timestamp` - 声明一个时间戳属性。\n\n* `xmlpipe_attr_bool` - 声明一个布尔属性。\n\n* `xmlpipe_attr_float` - 声明一个浮点属性。\n\n* `xmlpipe_attr_bigint` - 声明一个大整数属性。\n\n* `xmlpipe_attr_multi` - 声明一个多值整数属性。\n\n* `xmlpipe_attr_multi_64` - 声明一个多值 64 位整数属性。\n\n* `xmlpipe_attr_string` - 声明一个字符串属性。\n\n* `xmlpipe_attr_json` - 声明一个 JSON 属性。\n\n### 特定 XML 源设置\n\n如果设置了 `xmlpipe_fixup_utf8`，将启用 Manticore 端的 UTF-8 验证和过滤，以防止 XML 解析器因非 UTF-8 文档而崩溃。默认情况下，此选项是禁用的。",
      "russian": "# Получение данных из XML-потоков\n\nТип источника `xmlpipe2` позволяет передавать в Manticore пользовательские полнотекстовые и атрибутные данные в пользовательском XML-формате, при этом схема (т.е. набор полей и атрибутов) задаётся либо в самом XML-потоке, либо в настройках источника.\n\n## Объявление XML-потока\n\nДля объявления XML-потока обязательна директива `xmlpipe_command`, которая содержит shell-команду, генерирующую XML-поток для индексирования. Это может быть файл, а может быть и программа, которая генерирует XML-содержимое на лету.\n\n## Формат XML-файла\n\nПри индексировании источника xmlpipe2 индексатор запускает указанную команду, открывает канал к её stdout и ожидает корректно сформированный XML-поток.\n\nВот пример того, как может выглядеть XML-поток данных:\n\nCODE_BLOCK_0\n\nРазрешены произвольные поля и атрибуты. Они также могут встречаться в потоке в произвольном порядке внутри каждого документа; порядок игнорируется. Существует ограничение на максимальную длину поля; поля длиной более 2 МБ будут усечены до 2 МБ (этот лимит можно изменить в настройках источника).\n\nСхема, т.е. полный список полей и атрибутов, должна быть объявлена до того, как можно будет разобрать какой-либо документ. Это можно сделать либо в конфигурационном файле с помощью настроек `xmlpipe_field` и `xmlpipe_attr_XXX`, либо прямо в потоке с помощью элемента `<sphinx:schema>`. Элемент `<sphinx:schema>` является необязательным. Он допускается только как самый первый дочерний элемент в `<sphinx:docset>`. Если определение схемы в потоке отсутствует, будут использованы настройки из конфигурационного файла. В противном случае приоритет имеют настройки из потока. Обратите внимание, что идентификатор документа должен быть указан как свойство `id` тега `<sphinx:document>` (например, `<sphinx:document id=\"1235\">`) и должен быть уникальным положительным 64-битным целым числом, не равным нулю.\n\nНеизвестные теги (которые не были объявлены ни как поля, ни как атрибуты) будут проигнорированы с предупреждением. В приведённом выше примере тег `<misc>` будет проигнорирован. Все вложенные теги и их атрибуты (например, `<strong>` в `<subject>` в примере выше) будут молча проигнорированы.\n\nПоддержка кодировок входящего потока зависит от наличия `iconv` в системе. xmlpipe2 парсится с помощью парсера `libexpat`, который нативно понимает US-ASCII, ISO-8859-1, UTF-8 и несколько вариантов UTF-16. Скрипт `configure` Manticore также проверит наличие `libiconv` и использует его для обработки других кодировок. `libexpat` также накладывает требование использовать кодировку UTF-8 на стороне Manticore, поскольку возвращаемые им данные всегда в UTF-8.\n\nXML-элементы (теги), распознаваемые xmlpipe2 (и их атрибуты, где применимо):\n\n* `sphinx:docset` — обязательный элемент верхнего уровня, обозначает и содержит набор документов xmlpipe2.\n\n* `sphinx:schema` — необязательный элемент, должен либо быть самым первым дочерним элементом sphinx:docset, либо отсутствовать вовсе. Объявляет схему документа и содержит объявления полей и атрибутов. Если присутствует, переопределяет настройки источника из конфигурационного файла.\n\n* `sphinx:field` — необязательный элемент, дочерний для sphinx:schema. Объявляет полнотекстовое поле. Известные атрибуты:\n\n    * \"name\" — задаёт имя XML-элемента, который будет рассматриваться как полнотекстовое поле в последующих документах.\n\n    * \"attr\" — указывает, индексировать ли это поле также как строку. Возможное значение — \"string\".\n\n* `sphinx:attr` — необязательный элемент, дочерний для sphinx:schema. Объявляет атрибут. Известные атрибуты:\n\n    * \"name\" — задаёт имя элемента, который должен рассматриваться как атрибут в последующих документах.\n\n    * \"type\" — задаёт тип атрибута. Возможные значения: \"int\", \"bigint\", \"timestamp\", \"bool\", \"float\", \"multi\" и \"json\".\n\n    * \"bits\" — задаёт размер в битах для атрибута типа \"int\". Допустимые значения — от 1 до 32.\n\n    * \"default\" — задаёт значение по умолчанию для этого атрибута, которое будет использоваться, если элемент атрибута отсутствует в документе.\n\n* `sphinx:document` — обязательный элемент, должен быть дочерним для sphinx:docset. Содержит произвольные другие элементы с значениями полей и атрибутов для индексирования, объявленных либо с помощью элементов sphinx:field и sphinx:attr, либо в конфигурационном файле. Единственный известный атрибут — \"id\", который должен содержать уникальный целочисленный идентификатор документа.\n\n* `sphinx:killlist` — необязательный элемент, дочерний для sphinx:docset. Содержит несколько элементов \"id\", содержимое которых — идентификаторы документов, которые должны быть помещены в kill-лист таблицы. Kill-лист используется в поисках по нескольким таблицам для подавления документов, найденных в других таблицах поиска.\n\n## Определение данных в конфигурации источника\n\nЕсли XML не определяет схему, типы данных элементов таблиц должны быть определены в конфигурации источника.\n\n* `xmlpipe_field` — объявляет поле типа `text`.\n\n* `xmlpipe_field_string` — объявляет текстовое поле/строковый атрибут. Колонка будет индексироваться как текстовое поле и одновременно храниться как строковый атрибут.\n\n* `xmlpipe_attr_uint` — объявляет целочисленный атрибут\n\n* `xmlpipe_attr_timestamp` — объявляет атрибут временной метки\n\n* `xmlpipe_attr_bool` — объявляет булев атрибут\n\n* `xmlpipe_attr_float` — объявляет атрибут с плавающей точкой\n\n* `xmlpipe_attr_bigint` — объявляет атрибут большого целого числа\n\n* `xmlpipe_attr_multi` — объявляет мульти-значный атрибут с целыми числами\n\n* `xmlpipe_attr_multi_64` — объявляет мульти-значный атрибут с 64-битными целыми числами\n\n* `xmlpipe_attr_string` — объявляет строковый атрибут\n\n* `xmlpipe_attr_json` — объявляет JSON-атрибут\n\n### Специфические настройки XML-источника\n\nЕсли установлено `xmlpipe_fixup_utf8`, будет включена проверка и фильтрация UTF-8 на стороне Manticore, чтобы предотвратить сбои XML-парсера при обработке документов, не являющихся UTF-8. По умолчанию эта опция отключена."
    },
    "is_code_or_comment": false
  }
}
