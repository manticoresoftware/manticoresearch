{
    "03b51fc9d36b793e19d7c7bfb4258b70c27ab2a1b28857347f35ddb55f341667": {
        "original": "# Main+delta schema\n\n<!-- example maindelta -->\nIn many situations, the total dataset is too large to be frequently rebuilt from scratch, while the number of new records remains relatively small. For example, a forum may have 1,000,000 archived posts but only receive 1,000 new posts per day.\n\nIn such cases, implementing \"live\" (nearly real-time) table updates can be achieved using a \"main+delta\" scheme.\n\nThe concept involves setting up two sources and two tables, with one \"main\" table for data that rarely changes (if ever), and one \"delta\" table for new documents. In the example, the 1,000,000 archived posts would be stored in the main table, while the 1,000 new daily posts would be placed in the delta table. The delta table can then be rebuilt frequently, making the documents available for searching within seconds or minutes. Determining which documents belong to which table and rebuilding the main table can be fully automated. One approach is to create a counter table that tracks the ID used to split the documents and update it whenever the main table is rebuilt.\n\nUsing a timestamp column as the split variable is more effective than using the ID since timestamps can track not only new documents but also modified ones.\n\nFor datasets that may contain modified or deleted documents, the delta table should provide a list of affected documents, ensuring they are suppressed and excluded from search queries. This is accomplished using a feature called Kill Lists. The document IDs to be killed can be specified in an auxiliary query defined by [sql_query_killlist](../../Data_creation_and_modification/Adding_data_from_external_storages/Adding_data_to_tables/Killlist_in_plain_tables.md#Table-kill-list). The delta table must indicate the target tables for which the kill lists will be applied using the [killlist_target](../../Data_creation_and_modification/Adding_data_from_external_storages/Adding_data_to_tables/Killlist_in_plain_tables.md#killlist_target) directive. The impact of kill lists is permanent on the target table, meaning that even if a search is performed without the delta table, the suppressed documents will not appear in the search results.\n\nNotice how we're overriding `sql_query_pre` in the delta source. We must explicitly include this override. If we don't, the `REPLACE` query would be executed during the delta source's build as well, effectively rendering it useless.\n\n<!-- request Example -->\nCODE_BLOCK_0\n\n<!-- end -->\n\n\n<!-- proofread -->\n\n",
        "translations": {
            "chinese": "# \u4e3b+\u589e\u91cf\u6a21\u5f0f\n\n<!-- example maindelta -->\n\u5728\u8bb8\u591a\u60c5\u51b5\u4e0b\uff0c\u5b8c\u6574\u7684\u6570\u636e\u96c6\u592a\u5927\uff0c\u65e0\u6cd5\u9891\u7e41\u4ece\u5934\u91cd\u5efa\uff0c\u800c\u65b0\u8bb0\u5f55\u7684\u6570\u91cf\u76f8\u5bf9\u8f83\u5c11\u3002\u4f8b\u5982\uff0c\u4e00\u4e2a\u8bba\u575b\u53ef\u80fd\u6709 1,000,000 \u6761\u5f52\u6863\u5e16\u5b50\uff0c\u4f46\u6bcf\u5929\u53ea\u6536\u5230 1,000 \u6761\u65b0\u5e16\u5b50\u3002\n\n\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u4f7f\u7528\u201c\u4e3b+\u589e\u91cf\u201d\u6a21\u5f0f\u5b9e\u73b0\u201c\u5b9e\u65f6\u201d\uff08\u8fd1\u5b9e\u65f6\uff09\u8868\u66f4\u65b0\u3002\n\n\u8be5\u6982\u5ff5\u6d89\u53ca\u8bbe\u7f6e\u4e24\u4e2a\u6570\u636e\u6e90\u548c\u4e24\u5f20\u8868\uff0c\u4e00\u5f20\u201c\u4e3b\u201d\u8868\u7528\u4e8e\u5b58\u50a8\u5f88\u5c11\u66f4\u6539\uff08\u5982\u679c\u6709\u7684\u8bdd\uff09\u7684\u6570\u636e\uff0c\u53e6\u4e00\u5f20\u201c\u589e\u91cf\u201d\u8868\u7528\u4e8e\u5b58\u653e\u65b0\u6587\u6863\u3002\u5728\u793a\u4f8b\u4e2d\uff0c1,000,000 \u6761\u5f52\u6863\u5e16\u5b50\u5b58\u50a8\u5728\u4e3b\u8868\u4e2d\uff0c\u800c\u6bcf\u5929\u65b0\u589e\u7684 1,000 \u6761\u5e16\u5b50\u5219\u5b58\u653e\u5728\u589e\u91cf\u8868\u4e2d\u3002\u589e\u91cf\u8868\u53ef\u4ee5\u9891\u7e41\u91cd\u5efa\uff0c\u4f7f\u6587\u6863\u80fd\u5728\u51e0\u79d2\u6216\u51e0\u5206\u949f\u5185\u53ef\u4f9b\u641c\u7d22\u3002\u786e\u5b9a\u6587\u6863\u5c5e\u4e8e\u54ea\u4e2a\u8868\u5e76\u91cd\u5efa\u4e3b\u8868\u53ef\u4ee5\u5b8c\u5168\u81ea\u52a8\u5316\u3002\u4e00\u79cd\u65b9\u6cd5\u662f\u521b\u5efa\u4e00\u4e2a\u8ba1\u6570\u8868\uff0c\u7528\u4e8e\u8ddf\u8e2a\u7528\u4e8e\u5206\u5272\u6587\u6863\u7684 ID\uff0c\u5e76\u5728\u91cd\u5efa\u4e3b\u8868\u65f6\u66f4\u65b0\u5b83\u3002\n\n\u4f7f\u7528\u65f6\u95f4\u6233\u5217\u4f5c\u4e3a\u5206\u5272\u53d8\u91cf\u6bd4\u4f7f\u7528 ID \u66f4\u6709\u6548\uff0c\u56e0\u4e3a\u65f6\u95f4\u6233\u4e0d\u4ec5\u80fd\u8ffd\u8e2a\u65b0\u6587\u6863\uff0c\u8fd8\u80fd\u8ffd\u8e2a\u88ab\u4fee\u6539\u7684\u6587\u6863\u3002\n\n\u5bf9\u4e8e\u53ef\u80fd\u5305\u542b\u88ab\u4fee\u6539\u6216\u5220\u9664\u6587\u6863\u7684\u6570\u636e\u96c6\uff0c\u589e\u91cf\u8868\u5e94\u63d0\u4f9b\u53d7\u5f71\u54cd\u6587\u6863\u7684\u5217\u8868\uff0c\u786e\u4fdd\u8fd9\u4e9b\u6587\u6863\u88ab\u5c4f\u853d\u5e76\u4ece\u641c\u7d22\u67e5\u8be2\u4e2d\u6392\u9664\u3002\u8fd9\u662f\u901a\u8fc7\u4e00\u4e2a\u79f0\u4e3a Kill Lists \u7684\u529f\u80fd\u5b8c\u6210\u7684\u3002\u8981\u5c4f\u853d\u7684\u6587\u6863 ID \u53ef\u4ee5\u5728\u4e00\u4e2a\u7531 [sql_query_killlist](../../Data_creation_and_modification/Adding_data_from_external_storages/Adding_data_to_tables/Killlist_in_plain_tables.md#Table-kill-list) \u5b9a\u4e49\u7684\u8f85\u52a9\u67e5\u8be2\u4e2d\u6307\u5b9a\u3002\u589e\u91cf\u8868\u5fc5\u987b\u4f7f\u7528 [killlist_target](../../Data_creation_and_modification/Adding_data_from_external_storages/Adding_data_to_tables/Killlist_in_plain_tables.md#killlist_target) \u6307\u4ee4\u6307\u660e\u8981\u5e94\u7528 Kill Lists \u7684\u76ee\u6807\u8868\u3002Kill Lists \u5bf9\u76ee\u6807\u8868\u7684\u5f71\u54cd\u662f\u6c38\u4e45\u6027\u7684\uff0c\u610f\u5473\u7740\u5373\u4f7f\u5728\u6ca1\u6709\u589e\u91cf\u8868\u7684\u641c\u7d22\u4e2d\uff0c\u88ab\u5c4f\u853d\u7684\u6587\u6863\u4e5f\u4e0d\u4f1a\u51fa\u73b0\u5728\u641c\u7d22\u7ed3\u679c\u4e2d\u3002\n\n\u6ce8\u610f\u6211\u4eec\u5728\u589e\u91cf\u6570\u636e\u6e90\u4e2d\u8986\u76d6\u4e86 `sql_query_pre`\uff0c\u5fc5\u987b\u660e\u786e\u5305\u542b\u8be5\u8986\u76d6\u3002\u5982\u679c\u4e0d\u8fd9\u6837\u505a\uff0c`REPLACE` \u67e5\u8be2\u4e5f\u4f1a\u5728\u589e\u91cf\u6570\u636e\u6e90\u7684\u6784\u5efa\u8fc7\u7a0b\u4e2d\u6267\u884c\uff0c\u4ece\u800c\u4f7f\u5176\u5931\u6548\u3002\n\n<!-- request Example -->\nCODE_BLOCK_0\n\n<!-- end -->\n\n\n<!-- proofread -->\n\n",
            "russian": "# \u041e\u0441\u043d\u043e\u0432\u043d\u0430\u044f+\u0434\u0435\u043b\u044c\u0442\u0430 \u0441\u0445\u0435\u043c\u0430\n\n<!-- example maindelta -->\n\u0412\u043e \u043c\u043d\u043e\u0433\u0438\u0445 \u0441\u043b\u0443\u0447\u0430\u044f\u0445 \u043e\u0431\u0449\u0438\u0439 \u043d\u0430\u0431\u043e\u0440 \u0434\u0430\u043d\u043d\u044b\u0445 \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0432\u0435\u043b\u0438\u043a, \u0447\u0442\u043e\u0431\u044b \u0435\u0433\u043e \u0447\u0430\u0441\u0442\u043e \u043f\u0435\u0440\u0435\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0442\u044c \u0441 \u043d\u0443\u043b\u044f, \u0432 \u0442\u043e \u0432\u0440\u0435\u043c\u044f \u043a\u0430\u043a \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043d\u043e\u0432\u044b\u0445 \u0437\u0430\u043f\u0438\u0441\u0435\u0439 \u043e\u0441\u0442\u0430\u0435\u0442\u0441\u044f \u043e\u0442\u043d\u043e\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u043d\u0435\u0431\u043e\u043b\u044c\u0448\u0438\u043c. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043d\u0430 \u0444\u043e\u0440\u0443\u043c\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c 1 000 000 \u0430\u0440\u0445\u0438\u0432\u043d\u044b\u0445 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439, \u043d\u043e \u043f\u0440\u0438 \u044d\u0442\u043e\u043c \u043f\u043e\u0441\u0442\u0443\u043f\u0430\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e 1 000 \u043d\u043e\u0432\u044b\u0445 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u0432 \u0434\u0435\u043d\u044c.\n\n\u0412 \u0442\u0430\u043a\u0438\u0445 \u0441\u043b\u0443\u0447\u0430\u044f\u0445 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \"\u0436\u0438\u0432\u044b\u0445\" (\u043f\u043e\u0447\u0442\u0438 \u0432 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u043c \u0432\u0440\u0435\u043c\u0435\u043d\u0438) \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439 \u0442\u0430\u0431\u043b\u0438\u0446 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0434\u043e\u0441\u0442\u0438\u0433\u043d\u0443\u0442\u0430 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u0441\u0445\u0435\u043c\u044b \"\u043e\u0441\u043d\u043e\u0432\u043d\u0430\u044f+\u0434\u0435\u043b\u044c\u0442\u0430\".\n\n\u0418\u0434\u0435\u044f \u0437\u0430\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f \u0432 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u0434\u0432\u0443\u0445 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u043e\u0432 \u0438 \u0434\u0432\u0443\u0445 \u0442\u0430\u0431\u043b\u0438\u0446: \u043e\u0434\u043d\u043e\u0439 \"\u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439\" \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0434\u043b\u044f \u0434\u0430\u043d\u043d\u044b\u0445, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0440\u0435\u0434\u043a\u043e \u0438\u0437\u043c\u0435\u043d\u044f\u044e\u0442\u0441\u044f (\u0435\u0441\u043b\u0438 \u0432\u043e\u043e\u0431\u0449\u0435 \u0438\u0437\u043c\u0435\u043d\u044f\u044e\u0442\u0441\u044f), \u0438 \u043e\u0434\u043d\u043e\u0439 \"\u0434\u0435\u043b\u044c\u0442\u0430\" \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0434\u043b\u044f \u043d\u043e\u0432\u044b\u0445 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432. \u0412 \u043f\u0440\u0438\u043c\u0435\u0440\u0435, 1 000 000 \u0430\u0440\u0445\u0438\u0432\u043d\u044b\u0445 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u0445\u0440\u0430\u043d\u044f\u0442\u0441\u044f \u0432 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435, \u0430 1 000 \u043d\u043e\u0432\u044b\u0445 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u0432 \u0434\u0435\u043d\u044c \u043f\u043e\u043c\u0435\u0449\u0430\u044e\u0442\u0441\u044f \u0432 \u0434\u0435\u043b\u044c\u0442\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u0443. \u0414\u0435\u043b\u044c\u0442\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u043c\u043e\u0436\u043d\u043e \u0437\u0430\u0442\u0435\u043c \u0447\u0430\u0441\u0442\u043e \u043f\u0435\u0440\u0435\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0442\u044c, \u0434\u0435\u043b\u0430\u044f \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u043c\u0438 \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430 \u0432 \u0442\u0435\u0447\u0435\u043d\u0438\u0435 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0441\u0435\u043a\u0443\u043d\u0434 \u0438\u043b\u0438 \u043c\u0438\u043d\u0443\u0442. \u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435, \u043a\u0430\u043a\u0438\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b \u043e\u0442\u043d\u043e\u0441\u044f\u0442\u0441\u044f \u043a \u043a\u0430\u043a\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435, \u0438 \u043f\u0435\u0440\u0435\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u044b. \u041e\u0434\u0438\u043d \u0438\u0437 \u043f\u043e\u0434\u0445\u043e\u0434\u043e\u0432 \u2014 \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u043e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u0435\u0442 ID, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0439 \u0434\u043b\u044f \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432, \u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u044f\u0442\u044c \u0435\u0451 \u043a\u0430\u0436\u0434\u044b\u0439 \u0440\u0430\u0437 \u043f\u0440\u0438 \u043f\u0435\u0440\u0435\u0441\u0442\u0440\u043e\u0439\u043a\u0435 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b.\n\n\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u0442\u043e\u043b\u0431\u0446\u0430 \u0441 \u043e\u0442\u043c\u0435\u0442\u043a\u043e\u0439 \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0431\u043e\u043b\u0435\u0435 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e, \u0447\u0435\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 ID, \u043f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443 \u043e\u0442\u043c\u0435\u0442\u043a\u0438 \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u044e\u0442 \u043e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u0442\u044c \u043d\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u043e\u0432\u044b\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b, \u043d\u043e \u0438 \u0438\u0437\u043c\u0435\u043d\u0451\u043d\u043d\u044b\u0435.\n\n\u0414\u043b\u044f \u043d\u0430\u0431\u043e\u0440\u043e\u0432 \u0434\u0430\u043d\u043d\u044b\u0445, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0433\u0443\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0451\u043d\u043d\u044b\u0435 \u0438\u043b\u0438 \u0443\u0434\u0430\u043b\u0451\u043d\u043d\u044b\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b, \u0434\u0435\u043b\u044c\u0442\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0437\u0430\u0442\u0440\u043e\u043d\u0443\u0442\u044b\u0445 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432, \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u0440\u0443\u044f \u0438\u0445 \u043f\u043e\u0434\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0438 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0438\u0437 \u043f\u043e\u0438\u0441\u043a\u043e\u0432\u044b\u0445 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432. \u042d\u0442\u043e \u0434\u043e\u0441\u0442\u0438\u0433\u0430\u0435\u0442\u0441\u044f \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u0444\u0443\u043d\u043a\u0446\u0438\u0438, \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u043c\u043e\u0439 Kill Lists. ID \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432 \u0434\u043b\u044f \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u043c\u043e\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0432 \u0432\u0441\u043f\u043e\u043c\u043e\u0433\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u043c \u0437\u0430\u043f\u0440\u043e\u0441\u0435, \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u043e\u043c \u0447\u0435\u0440\u0435\u0437 [sql_query_killlist](../../Data_creation_and_modification/Adding_data_from_external_storages/Adding_data_to_tables/Killlist_in_plain_tables.md#Table-kill-list). \u0414\u0435\u043b\u044c\u0442\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0446\u0435\u043b\u0435\u0432\u044b\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b, \u0434\u043b\u044f \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0431\u0443\u0434\u0443\u0442 \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0442\u044c\u0441\u044f kill lists, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \u0434\u0438\u0440\u0435\u043a\u0442\u0438\u0432\u0443 [killlist_target](../../Data_creation_and_modification/Adding_data_from_external_storages/Adding_data_to_tables/Killlist_in_plain_tables.md#killlist_target). \u0412\u043b\u0438\u044f\u043d\u0438\u0435 kill lists \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u044b\u043c \u0434\u043b\u044f \u0446\u0435\u043b\u0435\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b, \u0442\u043e \u0435\u0441\u0442\u044c \u0434\u0430\u0436\u0435 \u0435\u0441\u043b\u0438 \u043f\u043e\u0438\u0441\u043a \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0431\u0435\u0437 \u0434\u0435\u043b\u044c\u0442\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u044b, \u043f\u043e\u0434\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b \u043d\u0435 \u043f\u043e\u044f\u0432\u044f\u0442\u0441\u044f \u0432 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430\u0445 \u043f\u043e\u0438\u0441\u043a\u0430.\n\n\u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435, \u0447\u0442\u043e \u043c\u044b \u043f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u043c `sql_query_pre` \u0432 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0435 \u0434\u0435\u043b\u044c\u0442\u0430. \u041c\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u044f\u0432\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u044d\u0442\u043e \u043f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435. \u0415\u0441\u043b\u0438 \u043c\u044b \u044d\u0442\u043e\u0433\u043e \u043d\u0435 \u0441\u0434\u0435\u043b\u0430\u0435\u043c, \u0437\u0430\u043f\u0440\u043e\u0441 `REPLACE` \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d \u0442\u0430\u043a\u0436\u0435 \u043f\u0440\u0438 \u043f\u043e\u0441\u0442\u0440\u043e\u0435\u043d\u0438\u0438 \u0434\u0435\u043b\u044c\u0442\u0430 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0430, \u0444\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0434\u0435\u043b\u0430\u044f \u0435\u0433\u043e \u0431\u0435\u0441\u043f\u043e\u043b\u0435\u0437\u043d\u044b\u043c.\n\n<!-- request Example -->\nCODE_BLOCK_0\n\n<!-- end -->\n\n\n<!-- proofread -->"
        },
        "is_code_or_comment": false,
        "model": "openai:gpt-4.1-mini",
        "updated_at": 1766339877
    },
    "e252cab967cb91444d96658e8d56986d427eedb53f441bf3734b7805a0035b6e": {
        "original": "# Main+delta schema\n\n<!-- example maindelta -->\nIn many situations, the total dataset is too large to be frequently rebuilt from scratch, while the number of new records remains relatively small. For example, a forum may have 1,000,000 archived posts but only receive 1,000 new posts per day.\n\nIn such cases, implementing \"live\" (nearly real-time) table updates can be achieved using a \"main+delta\" scheme.\n\nThe concept involves setting up two sources and two tables, with one \"main\" table for data that rarely changes (if ever), and one \"delta\" table for new documents. In the example, the 1,000,000 archived posts would be stored in the main table, while the 1,000 new daily posts would be placed in the delta table. The delta table can then be rebuilt frequently, making the documents available for searching within seconds or minutes. Determining which documents belong to which table and rebuilding the main table can be fully automated. One approach is to create a counter table that tracks the ID used to split the documents and update it whenever the main table is rebuilt.\n\nUsing a timestamp column as the split variable is more effective than using the ID since timestamps can track not only new documents but also modified ones.\n\nFor datasets that may contain modified or deleted documents, the delta table should provide a list of affected documents, ensuring they are suppressed and excluded from search queries. This is accomplished using a feature called Kill Lists. The document IDs to be killed can be specified in an auxiliary query defined by [sql_query_killlist](../../Data_creation_and_modification/Adding_data_from_external_storages/Adding_data_to_tables/Killlist_in_plain_tables.md#Table-kill-list). The delta table must indicate the target tables for which the kill lists will be applied using the [killlist_target](../../Data_creation_and_modification/Adding_data_from_external_storages/Adding_data_to_tables/Killlist_in_plain_tables.md#killlist_target) directive. The impact of kill lists is permanent on the target table, meaning that even if a search is performed without the delta table, the suppressed documents will not appear in the search results.\n\nNotice how we're overriding `sql_query_pre` in the delta source. We must explicitly include this override. If we don't, the `REPLACE` query would be executed during the delta source's build as well, effectively rendering it useless.\n\n<!-- request Example -->\nCODE_BLOCK_0\n\n<!-- end -->\n\n<!-- proofread -->\n\n",
        "translations": {
            "chinese": "# \u4e3b\u589e\u91cf\u6a21\u5f0f\n\n<!-- \u793a\u4f8b\u4e3b\u589e\u91cf -->\n\u5728\u8bb8\u591a\u60c5\u51b5\u4e0b\uff0c\u6574\u4e2a\u6570\u636e\u96c6\u592a\u5927\uff0c\u65e0\u6cd5\u9891\u7e41\u4ece\u5934\u91cd\u5efa\uff0c\u800c\u65b0\u8bb0\u5f55\u7684\u6570\u91cf\u76f8\u5bf9\u8f83\u5c0f\u3002\u4f8b\u5982\uff0c\u4e00\u4e2a\u8bba\u575b\u53ef\u80fd\u67091,000,000\u6761\u5b58\u6863\u5e16\u5b50\uff0c\u4f46\u6bcf\u5929\u53ea\u6536\u52301,000\u6761\u65b0\u5e16\u5b50\u3002\n\n\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u4f7f\u7528\u201c\u4e3b\u589e\u91cf\u201d\u65b9\u6848\u6765\u5b9e\u73b0\u201c\u5b9e\u65f6\u201d\uff08\u8fd1\u4e4e\u5b9e\u65f6\uff09\u7684\u8868\u66f4\u65b0\u3002\n\n\u8be5\u65b9\u6848\u6d89\u53ca\u8bbe\u7f6e\u4e24\u4e2a\u6570\u636e\u6e90\u548c\u4e24\u4e2a\u8868\uff0c\u4e00\u4e2a\u201c\u4e3b\u201d\u8868\u7528\u4e8e\u5b58\u50a8\u5f88\u5c11\u53d8\u5316\uff08\u5982\u679c\u6709\u7684\u8bdd\uff09\u7684\u6570\u636e\uff0c\u4e00\u4e2a\u201c\u589e\u91cf\u201d\u8868\u7528\u4e8e\u5b58\u50a8\u65b0\u6587\u6863\u3002\u5728\u793a\u4f8b\u4e2d\uff0c1,000,000\u6761\u5b58\u6863\u5e16\u5b50\u5c06\u5b58\u50a8\u5728\u4e3b\u8868\u4e2d\uff0c\u800c\u6bcf\u5929\u76841,000\u6761\u65b0\u5e16\u5b50\u5c06\u653e\u5728\u589e\u91cf\u8868\u4e2d\u3002\u589e\u91cf\u8868\u53ef\u4ee5\u9891\u7e41\u91cd\u5efa\uff0c\u4f7f\u6587\u6863\u5728\u51e0\u79d2\u6216\u51e0\u5206\u949f\u5185\u53ef\u4f9b\u641c\u7d22\u3002\u786e\u5b9a\u54ea\u4e9b\u6587\u6863\u5c5e\u4e8e\u54ea\u4e2a\u8868\u4ee5\u53ca\u91cd\u5efa\u4e3b\u8868\u53ef\u4ee5\u5b8c\u5168\u81ea\u52a8\u5316\u3002\u4e00\u79cd\u65b9\u6cd5\u662f\u521b\u5efa\u4e00\u4e2a\u8ba1\u6570\u5668\u8868\u6765\u8ddf\u8e2a\u7528\u4e8e\u62c6\u5206\u6587\u6863\u7684ID\uff0c\u5e76\u5728\u91cd\u5efa\u4e3b\u8868\u65f6\u66f4\u65b0\u5b83\u3002\n\n\u4f7f\u7528\u65f6\u95f4\u6233\u5217\u4f5c\u4e3a\u62c6\u5206\u53d8\u91cf\u6bd4\u4f7f\u7528ID\u66f4\u6709\u6548\uff0c\u56e0\u4e3a\u65f6\u95f4\u6233\u4e0d\u4ec5\u53ef\u4ee5\u8ddf\u8e2a\u65b0\u6587\u6863\uff0c\u8fd8\u53ef\u4ee5\u8ddf\u8e2a\u4fee\u6539\u8fc7\u7684\u6587\u6863\u3002\n\n\u5bf9\u4e8e\u53ef\u80fd\u5305\u542b\u4fee\u6539\u6216\u5220\u9664\u6587\u6863\u7684\u6570\u636e\u96c6\uff0c\u589e\u91cf\u8868\u5e94\u63d0\u4f9b\u53d7\u5f71\u54cd\u6587\u6863\u7684\u5217\u8868\uff0c\u786e\u4fdd\u5b83\u4eec\u88ab\u6291\u5236\u5e76\u4ece\u641c\u7d22\u67e5\u8be2\u4e2d\u6392\u9664\u3002\u8fd9\u901a\u8fc7\u4f7f\u7528\u540d\u4e3aKill Lists\u7684\u529f\u80fd\u6765\u5b9e\u73b0\u3002\u8981\u88ab\u6740\u6b7b\u7684\u6587\u6863ID\u53ef\u4ee5\u5728\u7531[sql_query_killlist](../../Data_creation_and_modification/Adding_data_from_external_storages/Adding_data_to_tables/Killlist_in_plain_tables.md#Table-kill-list)\u5b9a\u4e49\u7684\u8f85\u52a9\u67e5\u8be2\u4e2d\u6307\u5b9a\u3002\u589e\u91cf\u8868\u5fc5\u987b\u4f7f\u7528[killlist_target](../../Data_creation_and_modification/Adding_data_from_external_storages/Adding_data_to_tables/Killlist_in_plain_tables.md#killlist_target)\u6307\u4ee4\u6765\u6307\u793a\u5c06\u5e94\u7528Kill Lists\u7684\u76ee\u6807\u8868\u3002Kill Lists\u5bf9\u76ee\u6807\u8868\u7684\u5f71\u54cd\u662f\u6c38\u4e45\u6027\u7684\uff0c\u8fd9\u610f\u5473\u7740\u5373\u4f7f\u5728\u6ca1\u6709\u589e\u91cf\u8868\u7684\u60c5\u51b5\u4e0b\u6267\u884c\u641c\u7d22\uff0c\u88ab\u6291\u5236\u7684\u6587\u6863\u4e5f\u4e0d\u4f1a\u51fa\u73b0\u5728\u641c\u7d22\u7ed3\u679c\u4e2d\u3002\n\n\u6ce8\u610f\u6211\u4eec\u5982\u4f55\u5728\u589e\u91cf\u6e90\u4e2d\u8986\u76d6`sql_query_pre`\u3002\u6211\u4eec\u5fc5\u987b\u663e\u5f0f\u5730\u5305\u542b\u8fd9\u4e2a\u8986\u76d6\u3002\u5982\u679c\u4e0d\u8fd9\u6837\u505a\uff0c`REPLACE`\u67e5\u8be2\u5c06\u5728\u589e\u91cf\u6e90\u7684\u6784\u5efa\u8fc7\u7a0b\u4e2d\u6267\u884c\uff0c\u4ece\u800c\u4f7f\u5b83\u53d8\u5f97\u6beb\u65e0\u7528\u5904\u3002\n\n<!-- \u793a\u4f8b\u8bf7\u6c42 -->\nCODE_BLOCK_0\n\n<!-- \u7ed3\u675f -->\n\n<!-- \u6821\u5bf9 -->",
            "russian": "# \u0421\u0445\u0435\u043c\u0430 main+delta\n\n<!-- example maindelta -->\n\u0412\u043e \u043c\u043d\u043e\u0433\u0438\u0445 \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u044f\u0445 \u043f\u043e\u043b\u043d\u044b\u0439 \u043d\u0430\u0431\u043e\u0440 \u0434\u0430\u043d\u043d\u044b\u0445 \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0432\u0435\u043b\u0438\u043a, \u0447\u0442\u043e\u0431\u044b \u0435\u0433\u043e \u0447\u0430\u0441\u0442\u043e \u043f\u0435\u0440\u0435\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0442\u044c \u0441 \u043d\u0443\u043b\u044f, \u0432 \u0442\u043e \u0432\u0440\u0435\u043c\u044f \u043a\u0430\u043a \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043d\u043e\u0432\u044b\u0445 \u0437\u0430\u043f\u0438\u0441\u0435\u0439 \u043e\u0441\u0442\u0430\u0435\u0442\u0441\u044f \u043e\u0442\u043d\u043e\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u043d\u0435\u0431\u043e\u043b\u044c\u0448\u0438\u043c. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043d\u0430 \u0444\u043e\u0440\u0443\u043c\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c 1 000 000 \u0430\u0440\u0445\u0438\u0432\u043d\u044b\u0445 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439, \u043d\u043e \u0435\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e 1 000 \u043d\u043e\u0432\u044b\u0445 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439.\n\n\u0412 \u0442\u0430\u043a\u0438\u0445 \u0441\u043b\u0443\u0447\u0430\u044f\u0445 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \"\u0436\u0438\u0432\u044b\u0445\" (\u043f\u043e\u0447\u0442\u0438 \u0432 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u043c \u0432\u0440\u0435\u043c\u0435\u043d\u0438) \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0434\u043e\u0441\u0442\u0438\u0433\u043d\u0443\u0442\u0430 \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0441\u0445\u0435\u043c\u044b \"main+delta\".\n\n\u0418\u0434\u0435\u044f \u0437\u0430\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0435 \u0434\u0432\u0443\u0445 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u043e\u0432 \u0438 \u0434\u0432\u0443\u0445 \u0442\u0430\u0431\u043b\u0438\u0446: \u043e\u0434\u043d\u043e\u0439 \"\u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439\" \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0434\u043b\u044f \u0434\u0430\u043d\u043d\u044b\u0445, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0440\u0435\u0434\u043a\u043e \u043c\u0435\u043d\u044f\u044e\u0442\u0441\u044f (\u0435\u0441\u043b\u0438 \u0432\u043e\u043e\u0431\u0449\u0435 \u043c\u0435\u043d\u044f\u044e\u0442\u0441\u044f), \u0438 \u043e\u0434\u043d\u043e\u0439 \"\u0434\u0435\u043b\u044c\u0442\u0430\" \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0434\u043b\u044f \u043d\u043e\u0432\u044b\u0445 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432. \u0412 \u043f\u0440\u0438\u043c\u0435\u0440\u0435 1 000 000 \u0430\u0440\u0445\u0438\u0432\u043d\u044b\u0445 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u0431\u0443\u0434\u0443\u0442 \u0445\u0440\u0430\u043d\u0438\u0442\u044c\u0441\u044f \u0432 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435, \u0430 1 000 \u043d\u043e\u0432\u044b\u0445 \u0435\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0445 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u0431\u0443\u0434\u0443\u0442 \u043f\u043e\u043c\u0435\u0449\u0435\u043d\u044b \u0432 \u0434\u0435\u043b\u044c\u0442\u0430-\u0442\u0430\u0431\u043b\u0438\u0446\u0443. \u0417\u0430\u0442\u0435\u043c \u0434\u0435\u043b\u044c\u0442\u0430-\u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u043c\u043e\u0436\u043d\u043e \u0447\u0430\u0441\u0442\u043e \u043f\u0435\u0440\u0435\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0442\u044c, \u0434\u0435\u043b\u0430\u044f \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u043c\u0438 \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430 \u0432 \u0442\u0435\u0447\u0435\u043d\u0438\u0435 \u0441\u0435\u043a\u0443\u043d\u0434 \u0438\u043b\u0438 \u043c\u0438\u043d\u0443\u0442. \u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u0442\u043e\u0433\u043e, \u043a\u0430\u043a\u0438\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b \u043f\u0440\u0438\u043d\u0430\u0434\u043b\u0435\u0436\u0430\u0442 \u043a\u0430\u043a\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435, \u0438 \u043f\u0435\u0440\u0435\u0441\u0442\u0440\u043e\u0435\u043d\u0438\u0435 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u044b. \u041e\u0434\u0438\u043d \u0438\u0437 \u043f\u043e\u0434\u0445\u043e\u0434\u043e\u0432 \u2014 \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0443-\u0441\u0447\u0435\u0442\u0447\u0438\u043a, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u043e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u0435\u0442 ID, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0439 \u0434\u043b\u044f \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432, \u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u044f\u0442\u044c \u0435\u0435 \u043f\u0440\u0438 \u043a\u0430\u0436\u0434\u043e\u043c \u043f\u0435\u0440\u0435\u0441\u0442\u0440\u043e\u0435\u043d\u0438\u0438 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b.\n\n\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u0442\u043e\u043b\u0431\u0446\u0430 \u0441 \u043c\u0435\u0442\u043a\u043e\u0439 \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 \u0434\u043b\u044f \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0431\u043e\u043b\u0435\u0435 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e, \u0447\u0435\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 ID, \u043f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443 \u043c\u0435\u0442\u043a\u0438 \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u043c\u043e\u0433\u0443\u0442 \u043e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u0442\u044c \u043d\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u043e\u0432\u044b\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b, \u043d\u043e \u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u043d\u044b\u0435.\n\n\u0414\u043b\u044f \u043d\u0430\u0431\u043e\u0440\u043e\u0432 \u0434\u0430\u043d\u043d\u044b\u0445, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0433\u0443\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u043d\u044b\u0435 \u0438\u043b\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b, \u0434\u0435\u043b\u044c\u0442\u0430-\u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0437\u0430\u0442\u0440\u043e\u043d\u0443\u0442\u044b\u0445 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432, \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u0440\u0443\u044f \u0438\u0445 \u043f\u043e\u0434\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0438 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0438\u0437 \u043f\u043e\u0438\u0441\u043a\u043e\u0432\u044b\u0445 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432. \u042d\u0442\u043e \u0434\u043e\u0441\u0442\u0438\u0433\u0430\u0435\u0442\u0441\u044f \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u0444\u0443\u043d\u043a\u0446\u0438\u0438, \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u043c\u043e\u0439 \u0421\u043f\u0438\u0441\u043a\u0438 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0439 (Kill Lists). ID \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0443\u0436\u043d\u043e \u0438\u0441\u043a\u043b\u044e\u0447\u0438\u0442\u044c, \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u0443\u043a\u0430\u0437\u0430\u043d\u044b \u0432\u043e \u0432\u0441\u043f\u043e\u043c\u043e\u0433\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u043c \u0437\u0430\u043f\u0440\u043e\u0441\u0435, \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u043e\u043c \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e [sql_query_killlist](../../Data_creation_and_modification/Adding_data_from_external_storages/Adding_data_to_tables/Killlist_in_plain_tables.md#Table-kill-list). \u0414\u0435\u043b\u044c\u0442\u0430-\u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0446\u0435\u043b\u0435\u0432\u044b\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b, \u0434\u043b\u044f \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0431\u0443\u0434\u0443\u0442 \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0442\u044c\u0441\u044f \u0441\u043f\u0438\u0441\u043a\u0438 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0439, \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u0434\u0438\u0440\u0435\u043a\u0442\u0438\u0432\u044b [killlist_target](../../Data_creation_and_modification/Adding_data_from_external_storages/Adding_data_to_tables/Killlist_in_plain_tables.md#killlist_target). \u0412\u043b\u0438\u044f\u043d\u0438\u0435 \u0441\u043f\u0438\u0441\u043a\u043e\u0432 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0439 \u043d\u0430 \u0446\u0435\u043b\u0435\u0432\u0443\u044e \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u044b\u043c, \u0447\u0442\u043e \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442, \u0447\u0442\u043e \u0434\u0430\u0436\u0435 \u0435\u0441\u043b\u0438 \u043f\u043e\u0438\u0441\u043a \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0431\u0435\u0437 \u0434\u0435\u043b\u044c\u0442\u0430-\u0442\u0430\u0431\u043b\u0438\u0446\u044b, \u043f\u043e\u0434\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b \u043d\u0435 \u043f\u043e\u044f\u0432\u044f\u0442\u0441\u044f \u0432 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430\u0445 \u043f\u043e\u0438\u0441\u043a\u0430.\n\n\u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435, \u043a\u0430\u043a \u043c\u044b \u043f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u043c `sql_query_pre` \u0432 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0435 \u0434\u0435\u043b\u044c\u0442\u0430. \u041c\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u044f\u0432\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u044d\u0442\u043e \u043f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435. \u0415\u0441\u043b\u0438 \u043c\u044b \u044d\u0442\u043e\u0433\u043e \u043d\u0435 \u0441\u0434\u0435\u043b\u0430\u0435\u043c, \u0437\u0430\u043f\u0440\u043e\u0441 `REPLACE` \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d \u0442\u0430\u043a\u0436\u0435 \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u0441\u0431\u043e\u0440\u043a\u0438 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0430 \u0434\u0435\u043b\u044c\u0442\u0430, \u0447\u0442\u043e \u0444\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0441\u0434\u0435\u043b\u0430\u0435\u0442 \u0435\u0433\u043e \u0431\u0435\u0441\u043f\u043e\u043b\u0435\u0437\u043d\u044b\u043c.\n\n<!-- request Example -->\nCODE_BLOCK_0\n\n<!-- end -->\n\n<!-- proofread -->"
        },
        "is_code_or_comment": false,
        "model": "deepseek/deepseek-v3.2",
        "updated_at": 1766374266
    },
    "__meta": {
        "source_text": "# Main+delta schema\n\n<!-- example maindelta -->\nIn many situations, the total dataset is too large to be frequently rebuilt from scratch, while the number of new records remains relatively small. For example, a forum may have 1,000,000 archived posts but only receive 1,000 new posts per day.\n\nIn such cases, implementing \"live\" (nearly real-time) table updates can be achieved using a \"main+delta\" scheme.\n\nThe concept involves setting up two sources and two tables, with one \"main\" table for data that rarely changes (if ever), and one \"delta\" table for new documents. In the example, the 1,000,000 archived posts would be stored in the main table, while the 1,000 new daily posts would be placed in the delta table. The delta table can then be rebuilt frequently, making the documents available for searching within seconds or minutes. Determining which documents belong to which table and rebuilding the main table can be fully automated. One approach is to create a counter table that tracks the ID used to split the documents and update it whenever the main table is rebuilt.\n\nUsing a timestamp column as the split variable is more effective than using the ID since timestamps can track not only new documents but also modified ones.\n\nFor datasets that may contain modified or deleted documents, the delta table should provide a list of affected documents, ensuring they are suppressed and excluded from search queries. This is accomplished using a feature called Kill Lists. The document IDs to be killed can be specified in an auxiliary query defined by [sql_query_killlist](../../Data_creation_and_modification/Adding_data_from_external_storages/Adding_data_to_tables/Killlist_in_plain_tables.md#Table-kill-list). The delta table must indicate the target tables for which the kill lists will be applied using the [killlist_target](../../Data_creation_and_modification/Adding_data_from_external_storages/Adding_data_to_tables/Killlist_in_plain_tables.md#killlist_target) directive. The impact of kill lists is permanent on the target table, meaning that even if a search is performed without the delta table, the suppressed documents will not appear in the search results.\n\nNotice how we're overriding `sql_query_pre` in the delta source. We must explicitly include this override. If we don't, the `REPLACE` query would be executed during the delta source's build as well, effectively rendering it useless.\n\n<!-- request Example -->\n```ini\n# in MySQL\nCREATE TABLE deltabreaker (\n  index_name VARCHAR(50) NOT NULL,\n  created_at TIMESTAMP NOT NULL  DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  PRIMARY KEY (index_name)\n);\n\n# in manticore.conf\nsource main {\n  ...\n  sql_query_pre = REPLACE INTO deltabreaker SET index_name = 'main', created_at = NOW()\n  sql_query =  SELECT id, title, UNIX_TIMESTAMP(updated_at) AS updated FROM documents WHERE deleted=0 AND  updated_at  >=FROM_UNIXTIME($start) AND updated_at  <=FROM_UNIXTIME($end)\n  sql_query_range  = SELECT ( SELECT UNIX_TIMESTAMP(MIN(updated_at)) FROM documents) min, ( SELECT UNIX_TIMESTAMP(created_at)-1 FROM deltabreaker WHERE index_name='main') max\n  sql_query_post_index = REPLACE INTO deltabreaker set index_name = 'delta', created_at = (SELECT created_at FROM deltabreaker t WHERE index_name='main')\n  ...\n  sql_attr_timestamp = updated\n}\n\nsource delta : main {\n  sql_query_pre =\n  sql_query_range = SELECT ( SELECT UNIX_TIMESTAMP(created_at) FROM deltabreaker WHERE index_name='delta') min, UNIX_TIMESTAMP() max\n  sql_query_killlist = SELECT id FROM documents WHERE updated_at >=  (SELECT created_at FROM deltabreaker WHERE index_name='delta')\n}\n\ntable main {\n  path = /var/lib/manticore/main\n  source = main\n}\n\ntable delta {\n  path = /var/lib/manticore/delta\n  source = delta\n  killlist_target = main:kl\n}\n```\n\n<!-- end -->\n\n\n<!-- proofread -->\n\n",
        "updated_at": 1768530797,
        "source_md5": "4828527853f46bf32f8734e16afb33bb"
    }
}