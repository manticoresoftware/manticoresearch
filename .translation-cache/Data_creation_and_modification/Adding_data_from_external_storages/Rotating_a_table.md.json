{
    "99aa2083f2efb5e3256fa83ec588139f131026a40b06228dda7f9e4c91c5c1ad": {
        "original": "With seamless rotate enabled, rotation works as follows:\n\n1. New table RAM storage is allocated.\n2. New table attribute and dictionary data is asynchronously preloaded to RAM.\n3. On success, old table is deallocated and both tables' files are renamed.\n4. On failure, new table is deallocated.\n5. At any given moment, queries are served either from old or new table copy.\n\nSeamless rotate comes at the cost of higher **peak** memory usage during the rotation (because both old and new copies of `.spa/.spb/.spi/.spm` data need to be in RAM while preloading the new copy). However, average usage stays the same.\n\nExample:\n\nCODE_BLOCK_4\n<!-- proofread -->\n\n",
        "translations": {
            "chinese": "\u5f00\u542f\u65e0\u7f1d\u65cb\u8f6c\u540e\uff0c\u65cb\u8f6c\u8fc7\u7a0b\u5982\u4e0b\uff1a\n\n1. \u5206\u914d\u65b0\u7684\u8868\u7684RAM\u5b58\u50a8\u3002\n2. \u5f02\u6b65\u9884\u52a0\u8f7d\u65b0\u8868\u7684\u5c5e\u6027\u548c\u5b57\u5178\u6570\u636e\u5230RAM\u3002\n3. \u6210\u529f\u540e\uff0c\u91ca\u653e\u65e7\u8868\u5e76\u91cd\u547d\u540d\u4e24\u4e2a\u8868\u7684\u6587\u4ef6\u3002\n4. \u5931\u8d25\u65f6\uff0c\u91ca\u653e\u65b0\u8868\u3002\n5. \u5728\u4efb\u4f55\u65f6\u523b\uff0c\u67e5\u8be2\u8981\u4e48\u7531\u65e7\u8868\u526f\u672c\u63d0\u4f9b\uff0c\u8981\u4e48\u7531\u65b0\u8868\u526f\u672c\u63d0\u4f9b\u3002\n\n\u65e0\u7f1d\u65cb\u8f6c\u7684\u4ee3\u4ef7\u662f\u5728\u65cb\u8f6c\u671f\u95f4\u5185\u5b58\u4f7f\u7528\u7684**\u5cf0\u503c**\u66f4\u9ad8\uff08\u56e0\u4e3a\u9884\u52a0\u8f7d\u65b0\u526f\u672c\u65f6\uff0c\u65e7\u526f\u672c\u548c\u65b0\u526f\u672c\u7684`.spa/.spb/.spi/.spm`\u6570\u636e\u90fd\u9700\u8981\u5728RAM\u4e2d\uff09\u3002\u4e0d\u8fc7\u5e73\u5747\u4f7f\u7528\u91cf\u4fdd\u6301\u4e0d\u53d8\u3002\n\n\u793a\u4f8b\uff1a\n\nCODE_BLOCK_4\n<!-- proofread -->",
            "russian": "\u041f\u0440\u0438 \u0432\u043a\u043b\u044e\u0447\u0451\u043d\u043d\u043e\u043c \u0431\u0435\u0441\u0448\u043e\u0432\u043d\u043e\u043c \u0432\u0440\u0430\u0449\u0435\u043d\u0438\u0438, \u0432\u0440\u0430\u0449\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c:\n\n1. \u0412\u044b\u0434\u0435\u043b\u044f\u0435\u0442\u0441\u044f \u043d\u043e\u0432\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u0434\u043b\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0432 \u041e\u0417\u0423.\n2. \u0410\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f \u0432 \u041e\u0417\u0423 \u043d\u043e\u0432\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u043e\u0432 \u0438 \u0441\u043b\u043e\u0432\u0430\u0440\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u044b.\n3. \u041f\u0440\u0438 \u0443\u0441\u043f\u0435\u0448\u043d\u043e\u043c \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u0438 \u0441\u0442\u0430\u0440\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u043e\u0441\u0432\u043e\u0431\u043e\u0436\u0434\u0430\u0435\u0442\u0441\u044f, \u0430 \u0444\u0430\u0439\u043b\u044b \u043e\u0431\u0435\u0438\u0445 \u0442\u0430\u0431\u043b\u0438\u0446 \u043f\u0435\u0440\u0435\u0438\u043c\u0435\u043d\u043e\u0432\u044b\u0432\u0430\u044e\u0442\u0441\u044f.\n4. \u041f\u0440\u0438 \u043d\u0435\u0443\u0434\u0430\u0447\u0435 \u043d\u043e\u0432\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u043e\u0441\u0432\u043e\u0431\u043e\u0436\u0434\u0430\u0435\u0442\u0441\u044f.\n5. \u0412 \u043b\u044e\u0431\u043e\u0439 \u043c\u043e\u043c\u0435\u043d\u0442 \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u043e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u043b\u0438\u0431\u043e \u0438\u0437 \u043a\u043e\u043f\u0438\u0438 \u0441\u0442\u0430\u0440\u043e\u0439, \u043b\u0438\u0431\u043e \u0438\u0437 \u043a\u043e\u043f\u0438\u0438 \u043d\u043e\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b.\n\n\u0411\u0435\u0441\u0448\u043e\u0432\u043d\u043e\u0435 \u0432\u0440\u0430\u0449\u0435\u043d\u0438\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u0442 \u0431\u043e\u043b\u044c\u0448\u0435\u0433\u043e **\u043f\u0438\u043a\u043e\u0432\u043e\u0433\u043e** \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u043f\u0430\u043c\u044f\u0442\u0438 \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u0432\u0440\u0430\u0449\u0435\u043d\u0438\u044f (\u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u043e\u0431\u0435 \u043a\u043e\u043f\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 `.spa/.spb/.spi/.spm` \u2014 \u0441\u0442\u0430\u0440\u044b\u0435 \u0438 \u043d\u043e\u0432\u044b\u0435 \u2014 \u0434\u043e\u043b\u0436\u043d\u044b \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u044c\u0441\u044f \u0432 \u041e\u0417\u0423 \u043f\u0440\u0438 \u043f\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0439 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u043d\u043e\u0432\u043e\u0439 \u043a\u043e\u043f\u0438\u0438). \u041e\u0434\u043d\u0430\u043a\u043e \u0441\u0440\u0435\u0434\u043d\u0435\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u043e\u0441\u0442\u0430\u0451\u0442\u0441\u044f \u0442\u0435\u043c \u0436\u0435.\n\n\u041f\u0440\u0438\u043c\u0435\u0440:\n\nCODE_BLOCK_4\n<!-- proofread -->"
        },
        "is_code_or_comment": false,
        "model": "openai:gpt-4.1-mini",
        "updated_at": 1766339890
    },
    "ad48d5d772135ef0e6f45453b5a09395566322e09963de528bdacfe2caa151c7": {
        "original": "# Rotating a table\n\nTable rotation is a procedure in which the searchd server looks for new versions of defined tables in the configuration. Rotation is supported only in Plain mode of operation.\n\nThere can be two cases:\n\n* for plain tables that are already loaded\n* tables added in configuration, but not loaded yet\n\nIn the first case, the indexer cannot put the new version of the table online as the running copy is locked and loaded by `searchd`. In this case `indexer` needs to be called with the [--rotate](../../Data_creation_and_modification/Adding_data_from_external_storages/Plain_tables_creation.md#Indexer-command-line-arguments) parameter. If rotate is used, `indexer` creates new table files with `.new.` in their names and sends a *HUP* signal to `searchd` informing it about the new version. The `searchd` will perform a lookup and will put the new version of the table in place and discard the old one. In some cases, it might be desired to create the new version of the table but not perform rotate as soon as possible. For example, it might be desired to first check the health of the new table versions. In this case,  `indexer` can accept the`--nohup` parameter which will forbid sending the HUP signal to the server.\n\nNew tables can be loaded by rotation; however, the regular handling of the HUP signal is to check for new tables only if the configuration has changed since server startup. If the table was already defined in the configuration, the table should be first created by running `indexer` without rotation and perform the [RELOAD TABLES](../../Data_creation_and_modification/Adding_data_from_external_storages/Rotating_a_table.md#RELOAD-TABLES) statement instead.\n\nThere are also two specialized statements that can be used to perform rotations on tables:\n\n## RELOAD TABLE\n\nCODE_BLOCK_0\n\nThe `RELOAD TABLE` command enables table rotation via SQL.\n\nThis command functions in three modes. In the first mode, without specifying a path, the Manticore server checks for new table files in the directory indicated by the [path](../../Creating_a_table/Local_tables/Plain_and_real-time_table_settings.md#path). New table files must be named as `tbl.new.sp?`.\n\nIf you specify a path, the server searches for table files in that directory, relocates them to the table [path](../../Creating_a_table/Local_tables/Plain_and_real-time_table_settings.md#path), renames them from `tbl.sp?` to `tbl.new.sp?`, and rotates them.\n\nThe third mode, activated by `OPTION switchover=1`, switches the index to the new path. Here, the daemon tries to load the table directly from the new path without moving the files. If loading is successful, this new index supersedes the old one.\n\nAlso, the daemon writes a unique link file (`tbl.link`) in the directory specified by [path](../../Creating_a_table/Local_tables/Plain_and_real-time_table_settings.md#path), maintaining persistent redirection.\n\nIf you revert a redirected index to the path specified in the configuration, the daemon will detect this and delete the link file.\n\nOnce redirected, the daemon retrieves the table from the newly linked path. When rotating, it looks for new table versions at the newly redirected path. Bear in mind, the daemon checks the configuration for common errors, like duplicate paths across different tables. However, it won't identify if multiple tables point to the same path via redirection. Under normal operations, tables are locked with the `.spl` file, but disabling the lock may cause problems. If there's an error (e.g., the path is inaccessible for any reason), you should manually correct (or simply delete) the link file.\n\n`indextool` follows the link file, but other tools (`indexer`, `index_converter`, etc.) do not recognize the link file and consistently use the path defined in the configuration file, ignoring any redirection. Thus, you can inspect the index with `indextool`, and it will read from the new location. However, more complex operations like merging will not acknowledge any link file.\n\nCODE_BLOCK_1\n\n## RELOAD TABLES\n\nCODE_BLOCK_2\n\nThis command functions similarly to the HUP system signal, triggering a rotation of tables. Nevertheless, it doesn't exactly mirror the typical HUP signal (which can come from a `kill -HUP` command or `indexer --rotate`). This command actively searches for any tables needing rotation and is capable of re-reading the configuration. Suppose you launch Manticore in plain mode with a config file that points to a nonexistent plain table. If you then attempt to `indexer --rotate` the table, the new table won't be recognized by the server until you execute `RELOAD TABLES` or restart the server.\n\nDepending on the value of the [seamless_rotate](../../Server_settings/Searchd.md#seamless_rotate) setting, new queries might be shortly stalled, and clients will receive temporary errors.\n\nCODE_BLOCK_3\n\n## Seamless rotate\n\nThe rotate assumes old table version is discarded and new table version is loaded and replaces the existing one. During this swapping, the server needs to also serve incoming queries made on the table that is going to be updated. To avoid stalls of the queries, the server implements a seamless rotate of the table by default, as described below.\n\nTables may contain data that needs to be precached in RAM. At the moment, `.spa`, `.spb`, `.spi` and `.spm` files are fully precached (they contain attribute data, blob attribute data, keyword table, and killed row map, respectively). Without seamless rotate, rotating a table tries to use as little RAM as possible and works as follows:\n\n1. New queries are temporarily rejected (with \"retry\" error code).\n2. `searchd` waits for all currently running queries to finish.\n3. Old table is deallocated and its files are renamed.\n4. New table files are renamed and required RAM is allocated.\n5. New table attribute and dictionary data is preloaded to RAM.\n6. `searchd` resumes serving queries from the new table.\n\nHowever, if there's a lot of attribute or dictionary data, then the preloading step could take noticeable time - up to several minutes in case of preloading 1-5+ GB files.",
        "translations": {
            "chinese": "# \u65cb\u8f6c\u8868\n\n\u8868\u65cb\u8f6c\u662f\u4e00\u79cd\u8fc7\u7a0b\uff0c\u5176\u4e2d searchd \u670d\u52a1\u5668\u67e5\u627e\u914d\u7f6e\u4e2d\u5b9a\u4e49\u7684\u8868\u7684\u65b0\u7248\u672c\u3002\u65cb\u8f6c\u4ec5\u652f\u6301 Plain \u6a21\u5f0f\u7684\u64cd\u4f5c\u3002\n\n\u6709\u4e24\u79cd\u60c5\u51b5\uff1a\n\n* \u5bf9\u4e8e\u5df2\u7ecf\u52a0\u8f7d\u7684 Plain \u8868\n* \u5728\u914d\u7f6e\u4e2d\u6dfb\u52a0\u4f46\u5c1a\u672a\u52a0\u8f7d\u7684\u8868\n\n\u5728\u7b2c\u4e00\u79cd\u60c5\u51b5\u4e0b\uff0cindexer \u65e0\u6cd5\u5c06\u8868\u7684\u65b0\u7248\u672c\u6295\u5165\u4f7f\u7528\uff0c\u56e0\u4e3a\u8fd0\u884c\u4e2d\u7684\u526f\u672c\u5df2\u88ab `searchd` \u9501\u5b9a\u548c\u52a0\u8f7d\u3002\u6b64\u65f6\u9700\u8981\u4ee5\u5e26\u6709 [--rotate](../../Data_creation_and_modification/Adding_data_from_external_storages/Plain_tables_creation.md#Indexer-command-line-arguments) \u53c2\u6570\u8c03\u7528 `indexer`\u3002\u5982\u679c\u4f7f\u7528 rotate\uff0c`indexer` \u4f1a\u521b\u5efa\u540d\u79f0\u4e2d\u5e26\u6709 `.new.` \u7684\u65b0\u8868\u6587\u4ef6\uff0c\u5e76\u5411 `searchd` \u53d1\u9001 *HUP* \u4fe1\u53f7\uff0c\u901a\u77e5\u5176\u6709\u65b0\u7248\u672c\u3002`searchd` \u5c06\u6267\u884c\u67e5\u627e\u64cd\u4f5c\uff0c\u5c06\u65b0\u7248\u672c\u7684\u8868\u66ff\u6362\u65e7\u7248\u672c\u5e76\u4e22\u5f03\u65e7\u7248\u672c\u3002\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u53ef\u80fd\u5e0c\u671b\u5148\u521b\u5efa\u65b0\u7248\u672c\u8868\u4f46\u4e0d\u7acb\u5373\u6267\u884c\u65cb\u8f6c\u3002\u6bd4\u5982\uff0c\u53ef\u80fd\u5148\u5e0c\u671b\u68c0\u67e5\u65b0\u8868\u7248\u672c\u7684\u5065\u5eb7\u72b6\u6001\u3002\u6b64\u65f6\uff0c`indexer` \u53ef\u4ee5\u63a5\u53d7 `--nohup` \u53c2\u6570\uff0c\u7981\u6b62\u5411\u670d\u52a1\u5668\u53d1\u9001 HUP \u4fe1\u53f7\u3002\n\n\u65b0\u8868\u53ef\u4ee5\u901a\u8fc7\u65cb\u8f6c\u52a0\u8f7d\uff1b\u4f46\u662f\uff0c\u5e38\u89c4\u5904\u7406 HUP \u4fe1\u53f7\u7684\u65b9\u5f0f\u662f\u53ea\u6709\u5728\u670d\u52a1\u5668\u542f\u52a8\u540e\u914d\u7f6e\u53d1\u751f\u66f4\u6539\u65f6\u624d\u68c0\u67e5\u65b0\u8868\u3002\u5982\u679c\u8868\u5df2\u5728\u914d\u7f6e\u4e2d\u5b9a\u4e49\uff0c\u5e94\u9996\u5148\u8fd0\u884c\u4e0d\u5e26\u65cb\u8f6c\u7684 `indexer` \u521b\u5efa\u8868\uff0c\u7136\u540e\u6267\u884c [RELOAD TABLES](../../Data_creation_and_modification/Adding_data_from_external_storages/Rotating_a_table.md#RELOAD-TABLES) \u8bed\u53e5\u3002\n\n\u8fd8\u6709\u4e24\u4e2a\u4e13\u7528\u8bed\u53e5\u53ef\u4ee5\u7528\u4e8e\u5bf9\u8868\u6267\u884c\u65cb\u8f6c\uff1a\n\n## RELOAD TABLE\n\nCODE_BLOCK_0\n\n`RELOAD TABLE` \u547d\u4ee4\u901a\u8fc7 SQL \u5b9e\u73b0\u8868\u65cb\u8f6c\u3002\n\n\u6b64\u547d\u4ee4\u6709\u4e09\u79cd\u6a21\u5f0f\u3002\u7b2c\u4e00\u79cd\u6a21\u5f0f\u662f\u4e0d\u6307\u5b9a\u8def\u5f84\uff0cManticore \u670d\u52a1\u5668\u4f1a\u68c0\u67e5\u7531 [path](../../Creating_a_table/Local_tables/Plain_and_real-time_table_settings.md#path) \u6307\u5b9a\u7684\u76ee\u5f55\u4e2d\u65b0\u8868\u6587\u4ef6\u3002\u65b0\u8868\u6587\u4ef6\u5fc5\u987b\u547d\u540d\u4e3a `tbl.new.sp?`\u3002\n\n\u5982\u679c\u6307\u5b9a\u8def\u5f84\uff0c\u670d\u52a1\u5668\u4f1a\u5728\u8be5\u76ee\u5f55\u641c\u7d22\u8868\u6587\u4ef6\uff0c\u5c06\u5b83\u4eec\u79fb\u52a8\u5230\u8868\u7684 [path](../../Creating_a_table/Local_tables/Plain_and_real-time_table_settings.md#path)\uff0c\u5c06\u6587\u4ef6\u540d\u4ece `tbl.sp?` \u91cd\u547d\u540d\u4e3a `tbl.new.sp?`\uff0c\u5e76\u65cb\u8f6c\u5b83\u4eec\u3002\n\n\u7b2c\u4e09\u79cd\u6a21\u5f0f\u7531 `OPTION switchover=1` \u6fc0\u6d3b\uff0c\u5c06\u7d22\u5f15\u5207\u6362\u5230\u65b0\u7684\u8def\u5f84\u3002\u6b64\u65f6\uff0c\u5b88\u62a4\u8fdb\u7a0b\u5c1d\u8bd5\u76f4\u63a5\u4ece\u65b0\u8def\u5f84\u52a0\u8f7d\u8868\u800c\u4e0d\u79fb\u52a8\u6587\u4ef6\u3002\u5982\u679c\u52a0\u8f7d\u6210\u529f\uff0c\u8fd9\u4e2a\u65b0\u7d22\u5f15\u5c06\u53d6\u4ee3\u65e7\u7d22\u5f15\u3002\n\n\u6b64\u5916\uff0c\u5b88\u62a4\u8fdb\u7a0b\u4f1a\u5728\u7531 [path](../../Creating_a_table/Local_tables/Plain_and_real-time_table_settings.md#path) \u6307\u5b9a\u7684\u76ee\u5f55\u4e2d\u5199\u5165\u552f\u4e00\u94fe\u63a5\u6587\u4ef6\uff08`tbl.link`\uff09\uff0c\u4fdd\u6301\u6301\u4e45\u91cd\u5b9a\u5411\u3002\n\n\u5982\u679c\u5c06\u5df2\u91cd\u5b9a\u5411\u7684\u7d22\u5f15\u6062\u590d\u5230\u914d\u7f6e\u4e2d\u6307\u5b9a\u7684\u8def\u5f84\uff0c\u5b88\u62a4\u8fdb\u7a0b\u4f1a\u68c0\u6d4b\u5230\u8fd9\u4e00\u70b9\u5e76\u5220\u9664\u94fe\u63a5\u6587\u4ef6\u3002\n\n\u4e00\u65e6\u91cd\u5b9a\u5411\uff0c\u5b88\u62a4\u8fdb\u7a0b\u4ece\u65b0\u7684\u94fe\u63a5\u8def\u5f84\u83b7\u53d6\u8868\u3002\u65cb\u8f6c\u65f6\uff0c\u5b83\u4f1a\u5728\u65b0\u7684\u91cd\u5b9a\u5411\u8def\u5f84\u67e5\u627e\u65b0\u8868\u7248\u672c\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5b88\u62a4\u8fdb\u7a0b\u4f1a\u68c0\u67e5\u914d\u7f6e\u4e2d\u7684\u5e38\u89c1\u9519\u8bef\uff0c\u6bd4\u5982\u4e0d\u540c\u8868\u7684\u8def\u5f84\u91cd\u590d\uff0c\u4f46\u4e0d\u4f1a\u8bc6\u522b\u591a\u4e2a\u8868\u901a\u8fc7\u91cd\u5b9a\u5411\u6307\u5411\u540c\u4e00\u8def\u5f84\u7684\u60c5\u51b5\u3002\u6b63\u5e38\u64cd\u4f5c\u4e0b\uff0c\u8868\u901a\u8fc7 `.spl` \u6587\u4ef6\u9501\u5b9a\uff0c\u4f46\u7981\u7528\u9501\u5b9a\u53ef\u80fd\u4f1a\u5bfc\u81f4\u95ee\u9898\u3002\u5982\u679c\u51fa\u73b0\u9519\u8bef\uff08\u4f8b\u5982\u8def\u5f84\u56e0\u67d0\u79cd\u539f\u56e0\u65e0\u6cd5\u8bbf\u95ee\uff09\uff0c\u9700\u8981\u624b\u52a8\u4fee\u6b63\uff08\u6216\u7b80\u5355\u5220\u9664\uff09\u94fe\u63a5\u6587\u4ef6\u3002\n\n`indextool` \u4f1a\u8ddf\u968f\u94fe\u63a5\u6587\u4ef6\uff0c\u4f46\u5176\u4ed6\u5de5\u5177\uff08`indexer`\u3001`index_converter` \u7b49\uff09\u4e0d\u8bc6\u522b\u94fe\u63a5\u6587\u4ef6\uff0c\u59cb\u7ec8\u4f7f\u7528\u914d\u7f6e\u6587\u4ef6\u4e2d\u5b9a\u4e49\u7684\u8def\u5f84\uff0c\u5ffd\u7565\u4efb\u4f55\u91cd\u5b9a\u5411\u3002\u56e0\u6b64\uff0c\u53ef\u4ee5\u7528 `indextool` \u68c0\u67e5\u7d22\u5f15\uff0c\u5b83\u4f1a\u4ece\u65b0\u4f4d\u7f6e\u8bfb\u53d6\uff1b\u4f46\u66f4\u590d\u6742\u7684\u64cd\u4f5c\u5982\u5408\u5e76\u5c06\u4e0d\u8bc6\u522b\u4efb\u4f55\u94fe\u63a5\u6587\u4ef6\u3002\n\nCODE_BLOCK_1\n\n## RELOAD TABLES\n\nCODE_BLOCK_2\n\n\u6b64\u547d\u4ee4\u7684\u529f\u80fd\u7c7b\u4f3c\u4e8e HUP \u7cfb\u7edf\u4fe1\u53f7\uff0c\u89e6\u53d1\u8868\u7684\u65cb\u8f6c\u3002\u4f46\u5b83\u5e76\u4e0d\u5b8c\u5168\u7b49\u540c\u4e8e\u5178\u578b\u7684 HUP \u4fe1\u53f7\uff08\u4f8b\u5982\u901a\u8fc7 `kill -HUP` \u547d\u4ee4\u6216 `indexer --rotate` \u89e6\u53d1\uff09\u3002\u8be5\u547d\u4ee4\u4f1a\u4e3b\u52a8\u67e5\u627e\u9700\u8981\u65cb\u8f6c\u7684\u8868\uff0c\u5e76\u80fd\u91cd\u65b0\u8bfb\u53d6\u914d\u7f6e\u3002\u6bd4\u5982\uff0c\u82e5\u4ee5\u914d\u7f6e\u6587\u4ef6\u542f\u52a8\u7684 Manticore \u5904\u4e8e Plain \u6a21\u5f0f\uff0c\u4f46\u914d\u7f6e\u6307\u5411\u4e00\u4e2a\u4e0d\u5b58\u5728\u7684 Plain \u8868\uff0c\u4e4b\u540e\u6267\u884c `indexer --rotate` \u4e0d\u4f1a\u8ba9\u670d\u52a1\u5668\u8bc6\u522b\u65b0\u8868\uff0c\u9700\u6267\u884c `RELOAD TABLES` \u6216\u91cd\u542f\u670d\u52a1\u5668\u3002\n\n\u6839\u636e [seamless_rotate](../../Server_settings/Searchd.md#seamless_rotate) \u8bbe\u7f6e\u7684\u503c\uff0c\u65b0\u67e5\u8be2\u53ef\u80fd\u4f1a\u88ab\u77ed\u6682\u6302\u8d77\uff0c\u5ba2\u6237\u7aef\u4f1a\u6536\u5230\u4e34\u65f6\u9519\u8bef\u3002\n\nCODE_BLOCK_3\n\n## \u65e0\u7f1d\u65cb\u8f6c\n\n\u65cb\u8f6c\u5047\u8bbe\u65e7\u8868\u7248\u672c\u88ab\u4e22\u5f03\uff0c\u65b0\u8868\u7248\u672c\u88ab\u52a0\u8f7d\u5e76\u66ff\u6362\u73b0\u6709\u8868\u3002\u5728\u4ea4\u6362\u671f\u95f4\uff0c\u670d\u52a1\u5668\u8fd8\u9700\u5904\u7406\u5bf9\u5373\u5c06\u66f4\u65b0\u8868\u7684\u5165\u7ad9\u67e5\u8be2\u3002\u4e3a\u4e86\u907f\u514d\u67e5\u8be2\u963b\u585e\uff0c\u670d\u52a1\u5668\u9ed8\u8ba4\u5b9e\u73b0\u4e86\u8868\u7684\u65e0\u7f1d\u65cb\u8f6c\uff0c\u5982\u4e0b\u6240\u8ff0\u3002\n\n\u8868\u53ef\u80fd\u5305\u542b\u9700\u8981\u9884\u7f13\u5b58\u5230\u5185\u5b58\u7684\u6570\u636e\u3002\u76ee\u524d\uff0c`.spa`\u3001`.spb`\u3001`.spi` \u548c `.spm` \u6587\u4ef6\u662f\u5b8c\u5168\u9884\u7f13\u5b58\u7684\uff08\u5b83\u4eec\u5206\u522b\u5305\u542b\u5c5e\u6027\u6570\u636e\u3001\u4e8c\u8fdb\u5236\u5927\u5bf9\u8c61\u5c5e\u6027\u6570\u636e\u3001\u5173\u952e\u8bcd\u8868\u548c\u5df2\u5220\u9664\u884c\u6620\u5c04\uff09\u3002\u5982\u679c\u4e0d\u4f7f\u7528\u65e0\u7f1d\u65cb\u8f6c\uff0c\u65cb\u8f6c\u8868\u5c3d\u53ef\u80fd\u5c11\u5360\u7528\u5185\u5b58\uff0c\u5de5\u4f5c\u6d41\u7a0b\u5982\u4e0b\uff1a\n\n1. \u4e34\u65f6\u62d2\u7edd\u65b0\u67e5\u8be2\uff08\u8fd4\u56de\u201c\u91cd\u8bd5\u201d\u9519\u8bef\u7801\uff09\u3002\n2. `searchd` \u7b49\u5f85\u6240\u6709\u6b63\u5728\u8fd0\u884c\u7684\u67e5\u8be2\u5b8c\u6210\u3002\n3. \u91ca\u653e\u65e7\u8868\u5e76\u91cd\u547d\u540d\u5176\u6587\u4ef6\u3002\n4. \u91cd\u547d\u540d\u65b0\u8868\u6587\u4ef6\u5e76\u5206\u914d\u6240\u9700\u5185\u5b58\u3002\n5. \u5c06\u65b0\u8868\u5c5e\u6027\u548c\u5b57\u5178\u6570\u636e\u9884\u52a0\u8f7d\u5230\u5185\u5b58\u3002\n6. `searchd` \u7ee7\u7eed\u4ece\u65b0\u8868\u5904\u7406\u67e5\u8be2\u3002\n\n\u4e0d\u8fc7\uff0c\u5982\u679c\u5c5e\u6027\u6216\u5b57\u5178\u6570\u636e\u91cf\u8f83\u5927\uff0c\u5219\u9884\u52a0\u8f7d\u6b65\u9aa4\u53ef\u80fd\u9700\u8981\u660e\u663e\u65f6\u95f4\u2014\u2014\u5728\u9884\u52a0\u8f7d 1-5+ GB \u6587\u4ef6\u65f6\u53ef\u80fd\u8fbe\u6570\u5206\u949f\u3002",
            "russian": "# \u0412\u0440\u0430\u0449\u0435\u043d\u0438\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b\n\n\u0412\u0440\u0430\u0449\u0435\u043d\u0438\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u2014 \u044d\u0442\u043e \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u0430, \u043f\u0440\u0438 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0441\u0435\u0440\u0432\u0435\u0440 searchd \u0438\u0449\u0435\u0442 \u043d\u043e\u0432\u044b\u0435 \u0432\u0435\u0440\u0441\u0438\u0438 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u044b\u0445 \u0442\u0430\u0431\u043b\u0438\u0446 \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438. \u0412\u0440\u0430\u0449\u0435\u043d\u0438\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u0432 \u0440\u0435\u0436\u0438\u043c\u0435 Plain.\n\n\u0415\u0441\u0442\u044c \u0434\u0432\u0430 \u0441\u043b\u0443\u0447\u0430\u044f:\n\n* \u0434\u043b\u044f plain-\u0442\u0430\u0431\u043b\u0438\u0446, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0443\u0436\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u044b\n* \u0442\u0430\u0431\u043b\u0438\u0446, \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0445 \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e, \u043d\u043e \u0435\u0449\u0451 \u043d\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u044b\u0445\n\n\u0412 \u043f\u0435\u0440\u0432\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u0438\u043d\u0434\u0435\u043a\u0441\u0430\u0442\u043e\u0440 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0440\u0430\u0437\u043c\u0435\u0441\u0442\u0438\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u0432\u0435\u0440\u0441\u0438\u044e \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u043e\u043d\u043b\u0430\u0439\u043d, \u043f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443 \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0449\u0430\u044f \u043a\u043e\u043f\u0438\u044f \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d\u0430 \u0438 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u0430 `searchd`. \u0412 \u044d\u0442\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 `indexer` \u043d\u0443\u0436\u043d\u043e \u0432\u044b\u0437\u0432\u0430\u0442\u044c \u0441 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u043c [--rotate](../../Data_creation_and_modification/Adding_data_from_external_storages/Plain_tables_creation.md#Indexer-command-line-arguments). \u0415\u0441\u043b\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f rotate, `indexer` \u0441\u043e\u0437\u0434\u0430\u0451\u0442 \u043d\u043e\u0432\u044b\u0435 \u0444\u0430\u0439\u043b\u044b \u0442\u0430\u0431\u043b\u0438\u0446 \u0441 `.new.` \u0432 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0438 \u0438 \u043f\u043e\u0441\u044b\u043b\u0430\u0435\u0442 \u0441\u0438\u0433\u043d\u0430\u043b *HUP* `searchd`, \u0438\u043d\u0444\u043e\u0440\u043c\u0438\u0440\u0443\u044f \u043e \u043d\u043e\u0432\u043e\u0439 \u0432\u0435\u0440\u0441\u0438\u0438. `searchd` \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0443 \u0438 \u0437\u0430\u043c\u0435\u043d\u0438\u0442 \u0441\u0442\u0430\u0440\u0443\u044e \u0432\u0435\u0440\u0441\u0438\u044e \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u043d\u0430 \u043d\u043e\u0432\u0443\u044e. \u0412 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0441\u043b\u0443\u0447\u0430\u044f\u0445 \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u0442\u0440\u0435\u0431\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u0432\u0435\u0440\u0441\u0438\u044e \u0442\u0430\u0431\u043b\u0438\u0446\u044b, \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u044f \u0432\u0440\u0430\u0449\u0435\u043d\u0438\u0435 \u0441\u0440\u0430\u0437\u0443. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u043d\u0430\u0434\u043e\u0431\u0438\u0442\u044c\u0441\u044f \u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u043d\u043e\u0432\u044b\u0445 \u0432\u0435\u0440\u0441\u0438\u0439 \u0442\u0430\u0431\u043b\u0438\u0446. \u0412 \u044d\u0442\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 `indexer` \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 `--nohup`, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0437\u0430\u043f\u0440\u0435\u0449\u0430\u0435\u0442 \u043f\u043e\u0441\u044b\u043b\u0430\u0442\u044c \u0441\u0438\u0433\u043d\u0430\u043b HUP \u0441\u0435\u0440\u0432\u0435\u0440\u0443.\n\n\u041d\u043e\u0432\u044b\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u044b \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u0432\u0440\u0430\u0449\u0435\u043d\u0438\u044f; \u043e\u0434\u043d\u0430\u043a\u043e \u043e\u0431\u044b\u0447\u043d\u0430\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0441\u0438\u0433\u043d\u0430\u043b\u0430 HUP \u0437\u0430\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f \u0432 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0435 \u043d\u043e\u0432\u044b\u0445 \u0442\u0430\u0431\u043b\u0438\u0446 \u0442\u043e\u043b\u044c\u043a\u043e \u0435\u0441\u043b\u0438 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u0430\u0441\u044c \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430. \u0415\u0441\u043b\u0438 \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u0443\u0436\u0435 \u0431\u044b\u043b\u0430 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0430 \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438, \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0437\u0430\u043f\u0443\u0441\u043a\u043e\u043c `indexer` \u0431\u0435\u0437 \u0432\u0440\u0430\u0449\u0435\u043d\u0438\u044f \u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 [RELOAD TABLES](../../Data_creation_and_modification/Adding_data_from_external_storages/Rotating_a_table.md#RELOAD-TABLES) \u0432\u043c\u0435\u0441\u0442\u043e \u044d\u0442\u043e\u0433\u043e.\n\n\u0422\u0430\u043a\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0442 \u0434\u0432\u0430 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0445 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0433\u0443\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0434\u043b\u044f \u0432\u0440\u0430\u0449\u0435\u043d\u0438\u044f \u0442\u0430\u0431\u043b\u0438\u0446:\n\n## RELOAD TABLE\n\nCODE_BLOCK_0\n\n\u041a\u043e\u043c\u0430\u043d\u0434\u0430 `RELOAD TABLE` \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u0432\u0440\u0430\u0449\u0435\u043d\u0438\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0447\u0435\u0440\u0435\u0437 SQL.\n\n\u042d\u0442\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0430 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0432 \u0442\u0440\u0451\u0445 \u0440\u0435\u0436\u0438\u043c\u0430\u0445. \u0412 \u043f\u0435\u0440\u0432\u043e\u043c \u0440\u0435\u0436\u0438\u043c\u0435, \u0431\u0435\u0437 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u044f \u043f\u0443\u0442\u0438, \u0441\u0435\u0440\u0432\u0435\u0440 Manticore \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442 \u043d\u0430\u043b\u0438\u0447\u0438\u0435 \u043d\u043e\u0432\u044b\u0445 \u0444\u0430\u0439\u043b\u043e\u0432 \u0442\u0430\u0431\u043b\u0438\u0446 \u0432 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0438, \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0439 \u0432 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0435 [path](../../Creating_a_table/Local_tables/Plain_and_real-time_table_settings.md#path). \u041d\u043e\u0432\u044b\u0435 \u0444\u0430\u0439\u043b\u044b \u0442\u0430\u0431\u043b\u0438\u0446 \u0434\u043e\u043b\u0436\u043d\u044b \u043d\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u0441\u044f `tbl.new.sp?`.\n\n\u0415\u0441\u043b\u0438 \u0432\u044b \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0435 \u043f\u0443\u0442\u044c, \u0441\u0435\u0440\u0432\u0435\u0440 \u0438\u0449\u0435\u0442 \u0444\u0430\u0439\u043b\u044b \u0442\u0430\u0431\u043b\u0438\u0446 \u0432 \u044d\u0442\u043e\u0439 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0438, \u043f\u0435\u0440\u0435\u043c\u0435\u0449\u0430\u0435\u0442 \u0438\u0445 \u0432 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044e \u0442\u0430\u0431\u043b\u0438\u0446\u044b, \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u0443\u044e \u0432 [path](../../Creating_a_table/Local_tables/Plain_and_real-time_table_settings.md#path), \u043f\u0435\u0440\u0435\u0438\u043c\u0435\u043d\u043e\u0432\u044b\u0432\u0430\u0435\u0442 \u0438\u0437 `tbl.sp?` \u0432 `tbl.new.sp?` \u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 \u0432\u0440\u0430\u0449\u0435\u043d\u0438\u0435.\n\n\u0422\u0440\u0435\u0442\u0438\u0439 \u0440\u0435\u0436\u0438\u043c, \u0430\u043a\u0442\u0438\u0432\u0438\u0440\u0443\u0435\u043c\u044b\u0439 \u043e\u043f\u0446\u0438\u0435\u0439 `OPTION switchover=1`, \u043f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u0438\u043d\u0434\u0435\u043a\u0441 \u043d\u0430 \u043d\u043e\u0432\u044b\u0439 \u043f\u0443\u0442\u044c. \u0417\u0434\u0435\u0441\u044c \u0434\u0435\u043c\u043e\u043d \u043f\u044b\u0442\u0430\u0435\u0442\u0441\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u043d\u0430\u043f\u0440\u044f\u043c\u0443\u044e \u0438\u0437 \u043d\u043e\u0432\u043e\u0433\u043e \u043f\u0443\u0442\u0438 \u0431\u0435\u0437 \u043f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u044f \u0444\u0430\u0439\u043b\u043e\u0432. \u0415\u0441\u043b\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u0430, \u043d\u043e\u0432\u044b\u0439 \u0438\u043d\u0434\u0435\u043a\u0441 \u0437\u0430\u043c\u0435\u043d\u044f\u0435\u0442 \u0441\u0442\u0430\u0440\u044b\u0439.\n\n\u0422\u0430\u043a\u0436\u0435 \u0434\u0435\u043c\u043e\u043d \u0437\u0430\u043f\u0438\u0441\u044b\u0432\u0430\u0435\u0442 \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u0444\u0430\u0439\u043b-\u0441\u0441\u044b\u043b\u043a\u0443 (`tbl.link`) \u0432 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0438, \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0439 \u0432 [path](../../Creating_a_table/Local_tables/Plain_and_real-time_table_settings.md#path), \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044f \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u043e\u0435 \u043f\u0435\u0440\u0435\u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435.\n\n\u0415\u0441\u043b\u0438 \u0432\u044b \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442\u0435 \u043f\u0435\u0440\u0435\u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0439 \u0438\u043d\u0434\u0435\u043a\u0441 \u043a \u043f\u0443\u0442\u0438, \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u043c\u0443 \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438, \u0434\u0435\u043c\u043e\u043d \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0438\u0442 \u044d\u0442\u043e \u0438 \u0443\u0434\u0430\u043b\u0438\u0442 \u0444\u0430\u0439\u043b \u0441\u0441\u044b\u043b\u043a\u0438.\n\n\u041f\u043e\u0441\u043b\u0435 \u043f\u0435\u0440\u0435\u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0434\u0435\u043c\u043e\u043d \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u0438\u0437 \u0432\u043d\u043e\u0432\u044c \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u043e\u0433\u043e \u043f\u0443\u0442\u0438. \u041f\u0440\u0438 \u0432\u0440\u0430\u0449\u0435\u043d\u0438\u0438 \u043e\u043d \u0438\u0449\u0435\u0442 \u043d\u043e\u0432\u044b\u0435 \u0432\u0435\u0440\u0441\u0438\u0438 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u043f\u043e \u043d\u043e\u0432\u043e\u043c\u0443 \u043f\u0435\u0440\u0435\u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043d\u043e\u043c\u0443 \u043f\u0443\u0442\u0438. \u0423\u0447\u0442\u0438\u0442\u0435, \u0447\u0442\u043e \u0434\u0435\u043c\u043e\u043d \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e \u043d\u0430 \u043e\u0431\u0449\u0438\u0435 \u043e\u0448\u0438\u0431\u043a\u0438, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0434\u0443\u0431\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0443\u0442\u0435\u0439 \u0434\u043b\u044f \u0440\u0430\u0437\u043d\u044b\u0445 \u0442\u0430\u0431\u043b\u0438\u0446. \u041e\u0434\u043d\u0430\u043a\u043e \u043e\u043d \u043d\u0435 \u0432\u044b\u044f\u0432\u043b\u044f\u0435\u0442 \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u0438, \u043a\u043e\u0433\u0434\u0430 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0442\u0430\u0431\u043b\u0438\u0446 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0442 \u043d\u0430 \u043e\u0434\u0438\u043d \u0438 \u0442\u043e\u0442 \u0436\u0435 \u043f\u0443\u0442\u044c \u0447\u0435\u0440\u0435\u0437 \u043f\u0435\u0440\u0435\u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435. \u0412 \u043d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e\u0439 \u0440\u0430\u0431\u043e\u0442\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0431\u043b\u043e\u043a\u0438\u0440\u0443\u044e\u0442\u0441\u044f \u0444\u0430\u0439\u043b\u043e\u043c `.spl`, \u043d\u043e \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0438 \u043c\u043e\u0436\u0435\u0442 \u0432\u044b\u0437\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b. \u0415\u0441\u043b\u0438 \u0432\u043e\u0437\u043d\u0438\u043a\u0430\u0435\u0442 \u043e\u0448\u0438\u0431\u043a\u0430 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043f\u0443\u0442\u044c \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u043f\u043e \u043b\u044e\u0431\u043e\u0439 \u043f\u0440\u0438\u0447\u0438\u043d\u0435), \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0440\u0443\u0447\u043d\u0443\u044e \u0438\u0441\u043f\u0440\u0430\u0432\u0438\u0442\u044c (\u0438\u043b\u0438 \u043f\u0440\u043e\u0441\u0442\u043e \u0443\u0434\u0430\u043b\u0438\u0442\u044c) \u0444\u0430\u0439\u043b \u0441\u0441\u044b\u043b\u043a\u0438.\n\n`indextool` \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u043f\u043e \u0444\u0430\u0439\u043b\u0443 \u0441\u0441\u044b\u043b\u043a\u0438, \u043d\u043e \u0434\u0440\u0443\u0433\u0438\u0435 \u0443\u0442\u0438\u043b\u0438\u0442\u044b (`indexer`, `index_converter` \u0438 \u0434\u0440.) \u043d\u0435 \u0440\u0430\u0441\u043f\u043e\u0437\u043d\u0430\u044e\u0442 \u0444\u0430\u0439\u043b \u0441\u0441\u044b\u043b\u043a\u0438 \u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442 \u043f\u0443\u0442\u044c, \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u044b\u0439 \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u043c \u0444\u0430\u0439\u043b\u0435, \u0438\u0433\u043d\u043e\u0440\u0438\u0440\u0443\u044f \u043f\u0435\u0440\u0435\u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435. \u0422\u0430\u043a\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c, \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0438\u043d\u0434\u0435\u043a\u0441 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e `indextool`, \u0438 \u043e\u043d \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u0435\u0442 \u0441 \u043d\u043e\u0432\u043e\u0433\u043e \u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u044f. \u041e\u0434\u043d\u0430\u043a\u043e \u0431\u043e\u043b\u0435\u0435 \u0441\u043b\u043e\u0436\u043d\u044b\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a \u0441\u043b\u0438\u044f\u043d\u0438\u0435, \u043d\u0435 \u0443\u0447\u0442\u0443\u0442 \u0444\u0430\u0439\u043b \u0441\u0441\u044b\u043b\u043a\u0438.\n\nCODE_BLOCK_1\n\n## RELOAD TABLES\n\nCODE_BLOCK_2\n\n\u042d\u0442\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0430 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u043e \u0441\u0438\u0441\u0442\u0435\u043c\u043d\u043e\u043c\u0443 \u0441\u0438\u0433\u043d\u0430\u043b\u0443 HUP, \u0432\u044b\u0437\u044b\u0432\u0430\u044f \u0432\u0440\u0430\u0449\u0435\u043d\u0438\u0435 \u0442\u0430\u0431\u043b\u0438\u0446. \u0422\u0435\u043c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435, \u043e\u043d\u0430 \u043d\u0435 \u0442\u043e\u0447\u043d\u043e \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u0435\u0442 \u043e\u0431\u044b\u0447\u043d\u044b\u0439 \u0441\u0438\u0433\u043d\u0430\u043b HUP (\u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0432\u044b\u0437\u0432\u0430\u043d \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439 `kill -HUP` \u0438\u043b\u0438 `indexer --rotate`). \u042d\u0442\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0430 \u0430\u043a\u0442\u0438\u0432\u043d\u043e \u0438\u0449\u0435\u0442 \u0442\u0430\u0431\u043b\u0438\u0446\u044b, \u0442\u0440\u0435\u0431\u0443\u044e\u0449\u0438\u0435 \u0432\u0440\u0430\u0449\u0435\u043d\u0438\u044f, \u0438 \u0441\u043f\u043e\u0441\u043e\u0431\u043d\u0430 \u043f\u0435\u0440\u0435\u0447\u0438\u0442\u0430\u0442\u044c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0435\u0441\u043b\u0438 \u0432\u044b \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442\u0435 Manticore \u0432 \u0440\u0435\u0436\u0438\u043c\u0435 plain \u0441 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u043c \u0444\u0430\u0439\u043b\u043e\u043c, \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0449\u0438\u043c \u043d\u0430 \u043d\u0435\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0443\u044e plain-\u0442\u0430\u0431\u043b\u0438\u0446\u0443, \u0442\u043e \u0435\u0441\u043b\u0438 \u0432\u044b \u043f\u043e\u0442\u043e\u043c \u043f\u043e\u043f\u044b\u0442\u0430\u0435\u0442\u0435\u0441\u044c \u0441\u0434\u0435\u043b\u0430\u0442\u044c `indexer --rotate` \u0434\u043b\u044f \u044d\u0442\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b, \u0441\u0435\u0440\u0432\u0435\u0440 \u043d\u0435 \u0440\u0430\u0441\u043f\u043e\u0437\u043d\u0430\u0435\u0442 \u043d\u043e\u0432\u0443\u044e \u0442\u0430\u0431\u043b\u0438\u0446\u0443, \u043f\u043e\u043a\u0430 \u0432\u044b \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u0435 `RELOAD TABLES` \u0438\u043b\u0438 \u043d\u0435 \u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u0435 \u0441\u0435\u0440\u0432\u0435\u0440.\n\n\u0412 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430 [seamless_rotate](../../Server_settings/Searchd.md#seamless_rotate), \u043d\u043e\u0432\u044b\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u043c\u043e\u0433\u0443\u0442 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u043f\u0440\u0438\u043e\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c\u0441\u044f, \u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u044b \u0431\u0443\u0434\u0443\u0442 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u044c \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u043e\u0448\u0438\u0431\u043a\u0438.\n\nCODE_BLOCK_3\n\n## \u0411\u0435\u0441\u0448\u043e\u0432\u043d\u043e\u0435 \u0432\u0440\u0430\u0449\u0435\u043d\u0438\u0435\n\n\u0412\u0440\u0430\u0449\u0435\u043d\u0438\u0435 \u043f\u0440\u0435\u0434\u043f\u043e\u043b\u0430\u0433\u0430\u0435\u0442, \u0447\u0442\u043e \u0441\u0442\u0430\u0440\u0430\u044f \u0432\u0435\u0440\u0441\u0438\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u043e\u0442\u0431\u0440\u0430\u0441\u044b\u0432\u0430\u0435\u0442\u0441\u044f, \u0430 \u043d\u043e\u0432\u0430\u044f \u0432\u0435\u0440\u0441\u0438\u044f \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442\u0441\u044f \u0438 \u0437\u0430\u043c\u0435\u043d\u044f\u0435\u0442 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0443\u044e. \u0412 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435 \u0437\u0430\u043c\u0435\u043d\u044b \u0441\u0435\u0440\u0432\u0435\u0440 \u0442\u0430\u043a\u0436\u0435 \u0434\u043e\u043b\u0436\u0435\u043d \u043e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u0442\u044c \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u043a \u043e\u0431\u043d\u043e\u0432\u043b\u044f\u0435\u043c\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435. \u0427\u0442\u043e\u0431\u044b \u0438\u0437\u0431\u0435\u0436\u0430\u0442\u044c \u0437\u0430\u0434\u0435\u0440\u0436\u0435\u043a \u0432 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432, \u0441\u0435\u0440\u0432\u0435\u0440 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0440\u0435\u0430\u043b\u0438\u0437\u0443\u0435\u0442 \u0431\u0435\u0441\u0448\u043e\u0432\u043d\u043e\u0435 \u0432\u0440\u0430\u0449\u0435\u043d\u0438\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b, \u043a\u0430\u043a \u043e\u043f\u0438\u0441\u0430\u043d\u043e \u043d\u0438\u0436\u0435.\n\n\u0422\u0430\u0431\u043b\u0438\u0446\u044b \u043c\u043e\u0433\u0443\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u043a\u044d\u0448\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432 \u041e\u0417\u0423. \u0412 \u043d\u0430\u0441\u0442\u043e\u044f\u0449\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u0444\u0430\u0439\u043b\u044b `.spa`, `.spb`, `.spi` \u0438 `.spm` \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u043f\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u043a\u0435\u0448\u0438\u0440\u0443\u044e\u0442\u0441\u044f (\u043e\u043d\u0438 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442 \u0434\u0430\u043d\u043d\u044b\u0435 \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u043e\u0432, \u0434\u0430\u043d\u043d\u044b\u0435 \u0431\u043b\u043e\u0431-\u0430\u0442\u0440\u0438\u0431\u0443\u0442\u043e\u0432, \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432 \u0438 \u043a\u0430\u0440\u0442\u0443 \u0443\u0434\u0430\u043b\u0451\u043d\u043d\u044b\u0445 \u0441\u0442\u0440\u043e\u043a \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e). \u0411\u0435\u0437 \u0431\u0435\u0441\u0448\u043e\u0432\u043d\u043e\u0433\u043e \u0432\u0440\u0430\u0449\u0435\u043d\u0438\u044f \u0432\u0440\u0430\u0449\u0435\u043d\u0438\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0441\u0442\u0430\u0440\u0430\u0435\u0442\u0441\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u044b\u0439 \u043e\u0431\u044a\u0451\u043c \u041e\u0417\u0423 \u0438 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c:\n\n1. \u041d\u043e\u0432\u044b\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u043e\u0442\u043a\u043b\u043e\u043d\u044f\u044e\u0442\u0441\u044f (\u0441 \u043a\u043e\u0434\u043e\u043c \u043e\u0448\u0438\u0431\u043a\u0438 \"retry\").\n2. `searchd` \u0436\u0434\u0451\u0442 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u044f \u0432\u0441\u0435\u0445 \u0442\u0435\u043a\u0443\u0449\u0438\u0445 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432.\n3. \u0421\u0442\u0430\u0440\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u043e\u0441\u0432\u043e\u0431\u043e\u0436\u0434\u0430\u0435\u0442\u0441\u044f, \u0438 \u0435\u0451 \u0444\u0430\u0439\u043b\u044b \u043f\u0435\u0440\u0435\u0438\u043c\u0435\u043d\u043e\u0432\u044b\u0432\u0430\u044e\u0442\u0441\u044f.\n4. \u041d\u043e\u0432\u044b\u0435 \u0444\u0430\u0439\u043b\u044b \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u043f\u0435\u0440\u0435\u0438\u043c\u0435\u043d\u043e\u0432\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u0438 \u0432\u044b\u0434\u0435\u043b\u044f\u0435\u0442\u0441\u044f \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0439 \u043e\u0431\u044a\u0451\u043c \u041e\u0417\u0423.\n5. \u041d\u043e\u0432\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u043e\u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0438 \u0441\u043b\u043e\u0432\u0430\u0440\u0438 \u043f\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f \u0432 \u041e\u0417\u0423.\n6. `searchd` \u0432\u043e\u0437\u043e\u0431\u043d\u043e\u0432\u043b\u044f\u0435\u0442 \u043e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0438\u0437 \u043d\u043e\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b.\n\n\u041e\u0434\u043d\u0430\u043a\u043e \u0435\u0441\u043b\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u043e\u0432 \u0438\u043b\u0438 \u0441\u043b\u043e\u0432\u0430\u0440\u0435\u0439 \u043c\u043d\u043e\u0433\u043e, \u0448\u0430\u0433 \u043f\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0439 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043c\u043e\u0436\u0435\u0442 \u0437\u0430\u043d\u044f\u0442\u044c \u0437\u0430\u043c\u0435\u0442\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u2014 \u0434\u043e \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u043c\u0438\u043d\u0443\u0442 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0444\u0430\u0439\u043b\u043e\u0432 \u043e\u0431\u044a\u0451\u043c\u043e\u043c 1\u20135+ \u0413\u0411."
        },
        "is_code_or_comment": false,
        "model": "openai:gpt-4.1-mini",
        "updated_at": 1766339911
    },
    "__meta": {
        "source_text": "# Rotating a table\n\nTable rotation is a procedure in which the searchd server looks for new versions of defined tables in the configuration. Rotation is supported only in Plain mode of operation.\n\nThere can be two cases:\n\n* for plain tables that are already loaded\n* tables added in configuration, but not loaded yet\n\nIn the first case, the indexer cannot put the new version of the table online as the running copy is locked and loaded by `searchd`. In this case `indexer` needs to be called with the [--rotate](../../Data_creation_and_modification/Adding_data_from_external_storages/Plain_tables_creation.md#Indexer-command-line-arguments) parameter. If rotate is used, `indexer` creates new table files with `.new.` in their names and sends a *HUP* signal to `searchd` informing it about the new version. The `searchd` will perform a lookup and will put the new version of the table in place and discard the old one. In some cases, it might be desired to create the new version of the table but not perform rotate as soon as possible. For example, it might be desired to first check the health of the new table versions. In this case,  `indexer` can accept the`--nohup` parameter which will forbid sending the HUP signal to the server.\n\nNew tables can be loaded by rotation; however, the regular handling of the HUP signal is to check for new tables only if the configuration has changed since server startup. If the table was already defined in the configuration, the table should be first created by running `indexer` without rotation and perform the [RELOAD TABLES](../../Data_creation_and_modification/Adding_data_from_external_storages/Rotating_a_table.md#RELOAD-TABLES) statement instead.\n\nThere are also two specialized statements that can be used to perform rotations on tables:\n\n## RELOAD TABLE\n\n```sql\nRELOAD TABLE tbl [ FROM '/path/to/table_files' [ OPTION switchover=1 ] ];\n```\n\nThe `RELOAD TABLE` command enables table rotation via SQL.\n\nThis command functions in three modes. In the first mode, without specifying a path, the Manticore server checks for new table files in the directory indicated by the [path](../../Creating_a_table/Local_tables/Plain_and_real-time_table_settings.md#path). New table files must be named as `tbl.new.sp?`.\n\nIf you specify a path, the server searches for table files in that directory, relocates them to the table [path](../../Creating_a_table/Local_tables/Plain_and_real-time_table_settings.md#path), renames them from `tbl.sp?` to `tbl.new.sp?`, and rotates them.\n\nThe third mode, activated by `OPTION switchover=1`, switches the index to the new path. Here, the daemon tries to load the table directly from the new path without moving the files. If loading is successful, this new index supersedes the old one.\n\nAlso, the daemon writes a unique link file (`tbl.link`) in the directory specified by [path](../../Creating_a_table/Local_tables/Plain_and_real-time_table_settings.md#path), maintaining persistent redirection.\n\nIf you revert a redirected index to the path specified in the configuration, the daemon will detect this and delete the link file.\n\nOnce redirected, the daemon retrieves the table from the newly linked path. When rotating, it looks for new table versions at the newly redirected path. Bear in mind, the daemon checks the configuration for common errors, like duplicate paths across different tables. However, it won't identify if multiple tables point to the same path via redirection. Under normal operations, tables are locked with the `.spl` file, but disabling the lock may cause problems. If there's an error (e.g., the path is inaccessible for any reason), you should manually correct (or simply delete) the link file.\n\n`indextool` follows the link file, but other tools (`indexer`, `index_converter`, etc.) do not recognize the link file and consistently use the path defined in the configuration file, ignoring any redirection. Thus, you can inspect the index with `indextool`, and it will read from the new location. However, more complex operations like merging will not acknowledge any link file.\n\n```sql\nmysql> RELOAD TABLE plain_table;\nmysql> RELOAD TABLE plain_table FROM '/home/mighty/new_table_files';\nmysql> RELOAD TABLE plain_table FROM '/home/mighty/new/place/for/table/table_files' OPTION switchover=1;\n```\n\n## RELOAD TABLES\n\n```sql\nRELOAD TABLES;\n```\n\nThis command functions similarly to the HUP system signal, triggering a rotation of tables. Nevertheless, it doesn't exactly mirror the typical HUP signal (which can come from a `kill -HUP` command or `indexer --rotate`). This command actively searches for any tables needing rotation and is capable of re-reading the configuration. Suppose you launch Manticore in plain mode with a config file that points to a nonexistent plain table. If you then attempt to `indexer --rotate` the table, the new table won't be recognized by the server until you execute `RELOAD TABLES` or restart the server.\n\nDepending on the value of the [seamless_rotate](../../Server_settings/Searchd.md#seamless_rotate) setting, new queries might be shortly stalled, and clients will receive temporary errors.\n\n```sql\nmysql> RELOAD TABLES;\nQuery OK, 0 rows affected (0.01 sec)\n```\n\n## Seamless rotate\n\nThe rotate assumes old table version is discarded and new table version is loaded and replaces the existing one. During this swapping, the server needs to also serve incoming queries made on the table that is going to be updated. To avoid stalls of the queries, the server implements a seamless rotate of the table by default, as described below.\n\nTables may contain data that needs to be precached in RAM. At the moment, `.spa`, `.spb`, `.spi` and `.spm` files are fully precached (they contain attribute data, blob attribute data, keyword table, and killed row map, respectively). Without seamless rotate, rotating a table tries to use as little RAM as possible and works as follows:\n\n1. New queries are temporarily rejected (with \"retry\" error code).\n2. `searchd` waits for all currently running queries to finish.\n3. Old table is deallocated and its files are renamed.\n4. New table files are renamed and required RAM is allocated.\n5. New table attribute and dictionary data is preloaded to RAM.\n6. `searchd` resumes serving queries from the new table.\n\nHowever, if there's a lot of attribute or dictionary data, then the preloading step could take noticeable time - up to several minutes in case of preloading 1-5+ GB files.\n\nWith seamless rotate enabled, rotation works as follows:\n\n1. New table RAM storage is allocated.\n2. New table attribute and dictionary data is asynchronously preloaded to RAM.\n3. On success, old table is deallocated and both tables' files are renamed.\n4. On failure, new table is deallocated.\n5. At any given moment, queries are served either from old or new table copy.\n\nSeamless rotate comes at the cost of higher **peak** memory usage during the rotation (because both old and new copies of `.spa/.spb/.spi/.spm` data need to be in RAM while preloading the new copy). However, average usage stays the same.\n\nExample:\n\n```ini\nseamless_rotate = 1\n```\n<!-- proofread -->\n\n",
        "updated_at": 1768530797,
        "source_md5": "71ec412b984987b70c7ce4b3eec70d3b"
    }
}