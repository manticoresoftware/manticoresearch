{
    "922eb3d7aa6cb7ce2efe34be92363a7d504aa08b0a2ba10e9a512f92d79f8571": {
        "original": "<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_10\n\n<!-- response -->\n\nCODE_BLOCK_11\n\n<!-- end -->\n\n<!-- example kafka_create_source -->\n\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_12\n\n<!-- response -->\n\nCODE_BLOCK_13\n\n<!-- end -->\n\n<!-- example kafka_view -->\n\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_14\n\n<!-- response -->\n\nCODE_BLOCK_15\n\n<!-- end -->\n\n<!-- example kafka_show -->\n\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_16\n\n<!-- response -->\n\nCODE_BLOCK_17\n\n<!-- end -->\n\n### Altering materialized views\n\n<!-- example mv_suspend -->\n\nYou can suspend data consumption by altering materialized views.\n\nIf you remove the `source` without deleting the MV, it automatically suspends. After recreating the source, unsuspend the MV manually using the `ALTER` command.\n\nCurrently, only materialized views can be altered. To change `source` parameters, drop and recreate the source.\n\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_18\n\n<!-- response -->\n\nCODE_BLOCK_19\n\n<!-- end -->\n\n### Sharding with Kafka\n\nYou can also specify a `partition_list` for each Kafka topic.\nOne of the main benefits of this approach is the ability to implement `sharding` for your table via Kafka.\nTo achieve this, you should create a separate chain of `source` \u2192 `materialized view` \u2192 `destination table` for each shard:\n\n**Sources:**\nCODE_BLOCK_20\n\n**Destination Tables:**\n\nCODE_BLOCK_21\n\n**Materialized Views:**\n\nCODE_BLOCK_22\n\n#### \u26a0\ufe0f Important Notes:\n\n* In this setup, rebalancing must be managed manually.\n* Kafka does not distribute messages using a round-robin strategy by default.\n* To achieve round-robin-like distribution when sending data, make sure your Kafka producer is configured with:\n  * `parse.key=true`\n  * `key.separator={your_delimiter}`\n\nOtherwise, Kafka will distribute messages based on its own internal rules, which may lead to uneven partitioning.\n\n### Troubleshooting\n\n#### Duplicate entries\n\nKafka offsets commit after each batch or when processing times out. If the process stops unexpectedly during a materialized view query, you may see duplicate entries. To avoid this, include an `id` field in your schema, allowing Manticore Search to prevent duplicates in the table.\n\n### How it works internally\n\n- **Worker initialization:** After configuring a source and materialized view, Manticore Search sets up a dedicated worker to handle data ingestion from Kafka.\n- **Message mapping:** Messages are mapped according to the source configuration schema, transforming them into a structured format.\n- **Batching:** Messages are grouped into batches for efficient processing. Batch size can be adjusted to suit your performance and latency needs.\n- **Buffering:** Mapped data batches are stored in a buffer table for efficient bulk operations.\n- **Materialized view processing:** The view logic is applied to data in the buffer table, performing any transformations or filtering.\n- **Data transfer:** Processed data is then transferred to the destination real-time table.\n- **Cleanup:** The buffer table is cleared after each batch, ensuring it\u2019s ready for the next set of data.\n\n<!-- proofread -->\n\n",
        "translations": {
            "chinese": "<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_10\n\n<!-- response -->\n\nCODE_BLOCK_11\n\n<!-- end -->\n\n<!-- example kafka_create_source -->\n\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_12\n\n<!-- response -->\n\nCODE_BLOCK_13\n\n<!-- end -->\n\n<!-- example kafka_view -->\n\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_14\n\n<!-- response -->\n\nCODE_BLOCK_15\n\n<!-- end -->\n\n<!-- example kafka_show -->\n\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_16\n\n<!-- response -->\n\nCODE_BLOCK_17\n\n<!-- end -->\n\n### \u4fee\u6539\u7269\u5316\u89c6\u56fe\n\n<!-- example mv_suspend -->\n\n\u60a8\u53ef\u4ee5\u901a\u8fc7\u4fee\u6539\u7269\u5316\u89c6\u56fe\u6765\u6682\u505c\u6570\u636e\u6d88\u8d39\u3002\n\n\u5982\u679c\u60a8\u5220\u9664\u4e86`source`\u4f46\u6ca1\u6709\u5220\u9664\u7269\u5316\u89c6\u56fe\uff0c\u5b83\u4f1a\u81ea\u52a8\u6682\u505c\u3002\u91cd\u65b0\u521b\u5efa\u6e90\u540e\uff0c\u9700\u8981\u4f7f\u7528`ALTER`\u547d\u4ee4\u624b\u52a8\u53d6\u6d88\u6682\u505c\u7269\u5316\u89c6\u56fe\u3002\n\n\u76ee\u524d\uff0c\u53ea\u80fd\u4fee\u6539\u7269\u5316\u89c6\u56fe\u3002\u8981\u66f4\u6539`source`\u53c2\u6570\uff0c\u8bf7\u5220\u9664\u5e76\u91cd\u65b0\u521b\u5efa\u6e90\u3002\n\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_18\n\n<!-- response -->\n\nCODE_BLOCK_19\n\n<!-- end -->\n\n### \u4f7f\u7528 Kafka \u5206\u7247\n\n\u60a8\u8fd8\u53ef\u4ee5\u4e3a\u6bcf\u4e2a Kafka \u4e3b\u9898\u6307\u5b9a`partition_list`\u3002\n\u8fd9\u79cd\u65b9\u6cd5\u7684\u4e3b\u8981\u597d\u5904\u4e4b\u4e00\u662f\u80fd\u591f\u901a\u8fc7 Kafka \u4e3a\u60a8\u7684\u8868\u5b9e\u73b0`\u5206\u7247`\u3002\n\u4e3a\u6b64\uff0c\u60a8\u5e94\u8be5\u4e3a\u6bcf\u4e2a\u5206\u7247\u521b\u5efa\u4e00\u6761\u72ec\u7acb\u7684`source` \u2192 `\u7269\u5316\u89c6\u56fe` \u2192 `\u76ee\u6807\u8868`\u94fe\uff1a\n\n**\u6e90:**\nCODE_BLOCK_20\n\n**\u76ee\u6807\u8868:**\n\nCODE_BLOCK_21\n\n**\u7269\u5316\u89c6\u56fe:**\n\nCODE_BLOCK_22\n\n#### \u26a0\ufe0f \u91cd\u8981\u6ce8\u610f\u4e8b\u9879\uff1a\n\n* \u5728\u6b64\u8bbe\u7f6e\u4e2d\uff0c\u91cd\u65b0\u5747\u8861\u5fc5\u987b\u624b\u52a8\u7ba1\u7406\u3002\n* Kafka \u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4e0d\u4f7f\u7528\u8f6e\u8be2\u7b56\u7565\u5206\u53d1\u6d88\u606f\u3002\n* \u82e5\u8981\u5728\u53d1\u9001\u6570\u636e\u65f6\u5b9e\u73b0\u7c7b\u4f3c\u8f6e\u8be2\u7684\u5206\u53d1\uff0c\u8bf7\u786e\u4fdd\u60a8\u7684 Kafka \u751f\u4ea7\u8005\u914d\u7f6e\u4e86\uff1a\n  * `parse.key=true`\n  * `key.separator={your_delimiter}`\n\n\u5426\u5219\uff0cKafka \u4f1a\u6839\u636e\u5176\u5185\u90e8\u89c4\u5219\u5206\u53d1\u6d88\u606f\uff0c\u8fd9\u53ef\u80fd\u5bfc\u81f4\u5206\u533a\u4e0d\u5747\u3002\n\n### \u6545\u969c\u6392\u9664\n\n#### \u91cd\u590d\u6761\u76ee\n\nKafka \u5728\u6bcf\u4e2a\u6279\u6b21\u540e\u6216\u5904\u7406\u8d85\u65f6\u65f6\u63d0\u4ea4\u504f\u79fb\u91cf\u3002\u5982\u679c\u7269\u5316\u89c6\u56fe\u67e5\u8be2\u8fc7\u7a0b\u4e2d\u610f\u5916\u505c\u6b62\uff0c\u60a8\u53ef\u80fd\u4f1a\u770b\u5230\u91cd\u590d\u6761\u76ee\u3002\u4e3a\u907f\u514d\u6b64\u60c5\u51b5\uff0c\u8bf7\u5728\u60a8\u7684\u6a21\u5f0f\u4e2d\u5305\u542b\u4e00\u4e2a`id`\u5b57\u6bb5\uff0c\u4f7f Manticore Search \u80fd\u591f\u9632\u6b62\u8868\u4e2d\u7684\u91cd\u590d\u3002\n\n### \u5185\u90e8\u5de5\u4f5c\u539f\u7406\n\n- **\u5de5\u4f5c\u7ebf\u7a0b\u521d\u59cb\u5316\uff1a** \u914d\u7f6e\u6e90\u548c\u7269\u5316\u89c6\u56fe\u540e\uff0cManticore Search \u4f1a\u8bbe\u7f6e\u4e13\u7528\u5de5\u4f5c\u7ebf\u7a0b\u5904\u7406\u6765\u81ea Kafka \u7684\u6570\u636e\u6444\u53d6\u3002\n- **\u6d88\u606f\u6620\u5c04\uff1a** \u6d88\u606f\u6839\u636e\u6e90\u914d\u7f6e\u7684\u6a21\u5f0f\u6620\u5c04\uff0c\u8f6c\u6362\u4e3a\u7ed3\u6784\u5316\u683c\u5f0f\u3002\n- **\u6279\u5904\u7406\uff1a** \u6d88\u606f\u88ab\u5206\u7ec4\u4e3a\u6279\u6b21\u4ee5\u63d0\u9ad8\u5904\u7406\u6548\u7387\u3002\u6279\u5927\u5c0f\u53ef\u8c03\u6574\u4ee5\u6ee1\u8db3\u6027\u80fd\u548c\u5ef6\u8fdf\u9700\u6c42\u3002\n- **\u7f13\u51b2\uff1a** \u6620\u5c04\u540e\u7684\u6570\u636e\u6279\u6b21\u5b58\u50a8\u5728\u7f13\u51b2\u8868\u4e2d\uff0c\u4ee5\u4fbf\u9ad8\u6548\u7684\u6279\u91cf\u64cd\u4f5c\u3002\n- **\u7269\u5316\u89c6\u56fe\u5904\u7406\uff1a** \u5bf9\u7f13\u51b2\u8868\u4e2d\u7684\u6570\u636e\u5e94\u7528\u89c6\u56fe\u903b\u8f91\uff0c\u6267\u884c\u4efb\u4f55\u8f6c\u6362\u6216\u8fc7\u6ee4\u3002\n- **\u6570\u636e\u4f20\u8f93\uff1a** \u5904\u7406\u540e\u7684\u6570\u636e\u968f\u540e\u4f20\u8f93\u5230\u76ee\u6807\u7684\u5b9e\u65f6\u8868\u3002\n- **\u6e05\u7406\uff1a** \u6bcf\u4e2a\u6279\u6b21\u5b8c\u6210\u540e\u6e05\u7a7a\u7f13\u51b2\u8868\uff0c\u786e\u4fdd\u4e3a\u4e0b\u4e00\u6279\u6570\u636e\u505a\u597d\u51c6\u5907\u3002\n\n<!-- proofread -->\n\n",
            "russian": "<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_10\n\n<!-- response -->\n\nCODE_BLOCK_11\n\n<!-- end -->\n\n<!-- example kafka_create_source -->\n\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_12\n\n<!-- response -->\n\nCODE_BLOCK_13\n\n<!-- end -->\n\n<!-- example kafka_view -->\n\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_14\n\n<!-- response -->\n\nCODE_BLOCK_15\n\n<!-- end -->\n\n<!-- example kafka_show -->\n\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_16\n\n<!-- response -->\n\nCODE_BLOCK_17\n\n<!-- end -->\n\n### \u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u044b\u0445 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0439\n\n<!-- example mv_suspend -->\n\n\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u0438\u043e\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445, \u0438\u0437\u043c\u0435\u043d\u0438\u0432 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f.\n\n\u0415\u0441\u043b\u0438 \u0432\u044b \u0443\u0434\u0430\u043b\u0438\u0442\u0435 `source` \u0431\u0435\u0437 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u041c\u041f, \u043e\u043d \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043f\u0440\u0438\u043e\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0441\u044f. \u041f\u043e\u0441\u043b\u0435 \u0432\u043e\u0441\u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0430 \u0441\u043d\u0438\u043c\u0438\u0442\u0435 \u043f\u0440\u0438\u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0443 \u041c\u041f \u0432\u0440\u0443\u0447\u043d\u0443\u044e \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043a\u043e\u043c\u0430\u043d\u0434\u044b `ALTER`.\n\n\u0412 \u043d\u0430\u0441\u0442\u043e\u044f\u0449\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u043c\u043e\u0436\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f. \u0427\u0442\u043e\u0431\u044b \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b `source`, \u0443\u0434\u0430\u043b\u0438\u0442\u0435 \u0438 \u0441\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a \u0437\u0430\u043d\u043e\u0432\u043e.\n\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_18\n\n<!-- response -->\n\nCODE_BLOCK_19\n\n<!-- end -->\n\n### \u0428\u0430\u0440\u0434\u0438\u043d\u0433 \u0441 Kafka\n\n\u0412\u044b \u0442\u0430\u043a\u0436\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u0443\u043a\u0430\u0437\u0430\u0442\u044c `partition_list` \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0439 \u0442\u0435\u043c\u044b Kafka.\n\u041e\u0434\u043d\u0438\u043c \u0438\u0437 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0445 \u043f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432 \u0442\u0430\u043a\u043e\u0433\u043e \u043f\u043e\u0434\u0445\u043e\u0434\u0430 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 `\u0448\u0430\u0440\u0434\u0438\u043d\u0433\u0430` \u0432\u0430\u0448\u0435\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0447\u0435\u0440\u0435\u0437 Kafka.\n\u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u0443\u044e \u0446\u0435\u043f\u043e\u0447\u043a\u0443 `source` \u2192 `materialized view` \u2192 `destination table` \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0448\u0430\u0440\u0434\u0430:\n\n**\u0418\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0438:**\nCODE_BLOCK_20\n\n**\u0422\u0430\u0431\u043b\u0438\u0446\u044b \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f:**\n\nCODE_BLOCK_21\n\n**\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f:**\n\nCODE_BLOCK_22\n\n#### \u26a0\ufe0f \u0412\u0430\u0436\u043d\u044b\u0435 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u044f:\n\n* \u0412 \u044d\u0442\u043e\u0439 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u0440\u0435\u0431\u0430\u043b\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u043a\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c\u0441\u044f \u0432\u0440\u0443\u0447\u043d\u0443\u044e.\n* \u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e Kafka \u043d\u0435 \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043f\u043e \u0441\u0445\u0435\u043c\u0435 round-robin.\n* \u0427\u0442\u043e\u0431\u044b \u0434\u043e\u0431\u0438\u0442\u044c\u0441\u044f \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u043f\u043e\u0445\u043e\u0436\u0435\u0433\u043e \u043d\u0430 round-robin \u043f\u0440\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435 \u0434\u0430\u043d\u043d\u044b\u0445, \u0443\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044c, \u0447\u0442\u043e \u0432\u0430\u0448 Kafka producer \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d \u0441:\n  * `parse.key=true`\n  * `key.separator={your_delimiter}`\n\n\u0418\u043d\u0430\u0447\u0435 Kafka \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043f\u043e \u0441\u0432\u043e\u0438\u043c \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u043c \u043f\u0440\u0430\u0432\u0438\u043b\u0430\u043c, \u0447\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u0438\u0432\u0435\u0441\u0442\u0438 \u043a \u043d\u0435\u0440\u0430\u0432\u043d\u043e\u043c\u0435\u0440\u043d\u043e\u043c\u0443 \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044e \u043f\u043e \u043f\u0430\u0440\u0442\u0438\u0446\u0438\u044f\u043c.\n\n### \u0423\u0441\u0442\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u043d\u0435\u043f\u043e\u043b\u0430\u0434\u043e\u043a\n\n#### \u0414\u0443\u0431\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u043f\u0438\u0441\u0435\u0439\n\n\u0424\u0438\u043a\u0441\u0430\u0446\u0438\u044f \u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0439 Kafka \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \u043f\u043e\u0441\u043b\u0435 \u043a\u0430\u0436\u0434\u043e\u0439 \u043f\u0430\u0440\u0442\u0438\u0438 \u0438\u043b\u0438 \u043f\u0440\u0438 \u0438\u0441\u0442\u0435\u0447\u0435\u043d\u0438\u0438 \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438. \u0415\u0441\u043b\u0438 \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u043d\u0435\u043e\u0436\u0438\u0434\u0430\u043d\u043d\u043e \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0441\u044f \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u043e\u0433\u043e \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f, \u043c\u043e\u0433\u0443\u0442 \u043f\u043e\u044f\u0432\u0438\u0442\u044c\u0441\u044f \u0434\u0443\u0431\u043b\u0438\u043a\u0430\u0442\u044b \u0437\u0430\u043f\u0438\u0441\u0435\u0439. \u0427\u0442\u043e\u0431\u044b \u0438\u0437\u0431\u0435\u0436\u0430\u0442\u044c \u044d\u0442\u043e\u0433\u043e, \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u0435 \u0432 \u0441\u0445\u0435\u043c\u0443 \u043f\u043e\u043b\u0435 `id`, \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u044e\u0449\u0435\u0435 Manticore Search \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0449\u0430\u0442\u044c \u0434\u0443\u0431\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0435.\n\n### \u041a\u0430\u043a \u044d\u0442\u043e \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0432\u043d\u0443\u0442\u0440\u0438\n\n- **\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0440\u0430\u0431\u043e\u0442\u043d\u0438\u043a\u0430:** \u041f\u043e\u0441\u043b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0430 \u0438 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u043e\u0433\u043e \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f Manticore Search \u0441\u043e\u0437\u0434\u0430\u0435\u0442 \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u043e\u0433\u043e \u0440\u0430\u0431\u043e\u0442\u043d\u0438\u043a\u0430 \u0434\u043b\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043f\u043e\u0441\u0442\u0443\u043f\u043b\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u0438\u0437 Kafka.\n- **\u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439:** \u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0441\u043e\u0433\u043b\u0430\u0441\u043d\u043e \u0441\u0445\u0435\u043c\u0435 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0430, \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u0443\u044f\u0441\u044c \u0432 \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442.\n- **\u0413\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u043a\u0430 \u0432 \u043f\u0430\u0440\u0442\u0438\u0438:** \u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0433\u0440\u0443\u043f\u043f\u0438\u0440\u0443\u044e\u0442\u0441\u044f \u0432 \u043f\u0430\u0440\u0442\u0438\u0438 \u0434\u043b\u044f \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0439 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438. \u0420\u0430\u0437\u043c\u0435\u0440 \u043f\u0430\u0440\u0442\u0438\u0438 \u043c\u043e\u0436\u043d\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0432\u0430\u0448\u0438\u0445 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u0439 \u043a \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u0438 \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430\u043c.\n- **\u0411\u0443\u0444\u0435\u0440\u0438\u0437\u0430\u0446\u0438\u044f:** \u041f\u0430\u0440\u0442\u0438\u0438 \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u044e\u0442\u0441\u044f \u0432\u043e \u0432\u0441\u043f\u043e\u043c\u043e\u0433\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 \u0431\u0443\u0444\u0435\u0440\u0430 \u0434\u043b\u044f \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u044b\u0445 \u043c\u0430\u0441\u0441\u043e\u0432\u044b\u0445 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439.\n- **\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u043e\u0433\u043e \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f:** \u041a \u0434\u0430\u043d\u043d\u044b\u043c \u0432\u043e \u0432\u0441\u043f\u043e\u043c\u043e\u0433\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u043b\u043e\u0433\u0438\u043a\u0430 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f, \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u044e\u0442\u0441\u044f \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0438\u043b\u0438 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f.\n- **\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0434\u0430\u043d\u043d\u044b\u0445:** \u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u0442\u0435\u043c \u043f\u0435\u0440\u0435\u0434\u0430\u044e\u0442\u0441\u044f \u0432 \u043a\u043e\u043d\u0435\u0447\u043d\u0443\u044e \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438.\n- **\u041e\u0447\u0438\u0441\u0442\u043a\u0430:** \u0412\u0441\u043f\u043e\u043c\u043e\u0433\u0430\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u043e\u0447\u0438\u0449\u0430\u0435\u0442\u0441\u044f \u043f\u043e\u0441\u043b\u0435 \u043a\u0430\u0436\u0434\u043e\u0439 \u043f\u0430\u0440\u0442\u0438\u0438, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c\u0441\u044f \u043a \u043f\u0440\u0438\u0435\u043c\u0443 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0433\u043e \u043d\u0430\u0431\u043e\u0440\u0430 \u0434\u0430\u043d\u043d\u044b\u0445.\n\n<!-- proofread -->"
        },
        "is_code_or_comment": false,
        "model": "openai:gpt-4.1-mini",
        "updated_at": 1766339809
    },
    "44a73d6e7b9f72718ed04571f4a8958d05ae37109051dd5083307f00faaa5628": {
        "original": "# Syncing from Kafka\n\n> NOTE: this functionality requires [Manticore Buddy](../Installation/Manticore_Buddy.md). If it doesn't work, make sure Buddy is installed.\n\nManticore supports integration with [Apache Kafka](https://kafka.apache.org/) real-time data ingestion through Kafka sources and materialized views, allowing for real-time data indexing and search. Currently, **apache/kafka versions 3.7.0-4.1.0** are tested and supported.\n\nTo get started, you need to:\n1. **Define the source:** Specify the Kafka topic from which Manticore Search will read messages. This setup includes details like the broker\u2019s host, port, and topic name.\n2. **Set up the destination table:** Choose a Manticore real-time table to store the incoming Kafka data.\n3. **Create a materialized view:** Set up a materialized view (`mv`) to handle data transformation and mapping from Kafka to the destination table in Manticore Search. Here, you\u2019ll define field mappings, data transformations, and any filters or conditions for the incoming data stream.\n\n## Source\n\n<!-- example kafka_source -->\n\nThe `source` configuration allows you to define the `broker`, `topic list`, `consumer group`, and the message structure.\n\n#### Schema\n\nDefine the schema using Manticore field types like `int`, `float`, `text`, `json`, etc.\n\nCODE_BLOCK_0\n\nAll schema keys are case-insensitive, meaning `Products`, `products`, and `PrOdUcTs` are treated the same. They are all converted to lowercase.\n\nIf your field names don't match the [field name syntax](../Creating_a_table/Data_types.md#Field-name-syntax) allowed in Manticore Search (for example, if they contain special characters or start with numbers), you must define a schema mapping. For instance, `$keyName` or `123field` are valid keys in JSON but not valid field names in Manticore Search. If you try to use invalid field names without proper mapping, Manticore will return an error and the source creation will fail.\n\nTo handle such cases, use the following schema syntax to map invalid field names to valid ones:\n\nCODE_BLOCK_1\n\nFor example:\nCODE_BLOCK_2\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_3\n\n<!-- response -->\n\nCODE_BLOCK_4\n\n<!-- end -->\n\n#### Options\n\n| Option | Accepted Values | Description                                                                                                         |\n|-|----------------|---------------------------------------------------------------------------------------------------------------------|\n| `type` | `kafka`        | Sets the source type. Currently, only `kafka` is supported                                                          |\n| `broker_list` | `host:port [, ...]` | Specifies Kafka broker URLs                                                                                         |\n| `topic_list` | `string [, ...]` | Lists Kafka topics to consume from                                                                                  |\n| `consumer_group`| `string`       | Defines the Kafka consumer group, defaulting to `manticore`.                                                        |\n| `num_consumers` | `int`          | Number of consumers to handle messages.                                                                             |\n| `partition_list` | `int [, ...]`  | List of partitions for reading [more](../Integration/Kafka.md#Sharding-with-Kafka).                                 |\n| `batch` | `int`          | Number of messages to process before moving on. Default is `100`; processes remaining messages on timeout otherwise |\n\n### Destination table\n\n<!-- example kafka_destination -->\n\nThe destination table is a regular real-time table where the results of Kafka message processing are stored. This table should be defined to match the schema requirements of the incoming data and optimized for the query performance needs of your application. Read more about creating real-time tables [here](../Creating_a_table/Local_tables/Real-time_table.md#Creating-a-real-time-table:).\n\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_5\n\n<!-- response -->\n\nCODE_BLOCK_6\n\n<!-- end -->\n\n### Materialized view\n\n<!-- example kafka_mv -->\n\nA materialized view enables data transformation from Kafka messages. You can rename fields, apply Manticore Search functions, and perform sorting, grouping, and other data operations.\n\nA materialized view acts as a query that moves data from the Kafka source to the destination table, letting you use Manticore Search syntax to customize these queries. Make sure that fields in the `select` match those in the source.\n\nCODE_BLOCK_7\n\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_8\n\n<!-- response -->\n\nCODE_BLOCK_9\n\n<!-- end -->\n\nData is transferred from Kafka to Manticore Search in batches, which are cleared after each run. For calculations across batches, such as AVG, use caution, as these may not work as expected due to batch-by-batch processing.\n\n\n### Field Mapping\n\nHere's a mapping table based on the examples above:\n\n| Kafka           | Source   | Buffer   | MV                                | Destination |\n|-----------------|----------|----------|-----------------------------------|-------------|\n| `id`              | `id`       | `id`       | `id`                                | `id`          |\n| `term`            | `term`     | `term`     | `term as name`                      | `name`        |\n| `unnecessary_key` which we're not interested in | -        | -        |                                   |             |\n| `$abbrev`         | `abbrev`   | `abbrev`   | `abbrev` as `short_name`              | `short_name`  |\n| -                 | -        | -         | `UTC_TIMESTAMP() as received_at`  | `received_at` |\n| `GlossDef`        | `glossdef` | `glossdef` | `glossdef.size as size`             | `size`        |\n\n### Listing\n\n<!-- example kafka_listing -->\n\nTo view sources and materialized views in Manticore Search, use these commands:\n- `SHOW SOURCES`: Lists all configured sources.\n- `SHOW MVS`: Lists all materialized views.\n- `SHOW MV view_table`: Shows detailed information on a specific materialized view.",
        "translations": {
            "chinese": "# \u4ece Kafka \u540c\u6b65\n\n> \u6ce8\u610f\uff1a\u6b64\u529f\u80fd\u9700\u8981 [Manticore Buddy](../Installation/Manticore_Buddy.md)\u3002\u5982\u679c\u65e0\u6cd5\u4f7f\u7528\uff0c\u8bf7\u786e\u4fdd\u5df2\u5b89\u88c5 Buddy\u3002\n\nManticore \u652f\u6301\u901a\u8fc7 Kafka \u6e90\u548c\u7269\u5316\u89c6\u56fe\u4e0e [Apache Kafka](https://kafka.apache.org/) \u5b9e\u65f6\u6570\u636e\u6444\u53d6\u96c6\u6210\uff0c\u5b9e\u73b0\u5b9e\u65f6\u6570\u636e\u7d22\u5f15\u548c\u641c\u7d22\u3002\u76ee\u524d\uff0c\u652f\u6301\u7ecf\u8fc7\u6d4b\u8bd5\u7684\u7248\u672c\u4e3a **apache/kafka 3.7.0-4.1.0**\u3002\n\n\u5f00\u59cb\u524d\uff0c\u4f60\u9700\u8981\uff1a\n1. **\u5b9a\u4e49\u6e90\uff1a** \u6307\u5b9a Manticore Search \u4ece\u4e2d\u8bfb\u53d6\u6d88\u606f\u7684 Kafka \u4e3b\u9898\u3002\u6b64\u8bbe\u7f6e\u5305\u62ec\u4ee3\u7406\u7684\u4e3b\u673a\u3001\u7aef\u53e3\u548c\u4e3b\u9898\u540d\u79f0\u7b49\u7ec6\u8282\u3002\n2. **\u8bbe\u7f6e\u76ee\u6807\u8868\uff1a** \u9009\u62e9\u4e00\u4e2a Manticore \u5b9e\u65f6\u8868\uff0c\u7528\u4e8e\u5b58\u50a8\u63a5\u6536\u5230\u7684 Kafka \u6570\u636e\u3002\n3. **\u521b\u5efa\u7269\u5316\u89c6\u56fe\uff1a** \u8bbe\u7f6e\u4e00\u4e2a\u7269\u5316\u89c6\u56fe\uff08`mv`\uff09\uff0c\u7528\u4e8e\u5904\u7406\u4ece Kafka \u5230 Manticore Search \u76ee\u6807\u8868\u7684\u6570\u636e\u8f6c\u6362\u548c\u6620\u5c04\u3002\u5728\u8fd9\u91cc\uff0c\u4f60\u5c06\u5b9a\u4e49\u5b57\u6bb5\u6620\u5c04\u3001\u6570\u636e\u8f6c\u6362\uff0c\u4ee5\u53ca\u5bf9\u4f20\u5165\u6570\u636e\u6d41\u7684\u4efb\u4f55\u8fc7\u6ee4\u6216\u6761\u4ef6\u3002\n\n## \u6e90\n\n<!-- example kafka_source -->\n\n`source` \u914d\u7f6e\u5141\u8bb8\u4f60\u5b9a\u4e49 `broker`\u3001`topic list`\u3001`consumer group` \u548c\u6d88\u606f\u7ed3\u6784\u3002\n\n#### \u67b6\u6784\n\n\u4f7f\u7528 Manticore \u5b57\u6bb5\u7c7b\u578b\u5b9a\u4e49\u67b6\u6784\uff0c\u5982 `int`\u3001`float`\u3001`text`\u3001`json` \u7b49\u3002\n\nCODE_BLOCK_0\n\n\u6240\u6709\u67b6\u6784\u952e\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff0c\u610f\u5473\u7740 `Products`\u3001`products` \u548c `PrOdUcTs` \u88ab\u89c6\u4e3a\u76f8\u540c\uff0c\u90fd\u4f1a\u8f6c\u6362\u4e3a\u5c0f\u5199\u3002\n\n\u5982\u679c\u4f60\u7684\u5b57\u6bb5\u540d\u4e0d\u7b26\u5408 Manticore Search \u4e2d\u5141\u8bb8\u7684 [\u5b57\u6bb5\u540d\u8bed\u6cd5](../Creating_a_table/Data_types.md#Field-name-syntax)\uff08\u4f8b\u5982\u5305\u542b\u7279\u6b8a\u5b57\u7b26\u6216\u4ee5\u6570\u5b57\u5f00\u5934\uff09\uff0c\u4f60\u5fc5\u987b\u5b9a\u4e49\u67b6\u6784\u6620\u5c04\u3002\u4f8b\u5982\uff0c`$keyName` \u6216 `123field` \u5728 JSON \u4e2d\u662f\u6709\u6548\u952e\uff0c\u4f46\u5728 Manticore Search \u4e2d\u4e0d\u662f\u6709\u6548\u5b57\u6bb5\u540d\u3002\u5982\u679c\u4f60\u8bd5\u56fe\u4f7f\u7528\u65e0\u6548\u5b57\u6bb5\u540d\u4e14\u6ca1\u6709\u6b63\u786e\u6620\u5c04\uff0cManticore \u4f1a\u8fd4\u56de\u9519\u8bef\uff0c\u5bfc\u81f4\u6e90\u521b\u5efa\u5931\u8d25\u3002\n\n\u4e3a\u5904\u7406\u6b64\u7c7b\u60c5\u51b5\uff0c\u4f7f\u7528\u5982\u4e0b\u67b6\u6784\u8bed\u6cd5\u5c06\u65e0\u6548\u5b57\u6bb5\u540d\u6620\u5c04\u4e3a\u6709\u6548\u5b57\u6bb5\u540d\uff1a\n\nCODE_BLOCK_1\n\n\u4e3e\u4f8b\uff1a\nCODE_BLOCK_2\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_3\n\n<!-- response -->\n\nCODE_BLOCK_4\n\n<!-- end -->\n\n#### \u9009\u9879\n\n| \u9009\u9879              | \u53ef\u63a5\u53d7\u7684\u503c            | \u63cf\u8ff0                                                                                       |\n|-------------------|-----------------------|--------------------------------------------------------------------------------------------|\n| `type`            | `kafka`               | \u8bbe\u7f6e\u6e90\u7c7b\u578b\u3002\u76ee\u524d\u4ec5\u652f\u6301 `kafka`                                                              |\n| `broker_list`     | `host:port [, ...]`   | \u6307\u5b9a Kafka \u4ee3\u7406 URL                                                                         |\n| `topic_list`      | `string [, ...]`      | \u5217\u51fa\u8981\u6d88\u8d39\u7684 Kafka \u4e3b\u9898                                                                     |\n| `consumer_group`  | `string`              | \u5b9a\u4e49 Kafka \u6d88\u8d39\u8005\u7ec4\uff0c\u9ed8\u8ba4\u4e3a `manticore`                                                    |\n| `num_consumers`   | `int`                 | \u5904\u7406\u6d88\u606f\u7684\u6d88\u8d39\u8005\u6570\u91cf                                                                         |\n| `partition_list`  | `int [, ...]`         | \u8bfb\u53d6\u7684\u5206\u533a\u5217\u8868\uff0c[\u8be6\u89c1](../Integration/Kafka.md#Sharding-with-Kafka)                         |\n| `batch`           | `int`                 | \u5904\u7406\u6d88\u606f\u7684\u6279\u6b21\u6570\u3002\u9ed8\u8ba4\u4e3a `100`\uff1b\u5426\u5219\u5728\u8d85\u65f6\u540e\u5904\u7406\u5269\u4f59\u6d88\u606f                                     |\n\n### \u76ee\u6807\u8868\n\n<!-- example kafka_destination -->\n\n\u76ee\u6807\u8868\u662f\u4e00\u4e2a\u666e\u901a\u7684\u5b9e\u65f6\u8868\uff0c\u7528\u4e8e\u5b58\u50a8 Kafka \u6d88\u606f\u5904\u7406\u7ed3\u679c\u3002\u6b64\u8868\u5e94\u6839\u636e\u4f20\u5165\u6570\u636e\u7684\u67b6\u6784\u9700\u6c42\u5b9a\u4e49\uff0c\u5e76\u9488\u5bf9\u5e94\u7528\u7684\u67e5\u8be2\u6027\u80fd\u9700\u6c42\u8fdb\u884c\u4f18\u5316\u3002\u66f4\u591a\u5173\u4e8e\u521b\u5efa\u5b9e\u65f6\u8868\u7684\u4fe1\u606f\u8bf7\u53c2\u9605[\u6b64\u5904](../Creating_a_table/Local_tables/Real-time_table.md#Creating-a-real-time-table:)\u3002\n\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_5\n\n<!-- response -->\n\nCODE_BLOCK_6\n\n<!-- end -->\n\n### \u7269\u5316\u89c6\u56fe\n\n<!-- example kafka_mv -->\n\n\u7269\u5316\u89c6\u56fe\u652f\u6301\u5bf9 Kafka \u6d88\u606f\u8fdb\u884c\u6570\u636e\u8f6c\u6362\u3002\u4f60\u53ef\u4ee5\u91cd\u547d\u540d\u5b57\u6bb5\uff0c\u5e94\u7528 Manticore Search \u51fd\u6570\uff0c\u6267\u884c\u6392\u5e8f\u3001\u5206\u7ec4\u7b49\u6570\u636e\u64cd\u4f5c\u3002\n\n\u7269\u5316\u89c6\u56fe\u4f5c\u4e3a\u4e00\u4e2a\u67e5\u8be2\uff0c\u5c06\u6570\u636e\u4ece Kafka \u6e90\u8f6c\u79fb\u5230\u76ee\u6807\u8868\uff0c\u5141\u8bb8\u4f60\u4f7f\u7528 Manticore Search \u8bed\u6cd5\u81ea\u5b9a\u4e49\u8fd9\u4e9b\u67e5\u8be2\u3002\u786e\u4fdd `select` \u4e2d\u7684\u5b57\u6bb5\u4e0e\u6e90\u4e2d\u7684\u5b57\u6bb5\u5339\u914d\u3002\n\nCODE_BLOCK_7\n\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_8\n\n<!-- response -->\n\nCODE_BLOCK_9\n\n<!-- end -->\n\n\u6570\u636e\u4ee5\u6279\u6b21\u5f62\u5f0f\u4ece Kafka \u4f20\u8f93\u5230 Manticore Search\uff0c\u6bcf\u6b21\u8fd0\u884c\u540e\u6279\u6b21\u4f1a\u88ab\u6e05\u7a7a\u3002\u5bf9\u4e8e\u8de8\u6279\u6b21\u7684\u8ba1\u7b97\uff08\u5982 AVG\uff09\uff0c\u8bf7\u8c28\u614e\u4f7f\u7528\uff0c\u56e0\u4e3a\u6279\u5904\u7406\u7684\u65b9\u5f0f\u53ef\u80fd\u5bfc\u81f4\u9884\u671f\u7ed3\u679c\u4e0d\u51c6\u786e\u3002\n\n### \u5b57\u6bb5\u6620\u5c04\n\n\u4ee5\u4e0b\u662f\u57fa\u4e8e\u4e0a\u8ff0\u793a\u4f8b\u7684\u6620\u5c04\u8868\uff1a\n\n| Kafka           | \u6e90       | \u7f13\u51b2\u533a    | \u7269\u5316\u89c6\u56fe                            | \u76ee\u6807\u8868       |\n|-----------------|----------|-----------|-----------------------------------|--------------|\n| `id`            | `id`     | `id`      | `id`                              | `id`         |\n| `term`          | `term`   | `term`    | `term as name`                    | `name`       |\n| `unnecessary_key` \u4e0d\u611f\u5174\u8da3\u7684\u5b57\u6bb5 | -        | -         |                                   |              |\n| `$abbrev`       | `abbrev` | `abbrev`  | `abbrev` \u4f5c\u4e3a `short_name`         | `short_name` |\n| -               | -        | -         | `UTC_TIMESTAMP() as received_at`  | `received_at`|\n| `GlossDef`      | `glossdef`| `glossdef`| `glossdef.size as size`            | `size`       |\n\n### \u5217\u8868\n\n<!-- example kafka_listing -->\n\n\u8981\u67e5\u770b Manticore Search \u4e2d\u7684\u6e90\u548c\u7269\u5316\u89c6\u56fe\uff0c\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff1a\n- `SHOW SOURCES`\uff1a\u5217\u51fa\u6240\u6709\u914d\u7f6e\u7684\u6e90\u3002\n- `SHOW MVS`\uff1a\u5217\u51fa\u6240\u6709\u7269\u5316\u89c6\u56fe\u3002\n- `SHOW MV view_table`\uff1a\u663e\u793a\u6307\u5b9a\u7269\u5316\u89c6\u56fe\u7684\u8be6\u7ec6\u4fe1\u606f\u3002",
            "russian": "# \u0421\u0438\u043d\u0445\u0440\u043e\u043d\u0438\u0437\u0430\u0446\u0438\u044f \u0438\u0437 Kafka\n\n> \u041f\u0420\u0418\u041c\u0415\u0427\u0410\u041d\u0418\u0415: \u044d\u0442\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0442\u0440\u0435\u0431\u0443\u0435\u0442 [Manticore Buddy](../Installation/Manticore_Buddy.md). \u0415\u0441\u043b\u0438 \u044d\u0442\u043e \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442, \u0443\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044c, \u0447\u0442\u043e Buddy \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d.\n\nManticore \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0438\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044e \u0441 [Apache Kafka](https://kafka.apache.org/) \u0434\u043b\u044f \u043f\u043e\u0442\u043e\u043a\u043e\u0432\u043e\u0433\u043e \u043f\u0440\u0438\u0451\u043c\u0430 \u0434\u0430\u043d\u043d\u044b\u0445 \u0432 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u043c \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0447\u0435\u0440\u0435\u0437 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0438 Kafka \u0438 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f, \u0447\u0442\u043e \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0438\u043d\u0434\u0435\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0438 \u0438\u0441\u043a\u0430\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u0432 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u043c \u0432\u0440\u0435\u043c\u0435\u043d\u0438. \u0412 \u043d\u0430\u0441\u0442\u043e\u044f\u0449\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u043f\u0440\u043e\u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u044b \u0438 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u0432\u0435\u0440\u0441\u0438\u0438 **apache/kafka 3.7.0-4.1.0**.\n\n\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0447\u0430\u0442\u044c, \u0432\u0430\u043c \u043d\u0443\u0436\u043d\u043e:\n1. **\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a:** \u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0442\u0435\u043c\u0443 Kafka, \u0438\u0437 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 Manticore Search \u0431\u0443\u0434\u0435\u0442 \u0447\u0438\u0442\u0430\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f. \u042d\u0442\u0430 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u0434\u0435\u0442\u0430\u043b\u0438, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a \u0445\u043e\u0441\u0442 \u0438 \u043f\u043e\u0440\u0442 \u0431\u0440\u043e\u043a\u0435\u0440\u0430, \u0430 \u0442\u0430\u043a\u0436\u0435 \u0438\u043c\u044f \u0442\u0435\u043c\u044b.\n2. **\u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0446\u0435\u043b\u0435\u0432\u0443\u044e \u0442\u0430\u0431\u043b\u0438\u0446\u0443:** \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 Manticore real-time \u0434\u043b\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u0438\u0437 Kafka.\n3. **\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u043e\u0435 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435:** \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u0442\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u043e\u0435 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 (`mv`) \u0434\u043b\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0438 \u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u0438\u0437 Kafka \u0432 \u0446\u0435\u043b\u0435\u0432\u0443\u044e \u0442\u0430\u0431\u043b\u0438\u0446\u0443 Manticore Search. \u0417\u0434\u0435\u0441\u044c \u0432\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u0435 \u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u043e\u043b\u0435\u0439, \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u0438 \u043b\u044e\u0431\u044b\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u044b \u0438\u043b\u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0434\u043b\u044f \u0432\u0445\u043e\u0434\u044f\u0449\u0435\u0433\u043e \u043f\u043e\u0442\u043e\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445.\n\n## \u0418\u0441\u0442\u043e\u0447\u043d\u0438\u043a\n\n<!-- example kafka_source -->\n\n\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f `source` \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c `broker`, `topic list`, `consumer group` \u0438 \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0443 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439.\n\n#### \u0421\u0445\u0435\u043c\u0430\n\n\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u0435 \u0441\u0445\u0435\u043c\u0443, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \u0442\u0438\u043f\u044b \u043f\u043e\u043b\u0435\u0439 Manticore, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a `int`, `float`, `text`, `json` \u0438 \u0442.\u0434.\n\nCODE_BLOCK_0\n\n\u0412\u0441\u0435 \u043a\u043b\u044e\u0447\u0438 \u0441\u0445\u0435\u043c\u044b \u043d\u0435\u0447\u0443\u0432\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u044b \u043a \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0443, \u0442\u043e \u0435\u0441\u0442\u044c `Products`, `products` \u0438 `PrOdUcTs` \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u043e\u0434\u0438\u043d\u0430\u043a\u043e\u0432\u043e. \u0412\u0441\u0435 \u043e\u043d\u0438 \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u0443\u044e\u0442\u0441\u044f \u0432 \u043d\u0438\u0436\u043d\u0438\u0439 \u0440\u0435\u0433\u0438\u0441\u0442\u0440.\n\n\u0415\u0441\u043b\u0438 \u0438\u043c\u0435\u043d\u0430 \u043f\u043e\u043b\u0435\u0439 \u043d\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0442 [\u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441\u0443 \u0438\u043c\u0451\u043d \u043f\u043e\u043b\u0435\u0439](../Creating_a_table/Data_types.md#Field-name-syntax), \u0440\u0430\u0437\u0440\u0435\u0448\u0451\u043d\u043d\u043e\u043c\u0443 \u0432 Manticore Search (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0435 \u0441\u0438\u043c\u0432\u043e\u043b\u044b \u0438\u043b\u0438 \u043d\u0430\u0447\u0438\u043d\u0430\u044e\u0442\u0441\u044f \u0441 \u0446\u0438\u0444\u0440), \u0432\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u0445\u0435\u043c\u044b. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, `$keyName` \u0438\u043b\u0438 `123field` \u2014 \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0435 \u043a\u043b\u044e\u0447\u0438 \u0432 JSON, \u043d\u043e \u043d\u0435\u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0435 \u0438\u043c\u0435\u043d\u0430 \u043f\u043e\u043b\u0435\u0439 \u0432 Manticore Search. \u0415\u0441\u043b\u0438 \u043f\u044b\u0442\u0430\u0442\u044c\u0441\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043d\u0435\u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0435 \u0438\u043c\u0435\u043d\u0430 \u0431\u0435\u0437 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0433\u043e \u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f, Manticore \u0432\u0435\u0440\u043d\u0451\u0442 \u043e\u0448\u0438\u0431\u043a\u0443, \u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0430 \u043d\u0435 \u0443\u0434\u0430\u0441\u0442\u0441\u044f.\n\n\u0414\u043b\u044f \u0442\u0430\u043a\u0438\u0445 \u0441\u043b\u0443\u0447\u0430\u0435\u0432 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441 \u0441\u0445\u0435\u043c\u044b, \u0447\u0442\u043e\u0431\u044b \u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043d\u0435\u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0435 \u0438\u043c\u0435\u043d\u0430 \u0441 \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u043c\u0438:\n\nCODE_BLOCK_1\n\n\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440:\nCODE_BLOCK_2\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_3\n\n<!-- response -->\n\nCODE_BLOCK_4\n\n<!-- end -->\n\n#### \u041e\u043f\u0446\u0438\u0438\n\n| \u041e\u043f\u0446\u0438\u044f | \u0414\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f | \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435                                                                                                          |\n|-|----------------|---------------------------------------------------------------------------------------------------------------------|\n| `type` | `kafka`        | \u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442 \u0442\u0438\u043f \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0430. \u0412 \u043d\u0430\u0441\u0442\u043e\u044f\u0449\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e `kafka`                                        |\n| `broker_list` | `host:port [, ...]` | \u0423\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 URL \u0431\u0440\u043e\u043a\u0435\u0440\u043e\u0432 Kafka                                                                                          |\n| `topic_list` | `string [, ...]` | \u0421\u043f\u0438\u0441\u043e\u043a \u0442\u0435\u043c Kafka \u0434\u043b\u044f \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u044f                                                                                   |\n| `consumer_group`| `string`       | \u041e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u0433\u0440\u0443\u043f\u043f\u0443 \u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u0435\u0439 Kafka, \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e `manticore`.                                                    |\n| `num_consumers` | `int`          | \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u0435\u0439 \u0434\u043b\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439.                                                                   |\n| `partition_list` | `int [, ...]`  | \u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0430\u0440\u0442\u0438\u0446\u0438\u0439 \u0434\u043b\u044f \u0447\u0442\u0435\u043d\u0438\u044f [\u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435](../Integration/Kafka.md#Sharding-with-Kafka).                                |\n| `batch` | `int`          | \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u0434\u043b\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043f\u0435\u0440\u0435\u0434 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u043e\u043c \u043a \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c. \u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e `100`; \u0435\u0441\u043b\u0438 \u0438\u0441\u0442\u0435\u043a\u0430\u0435\u0442 \u0442\u0430\u0439\u043c\u0430\u0443\u0442 \u2014 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u043e\u0441\u0442\u0430\u0432\u0448\u0438\u0435\u0441\u044f \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f |\n\n### \u0426\u0435\u043b\u0435\u0432\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430\n\n<!-- example kafka_destination -->\n\n\u0426\u0435\u043b\u0435\u0432\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u2014 \u044d\u0442\u043e \u043e\u0431\u044b\u0447\u043d\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430 real-time, \u0432 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u044e\u0442\u0441\u044f \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 Kafka. \u042d\u0442\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0430 \u0441 \u0443\u0447\u0435\u0442\u043e\u043c \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u0439 \u0441\u0445\u0435\u043c\u044b \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u0438 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u0430 \u043f\u043e\u0434 \u043d\u0443\u0436\u0434\u044b \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0432\u0430\u0448\u0435\u0433\u043e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f. \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u043e \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u0442\u0430\u0431\u043b\u0438\u0446 real-time [\u0437\u0434\u0435\u0441\u044c](../Creating_a_table/Local_tables/Real-time_table.md#Creating-a-real-time-table:).\n\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_5\n\n<!-- response -->\n\nCODE_BLOCK_6\n\n<!-- end -->\n\n### \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u043e\u0435 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435\n\n<!-- example kafka_mv -->\n\n\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u043e\u0435 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u044b\u0432\u0430\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u0438\u0437 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 Kafka. \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0435\u0440\u0435\u0438\u043c\u0435\u043d\u043e\u0432\u044b\u0432\u0430\u0442\u044c \u043f\u043e\u043b\u044f, \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u0438 Manticore Search, \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0443, \u0433\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u043a\u0443 \u0438 \u0434\u0440\u0443\u0433\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u0441 \u0434\u0430\u043d\u043d\u044b\u043c\u0438.\n\n\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u043e\u0435 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0443\u0435\u0442 \u043a\u0430\u043a \u0437\u0430\u043f\u0440\u043e\u0441, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u0435\u0440\u0435\u043c\u0435\u0449\u0430\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0435 \u0438\u0437 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0430 Kafka \u0432 \u0446\u0435\u043b\u0435\u0432\u0443\u044e \u0442\u0430\u0431\u043b\u0438\u0446\u0443, \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441 Manticore Search \u0434\u043b\u044f \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u043d\u0438\u044f \u044d\u0442\u0438\u0445 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432. \u0423\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044c, \u0447\u0442\u043e \u043f\u043e\u043b\u044f \u0432 `select` \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442 \u0441 \u043f\u043e\u043b\u044f\u043c\u0438 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0430.\n\nCODE_BLOCK_7\n\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_8\n\n<!-- response -->\n\nCODE_BLOCK_9\n\n<!-- end -->\n\n\u0414\u0430\u043d\u043d\u044b\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u044e\u0442\u0441\u044f \u0438\u0437 Kafka \u0432 Manticore Search \u043f\u0430\u0440\u0442\u0438\u044f\u043c\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043e\u0447\u0438\u0449\u0430\u044e\u0442\u0441\u044f \u043f\u043e\u0441\u043b\u0435 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0437\u0430\u043f\u0443\u0441\u043a\u0430. \u0414\u043b\u044f \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0439 \u043f\u043e \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u043c \u043f\u0430\u0440\u0442\u0438\u044f\u043c, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 AVG, \u0431\u0443\u0434\u044c\u0442\u0435 \u043e\u0441\u0442\u043e\u0440\u043e\u0436\u043d\u044b, \u0442\u0430\u043a \u043a\u0430\u043a \u043e\u043d\u0438 \u043c\u043e\u0433\u0443\u0442 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0438\u0437-\u0437\u0430 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043f\u0430\u0440\u0442\u0438\u044f \u0437\u0430 \u043f\u0430\u0440\u0442\u0438\u0435\u0439.\n\n### \u0421\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u0435\u0439\n\n\u0412\u043e\u0442 \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u043f\u0440\u0438\u0432\u0435\u0434\u0451\u043d\u043d\u044b\u0445 \u0432\u044b\u0448\u0435 \u043f\u0440\u0438\u043c\u0435\u0440\u043e\u0432:\n\n| Kafka           | \u0418\u0441\u0442\u043e\u0447\u043d\u0438\u043a  | \u0411\u0443\u0444\u0435\u0440    | MV                                | \u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435   |\n|-----------------|-----------|----------|----------------------------------|--------------|\n| `id`            | `id`      | `id`     | `id`                             | `id`         |\n| `term`          | `term`    | `term`   | `term as name`                   | `name`       |\n| `unnecessary_key`, \u043a\u043e\u0442\u043e\u0440\u044b\u043c \u043c\u044b \u043d\u0435 \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u0443\u0435\u043c\u0441\u044f | -         | -        |                                  |              |\n| `$abbrev`       | `abbrev`  | `abbrev` | `abbrev` as `short_name`         | `short_name` |\n| -               | -         | -        | `UTC_TIMESTAMP() as received_at` | `received_at`|\n| `GlossDef`      | `glossdef`| `glossdef`| `glossdef.size as size`          | `size`       |\n\n### \u0421\u043f\u0438\u0441\u043e\u043a\n\n<!-- example kafka_listing -->\n\n\u0427\u0442\u043e\u0431\u044b \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0438 \u0438 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0432 Manticore Search, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b:\n- `SHOW SOURCES`: \u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u0435 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0438.\n- `SHOW MVS`: \u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f.\n- `SHOW MV view_table`: \u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0443\u044e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u043c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u043e\u043c \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0438."
        },
        "is_code_or_comment": false,
        "model": "openai:gpt-4.1-mini",
        "updated_at": 1766339819
    },
    "6af53d2d4c749c3cb30ee36b73e30a4d6048497058594a4d0c41ad8f43cb16c9": {
        "original": "# Syncing from Kafka\n\n> NOTE: this functionality requires [Manticore Buddy](../Installation/Manticore_Buddy.md). If it doesn't work, make sure Buddy is installed.\n\nManticore supports integration with [Apache Kafka](https://kafka.apache.org/) real-time data ingestion through Kafka sources and materialized views, allowing for real-time data indexing and search. Currently, **apache/kafka versions 3.7.0-4.1.0** are tested and supported.\n\nTo get started, you need to:\n1. **Define the source:** Specify the Kafka topic from which Manticore Search will read messages. This setup includes details like the broker\u2019s host, port, and topic name.\n2. **Set up the destination table:** Choose a Manticore real-time table to store the incoming Kafka data.\n3. **Create a materialized view:** Set up a materialized view (`mv`) to handle data transformation and mapping from Kafka to the destination table in Manticore Search. Here, you\u2019ll define field mappings, data transformations, and any filters or conditions for the incoming data stream.\n\n## Source\n\n<!-- example kafka_source -->\n\nThe `source` configuration allows you to define the `broker`, `topic list`, `consumer group`, and the message structure.\n\n#### Schema\n\nDefine the schema using Manticore field types like `int`, `float`, `text`, `json`, etc.\n\nCODE_BLOCK_0\n\nAll schema keys are case-insensitive, meaning `Products`, `products`, and `PrOdUcTs` are treated the same. They are all converted to lowercase.\n\nIf your field names don't match the [field name syntax](../Creating_a_table/Data_types.md#Field-name-syntax) allowed in Manticore Search (for example, if they contain special characters or start with numbers), you must define a schema mapping. For instance, `$keyName` or `123field` are valid keys in JSON but not valid field names in Manticore Search. If you try to use invalid field names without proper mapping, Manticore will return an error and the source creation will fail.\n\nTo handle such cases, use the following schema syntax to map invalid field names to valid ones:\n\nCODE_BLOCK_1\n\nFor example:\nCODE_BLOCK_2\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_3\n\n<!-- response -->\n\nCODE_BLOCK_4\n\n<!-- end -->\n\n#### Options\n\n| Option | Accepted Values | Description                                                                                                         |\n|-|----------------|---------------------------------------------------------------------------------------------------------------------|\n| `type` | `kafka`        | Sets the source type. Currently, only `kafka` is supported                                                          |\n| `broker_list` | `host:port [, ...]` | Specifies Kafka broker URLs                                                                                         |\n| `topic_list` | `string [, ...]` | Lists Kafka topics to consume from                                                                                  |\n| `consumer_group`| `string`       | Defines the Kafka consumer group, defaulting to `manticore`.                                                        |\n| `num_consumers` | `int`          | Number of consumers to handle messages.                                                                             |\n| `partition_list` | `int [, ...]`  | List of partitions for reading [more](../Integration/Kafka.md#Sharding-with-Kafka).                                 |\n| `batch` | `int`          | Number of messages to process before moving on. Default is `100`; processes remaining messages on timeout otherwise |\n\n### Destination table\n\n<!-- example kafka_destination -->\n\nThe destination table is a regular real-time table where the results of Kafka message processing are stored. This table should be defined to match the schema requirements of the incoming data and optimized for the query performance needs of your application. Read more about creating real-time tables [here](../Creating_a_table/Local_tables/Real-time_table.md#Creating-a-real-time-table:).\n\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_5\n\n<!-- response -->\n\nCODE_BLOCK_6\n\n<!-- end -->\n\n### Materialized view\n\n<!-- example kafka_mv -->\n\nA materialized view enables data transformation from Kafka messages. You can rename fields, apply Manticore Search functions, and perform sorting, grouping, and other data operations.\n\nA materialized view acts as a query that moves data from the Kafka source to the destination table, letting you use Manticore Search syntax to customize these queries. Make sure that fields in the `select` match those in the source.\n\nCODE_BLOCK_7\n\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_8\n\n<!-- response -->\n\nCODE_BLOCK_9\n\n<!-- end -->\n\nData is transferred from Kafka to Manticore Search in batches, which are cleared after each run. For calculations across batches, such as AVG, use caution, as these may not work as expected due to batch-by-batch processing.\n\n### Field Mapping\n\nHere's a mapping table based on the examples above:\n\n| Kafka           | Source   | Buffer   | MV                                | Destination |\n|-----------------|----------|----------|-----------------------------------|-------------|\n| `id`              | `id`       | `id`       | `id`                                | `id`          |\n| `term`            | `term`     | `term`     | `term as name`                      | `name`        |\n| `unnecessary_key` which we're not interested in | -        | -        |                                   |             |\n| `$abbrev`         | `abbrev`   | `abbrev`   | `abbrev` as `short_name`              | `short_name`  |\n| -                 | -        | -         | `UTC_TIMESTAMP() as received_at`  | `received_at` |\n| `GlossDef`        | `glossdef` | `glossdef` | `glossdef.size as size`             | `size`        |\n\n### Listing\n\n<!-- example kafka_listing -->\n\nTo view sources and materialized views in Manticore Search, use these commands:\n- `SHOW SOURCES`: Lists all configured sources.\n- `SHOW MVS`: Lists all materialized views.\n- `SHOW MV view_table`: Shows detailed information on a specific materialized view.",
        "translations": {
            "chinese": "# Kafka \u540c\u6b65\n\n> NOTE: \u6b64\u529f\u80fd\u9700\u8981 [Manticore Buddy](../Installation/Manticore_Buddy.md)\u3002\u5982\u679c\u4e0d\u8d77\u4f5c\u7528\uff0c\u8bf7\u786e\u4fdd\u5df2\u5b89\u88c5 Buddy\u3002\n\nManticore \u652f\u6301\u901a\u8fc7 Kafka \u6e90\u548c\u7269\u5316\u89c6\u56fe\u4e0e [Apache Kafka](https://kafka.apache.org/) \u5b9e\u65f6\u6570\u636e\u6444\u53d6\u96c6\u6210\uff0c\u5141\u8bb8\u5b9e\u65f6\u6570\u636e\u7d22\u5f15\u548c\u641c\u7d22\u3002\u76ee\u524d\uff0c**apache/kafka \u7248\u672c 3.7.0-4.1.0** \u5df2\u7ecf\u8fc7\u6d4b\u8bd5\u5e76\u652f\u6301\u3002\n\n\u8981\u5f00\u59cb\uff0c\u8bf7\u6267\u884c\u4ee5\u4e0b\u6b65\u9aa4\uff1a\n1. **\u5b9a\u4e49\u6e90\uff1a** \u6307\u5b9a Manticore Search \u5c06\u4ece\u4e2d\u8bfb\u53d6\u6d88\u606f\u7684 Kafka \u4e3b\u9898\u3002\u6b64\u8bbe\u7f6e\u5305\u62ec\u6709\u5173\u4ee3\u7406\u7684\u4e3b\u673a\u3001\u7aef\u53e3\u548c\u4e3b\u9898\u540d\u79f0\u7684\u8be6\u7ec6\u4fe1\u606f\u3002\n2. **\u8bbe\u7f6e\u76ee\u6807\u8868\uff1a** \u9009\u62e9\u4e00\u4e2a Manticore \u5b9e\u65f6\u8868\u6765\u5b58\u50a8\u4f20\u5165\u7684 Kafka \u6570\u636e\u3002\n3. **\u521b\u5efa\u7269\u5316\u89c6\u56fe\uff1a** \u8bbe\u7f6e\u7269\u5316\u89c6\u56fe (`mv`) \u4ee5\u5904\u7406\u4ece Kafka \u5230 Manticore Search \u76ee\u6807\u8868\u7684\u6570\u636e\u8f6c\u6362\u548c\u6620\u5c04\u3002\u5728\u8fd9\u91cc\uff0c\u60a8\u5c06\u5b9a\u4e49\u5b57\u6bb5\u6620\u5c04\u3001\u6570\u636e\u8f6c\u6362\u4ee5\u53ca\u4f20\u5165\u6570\u636e\u6d41\u4e2d\u7684\u4efb\u4f55\u8fc7\u6ee4\u5668\u6216\u6761\u4ef6\u3002\n\n## \u6e90\n\n<!-- example kafka_source -->\n\n`source` \u914d\u7f6e\u5141\u8bb8\u60a8\u5b9a\u4e49 `broker`\u3001`\u4e3b\u9898\u5217\u8868`\u3001`\u6d88\u8d39\u8005\u7ec4` \u4ee5\u53ca\u6d88\u606f\u7ed3\u6784\u3002\n\n#### \u6a21\u5f0f\n\n\u4f7f\u7528 Manticore \u5b57\u6bb5\u7c7b\u578b\uff08\u5982 `int`\u3001`float`\u3001`text`\u3001`json` \u7b49\uff09\u5b9a\u4e49\u6a21\u5f0f\u3002\n\nCODE_BLOCK_0\n\n\u6240\u6709\u6a21\u5f0f\u952e\u90fd\u662f\u5927\u5c0f\u5199\u4e0d\u654f\u611f\u7684\uff0c\u8fd9\u610f\u5473\u7740 `Products`\u3001`products` \u548c `PrOdUcTs` \u88ab\u89c6\u4e3a\u76f8\u540c\u7684\u3002\u5b83\u4eec\u90fd\u4f1a\u8f6c\u6362\u4e3a\u5c0f\u5199\u3002\n\n\u5982\u679c\u60a8\u7684\u5b57\u6bb5\u540d\u4e0d\u7b26\u5408 Manticore Search \u5141\u8bb8\u7684 [\u5b57\u6bb5\u540d\u8bed\u6cd5](../Creating_a_table/Data_types.md#Field-name-syntax)\uff08\u4f8b\u5982\uff0c\u5305\u542b\u7279\u6b8a\u5b57\u7b26\u6216\u4ee5\u6570\u5b57\u5f00\u5934\uff09\uff0c\u5219\u5fc5\u987b\u5b9a\u4e49\u6a21\u5f0f\u6620\u5c04\u3002\u4f8b\u5982\uff0c`$keyName` \u6216 `123field` \u662f JSON \u4e2d\u7684\u6709\u6548\u952e\uff0c\u4f46\u5728 Manticore Search \u4e2d\u4e0d\u662f\u6709\u6548\u7684\u5b57\u6bb5\u540d\u3002\u5982\u679c\u60a8\u5c1d\u8bd5\u4f7f\u7528\u65e0\u6548\u7684\u5b57\u6bb5\u540d\u800c\u6ca1\u6709\u9002\u5f53\u7684\u6620\u5c04\uff0cManticore \u5c06\u8fd4\u56de\u9519\u8bef\u5e76\u5bfc\u81f4\u6e90\u521b\u5efa\u5931\u8d25\u3002\n\n\u8981\u5904\u7406\u6b64\u7c7b\u60c5\u51b5\uff0c\u8bf7\u4f7f\u7528\u4ee5\u4e0b\u6a21\u5f0f\u8bed\u6cd5\u5c06\u65e0\u6548\u5b57\u6bb5\u540d\u6620\u5c04\u5230\u6709\u6548\u5b57\u6bb5\u540d\uff1a\n\nCODE_BLOCK_1\n\n\u4f8b\u5982\uff1a\nCODE_BLOCK_2\n<!-- intro -->\n\n##### SQL\uff1a\n\n<!-- request SQL -->\n\nCODE_BLOCK_3\n\n<!-- response -->\n\nCODE_BLOCK_4\n\n<!-- end -->\n\n#### \u9009\u9879\n\n| \u9009\u9879 | \u5141\u8bb8\u503c | \u63cf\u8ff0                                                                                                         |\n|-|----------------|---------------------------------------------------------------------------------------------------------------------|\n| `type` | `kafka`        | \u8bbe\u7f6e\u6e90\u7c7b\u578b\u3002\u76ee\u524d\uff0c\u4ec5\u652f\u6301 `kafka`                                                                                      |\n| `broker_list` | `host:port [, ...]` | \u6307\u5b9a Kafka \u4ee3\u7406 URL                                                                                         |\n| `topic_list` | `string [, ...]` | \u5217\u51fa\u8981\u4ece\u4e2d\u6d88\u8d39\u7684 Kafka \u4e3b\u9898                                                                                  |\n| `consumer_group`| `string`       | \u5b9a\u4e49 Kafka \u6d88\u8d39\u8005\u7ec4\uff0c\u9ed8\u8ba4\u4e3a `manticore`\u3002                                                        |\n| `num_consumers` | `int`          | \u5904\u7406\u6d88\u606f\u7684\u6d88\u8d39\u8005\u6570\u91cf\u3002                                                                             |\n| `partition_list` | `int [, ...]`  | \u7528\u4e8e\u8bfb\u53d6\u7684\u5206\u533a\u5217\u8868 [\u66f4\u591a](../Integration/Kafka.md#Sharding-with-Kafka)\u3002                                 |\n| `batch` | `int`          | \u5728\u7ee7\u7eed\u4e4b\u524d\u5904\u7406\u7684\u6d88\u606f\u6570\u91cf\u3002\u9ed8\u8ba4\u4e3a `100`\uff1b\u8d85\u65f6\u540e\u5904\u7406\u5269\u4f59\u6d88\u606f\u3002\n\n### \u76ee\u6807\u8868\n\n<!-- example kafka_destination -->\n\n\u76ee\u6807\u8868\u662f\u4e00\u4e2a\u5e38\u89c4\u7684\u5b9e\u65f6\u8868\uff0c\u5176\u4e2d\u5b58\u50a8\u4e86 Kafka \u6d88\u606f\u5904\u7406\u7684\u7ed3\u679c\u3002\u6b64\u8868\u5e94\u5b9a\u4e49\u4e3a\u7b26\u5408\u4f20\u5165\u6570\u636e\u7684\u6a21\u5f0f\u8981\u6c42\uff0c\u5e76\u9488\u5bf9\u5e94\u7528\u7a0b\u5e8f\u7684\u67e5\u8be2\u6027\u80fd\u9700\u6c42\u8fdb\u884c\u4f18\u5316\u3002\u6709\u5173\u521b\u5efa\u5b9e\u65f6\u8868\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 [\u8fd9\u91cc](../Creating_a_table/Local_tables/Real-time_table.md#Creating-a-real-time-table:)\u3002\n\n<!-- intro -->\n\n##### SQL\uff1a\n\n<!-- request SQL -->\n\nCODE_BLOCK_5\n\n<!-- response -->\n\nCODE_BLOCK_6\n\n<!-- end -->\n\n### \u7269\u5316\u89c6\u56fe\n\n<!-- example kafka_mv -->\n\n\u7269\u5316\u89c6\u56fe\u5141\u8bb8\u4ece Kafka \u6d88\u606f\u4e2d\u8fdb\u884c\u6570\u636e\u8f6c\u6362\u3002\u60a8\u53ef\u4ee5\u91cd\u547d\u540d\u5b57\u6bb5\u3001\u5e94\u7528 Manticore Search \u51fd\u6570\uff0c\u5e76\u6267\u884c\u6392\u5e8f\u3001\u5206\u7ec4\u548c\u5176\u4ed6\u6570\u636e\u64cd\u4f5c\u3002\n\n\u7269\u5316\u89c6\u56fe\u5145\u5f53\u4ece Kafka \u6e90\u5230\u76ee\u6807\u8868\u79fb\u52a8\u6570\u636e\u7684\u67e5\u8be2\uff0c\u8ba9\u60a8\u4f7f\u7528 Manticore Search \u8bed\u6cd5\u81ea\u5b9a\u4e49\u8fd9\u4e9b\u67e5\u8be2\u3002\u786e\u4fdd\u7269\u5316\u89c6\u56fe\u4e2d\u7684 `select` \u5b57\u6bb5\u4e0e\u6e90\u4e2d\u7684\u5b57\u6bb5\u5339\u914d\u3002\n\nCODE_BLOCK_7\n\n<!-- intro -->\n\n##### SQL\uff1a\n\n<!-- request SQL -->\n\nCODE_BLOCK_8\n\n<!-- response -->\n\nCODE_BLOCK_9\n\n<!-- end -->\n\n\u6570\u636e\u4ee5\u6279\u6b21\u7684\u5f62\u5f0f\u4ece Kafka \u8f6c\u79fb\u5230 Manticore Search\uff0c\u5e76\u5728\u6bcf\u6b21\u8fd0\u884c\u540e\u6e05\u9664\u3002\u5bf9\u4e8e\u8de8\u6279\u6b21\u7684\u8ba1\u7b97\uff0c\u4f8b\u5982 AVG\uff0c\u8bf7\u8c28\u614e\u4f7f\u7528\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u53ef\u80fd\u4e0d\u4f1a\u6309\u9884\u671f\u5de5\u4f5c\uff0c\u56e0\u4e3a\u662f\u6309\u6279\u6b21\u5904\u7406\u7684\u3002\n\n### \u5b57\u6bb5\u6620\u5c04\n\n\u4ee5\u4e0b\u662f\u57fa\u4e8e\u4e0a\u8ff0\u793a\u4f8b\u7684\u6620\u5c04\u8868\uff1a\n\n| Kafka           | \u6e90   | \u7f13\u51b2   | \u7269\u5316\u89c6\u56fe                                | \u76ee\u6807 |\n|-----------------|----------|----------|-----------------------------------|-------------|\n| `id`              | `id`       | `id`       | `id`                                | `id`          |\n| `term`            | `term`     | `term`     | `term as name`                      | `name`        |\n| `unnecessary_key` which we're not interested in | -        | -        |                                   |             |\n| `$abbrev`         | `abbrev`   | `abbrev`   | `abbrev` as `short_name`              | `short_name`  |\n| -                 | -        | -         | `UTC_TIMESTAMP() as received_at`  | `received_at` |\n| `GlossDef`        | `glossdef` | `glossdef` | `glossdef.size as size`             | `size`        |\n\n### \u5217\u8868\n\n<!-- example kafka_listing -->\n\n\u8981\u5728 Manticore Search \u4e2d\u67e5\u770b\u6e90\u548c\u7269\u5316\u89c6\u56fe\uff0c\u8bf7\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff1a\n- `SHOW SOURCES`\uff1a\u5217\u51fa\u6240\u6709\u914d\u7f6e\u7684\u6e90\u3002\n- `SHOW MVS`\uff1a\u5217\u51fa\u6240\u6709\u7269\u5316\u89c6\u56fe\u3002\n- `SHOW MV view_table`\uff1a\u663e\u793a\u7279\u5b9a\u7269\u5316\u89c6\u56fe\u7684\u8be6\u7ec6\u4fe1\u606f\u3002",
            "russian": "# \u0421\u0438\u043d\u0445\u0440\u043e\u043d\u0438\u0437\u0430\u0446\u0438\u044f \u0438\u0437 Kafka\n\n> \u041f\u0420\u0418\u041c\u0415\u0427\u0410\u041d\u0418\u0415: \u044d\u0442\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0442\u0440\u0435\u0431\u0443\u0435\u0442 [Manticore Buddy](../Installation/Manticore_Buddy.md). \u0415\u0441\u043b\u0438 \u043e\u043d\u0430 \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442, \u0443\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044c, \u0447\u0442\u043e Buddy \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d.\n\nManticore \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0438\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044e \u0441 [Apache Kafka](https://kafka.apache.org/) \u0434\u043b\u044f \u043f\u0440\u0438\u0435\u043c\u0430 \u0434\u0430\u043d\u043d\u044b\u0445 \u0432 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u043c \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0447\u0435\u0440\u0435\u0437 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0438 Kafka \u0438 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f, \u0447\u0442\u043e \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0438\u043d\u0434\u0435\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0438 \u0438\u0441\u043a\u0430\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u0432 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u043c \u0432\u0440\u0435\u043c\u0435\u043d\u0438. \u0412 \u043d\u0430\u0441\u0442\u043e\u044f\u0449\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u043f\u0440\u043e\u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u044b \u0438 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442\u0441\u044f **apache/kafka \u0432\u0435\u0440\u0441\u0438\u0438 3.7.0-4.1.0**.\n\n\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0447\u0430\u0442\u044c, \u0432\u0430\u043c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e:\n1. **\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a:** \u0423\u043a\u0430\u0437\u0430\u0442\u044c \u0442\u043e\u043f\u0438\u043a Kafka, \u0438\u0437 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e Manticore Search \u0431\u0443\u0434\u0435\u0442 \u0447\u0438\u0442\u0430\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f. \u042d\u0442\u0430 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u0442\u0430\u043a\u0438\u0435 \u0434\u0435\u0442\u0430\u043b\u0438, \u043a\u0430\u043a \u0445\u043e\u0441\u0442 \u0431\u0440\u043e\u043a\u0435\u0440\u0430, \u043f\u043e\u0440\u0442 \u0438 \u0438\u043c\u044f \u0442\u043e\u043f\u0438\u043a\u0430.\n2. **\u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0446\u0435\u043b\u0435\u0432\u0443\u044e \u0442\u0430\u0431\u043b\u0438\u0446\u0443:** \u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0443 Manticore \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0434\u043b\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 Kafka.\n3. **\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u043e\u0435 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435:** \u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u043e\u0435 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 (`mv`) \u0434\u043b\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u0438 \u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0438\u0437 Kafka \u0432 \u0446\u0435\u043b\u0435\u0432\u0443\u044e \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u0432 Manticore Search. \u0417\u0434\u0435\u0441\u044c \u0432\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u0435 \u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u043e\u043b\u0435\u0439, \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445, \u0430 \u0442\u0430\u043a\u0436\u0435 \u043b\u044e\u0431\u044b\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u044b \u0438\u043b\u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0434\u043b\u044f \u0432\u0445\u043e\u0434\u044f\u0449\u0435\u0433\u043e \u043f\u043e\u0442\u043e\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445.\n\n## \u0418\u0441\u0442\u043e\u0447\u043d\u0438\u043a\n\n<!-- example kafka_source -->\n\n\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f `source` \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c `broker`, `\u0441\u043f\u0438\u0441\u043e\u043a \u0442\u043e\u043f\u0438\u043a\u043e\u0432`, `\u0433\u0440\u0443\u043f\u043f\u0443 \u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u0435\u0439` \u0438 \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0443 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439.\n\n#### \u0421\u0445\u0435\u043c\u0430\n\n\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u0435 \u0441\u0445\u0435\u043c\u0443, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \u0442\u0438\u043f\u044b \u043f\u043e\u043b\u0435\u0439 Manticore, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a `int`, `float`, `text`, `json` \u0438 \u0442.\u0434.\n\nCODE_BLOCK_0\n\n\u0412\u0441\u0435 \u043a\u043b\u044e\u0447\u0438 \u0441\u0445\u0435\u043c\u044b \u043d\u0435\u0447\u0443\u0432\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u044b \u043a \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0443, \u0442\u043e \u0435\u0441\u0442\u044c `Products`, `products` \u0438 `PrOdUcTs` \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u043e\u0434\u0438\u043d\u0430\u043a\u043e\u0432\u043e. \u0412\u0441\u0435 \u043e\u043d\u0438 \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u0443\u044e\u0442\u0441\u044f \u0432 \u043d\u0438\u0436\u043d\u0438\u0439 \u0440\u0435\u0433\u0438\u0441\u0442\u0440.\n\n\u0415\u0441\u043b\u0438 \u0438\u043c\u0435\u043d\u0430 \u0432\u0430\u0448\u0438\u0445 \u043f\u043e\u043b\u0435\u0439 \u043d\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0442 [\u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441\u0443 \u0438\u043c\u0435\u043d \u043f\u043e\u043b\u0435\u0439](../Creating_a_table/Data_types.md#Field-name-syntax), \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u043d\u043e\u043c\u0443 \u0432 Manticore Search (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0435\u0441\u043b\u0438 \u043e\u043d\u0438 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0435 \u0441\u0438\u043c\u0432\u043e\u043b\u044b \u0438\u043b\u0438 \u043d\u0430\u0447\u0438\u043d\u0430\u044e\u0442\u0441\u044f \u0441 \u0446\u0438\u0444\u0440), \u0432\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u0445\u0435\u043c\u044b. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, `$keyName` \u0438\u043b\u0438 `123field` \u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u043c\u0438 \u043a\u043b\u044e\u0447\u0430\u043c\u0438 \u0432 JSON, \u043d\u043e \u043d\u0435 \u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u043c\u0438 \u0438\u043c\u0435\u043d\u0430\u043c\u0438 \u043f\u043e\u043b\u0435\u0439 \u0432 Manticore Search. \u0415\u0441\u043b\u0438 \u0432\u044b \u043f\u043e\u043f\u044b\u0442\u0430\u0435\u0442\u0435\u0441\u044c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043d\u0435\u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0435 \u0438\u043c\u0435\u043d\u0430 \u043f\u043e\u043b\u0435\u0439 \u0431\u0435\u0437 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0433\u043e \u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f, Manticore \u0432\u0435\u0440\u043d\u0435\u0442 \u043e\u0448\u0438\u0431\u043a\u0443, \u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0441\u044f \u043d\u0435\u0443\u0434\u0430\u0447\u0435\u0439.\n\n\u0414\u043b\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0442\u0430\u043a\u0438\u0445 \u0441\u043b\u0443\u0447\u0430\u0435\u0432 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441 \u0441\u0445\u0435\u043c\u044b \u0434\u043b\u044f \u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043d\u0435\u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0445 \u0438\u043c\u0435\u043d \u043f\u043e\u043b\u0435\u0439 \u0441 \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u043c\u0438:\n\nCODE_BLOCK_1\n\n\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440:\nCODE_BLOCK_2\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_3\n\n<!-- response -->\n\nCODE_BLOCK_4\n\n<!-- end -->\n\n#### \u041e\u043f\u0446\u0438\u0438\n\n| \u041e\u043f\u0446\u0438\u044f | \u0414\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f | \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435                                                                                                         |\n|-|----------------|---------------------------------------------------------------------------------------------------------------------|\n| `type` | `kafka`        | \u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442 \u0442\u0438\u043f \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0430. \u0412 \u043d\u0430\u0441\u0442\u043e\u044f\u0449\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e `kafka`                                                          |\n| `broker_list` | `\u0445\u043e\u0441\u0442:\u043f\u043e\u0440\u0442 [, ...]` | \u0423\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 URL-\u0430\u0434\u0440\u0435\u0441\u0430 \u0431\u0440\u043e\u043a\u0435\u0440\u043e\u0432 Kafka                                                                                         |\n| `topic_list` | `\u0441\u0442\u0440\u043e\u043a\u0430 [, ...]` | \u0421\u043f\u0438\u0441\u043e\u043a \u0442\u043e\u043f\u0438\u043a\u043e\u0432 Kafka \u0434\u043b\u044f \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u044f                                                                                  |\n| `consumer_group`| `\u0441\u0442\u0440\u043e\u043a\u0430`       | \u041e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u0433\u0440\u0443\u043f\u043f\u0443 \u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u0435\u0439 Kafka, \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e `manticore`.                                                        |\n| `num_consumers` | `int`          | \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u0435\u0439 \u0434\u043b\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439.                                                                             |\n| `partition_list` | `int [, ...]`  | \u0421\u043f\u0438\u0441\u043e\u043a \u0440\u0430\u0437\u0434\u0435\u043b\u043e\u0432 \u0434\u043b\u044f \u0447\u0442\u0435\u043d\u0438\u044f [\u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435](../Integration/Kafka.md#Sharding-with-Kafka).                                 |\n| `batch` | `int`          | \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u0434\u043b\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043f\u0435\u0440\u0435\u0434 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u043e\u043c \u043a \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0439 \u043f\u0430\u0440\u0442\u0438\u0438. \u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e `100`; \u0432 \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043e\u0441\u0442\u0430\u0432\u0448\u0438\u0435\u0441\u044f \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u043f\u043e \u0442\u0430\u0439\u043c\u0430\u0443\u0442\u0443 |\n\n### \u0426\u0435\u043b\u0435\u0432\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430\n\n<!-- example kafka_destination -->\n\n\u0426\u0435\u043b\u0435\u0432\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u2014 \u044d\u0442\u043e \u043e\u0431\u044b\u0447\u043d\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0445\u0440\u0430\u043d\u044f\u0442\u0441\u044f \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 Kafka. \u042d\u0442\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0430 \u0432 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0438 \u0441 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f\u043c\u0438 \u0441\u0445\u0435\u043c\u044b \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u0438 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u0430 \u0434\u043b\u044f \u043f\u043e\u0442\u0440\u0435\u0431\u043d\u043e\u0441\u0442\u0435\u0439 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0432\u0430\u0448\u0435\u0433\u043e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f. \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u043e \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u0442\u0430\u0431\u043b\u0438\u0446 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0447\u0438\u0442\u0430\u0439\u0442\u0435 [\u0437\u0434\u0435\u0441\u044c](../Creating_a_table/Local_tables/Real-time_table.md#Creating-a-real-time-table:).\n\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_5\n\n<!-- response -->\n\nCODE_BLOCK_6\n\n<!-- end -->\n\n### \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u043e\u0435 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435\n\n<!-- example kafka_mv -->\n\n\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u043e\u0435 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u044b\u0432\u0430\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u0438\u0437 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 Kafka. \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0435\u0440\u0435\u0438\u043c\u0435\u043d\u043e\u0432\u044b\u0432\u0430\u0442\u044c \u043f\u043e\u043b\u044f, \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u0438 Manticore Search, \u0430 \u0442\u0430\u043a\u0436\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0443, \u0433\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u043a\u0443 \u0438 \u0434\u0440\u0443\u0433\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u0441 \u0434\u0430\u043d\u043d\u044b\u043c\u0438.\n\n\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u043e\u0435 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0443\u0435\u0442 \u043a\u0430\u043a \u0437\u0430\u043f\u0440\u043e\u0441, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u0435\u0440\u0435\u043c\u0435\u0449\u0430\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0435 \u0438\u0437 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0430 Kafka \u0432 \u0446\u0435\u043b\u0435\u0432\u0443\u044e \u0442\u0430\u0431\u043b\u0438\u0446\u0443, \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u044f \u0432\u0430\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441 Manticore Search \u0434\u043b\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u044d\u0442\u0438\u0445 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432. \u0423\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044c, \u0447\u0442\u043e \u043f\u043e\u043b\u044f \u0432 `select` \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0442 \u043f\u043e\u043b\u044f\u043c \u0432 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0435.\n\nCODE_BLOCK_7\n\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_8\n\n<!-- response -->\n\nCODE_BLOCK_9\n\n<!-- end -->\n\n\u0414\u0430\u043d\u043d\u044b\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u044e\u0442\u0441\u044f \u0438\u0437 Kafka \u0432 Manticore Search \u043f\u0430\u043a\u0435\u0442\u0430\u043c\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043e\u0447\u0438\u0449\u0430\u044e\u0442\u0441\u044f \u043f\u043e\u0441\u043b\u0435 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0437\u0430\u043f\u0443\u0441\u043a\u0430. \u0414\u043b\u044f \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0439 \u043c\u0435\u0436\u0434\u0443 \u043f\u0430\u043a\u0435\u0442\u0430\u043c\u0438, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a AVG, \u0431\u0443\u0434\u044c\u0442\u0435 \u043e\u0441\u0442\u043e\u0440\u043e\u0436\u043d\u044b, \u0442\u0430\u043a \u043a\u0430\u043a \u043e\u043d\u0438 \u043c\u043e\u0433\u0443\u0442 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u043d\u0435 \u0442\u0430\u043a, \u043a\u0430\u043a \u043e\u0436\u0438\u0434\u0430\u0435\u0442\u0441\u044f, \u0438\u0437-\u0437\u0430 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043f\u0430\u043a\u0435\u0442 \u0437\u0430 \u043f\u0430\u043a\u0435\u0442\u043e\u043c.\n\n### \u0421\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u0435\u0439\n\n\u0412\u043e\u0442 \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u043f\u0440\u0438\u0432\u0435\u0434\u0435\u043d\u043d\u044b\u0445 \u0432\u044b\u0448\u0435 \u043f\u0440\u0438\u043c\u0435\u0440\u043e\u0432:\n\n| Kafka           | \u0418\u0441\u0442\u043e\u0447\u043d\u0438\u043a   | \u0411\u0443\u0444\u0435\u0440   | \u041c\u0412                                | \u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 |\n|-----------------|----------|----------|-----------------------------------|-------------|\n| `id`              | `id`       | `id`       | `id`                                | `id`          |\n| `term`            | `term`     | `term`     | `term as name`                      | `name`        |\n| `unnecessary_key` \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043d\u0430\u0441 \u043d\u0435 \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u0443\u0435\u0442 | -        | -        |                                   |             |\n| `$abbrev`         | `abbrev`   | `abbrev`   | `abbrev` as `short_name`              | `short_name`  |\n| -                 | -        | -         | `UTC_TIMESTAMP() as received_at`  | `received_at` |\n| `GlossDef`        | `glossdef` | `glossdef` | `glossdef.size as size`             | `size`        |\n\n### \u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0441\u043f\u0438\u0441\u043a\u0430\n\n<!-- example kafka_listing -->\n\n\u0427\u0442\u043e\u0431\u044b \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0438 \u0438 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0432 Manticore Search, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b:\n- `SHOW SOURCES`: \u0412\u044b\u0432\u043e\u0434\u0438\u0442 \u0441\u043f\u0438\u0441\u043e\u043a \u0432\u0441\u0435\u0445 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u0445 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u043e\u0432.\n- `SHOW MVS`: \u0412\u044b\u0432\u043e\u0434\u0438\u0442 \u0441\u043f\u0438\u0441\u043e\u043a \u0432\u0441\u0435\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u044b\u0445 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0439.\n- `SHOW MV view_table`: \u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0443\u044e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u043c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u043e\u043c \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0438."
        },
        "is_code_or_comment": false,
        "model": "deepseek/deepseek-v3.2",
        "updated_at": 1766374193
    },
    "__meta": {
        "source_text": "# Syncing from Kafka\n\n> NOTE: this functionality requires [Manticore Buddy](../Installation/Manticore_Buddy.md). If it doesn't work, make sure Buddy is installed.\n\nManticore supports integration with [Apache Kafka](https://kafka.apache.org/) real-time data ingestion through Kafka sources and materialized views, allowing for real-time data indexing and search. Currently, **apache/kafka versions 3.7.0-4.1.0** are tested and supported.\n\nTo get started, you need to:\n1. **Define the source:** Specify the Kafka topic from which Manticore Search will read messages. This setup includes details like the broker\u2019s host, port, and topic name.\n2. **Set up the destination table:** Choose a Manticore real-time table to store the incoming Kafka data.\n3. **Create a materialized view:** Set up a materialized view (`mv`) to handle data transformation and mapping from Kafka to the destination table in Manticore Search. Here, you\u2019ll define field mappings, data transformations, and any filters or conditions for the incoming data stream.\n\n## Source\n\n<!-- example kafka_source -->\n\nThe `source` configuration allows you to define the `broker`, `topic list`, `consumer group`, and the message structure.\n\n#### Schema\n\nDefine the schema using Manticore field types like `int`, `float`, `text`, `json`, etc.\n\n```sql\nCREATE SOURCE <source name> [(column type, ...)] [source_options]\n```\n\nAll schema keys are case-insensitive, meaning `Products`, `products`, and `PrOdUcTs` are treated the same. They are all converted to lowercase.\n\nIf your field names don't match the [field name syntax](../Creating_a_table/Data_types.md#Field-name-syntax) allowed in Manticore Search (for example, if they contain special characters or start with numbers), you must define a schema mapping. For instance, `$keyName` or `123field` are valid keys in JSON but not valid field names in Manticore Search. If you try to use invalid field names without proper mapping, Manticore will return an error and the source creation will fail.\n\nTo handle such cases, use the following schema syntax to map invalid field names to valid ones:\n\n```\nallowed_field_name 'original JSON key name with special symbols' type\n```\n\nFor example:\n```sql\nprice_field '$price' float    -- maps JSON key '$price' to field 'price_field'\nfield_123 '123field' text     -- maps JSON key '123field' to field 'field_123'\n```\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\n```sql\nCREATE SOURCE kafka\n(id bigint, term text, abbrev '$abbrev' text, GlossDef json)\ntype='kafka'\nbroker_list='kafka:9092'\ntopic_list='my-data'\nconsumer_group='manticore'\nnum_consumers='2'\nbatch=50\n```\n\n<!-- response -->\n\n```\nQuery OK, 2 rows affected (0.02 sec)\n```\n\n<!-- end -->\n\n#### Options\n\n| Option | Accepted Values | Description                                                                                                         |\n|-|----------------|---------------------------------------------------------------------------------------------------------------------|\n| `type` | `kafka`        | Sets the source type. Currently, only `kafka` is supported                                                          |\n| `broker_list` | `host:port [, ...]` | Specifies Kafka broker URLs                                                                                         |\n| `topic_list` | `string [, ...]` | Lists Kafka topics to consume from                                                                                  |\n| `consumer_group`| `string`       | Defines the Kafka consumer group, defaulting to `manticore`.                                                        |\n| `num_consumers` | `int`          | Number of consumers to handle messages.                                                                             |\n| `partition_list` | `int [, ...]`  | List of partitions for reading [more](../Integration/Kafka.md#Sharding-with-Kafka).                                 |\n| `batch` | `int`          | Number of messages to process before moving on. Default is `100`; processes remaining messages on timeout otherwise |\n\n### Destination table\n\n<!-- example kafka_destination -->\n\nThe destination table is a regular real-time table where the results of Kafka message processing are stored. This table should be defined to match the schema requirements of the incoming data and optimized for the query performance needs of your application. Read more about creating real-time tables [here](../Creating_a_table/Local_tables/Real-time_table.md#Creating-a-real-time-table:).\n\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\n```sql\nCREATE TABLE destination_kafka\n(id bigint, name text, short_name text, received_at text, size multi);\n```\n\n<!-- response -->\n\n```\nQuery OK, 0 rows affected (0.02 sec)\n```\n\n<!-- end -->\n\n### Materialized view\n\n<!-- example kafka_mv -->\n\nA materialized view enables data transformation from Kafka messages. You can rename fields, apply Manticore Search functions, and perform sorting, grouping, and other data operations.\n\nA materialized view acts as a query that moves data from the Kafka source to the destination table, letting you use Manticore Search syntax to customize these queries. Make sure that fields in the `select` match those in the source.\n\n```\nCREATE MATERIALIZED VIEW <materialized view name>\nTO <destination table name> AS\nSELECT [column|function [as <new name>], ...] FROM <source name>\n```\n\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\n```sql\nCREATE MATERIALIZED VIEW view_table\nTO destination_kafka AS\nSELECT id, term as name, abbrev as short_name,\n       UTC_TIMESTAMP() as received_at, GlossDef.size as size FROM kafka\n\n```\n\n<!-- response -->\n\n```sql\nQuery OK, 2 rows affected (0.02 sec)\n```\n\n<!-- end -->\n\nData is transferred from Kafka to Manticore Search in batches, which are cleared after each run. For calculations across batches, such as AVG, use caution, as these may not work as expected due to batch-by-batch processing.\n\n\n### Field Mapping\n\nHere's a mapping table based on the examples above:\n\n| Kafka           | Source   | Buffer   | MV                                | Destination |\n|-----------------|----------|----------|-----------------------------------|-------------|\n| `id`              | `id`       | `id`       | `id`                                | `id`          |\n| `term`            | `term`     | `term`     | `term as name`                      | `name`        |\n| `unnecessary_key` which we're not interested in | -        | -        |                                   |             |\n| `$abbrev`         | `abbrev`   | `abbrev`   | `abbrev` as `short_name`              | `short_name`  |\n| -                 | -        | -         | `UTC_TIMESTAMP() as received_at`  | `received_at` |\n| `GlossDef`        | `glossdef` | `glossdef` | `glossdef.size as size`             | `size`        |\n\n### Listing\n\n<!-- example kafka_listing -->\n\nTo view sources and materialized views in Manticore Search, use these commands:\n- `SHOW SOURCES`: Lists all configured sources.\n- `SHOW MVS`: Lists all materialized views.\n- `SHOW MV view_table`: Shows detailed information on a specific materialized view.\n\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\n```sql\nSHOW SOURCES\n```\n\n<!-- response -->\n\n```\n+-------+\n| name  |\n+-------+\n| kafka |\n+-------+\n```\n\n<!-- end -->\n\n<!-- example kafka_create_source -->\n\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\n```sql\nSHOW SOURCE kafka;\n```\n\n<!-- response -->\n\n```\n+--------+-------------------------------------------------------------------+\n| Source | Create Table                                                      |\n+--------+-------------------------------------------------------------------+\n| kafka  | CREATE SOURCE kafka                                               |\n|        | (id bigint, term text, abbrev '$abbrev' text, GlossDef json)      |\n|        | type='kafka'                                                      |\n|        | broker_list='kafka:9092'                                          |\n|        | topic_list='my-data'                                              |\n|        | consumer_group='manticore'                                        |\n|        | num_consumers='2'                                                 |\n|        | batch=50                                                          |\n+--------+-------------------------------------------------------------------+\n```\n\n<!-- end -->\n\n<!-- example kafka_view -->\n\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\n```sql\nSHOW MVS\n```\n\n<!-- response -->\n\n```\n+------------+\n| name       |\n+------------+\n| view_table |\n+------------+\n```\n\n<!-- end -->\n\n<!-- example kafka_show -->\n\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\n```sql\nSHOW MV view_table\n```\n\n<!-- response -->\n\n```\n+------------+--------------------------------------------------------------------------------------------------------+-----------+\n| View       | Create Table                                                                                           | suspended |\n+------------+--------------------------------------------------------------------------------------------------------+-----------+\n| view_table | CREATE MATERIALIZED VIEW view_table TO destination_kafka AS                                            | 0         |\n|            | SELECT id, term as name, abbrev as short_name, UTC_TIMESTAMP() as received_at, GlossDef.size as size   |           |\n|            | FROM kafka                                                                                             |           |\n+------------+--------------------------------------------------------------------------------------------------------+-----------+\n```\n\n<!-- end -->\n\n### Altering materialized views\n\n<!-- example mv_suspend -->\n\nYou can suspend data consumption by altering materialized views.\n\nIf you remove the `source` without deleting the MV, it automatically suspends. After recreating the source, unsuspend the MV manually using the `ALTER` command.\n\nCurrently, only materialized views can be altered. To change `source` parameters, drop and recreate the source.\n\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\n```sql\nALTER MATERIALIZED VIEW view_table suspended=1\n```\n\n<!-- response -->\n\n```sql\nQuery OK (0.02 sec)\n```\n\n<!-- end -->\n\n### Sharding with Kafka\n\nYou can also specify a `partition_list` for each Kafka topic.\nOne of the main benefits of this approach is the ability to implement `sharding` for your table via Kafka.\nTo achieve this, you should create a separate chain of `source` \u2192 `materialized view` \u2192 `destination table` for each shard:\n\n**Sources:**\n```sql\nCREATE SOURCE kafka_p1 (id bigint, term text)\n  type='kafka' broker_list='kafka:9092' topic_list='my-data'\n  consumer_group='manticore' num_consumers='1' partition_list='0' batch=50;\n\nCREATE SOURCE kafka_p2 (id bigint, term text)\n  type='kafka' broker_list='kafka:9092' topic_list='my-data'\n  consumer_group='manticore' num_consumers='1' partition_list='1' batch=50;\n```\n\n**Destination Tables:**\n\n```sql\nCREATE TABLE destination_shard_1 (id bigint, name text);\nCREATE TABLE destination_shard_2 (id bigint, name text);\n```\n\n**Materialized Views:**\n\n```sql\nCREATE MATERIALIZED VIEW mv_1 TO destination_shard_1 AS SELECT id, term AS name FROM kafka_p1;\nCREATE MATERIALIZED VIEW mv_2 TO destination_shard_2 AS SELECT id, term AS name FROM kafka_p2;\n```\n\n#### \u26a0\ufe0f Important Notes:\n\n* In this setup, rebalancing must be managed manually.\n* Kafka does not distribute messages using a round-robin strategy by default.\n* To achieve round-robin-like distribution when sending data, make sure your Kafka producer is configured with:\n  * `parse.key=true`\n  * `key.separator={your_delimiter}`\n\nOtherwise, Kafka will distribute messages based on its own internal rules, which may lead to uneven partitioning.\n\n### Troubleshooting\n\n#### Duplicate entries\n\nKafka offsets commit after each batch or when processing times out. If the process stops unexpectedly during a materialized view query, you may see duplicate entries. To avoid this, include an `id` field in your schema, allowing Manticore Search to prevent duplicates in the table.\n\n### How it works internally\n\n- **Worker initialization:** After configuring a source and materialized view, Manticore Search sets up a dedicated worker to handle data ingestion from Kafka.\n- **Message mapping:** Messages are mapped according to the source configuration schema, transforming them into a structured format.\n- **Batching:** Messages are grouped into batches for efficient processing. Batch size can be adjusted to suit your performance and latency needs.\n- **Buffering:** Mapped data batches are stored in a buffer table for efficient bulk operations.\n- **Materialized view processing:** The view logic is applied to data in the buffer table, performing any transformations or filtering.\n- **Data transfer:** Processed data is then transferred to the destination real-time table.\n- **Cleanup:** The buffer table is cleared after each batch, ensuring it\u2019s ready for the next set of data.\n\n<!-- proofread -->\n\n",
        "updated_at": 1768530797,
        "source_md5": "7ed5bc9028d7199480e1e3c080df1642"
    }
}