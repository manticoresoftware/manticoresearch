{
  "c5a332ce045d519a7da3b30ea230442e4a630a51f3212a9e17b034649dcee62a": {
    "original": "# Query plan\n\n<!-- example SHOW PLAN -->\n\nThe `SHOW PLAN` SQL statement and the `\"plan\": N` JSON interface option display the query execution plan. The plan is generated and stored during the actual execution, so in the case of SQL, profiling must be enabled in the current session **before** running that statement. This can be done with a `SET profiling=1` statement.\n\nTwo items are returned in SQL mode:\n\n* `transformed_tree`, which displays the full-text query decomposition.\n\n* `enabled_indexes`, which provides information about effective secondary indexes.\n\nTo view the query execution plan in a JSON query, add `\"plan\": N` to the query. The result will appear as a `plan` property in the result set. `N` can be one of the following:\n\n* 1 - Displays only the textual plan of the root node, similar to the one returned in the `SHOW PLAN` SQL query. This is the most compact form.\n\n* 2 - Displays only the JSON object plan, useful for processing.\n\n* 3 - Displays a JSON object with a textual description of every node. Note that the description for child nodes is also present and repeats part of the parent's description, which makes the whole representation quite large.\n\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_0\n\n<!-- response SQL -->\n\nCODE_BLOCK_1\n\n<!-- intro -->\n\n##### JSON:\n\n<!-- request JSON -->\n\nCODE_BLOCK_2\n\n<!-- response JSON -->\n\nCODE_BLOCK_3\n\n<!-- end -->\n\n<!-- example SHOW PLAN EXPANSION -->\n\nIn some cases, the evaluated query tree can be quite different from the original one due to expansions and other transformations.\n\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_4\n\n<!-- response SQL -->\n\nCODE_BLOCK_5\n\n<!-- intro -->\n\n##### JSON full format:\n\n<!-- request JSON -->\n\nCODE_BLOCK_6\n\n<!-- response JSON -->\n\nCODE_BLOCK_7\n\n<!-- intro -->\n\n##### JSON object format:\n\n<!-- request JSON -->\n\nCODE_BLOCK_8\n\n<!-- response JSON -->\n\nCODE_BLOCK_9\n\n<!-- intro -->\n\n##### JSON short format:\n\n<!-- request JSON -->\n\nCODE_BLOCK_10\n\n<!-- response JSON -->\n\nCODE_BLOCK_11\n\n<!-- end -->\n\nSee also [EXPLAIN QUERY](../../Searching/Full_text_matching/Profiling.md#Profiling-without-running-a-query). It displays the execution tree of a full-text query **without actually executing the query**. Note that when using `SHOW PLAN` after a query to a real-time table, the result will be based on a random disk/RAM chunk. Therefore, if you have recently modified the table's tokenization settings, or if the chunks vary significantly in terms of dictionaries, etc., you might not get the result you are expecting. Take this into account and consider using `EXPLAIN QUERY` as well.\n\n## JSON result set notes\n\n`query` property contains the transformed full-text query tree. Each node contains:\n\n* `type`: node type. Can be `AND`, `OR`, `PHRASE`, `KEYWORD`, etc.\n\n* `description`: query subtree for this node shown as a string (in `SHOW PLAN` format).\n\n* `children`: child nodes, if any.\n\n* `max_field_pos`: maximum position within a field.\n\n* `word`: transformed keyword. Keyword nodes only.\n\n* `querypos`: position of this keyword in a query. Keyword nodes only.\n\n* `excluded`: keyword excluded from query. Keyword nodes only.\n\n* `expanded`: keyword added by prefix expansion. Keyword nodes only.\n\n* `field_start`: keyword must occur at the very start of the field. Keyword nodes only.\n\n* `field_end`: keyword must occur at the very end of the field. Keyword nodes only.\n\n* `boost`: keyword IDF will be multiplied by this. Keyword nodes only.\n\n## Dot format for SHOW PLAN\n\n`SHOW PLAN format=dot` allows returning the full-text query execution tree in a hierarchical format suitable for visualization by existing tools, such as https://dreampuf.github.io/GraphvizOnline:\n\nCODE_BLOCK_12\n\n![SHOW PLAN graphviz example](graphviz.png)\n\n<!-- proofread -->",
    "translations": {
      "chinese": "# 查询计划\n\n<!-- example SHOW PLAN -->\n\n`SHOW PLAN` SQL 语句和 `\"plan\": N` JSON 接口选项显示查询执行计划。计划在实际执行过程中生成并存储，因此在 SQL 的情况下，必须在当前会话中**在运行该语句之前**启用分析。可以通过 `SET profiling=1` 语句完成此操作。\n\n在 SQL 模式下返回两个项目：\n\n* `transformed_tree`，显示全文查询的分解文本。\n\n* `enabled_indexes`，提供有关有效二级索引的信息。\n\n要在 JSON 查询中查看查询执行计划，请在查询中添加 `\"plan\": N`。结果将作为结果集中的 `plan` 属性出现。`N` 可以是以下之一：\n\n* 1 - 仅显示根节点的文本计划，类似于 `SHOW PLAN` SQL 查询返回的内容。这是最紧凑的形式。\n\n* 2 - 仅显示 JSON 对象计划，便于处理。\n\n* 3 - 显示带有每个节点文本描述的 JSON 对象。请注意，子节点的描述也存在，并且重复了父节点描述的一部分，这使得整个表示相当庞大。\n\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_0\n\n<!-- response SQL -->\n\nCODE_BLOCK_1\n\n<!-- intro -->\n\n##### JSON:\n\n<!-- request JSON -->\n\nCODE_BLOCK_2\n\n<!-- response JSON -->\n\nCODE_BLOCK_3\n\n<!-- end -->\n\n<!-- example SHOW PLAN EXPANSION -->\n\n在某些情况下，由于扩展和其他转换，评估的查询树可能与原始查询树有很大不同。\n\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_4\n\n<!-- response SQL -->\n\nCODE_BLOCK_5\n\n<!-- intro -->\n\n##### JSON full format:\n\n<!-- request JSON -->\n\nCODE_BLOCK_6\n\n<!-- response JSON -->\n\nCODE_BLOCK_7\n\n<!-- intro -->\n\n##### JSON object format:\n\n<!-- request JSON -->\n\nCODE_BLOCK_8\n\n<!-- response JSON -->\n\nCODE_BLOCK_9\n\n<!-- intro -->\n\n##### JSON short format:\n\n<!-- request JSON -->\n\nCODE_BLOCK_10\n\n<!-- response JSON -->\n\nCODE_BLOCK_11\n\n<!-- end -->\n\n另请参见 [EXPLAIN QUERY](../../Searching/Full_text_matching/Profiling.md#Profiling-without-running-a-query)。它显示全文查询的执行树，**而不实际执行查询**。请注意，当在实时表查询后使用 `SHOW PLAN` 时，结果将基于随机的磁盘/RAM 块。因此，如果您最近修改了表的分词设置，或者块在字典等方面差异较大，您可能无法获得预期的结果。请考虑这一点，并考虑同时使用 `EXPLAIN QUERY`。\n\n## JSON 结果集说明\n\n`query` 属性包含转换后的全文查询树。每个节点包含：\n\n* `type`：节点类型。可以是 `AND`、`OR`、`PHRASE`、`KEYWORD` 等。\n\n* `description`：该节点的查询子树，以字符串形式显示（`SHOW PLAN` 格式）。\n\n* `children`：子节点（如果有）。\n\n* `max_field_pos`：字段内的最大位置。\n\n* `word`：转换后的关键词。仅关键词节点。\n\n* `querypos`：该关键词在查询中的位置。仅关键词节点。\n\n* `excluded`：关键词是否被排除在查询之外。仅关键词节点。\n\n* `expanded`：关键词是否由前缀扩展添加。仅关键词节点。\n\n* `field_start`：关键词必须出现在字段的开头。仅关键词节点。\n\n* `field_end`：关键词必须出现在字段的结尾。仅关键词节点。\n\n* `boost`：关键词的 IDF 将乘以此值。仅关键词节点。\n\n## SHOW PLAN 的 Dot 格式\n\n`SHOW PLAN format=dot` 允许以分层格式返回全文查询执行树，适合使用现有工具进行可视化，例如 https://dreampuf.github.io/GraphvizOnline：\n\nCODE_BLOCK_12\n\n![SHOW PLAN graphviz 示例](graphviz.png)\n\n<!-- proofread -->",
      "russian": "# План запроса\n\n<!-- example SHOW PLAN -->\n\nSQL-оператор `SHOW PLAN` и опция интерфейса JSON `\"plan\": N` отображают план выполнения запроса. План генерируется и сохраняется во время фактического выполнения, поэтому в случае SQL профилирование должно быть включено в текущей сессии **до** выполнения этого оператора. Это можно сделать с помощью оператора `SET profiling=1`.\n\nВ режиме SQL возвращаются два элемента:\n\n* `transformed_tree`, который отображает полное текстовое разложение запроса.\n\n* `enabled_indexes`, который предоставляет информацию об эффективных вторичных индексах.\n\nЧтобы просмотреть план выполнения запроса в JSON-запросе, добавьте `\"plan\": N` к запросу. Результат появится в виде свойства `plan` в наборе результатов. `N` может принимать одно из следующих значений:\n\n* 1 - Отображает только текстовый план корневого узла, аналогичный тому, что возвращается в SQL-запросе `SHOW PLAN`. Это самая компактная форма.\n\n* 2 - Отображает только JSON-объект плана, полезный для обработки.\n\n* 3 - Отображает JSON-объект с текстовым описанием каждого узла. Обратите внимание, что описание дочерних узлов также присутствует и повторяет часть описания родительского узла, что делает всю структуру довольно большой.\n\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_0\n\n<!-- response SQL -->\n\nCODE_BLOCK_1\n\n<!-- intro -->\n\n##### JSON:\n\n<!-- request JSON -->\n\nCODE_BLOCK_2\n\n<!-- response JSON -->\n\nCODE_BLOCK_3\n\n<!-- end -->\n\n<!-- example SHOW PLAN EXPANSION -->\n\nВ некоторых случаях оцениваемое дерево запроса может значительно отличаться от исходного из-за расширений и других преобразований.\n\n<!-- intro -->\n\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_4\n\n<!-- response SQL -->\n\nCODE_BLOCK_5\n\n<!-- intro -->\n\n##### JSON full format:\n\n<!-- request JSON -->\n\nCODE_BLOCK_6\n\n<!-- response JSON -->\n\nCODE_BLOCK_7\n\n<!-- intro -->\n\n##### JSON object format:\n\n<!-- request JSON -->\n\nCODE_BLOCK_8\n\n<!-- response JSON -->\n\nCODE_BLOCK_9\n\n<!-- intro -->\n\n##### JSON short format:\n\n<!-- request JSON -->\n\nCODE_BLOCK_10\n\n<!-- response JSON -->\n\nCODE_BLOCK_11\n\n<!-- end -->\n\nСм. также [EXPLAIN QUERY](../../Searching/Full_text_matching/Profiling.md#Profiling-without-running-a-query). Он отображает дерево выполнения полнотекстового запроса **без фактического выполнения запроса**. Обратите внимание, что при использовании `SHOW PLAN` после запроса к таблице реального времени результат будет основан на случайном дисковом/оперативном фрагменте. Поэтому, если вы недавно изменяли настройки токенизации таблицы или если фрагменты значительно различаются по словарям и т. п., вы можете не получить ожидаемый результат. Учитывайте это и рассмотрите возможность использования `EXPLAIN QUERY`.\n\n## Примечания к JSON-набору результатов\n\nСвойство `query` содержит преобразованное дерево полнотекстового запроса. Каждый узел содержит:\n\n* `type`: тип узла. Может быть `AND`, `OR`, `PHRASE`, `KEYWORD` и т. д.\n\n* `description`: поддерево запроса для этого узла, отображаемое в виде строки (в формате `SHOW PLAN`).\n\n* `children`: дочерние узлы, если есть.\n\n* `max_field_pos`: максимальная позиция внутри поля.\n\n* `word`: преобразованное ключевое слово. Только для узлов ключевых слов.\n\n* `querypos`: позиция этого ключевого слова в запросе. Только для узлов ключевых слов.\n\n* `excluded`: ключевое слово исключено из запроса. Только для узлов ключевых слов.\n\n* `expanded`: ключевое слово добавлено расширением префикса. Только для узлов ключевых слов.\n\n* `field_start`: ключевое слово должно встречаться в самом начале поля. Только для узлов ключевых слов.\n\n* `field_end`: ключевое слово должно встречаться в самом конце поля. Только для узлов ключевых слов.\n\n* `boost`: IDF ключевого слова будет умножен на это значение. Только для узлов ключевых слов.\n\n## Формат Dot для SHOW PLAN\n\n`SHOW PLAN format=dot` позволяет возвращать дерево выполнения полнотекстового запроса в иерархическом формате, подходящем для визуализации с помощью существующих инструментов, таких как https://dreampuf.github.io/GraphvizOnline:\n\nCODE_BLOCK_12\n\n![Пример графа SHOW PLAN graphviz](graphviz.png)\n\n<!-- proofread -->"
    },
    "is_code_or_comment": false
  }
}
