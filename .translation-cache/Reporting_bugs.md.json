{
  "ea369c8e14c1d015a7440f05d7f7a2cebbe15de7adbd12784ca7814da409ba13": {
    "original": "2. Find symbols in `/usr/lib/debug/.build-id` like this:\n\nCODE_BLOCK_10\n\n### Uploading your data\n\n<!-- example s3 -->\n\nTo fix your bug, developers often need to reproduce it locally. To do this, they need your configuration file, table files, binlog (if present), and sometimes source data (such as data from external storages or XML/CSV files) and queries.\n\nAttach your data when you [create a ticket on Github](https://github.com/manticoresoftware/manticoresearch/issues/new). If the data is too large or sensitive, you can upload it to our write-only S3 storage at  `s3://s3.manticoresearch.com/write-only/`.\n\nTo to that easily we provide an upload mechanism using a Docker image. This image is built from our open-source repository at [github.com/manticoresoftware/s3-upload](https://github.com/manticoresoftware/s3-upload) and helps you easily upload data to Manticore's write-only S3 storage. Here's how you can do it:\n\n1. Navigate to the directory containing the files you want to upload and run:\n\n   ```bash\n\n   docker run -it --rm -v $(pwd):/upload manticoresearch/upload\n\n   ```\n\n2. This will:\n\n   - Ask you to enter the related issue URL/number\n\n   - Upload **all files in the current directory** to our write-only S3 storage\n\n   - At the end, you will see an upload path. Please share this path with the developers.\n\n<!-- intro -->\n\nExample:\n\n<!-- request Example -->\n\nCODE_BLOCK_11\n\n<!-- response Example -->\n\nCODE_BLOCK_12\n\n<!-- end -->\n\nAlternatively, you can use the S3 [Minio client](https://min.io/docs/minio/linux/reference/minio-mc.html) or the Amazon [s3cmd](https://s3tools.org/s3cmd) tool to do the same, e.g.:\n\n1. Install the client https://min.io/docs/minio/linux/reference/minio-mc.html#install-mc\n\nFor example on 64-bit Linux:\n\n   ```\n\n   curl https://dl.min.io/client/mc/release/linux-amd64/mc \\\n\n   --create-dirs \\\n\n   -o $HOME/minio-binaries/mc\n\n   chmod +x $HOME/minio-binaries/mc\n\n   export PATH=$PATH:$HOME/minio-binaries/\n\n   ```\n\n2. Add our s3 host (use full path to executable or change into its directory): `cd $HOME/minio-binaries` and then `./mc config host add manticore http://s3.manticoresearch.com:9000 manticore manticore`\n\n3. Copy your files (use full path to executable or change into its directory): `cd $HOME/minio-binaries` and then `./mc cp -r issue-1234/ manticore/write-only/issue-1234` . Make sure the folder name is unique and best if it corresponds to the issue on GitHub where you described the bug.\n\n### DEBUG\n\nCODE_BLOCK_13\n\nThe `DEBUG` statement is designed for developers and testers to call various internal or VIP commands. However, it is not intended for production use as the syntax of the  `subcommand` component may change freely in any build.\n\nTo view a list of useful commands and `DEBUG` statement subcommands available in the current context, simply call `DEBUG` without any parameters.\n\nCODE_BLOCK_14\n\nSame from VIP connection:\n\nCODE_BLOCK_15\n\nAll `debug XXX` commands should be regarded as non-stable and subject to modification at any time, so don't be surprised if they change. This example output may not reflect the actual available commands, so try it on your system to see what is available on your instance. Additionally, there is no detailed documentation provided aside from this short 'meaning' column.\n\nAs a quick illustration, two commands available only to VIP clients are described below - shutdown and crash. Both require a token, which can be generated with the debug token subcommand, and added to the [shutdown_token](Server_settings/Searchd.md#shutdown_token) param in the searchd section of the config file. If no such section exists, or if the provided password hash does not match the token stored in the config, the subcommands will do nothing.\n\nCODE_BLOCK_16\n\nThe subcommand `shutdown` will send a TERM signal to the server, causing it to shut down. This can be dangerous, as nobody wants to accidentally stop a production service. Therefore, it requires a VIP connection and the password to be used.\n\nThe subcommand `crash` literally causes a crash. It may be used for testing purposes, such as to test how the system manager maintains the service's liveness or to test the feasibility of tracking coredumps.\n\nIf some commands are found to be useful in a more general context, they may be moved from the debug subcommands to a more stable and generic location (as exemplified by the `debug tasks` and `debug sched` in the table).\n\n<!-- proofread -->",
    "translations": {
      "chinese": "2. 在 `/usr/lib/debug/.build-id` 中找到如下符号：\n\nCODE_BLOCK_10\n\n### 上传您的数据\n\n<!-- example s3 -->\n\n为了修复您的错误，开发人员通常需要在本地重现它。为此，他们需要您的配置文件、表文件、binlog（如果存在），有时还需要源数据（例如来自外部存储或 XML/CSV 文件的数据）和查询。\n\n当您[在 Github 上创建工单](https://github.com/manticoresoftware/manticoresearch/issues/new)时，请附上您的数据。如果数据过大或敏感，您可以将其上传到我们的只写 S3 存储，地址为 `s3://s3.manticoresearch.com/write-only/`。\n\n为了方便操作，我们提供了一个使用 Docker 镜像的上传机制。该镜像基于我们的开源仓库 [github.com/manticoresoftware/s3-upload](https://github.com/manticoresoftware/s3-upload) 构建，帮助您轻松上传数据到 Manticore 的只写 S3 存储。操作步骤如下：\n\n1. 进入包含您要上传文件的目录，运行：\n\n   ```bash\n\n   docker run -it --rm -v $(pwd):/upload manticoresearch/upload\n\n   ```\n\n2. 该命令将会：\n\n   - 询问您输入相关问题的 URL/编号\n\n   - 上传**当前目录下的所有文件**到我们的只写 S3 存储\n\n   - 最后，您将看到一个上传路径。请将此路径分享给开发人员。\n\n<!-- intro -->\n\n示例：\n\n<!-- request Example -->\n\nCODE_BLOCK_11\n\n<!-- response Example -->\n\nCODE_BLOCK_12\n\n<!-- end -->\n\n另外，您也可以使用 S3 的 [Minio 客户端](https://min.io/docs/minio/linux/reference/minio-mc.html) 或 Amazon 的 [s3cmd](https://s3tools.org/s3cmd) 工具实现同样功能，例如：\n\n1. 安装客户端 https://min.io/docs/minio/linux/reference/minio-mc.html#install-mc\n\n例如在 64 位 Linux 上：\n\n   ```\n\n   curl https://dl.min.io/client/mc/release/linux-amd64/mc \\\n\n   --create-dirs \\\n\n   -o $HOME/minio-binaries/mc\n\n   chmod +x $HOME/minio-binaries/mc\n\n   export PATH=$PATH:$HOME/minio-binaries/\n\n   ```\n\n2. 添加我们的 s3 主机（使用可执行文件的完整路径或切换到其目录）：`cd $HOME/minio-binaries`，然后执行 `./mc config host add manticore http://s3.manticoresearch.com:9000 manticore manticore`\n\n3. 复制您的文件（使用可执行文件的完整路径或切换到其目录）：`cd $HOME/minio-binaries`，然后执行 `./mc cp -r issue-1234/ manticore/write-only/issue-1234`。确保文件夹名称唯一，最好与您在 GitHub 上描述该错误的问题编号对应。\n\n### DEBUG\n\nCODE_BLOCK_13\n\n`DEBUG` 语句设计供开发人员和测试人员调用各种内部或 VIP 命令。然而，它不适合生产环境使用，因为 `subcommand` 组件的语法可能在任何构建版本中自由更改。\n\n要查看当前上下文中可用的有用命令和 `DEBUG` 语句子命令列表，只需调用不带任何参数的 `DEBUG`。\n\nCODE_BLOCK_14\n\nVIP 连接中同样适用：\n\nCODE_BLOCK_15\n\n所有 `debug XXX` 命令都应视为不稳定，随时可能修改，因此如果它们发生变化，请不要感到惊讶。此示例输出可能不反映实际可用命令，建议您在自己的系统上尝试以查看实例中可用的命令。此外，除了这简短的“含义”列外，没有提供详细文档。\n\n作为快速说明，下面描述了两个仅对 VIP 客户端可用的命令——shutdown 和 crash。两者都需要一个令牌，该令牌可以通过 debug token 子命令生成，并添加到配置文件 searchd 部分的 [shutdown_token](Server_settings/Searchd.md#shutdown_token) 参数中。如果不存在该部分，或者提供的密码哈希与配置中存储的令牌不匹配，则子命令不会执行任何操作。\n\nCODE_BLOCK_16\n\n子命令 `shutdown` 会向服务器发送 TERM 信号，导致其关闭。这可能很危险，因为没人希望意外停止生产服务。因此，它需要 VIP 连接和密码才能使用。\n\n子命令 `crash` 会导致服务器崩溃。它可用于测试目的，例如测试系统管理器如何维护服务的存活性，或测试跟踪核心转储的可行性。\n\n如果某些命令在更广泛的上下文中被发现有用，它们可能会从调试子命令移至更稳定和通用的位置（如表中示例的 `debug tasks` 和 `debug sched`）。\n\n<!-- proofread -->",
      "russian": "2. Найдите символы в `/usr/lib/debug/.build-id` вот так:\n\nCODE_BLOCK_10\n\n### Загрузка ваших данных\n\n<!-- example s3 -->\n\nЧтобы исправить вашу ошибку, разработчикам часто нужно воспроизвести её локально. Для этого им нужны ваш конфигурационный файл, файлы таблиц, binlog (если есть), а иногда исходные данные (например, данные из внешних хранилищ или XML/CSV файлы) и запросы.\n\nПрикрепляйте ваши данные при [создании тикета на Github](https://github.com/manticoresoftware/manticoresearch/issues/new). Если данные слишком большие или конфиденциальные, вы можете загрузить их в наше хранилище S3 с правом только на запись по адресу `s3://s3.manticoresearch.com/write-only/`.\n\nДля удобства мы предоставляем механизм загрузки с использованием Docker-образа. Этот образ построен из нашего открытого репозитория на [github.com/manticoresoftware/s3-upload](https://github.com/manticoresoftware/s3-upload) и помогает легко загружать данные в S3-хранилище Manticore с правом только на запись. Вот как это сделать:\n\n1. Перейдите в каталог с файлами, которые хотите загрузить, и выполните:\n\n   ```bash\n\n   docker run -it --rm -v $(pwd):/upload manticoresearch/upload\n\n   ```\n\n2. Это:\n\n   - Попросит вас ввести URL/номер связанной задачи\n\n   - Загрузит **все файлы в текущем каталоге** в наше S3-хранилище с правом только на запись\n\n   - В конце вы увидите путь загрузки. Пожалуйста, поделитесь этим путем с разработчиками.\n\n<!-- intro -->\n\nПример:\n\n<!-- request Example -->\n\nCODE_BLOCK_11\n\n<!-- response Example -->\n\nCODE_BLOCK_12\n\n<!-- end -->\n\nВ качестве альтернативы вы можете использовать S3 [Minio client](https://min.io/docs/minio/linux/reference/minio-mc.html) или инструмент Amazon [s3cmd](https://s3tools.org/s3cmd) для того же, например:\n\n1. Установите клиент https://min.io/docs/minio/linux/reference/minio-mc.html#install-mc\n\nНапример, для 64-битного Linux:\n\n   ```\n\n   curl https://dl.min.io/client/mc/release/linux-amd64/mc \\\n\n   --create-dirs \\\n\n   -o $HOME/minio-binaries/mc\n\n   chmod +x $HOME/minio-binaries/mc\n\n   export PATH=$PATH:$HOME/minio-binaries/\n\n   ```\n\n2. Добавьте наш s3-хост (используйте полный путь к исполняемому файлу или перейдите в его каталог): `cd $HOME/minio-binaries` и затем `./mc config host add manticore http://s3.manticoresearch.com:9000 manticore manticore`\n\n3. Скопируйте ваши файлы (используйте полный путь к исполняемому файлу или перейдите в его каталог): `cd $HOME/minio-binaries` и затем `./mc cp -r issue-1234/ manticore/write-only/issue-1234`. Убедитесь, что имя папки уникально и желательно соответствует задаче на GitHub, где вы описали ошибку.\n\n### DEBUG\n\nCODE_BLOCK_13\n\nОператор `DEBUG` предназначен для разработчиков и тестировщиков для вызова различных внутренних или VIP-команд. Однако он не предназначен для использования в продакшене, так как синтаксис компонента `subcommand` может свободно изменяться в любой сборке.\n\nЧтобы просмотреть список полезных команд и подкоманд оператора `DEBUG`, доступных в текущем контексте, просто вызовите `DEBUG` без параметров.\n\nCODE_BLOCK_14\n\nТо же из VIP-подключения:\n\nCODE_BLOCK_15\n\nВсе команды `debug XXX` следует считать нестабильными и подверженными изменениям в любое время, поэтому не удивляйтесь, если они изменятся. Этот пример вывода может не отражать фактически доступные команды, поэтому попробуйте на вашей системе, чтобы увидеть, что доступно на вашем экземпляре. Кроме того, подробной документации, кроме этой короткой колонки «значение», не предоставлено.\n\nВ качестве быстрой иллюстрации ниже описаны две команды, доступные только VIP-клиентам — shutdown и crash. Обе требуют токен, который можно сгенерировать с помощью подкоманды debug token, и добавить в параметр [shutdown_token](Server_settings/Searchd.md#shutdown_token) в секции searchd конфигурационного файла. Если такой секции нет или если предоставленный хэш пароля не совпадает с токеном, хранящимся в конфиге, подкоманды ничего не сделают.\n\nCODE_BLOCK_16\n\nПодкоманда `shutdown` отправит серверу сигнал TERM, вызывая его завершение работы. Это может быть опасно, так как никто не хочет случайно остановить продакшен-сервис. Поэтому она требует VIP-подключения и пароля для использования.\n\nПодкоманда `crash` буквально вызывает сбой. Она может использоваться для тестирования, например, чтобы проверить, как системный менеджер поддерживает живучесть сервиса или проверить возможность отслеживания coredump.\n\nЕсли некоторые команды окажутся полезными в более общем контексте, их могут перенести из подкоманд debug в более стабильное и общее место (как показано на примере `debug tasks` и `debug sched` в таблице).\n\n<!-- proofread -->"
    },
    "is_code_or_comment": false
  },
  "d7c0e8def4612e485372f223002e2696fa2c6450af22840c890bca2c19fae7ea": {
    "original": "# Reporting bugs\n\nUnfortunately, Manticore is not yet 100% bug-free, although the development team is working hard towards that goal. You may encounter some issues from time to time.\n\nIt is crucial to report as much information as possible about each bug to fix it effectively.\n\nTo fix a bug, either it needs to be reproduced and fixed or its cause needs to be deduced based on the information you provide. To help with this, please follow the instructions below.\n\n### Bug-tracker\n\nBugs and feature requests are tracked on [Github](https://github.com/manticoresoftware/manticore/issues). You are welcome to create a new ticket and describe your bug in detail to save time for both you and the developers.\n\n### Documentation updates\n\nUpdates to the documentation (what you are reading now) are also done on [Github](https://github.com/manticoresoftware/manticoresearch/tree/master/manual).\n\n### Crashes\n\nManticore Search is written in C++, which is a low-level programming language that allows for direct communication with the computer for faster performance. However, there is a drawback to this approach as in rare cases, it may not be possible to elegantly handle a bug by writing an error to a log and skipping the processing of the command that caused the problem. Instead, the program may crash, resulting in it stopping completely and needing to be restarted.\n\nWhen Manticore Search crashes, it is important to let the Manticore team know by [submitting a bug report](https://github.com/manticoresoftware/manticoresearch/issues/new?assignees=&labels=&template=bug_report.md&title=) on GitHub or through Manticore's professional services in your private helpdesk. The Manticore team requires the following information:\n\n1. The searchd log\n\n2. The coredump\n\n3. The query log\n\nAdditionally, it would be helpful if you could do the following:\n\n1. Run gdb to inspect the coredump:\n\nCODE_BLOCK_0\n\n2. Find the crashed thread ID in the coredump file name (make sure you have `%p` in /proc/sys/kernel/core_pattern), e.g. `core.work_6.29050.server_name.1637586599` means thread_id=29050\n\n3. In gdb run:\n\nCODE_BLOCK_1\n\n4. Provide the outputs\n\n### What do I do when Manticore Search hangs?\n\nIf Manticore Search hangs, you need to collect some information that may be useful in understanding the cause. Here's how you can do it:\n\n1. Run `show threads option format=all` trough a [VIP port](https://manual.manticoresearch.com/Connecting_to_the_server/HTTP#VIP-connection)\n\n2. collect the lsof output output, as hanging can be caused by too many connections or open file descriptors.\n\nCODE_BLOCK_2\n\n3. Dump the core:\n\nCODE_BLOCK_3\n\n(It will save the dump to the current directory.)\n\n4. Install and run gdb:\n\nCODE_BLOCK_4\n\nNote that this will halt your running searchd, but if it's already hanging, it shouldn't be a problem.\n\n5. In gdb run:\n\nCODE_BLOCK_5\n\n6. Collect all the outputs and files and provide them in a bug report.\n\nFor experts: the macros added in [this commit](https://github.com/manticoresoftware/manticoresearch/commit/e317f7aa30aad51cb19d34595458bb7c8811be21) can be helpful in debugging.\n\n### How to enable saving coredumps on crash?\n\n* make sure you run searchd with `--coredump`. To avoid modifying scripts, you can use the  https://manual.manticoresearch.com/Starting_the_server/Linux#Custom-startup-flags-using-systemd , method. For example::\n\nCODE_BLOCK_6\n\n* Ensure that your operating system allows you to save core dumps by checking that: `/proc/sys/kernel/core_pattern` is not empty. This is the location where the core dumps will be saved. To save core dumps to a file such as `core.searchd.1773.centos-4gb-hel1-1.1636454937`, run the following command:\n\nCODE_BLOCK_7\n\n* searchd should be started with `ulimit -c unlimited`. If you start Manticore using systemctl, it will automatically set the limit to infinity as indicated by the following line in the manticore.service file:\n\nCODE_BLOCK_8\n\n### How do I install debug symbols?\n\nManticore Search and Manticore Columnar Library are written in C++, which results in compiled binary files that execute optimally on your operating system. However, when running a binary, your system does not have full access to the names of variables, functions, methods, and classes. This information is provided in separate \"debuginfo\" or \"symbol packages.\"\n\nDebug symbols are essential for troubleshooting and debugging, as they allow you to visualize the system state when it crashed, including the names of functions. Manticore Search provides a backtrace in the searchd log and generates a coredump if run with the --coredump flag. Without symbols, all you will see is internal offsets, making it difficult or impossible to decode the cause of the crash. If you need to make a bug report about a crash, the Manticore team will often require debug symbols to assist you.\n\nTo install Manticore Search/Manticore Columnar Library debug symbols, you will need to install the `*debuginfo*` package for CentOS, the `*dbgsym*` package for Ubuntu and Debian, or the `*dbgsymbols*` package for Windows and macOS. These packages should be the same version as the installed Manticore. For example, if you installed Manticore Search in Centos 8 from the package https://repo.manticoresearch.com/repository/manticoresearch/release/centos/8/x86_64/manticore-4.0.2_210921.af497f245-1.el8.x86_64.rpm , the corresponding package with symbols would be https://repo.manticoresearch.com/repository/manticoresearch/release/centos/8/x86_64/manticore-debuginfo-4.0.2_210921.af497f245-1.el8.x86_64.rpm\n\nNote that both packages have the same commit id `af497f245`, which corresponds to the commit that this version was built from.\n\nIf you have installed Manticore from a Manticore APT/YUM repository, you can use one of the following tools:\n\n* `debuginfo-install` in CentOS 7\n\n* `dnf debuginfo-install` CentOS 8\n\n* `find-dbgsym-packages` in Debian and Ubuntu\n\nto find a debug symbols package for you.\n\n### How to check the debug symbols exist?\n\n1. Find the build ID in the output of `file /usr/bin/searchd`:\n\nCODE_BLOCK_9\n\nIn this case, the build ID is 2c582e9f564ea1fbeb0c68406c271ba27034a6d3.",
    "translations": {
      "chinese": "# 报告错误\n\n不幸的是，Manticore 还没有达到 100% 无错误，尽管开发团队正在为此目标努力工作。您可能会不时遇到一些问题。\n\n报告每个错误时尽可能多地提供信息对于有效修复错误至关重要。\n\n要修复错误，必须重现并修复它，或者根据您提供的信息推断其原因。为此，请遵循以下说明。\n\n### 错误跟踪器\n\n错误和功能请求在 [Github](https://github.com/manticoresoftware/manticore/issues) 上跟踪。欢迎您创建新工单，详细描述您的错误，以节省您和开发人员的时间。\n\n### 文档更新\n\n文档的更新（您现在正在阅读的内容）也在 [Github](https://github.com/manticoresoftware/manticoresearch/tree/master/manual) 上进行。\n\n### 崩溃\n\nManticore Search 是用 C++ 编写的，这是一种低级编程语言，允许与计算机直接通信以获得更快的性能。然而，这种方法有一个缺点，在极少数情况下，可能无法通过写错误日志并跳过导致问题的命令来优雅地处理错误。相反，程序可能会崩溃，导致完全停止并需要重新启动。\n\n当 Manticore Search 崩溃时，重要的是通过在 GitHub 上[提交错误报告](https://github.com/manticoresoftware/manticoresearch/issues/new?assignees=&labels=&template=bug_report.md&title=)或通过您私有帮助台中的 Manticore 专业服务让 Manticore 团队知道。Manticore 团队需要以下信息：\n\n1. searchd 日志\n\n2. coredump\n\n3. 查询日志\n\n此外，如果您能做以下操作将会很有帮助：\n\n1. 运行 gdb 检查 coredump：\n\nCODE_BLOCK_0\n\n2. 在 coredump 文件名中找到崩溃线程 ID（确保您在 /proc/sys/kernel/core_pattern 中有 `%p`），例如 `core.work_6.29050.server_name.1637586599` 表示 thread_id=29050\n\n3. 在 gdb 中运行：\n\nCODE_BLOCK_1\n\n4. 提供输出结果\n\n### 当 Manticore Search 卡住时我该怎么办？\n\n如果 Manticore Search 卡住，您需要收集一些可能有助于理解原因的信息。方法如下：\n\n1. 通过 [VIP 端口](https://manual.manticoresearch.com/Connecting_to_the_server/HTTP#VIP-connection) 运行 `show threads option format=all`\n\n2. 收集 lsof 输出，因为卡住可能是由过多连接或打开的文件描述符引起的。\n\nCODE_BLOCK_2\n\n3. 转储 core：\n\nCODE_BLOCK_3\n\n（它会将转储保存到当前目录。）\n\n4. 安装并运行 gdb：\n\nCODE_BLOCK_4\n\n注意，这将暂停您正在运行的 searchd，但如果它已经卡住，这不应成为问题。\n\n5. 在 gdb 中运行：\n\nCODE_BLOCK_5\n\n6. 收集所有输出和文件，并在错误报告中提供。\n\n对于专家：在[此提交](https://github.com/manticoresoftware/manticoresearch/commit/e317f7aa30aad51cb19d34595458bb7c8811be21)中添加的宏在调试时可能会有帮助。\n\n### 如何启用崩溃时保存 coredump？\n\n* 确保您使用 `--coredump` 运行 searchd。为了避免修改脚本，您可以使用 https://manual.manticoresearch.com/Starting_the_server/Linux#Custom-startup-flags-using-systemd 方法。例如：\n\nCODE_BLOCK_6\n\n* 确保您的操作系统允许保存 core dump，检查 `/proc/sys/kernel/core_pattern` 不为空。这是保存 core dump 的位置。要将 core dump 保存到如 `core.searchd.1773.centos-4gb-hel1-1.1636454937` 的文件，请运行以下命令：\n\nCODE_BLOCK_7\n\n* searchd 应该以 `ulimit -c unlimited` 启动。如果您使用 systemctl 启动 Manticore，它会自动将限制设置为无限，如 manticore.service 文件中的以下行所示：\n\nCODE_BLOCK_8\n\n### 如何安装调试符号？\n\nManticore Search 和 Manticore Columnar Library 是用 C++ 编写的，生成的二进制文件在您的操作系统上以最佳方式执行。然而，运行二进制文件时，系统无法完全访问变量、函数、方法和类的名称。这些信息包含在单独的“调试信息”或“符号包”中。\n\n调试符号对于故障排除和调试至关重要，因为它们允许您在崩溃时可视化系统状态，包括函数名称。Manticore Search 在 searchd 日志中提供回溯，并在使用 --coredump 标志运行时生成 coredump。没有符号，您只能看到内部偏移量，难以或无法解码崩溃原因。如果您需要提交崩溃的错误报告，Manticore 团队通常需要调试符号来协助您。\n\n要安装 Manticore Search/Manticore Columnar Library 的调试符号，您需要为 CentOS 安装 `*debuginfo*` 包，为 Ubuntu 和 Debian 安装 `*dbgsym*` 包，或为 Windows 和 macOS 安装 `*dbgsymbols*` 包。这些包应与已安装的 Manticore 版本相同。例如，如果您在 Centos 8 中从包 https://repo.manticoresearch.com/repository/manticoresearch/release/centos/8/x86_64/manticore-4.0.2_210921.af497f245-1.el8.x86_64.rpm 安装了 Manticore Search，则对应的符号包为 https://repo.manticoresearch.com/repository/manticoresearch/release/centos/8/x86_64/manticore-debuginfo-4.0.2_210921.af497f245-1.el8.x86_64.rpm\n\n请注意，这两个包具有相同的提交 ID `af497f245`，对应于此版本构建所基于的提交。\n\n如果您是从 Manticore APT/YUM 仓库安装的 Manticore，可以使用以下工具之一：\n\n* CentOS 7 中的 `debuginfo-install`\n\n* CentOS 8 中的 `dnf debuginfo-install`\n\n* Debian 和 Ubuntu 中的 `find-dbgsym-packages`\n\n来查找适合您的调试符号包。\n\n### 如何检查调试符号是否存在？\n\n1. 在 `file /usr/bin/searchd` 的输出中查找构建 ID：\n\nCODE_BLOCK_9\n\n在此示例中，构建 ID 是 2c582e9f564ea1fbeb0c68406c271ba27034a6d3。",
      "russian": "# Сообщение об ошибках\n\nК сожалению, Manticore пока не является на 100% свободным от ошибок, хотя команда разработчиков усердно работает над достижением этой цели. Время от времени вы можете столкнуться с некоторыми проблемами.\n\nОчень важно сообщать как можно больше информации о каждой ошибке для её эффективного исправления.\n\nЧтобы исправить ошибку, её либо нужно воспроизвести и исправить, либо определить причину на основе предоставленной вами информации. Чтобы помочь в этом, пожалуйста, следуйте приведённым ниже инструкциям.\n\n### Трекер ошибок\n\nОшибки и запросы на новые функции отслеживаются на [Github](https://github.com/manticoresoftware/manticore/issues). Вы можете создать новый тикет и подробно описать вашу ошибку, чтобы сэкономить время как для себя, так и для разработчиков.\n\n### Обновления документации\n\nОбновления документации (то, что вы сейчас читаете) также выполняются на [Github](https://github.com/manticoresoftware/manticoresearch/tree/master/manual).\n\n### Сбои\n\nManticore Search написан на C++, что является языком программирования низкого уровня, позволяющим напрямую взаимодействовать с компьютером для более высокой производительности. Однако у такого подхода есть недостаток: в редких случаях может не получиться элегантно обработать ошибку, записав её в лог и пропустив обработку команды, вызвавшей проблему. Вместо этого программа может аварийно завершиться, полностью остановившись и требуя перезапуска.\n\nКогда Manticore Search аварийно завершается, важно сообщить об этом команде Manticore, [отправив отчет об ошибке](https://github.com/manticoresoftware/manticoresearch/issues/new?assignees=&labels=&template=bug_report.md&title=) на GitHub или через профессиональные услуги Manticore в вашем приватном хелпдеске. Команда Manticore требует следующую информацию:\n\n1. Лог searchd\n\n2. Coredump\n\n3. Лог запросов\n\nКроме того, будет полезно, если вы сможете сделать следующее:\n\n1. Запустите gdb для анализа coredump:\n\nCODE_BLOCK_0\n\n2. Найдите ID аварийного потока в имени файла coredump (убедитесь, что у вас есть `%p` в /proc/sys/kernel/core_pattern), например, `core.work_6.29050.server_name.1637586599` означает thread_id=29050\n\n3. В gdb выполните:\n\nCODE_BLOCK_1\n\n4. Предоставьте выводы\n\n### Что делать, если Manticore Search завис?\n\nЕсли Manticore Search завис, вам нужно собрать некоторую информацию, которая может помочь понять причину. Вот как это сделать:\n\n1. Выполните `show threads option format=all` через [VIP порт](https://manual.manticoresearch.com/Connecting_to_the_server/HTTP#VIP-connection)\n\n2. Соберите вывод lsof, так как зависание может быть вызвано слишком большим количеством соединений или открытых дескрипторов файлов.\n\nCODE_BLOCK_2\n\n3. Создайте дамп памяти:\n\nCODE_BLOCK_3\n\n(Дамп будет сохранён в текущую директорию.)\n\n4. Установите и запустите gdb:\n\nCODE_BLOCK_4\n\nОбратите внимание, что это остановит работающий searchd, но если он уже завис, это не должно быть проблемой.\n\n5. В gdb выполните:\n\nCODE_BLOCK_5\n\n6. Соберите все выводы и файлы и предоставьте их в отчёте об ошибке.\n\nДля экспертов: макросы, добавленные в [этот коммит](https://github.com/manticoresoftware/manticoresearch/commit/e317f7aa30aad51cb19d34595458bb7c8811be21), могут быть полезны при отладке.\n\n### Как включить сохранение coredump при сбое?\n\n* Убедитесь, что вы запускаете searchd с `--coredump`. Чтобы не изменять скрипты, вы можете использовать метод https://manual.manticoresearch.com/Starting_the_server/Linux#Custom-startup-flags-using-systemd . Например::\n\nCODE_BLOCK_6\n\n* Убедитесь, что ваша операционная система позволяет сохранять дампы памяти, проверив, что: `/proc/sys/kernel/core_pattern` не пуст. Это место, куда будут сохраняться дампы памяти. Чтобы сохранять дампы в файл, например `core.searchd.1773.centos-4gb-hel1-1.1636454937`, выполните следующую команду:\n\nCODE_BLOCK_7\n\n* searchd должен запускаться с `ulimit -c unlimited`. Если вы запускаете Manticore через systemctl, он автоматически установит лимит в бесконечность, как указано в следующей строке файла manticore.service:\n\nCODE_BLOCK_8\n\n### Как установить отладочные символы?\n\nManticore Search и Manticore Columnar Library написаны на C++, что приводит к созданию скомпилированных бинарных файлов, которые оптимально выполняются на вашей операционной системе. Однако при запуске бинарника ваша система не имеет полного доступа к именам переменных, функций, методов и классов. Эта информация предоставляется в отдельных пакетах \"debuginfo\" или \"symbol packages\".\n\nОтладочные символы необходимы для устранения неполадок и отладки, так как они позволяют визуализировать состояние системы в момент сбоя, включая имена функций. Manticore Search предоставляет backtrace в логе searchd и генерирует coredump, если запущен с флагом --coredump. Без символов вы увидите только внутренние смещения, что затрудняет или делает невозможным расшифровку причины сбоя. Если вам нужно сделать отчет об ошибке по сбою, команда Manticore часто потребует отладочные символы для помощи.\n\nЧтобы установить отладочные символы Manticore Search/Manticore Columnar Library, вам нужно установить пакет `*debuginfo*` для CentOS, пакет `*dbgsym*` для Ubuntu и Debian или пакет `*dbgsymbols*` для Windows и macOS. Эти пакеты должны соответствовать версии установленного Manticore. Например, если вы установили Manticore Search в Centos 8 из пакета https://repo.manticoresearch.com/repository/manticoresearch/release/centos/8/x86_64/manticore-4.0.2_210921.af497f245-1.el8.x86_64.rpm , соответствующий пакет с символами будет https://repo.manticoresearch.com/repository/manticoresearch/release/centos/8/x86_64/manticore-debuginfo-4.0.2_210921.af497f245-1.el8.x86_64.rpm\n\nОбратите внимание, что оба пакета имеют одинаковый идентификатор коммита `af497f245`, который соответствует коммиту, из которого была собрана эта версия.\n\nЕсли вы установили Manticore из репозитория Manticore APT/YUM, вы можете использовать один из следующих инструментов:\n\n* `debuginfo-install` в CentOS 7\n\n* `dnf debuginfo-install` в CentOS 8\n\n* `find-dbgsym-packages` в Debian и Ubuntu\n\nчтобы найти пакет отладочных символов для вас.\n\n### Как проверить наличие отладочных символов?\n\n1. Найдите build ID в выводе `file /usr/bin/searchd`:\n\nCODE_BLOCK_9\n\nВ данном случае build ID — 2c582e9f564ea1fbeb0c68406c271ba27034a6d3."
    },
    "is_code_or_comment": false
  }
}
