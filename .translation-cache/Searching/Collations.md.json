{
  "49510019fe1bb9ecd28af2a0b40bf50e0358e8f95f5adceaedd466e4798ae489": {
    "original": "# Collations\n\nCollations primarily impact string attribute comparisons. They define both the character set encoding and the strategy Manticore employs for comparing strings when performing `ORDER BY` or `GROUP BY` with a string attribute involved.\n\nString attributes are stored as-is during indexing, and no character set or language information is attached to them. This is fine as long as Manticore only needs to store and return the strings to the calling application verbatim. However, when you ask Manticore to sort by a string value, the request immediately becomes ambiguous.\n\nFirst, single-byte (ASCII, ISO-8859-1, or Windows-1251) strings need to be processed differently than UTF-8 strings, which may encode each character with a variable number of bytes. Thus, we need to know the character set type to properly interpret the raw bytes as meaningful characters.\n\nSecond, we also need to know the language-specific string sorting rules. For example, when sorting according to US rules in the en_US locale, the accented character `ï` (small letter `i` with diaeresis) should be placed somewhere after `z`. However, when sorting with French rules and the fr_FR locale in mind, it should be placed between `i` and `j`. Some other set of rules might choose to ignore accents altogether, allowing `ï` and `i` to be mixed arbitrarily.\n\nThird, in some cases, we may require case-sensitive sorting, while in others, case-insensitive sorting is needed.\n\nCollations encapsulate all of the following: the character set, the language rules, and the case sensitivity. Manticore currently provides four collations:\n\n1. `libc_ci`\n\n2. `libc_cs`\n\n3. `utf8_general_ci`\n\n4. `binary`\n\nThe first two collations rely on several standard C library (libc) calls and can thus support any locale installed on your system. They provide case-insensitive (`_ci`) and case-sensitive (`_cs`) comparisons, respectively. By default, they use the C locale, effectively resorting to bytewise comparisons. To change that, you need to specify a different available locale using the [collation_libc_locale](../Server_settings/Searchd.md#collation_libc_locale) directive. The list of locales available on your system can usually be obtained with the `locale` command:\n\nCODE_BLOCK_0\n\nThe specific list of system locales may vary. Consult your OS documentation to install additional needed locales.\n\n`utf8_general_ci` and `binary` locales are built-in into Manticore. The first one is a generic collation for UTF-8 data (without any so-called language tailoring); it should behave similarly to the `utf8_general_ci` collation in MySQL. The second one is a simple bytewise comparison.\n\nCollation can be overridden via SQL on a per-session basis using the `SET collation_connection` statement. All subsequent SQL queries will use this collation. Otherwise, all queries will use the server default collation or as specified in the [collation_server](../Server_settings/Searchd.md#collation_server) configuration directive. Manticore currently defaults to the `libc_ci` collation.\n\nCollations affect all string attribute comparisons, including those within `ORDER BY` and `GROUP BY`, so differently ordered or grouped results can be returned depending on the collation chosen. Note that collations don't affect full-text searching; for that, use the [charset_table](../Creating_a_table/NLP_and_tokenization/Low-level_tokenization.md#charset_table).\n\n<!-- proofread -->",
    "translations": {
      "russian": "# Сопоставления (Collations)\n\nСопоставления в первую очередь влияют на сравнения строковых атрибутов. Они определяют как кодировку набора символов, так и стратегию, которую Manticore использует для сравнения строк при выполнении `ORDER BY` или `GROUP BY` с участием строкового атрибута.\n\nСтроковые атрибуты сохраняются в исходном виде во время индексации, и к ним не прикрепляется информация о наборе символов или языке. Это приемлемо, пока Manticore нужно только сохранить и вернуть строки вызывающему приложению дословно. Однако, когда вы просите Manticore отсортировать по строковому значению, запрос сразу становится неоднозначным.\n\nВо-первых, строки с однобайтовой кодировкой (ASCII, ISO-8859-1 или Windows-1251) нужно обрабатывать иначе, чем строки в UTF-8, которые могут кодировать каждый символ переменным числом байт. Следовательно, нам нужно знать тип набора символов, чтобы правильно интерпретировать сырые байты как значимые символы.\n\nВо-вторых, нам также нужны правила сортировки, специфичные для языка. Например, при сортировке по правилам США в локали en_US, акцентированный символ `ï` (маленькая буква `i` с умлаутом) должен располагаться где-то после `z`. Однако при сортировке по французским правилам и локали fr_FR он должен располагаться между `i` и `j`. Другой набор правил может вообще игнорировать акценты, позволяя произвольно смешивать `ï` и `i`.\n\nВ-третьих, в некоторых случаях требуется сортировка с учётом регистра, а в других — без учёта регистра.\n\nСопоставления инкапсулируют всё следующее: набор символов, языковые правила и чувствительность к регистру. В настоящее время Manticore предоставляет четыре сопоставления:\n\n1. `libc_ci`\n\n2. `libc_cs`\n\n3. `utf8_general_ci`\n\n4. `binary`\n\nПервые два сопоставления опираются на несколько стандартных вызовов библиотеки C (libc) и, следовательно, могут поддерживать любую локаль, установленную в вашей системе. Они обеспечивают сравнения без учёта регистра (`_ci`) и с учётом регистра (`_cs`) соответственно. По умолчанию они используют локаль C, фактически сводя сравнения к побайтовым. Чтобы изменить это, нужно указать другую доступную локаль с помощью директивы [collation_libc_locale](../Server_settings/Searchd.md#collation_libc_locale). Список локалей, доступных в вашей системе, обычно можно получить с помощью команды `locale`:\n\nCODE_BLOCK_0\n\nКонкретный список локалей системы может отличаться. Обратитесь к документации вашей ОС для установки дополнительных необходимых локалей.\n\nЛокали `utf8_general_ci` и `binary` встроены в Manticore. Первая — это универсальное сопоставление для данных UTF-8 (без так называемой языковой адаптации); оно должно вести себя аналогично сопоставлению `utf8_general_ci` в MySQL. Вторая — простое побайтовое сравнение.\n\nСопоставление можно переопределить через SQL на уровне сессии с помощью оператора `SET collation_connection`. Все последующие SQL-запросы будут использовать это сопоставление. В противном случае все запросы будут использовать сопоставление по умолчанию сервера или указанное в директиве конфигурации [collation_server](../Server_settings/Searchd.md#collation_server). В настоящее время Manticore по умолчанию использует сопоставление `libc_ci`.\n\nСопоставления влияют на все сравнения строковых атрибутов, включая те, что внутри `ORDER BY` и `GROUP BY`, поэтому в зависимости от выбранного сопоставления могут возвращаться результаты с разным порядком или группировкой. Обратите внимание, что сопоставления не влияют на полнотекстовый поиск; для этого используйте [charset_table](../Creating_a_table/NLP_and_tokenization/Low-level_tokenization.md#charset_table).\n\n<!-- proofread -->",
      "chinese": "# 排序规则\n\n排序规则主要影响字符串属性的比较。它们定义了字符集编码以及 Manticore 在执行涉及字符串属性的 `ORDER BY` 或 `GROUP BY` 时用于比较字符串的策略。\n\n字符串属性在索引时按原样存储，并且不附加任何字符集或语言信息。只要 Manticore 仅需将字符串逐字存储并返回给调用应用程序，这种方式是可行的。然而，当你要求 Manticore 按字符串值排序时，请求立即变得模糊不清。\n\n首先，单字节（ASCII、ISO-8859-1 或 Windows-1251）字符串需要与 UTF-8 字符串不同地处理，后者可能用可变字节数编码每个字符。因此，我们需要知道字符集类型，以便正确地将原始字节解释为有意义的字符。\n\n其次，我们还需要知道特定语言的字符串排序规则。例如，在 en_US 区域设置中按美国规则排序时，带变音符的字符 `ï`（带分音符的小写字母 `i`）应放在 `z` 之后的某处。然而，在考虑法语规则和 fr_FR 区域设置时，它应放在 `i` 和 `j` 之间。其他规则集可能会完全忽略变音符，使 `ï` 和 `i` 可以任意混合。\n\n第三，在某些情况下，我们可能需要区分大小写的排序，而在其他情况下，则需要不区分大小写的排序。\n\n排序规则封装了以下所有内容：字符集、语言规则和大小写敏感性。Manticore 目前提供四种排序规则：\n\n1. `libc_ci`\n\n2. `libc_cs`\n\n3. `utf8_general_ci`\n\n4. `binary`\n\n前两种排序规则依赖于多个标准 C 库（libc）调用，因此可以支持系统上安装的任何区域设置。它们分别提供不区分大小写（`_ci`）和区分大小写（`_cs`）的比较。默认情况下，它们使用 C 区域设置，实际上是按字节比较。要更改此设置，需要使用 [collation_libc_locale](../Server_settings/Searchd.md#collation_libc_locale) 指令指定不同的可用区域设置。系统上可用的区域设置列表通常可以通过 `locale` 命令获得：\n\nCODE_BLOCK_0\n\n具体的系统区域设置列表可能有所不同。请查阅操作系统文档以安装所需的额外区域设置。\n\n`utf8_general_ci` 和 `binary` 区域设置内置于 Manticore。第一种是针对 UTF-8 数据的通用排序规则（没有所谓的语言定制）；其行为应类似于 MySQL 中的 `utf8_general_ci` 排序规则。第二种是简单的按字节比较。\n\n排序规则可以通过 SQL 在每个会话基础上使用 `SET collation_connection` 语句覆盖。所有后续的 SQL 查询将使用该排序规则。否则，所有查询将使用服务器默认排序规则，或使用 [collation_server](../Server_settings/Searchd.md#collation_server) 配置指令中指定的排序规则。Manticore 目前默认使用 `libc_ci` 排序规则。\n\n排序规则影响所有字符串属性的比较，包括 `ORDER BY` 和 `GROUP BY` 中的比较，因此根据所选排序规则，可能返回不同排序或分组的结果。请注意，排序规则不影响全文搜索；全文搜索请使用 [charset_table](../Creating_a_table/NLP_and_tokenization/Low-level_tokenization.md#charset_table)。\n\n<!-- proofread -->"
    },
    "is_code_or_comment": false
  }
}
