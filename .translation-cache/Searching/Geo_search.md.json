{
    "0cf606d4ca85c28d126f4171213d86251caa03a36b5cd8222307205ff9f47b64": {
        "original": "# Geo search\n\nOne of the greatest features of Manticore Search is the ability to combine full-text searching with geo-location. For example, a retailer can offer a search where a user looks for a product, and the result set can indicate the closest shop that has the product in stock, so the user can go in-store and pick it up. A travel site can provide results based on a search limited to a certain area and have the results sorted by the distance from a point (for example, 'search museums near a hotel').\n\nTo perform geo-searching, a document needs to contain pairs of latitude/longitude coordinates. The coordinates can be stored as float attributes. If the document has multiple locations, it may be convenient to use a JSON attribute to store coordinate pairs.\n\n\n\nCODE_BLOCK_0\n\nThe coordinates can be stored as degrees or radians.\n\nIf secondary indexes are generated for latitude and longitude attributes, they may automatically be used to speed up geo searches if the [Cost based optimizer](../Searching/Cost_based_optimizer.md) decides to use them.\n\n## Performing distance \u0441alculation\n\nTo find out the distance between two points, the [GEODIST()](../Functions/Geo_spatial_functions.md#GEODIST%28%29) function can be used. `GEODIST` requires two pairs of coordinates as its first four parameters.\n\nThe 5th parameter in a simplified JSON format can configure certain aspects of the function. By default, `GEODIST` expects coordinates to be in radians, but `in=degrees` can be added to allow using degrees as input. The coordinates for which we perform the geo distance must have the same type (degrees or radians) as the ones stored in the table; otherwise, results will be misleading.\n\nThe calculated distance is by default in meters, but with the `out` option, it can be transformed to kilometers, feet, or miles. Lastly, by default, a calculation method called `adaptive` is used. An alternative method based on the `haversine` algorithm is available; however, this one is slower and less precise.\n\nThe result of the function - the distance - can be used in the`ORDER BY` clause to sort the results:\n\nCODE_BLOCK_1\n\nOr to limit the results to a radial area around the point:\n\nCODE_BLOCK_2\n\n## Searching in polygons\n\nAnother geo search feature is the ability to determine if a location is within a specified area. A special function constructs a polygon object, which is then used by another function to test whether a set of coordinates is contained within that polygon or not.\n\nThere are two functions available for creating the polygon:\n\n*   [GEOPOLY2D()](../Functions/Geo_spatial_functions.md#GEOPOLY2D%28%29) - creates a polygon that takes into account the Earth's curvature\n*   [POLY2D()](../Functions/Geo_spatial_functions.md#POLY2D%28%29) - creates a simple polygon in flat space\n\n`POLY2D` is suitable for geo searches when the area has sides shorter than 500km (for polygons with 3-4 sides; for polygons with more sides, lower values should be considered). For areas with longer sides, using `GEOPOLY2D` is required to maintain accurate results. `GEOPOLY2D` expects coordinates as latitude/longitude pairs in degrees; using radians will yield results in flat space (similar to `POLY2D`).\n\n[CONTAINS()](../Functions/Arrays_and_conditions_functions.md#CONTAINS%28%29) takes a polygon and a set of coordinates as input and outputs `1` if the point is inside the polygon or `0` otherwise.\n\nCODE_BLOCK_3\n<!-- proofread -->\n\n",
        "translations": {
            "chinese": "# \u5730\u7406\u641c\u7d22\n\nManticore Search \u7684\u6700\u5927\u529f\u80fd\u4e4b\u4e00\u662f\u80fd\u591f\u5c06\u5168\u6587\u641c\u7d22\u4e0e\u5730\u7406\u4f4d\u7f6e\u7ed3\u5408\u8d77\u6765\u3002\u4f8b\u5982\uff0c\u96f6\u552e\u5546\u53ef\u4ee5\u63d0\u4f9b\u4e00\u4e2a\u641c\u7d22\u529f\u80fd\uff0c\u7528\u6237\u67e5\u627e\u4ea7\u54c1\u65f6\uff0c\u7ed3\u679c\u96c6\u53ef\u4ee5\u663e\u793a\u6709\u73b0\u8d27\u7684\u6700\u8fd1\u5546\u5e97\uff0c\u65b9\u4fbf\u7528\u6237\u5230\u5e97\u53d6\u8d27\u3002\u65c5\u6e38\u7f51\u7ad9\u53ef\u4ee5\u57fa\u4e8e\u9650\u5b9a\u533a\u57df\u7684\u641c\u7d22\u63d0\u4f9b\u7ed3\u679c\uff0c\u5e76\u6309\u8ddd\u79bb\u67d0\u4e00\u70b9\u7684\u8ddd\u79bb\u6392\u5e8f\uff08\u4f8b\u5982\uff0c\u201c\u641c\u7d22\u9152\u5e97\u9644\u8fd1\u7684\u535a\u7269\u9986\u201d\uff09\u3002\n\n\u8981\u6267\u884c\u5730\u7406\u641c\u7d22\uff0c\u6587\u6863\u9700\u8981\u5305\u542b\u4e00\u5bf9\u7eac\u5ea6/\u7ecf\u5ea6\u5750\u6807\u3002\u8fd9\u4e9b\u5750\u6807\u53ef\u4ee5\u4f5c\u4e3a\u6d6e\u70b9\u578b\u5c5e\u6027\u5b58\u50a8\u3002\u5982\u679c\u6587\u6863\u6709\u591a\u4e2a\u4f4d\u7f6e\uff0c\u4f7f\u7528 JSON \u5c5e\u6027\u5b58\u50a8\u5750\u6807\u5bf9\u53ef\u80fd\u66f4\u65b9\u4fbf\u3002\n\n\n\nCODE_BLOCK_0\n\n\u5750\u6807\u53ef\u4ee5\u4ee5\u5ea6\u6216\u5f27\u5ea6\u5b58\u50a8\u3002\n\n\u5982\u679c\u7eac\u5ea6\u548c\u7ecf\u5ea6\u5c5e\u6027\u751f\u6210\u4e86\u4e8c\u7ea7\u7d22\u5f15\uff0c\u6210\u672c\u4f18\u5316\u5668\uff08[Cost based optimizer](../Searching/Cost_based_optimizer.md)\uff09\u51b3\u5b9a\u4f7f\u7528\u65f6\uff0c\u5b83\u4eec\u53ef\u80fd\u4f1a\u81ea\u52a8\u7528\u4e8e\u52a0\u901f\u5730\u7406\u641c\u7d22\u3002\n\n## \u6267\u884c\u8ddd\u79bb\u8ba1\u7b97\n\n\u8981\u8ba1\u7b97\u4e24\u70b9\u4e4b\u95f4\u7684\u8ddd\u79bb\uff0c\u53ef\u4ee5\u4f7f\u7528 [GEODIST()](../Functions/Geo_spatial_functions.md#GEODIST%28%29) \u51fd\u6570\u3002`GEODIST` \u9700\u8981\u524d\u56db\u4e2a\u53c2\u6570\u5206\u522b\u4e3a\u4e24\u5bf9\u5750\u6807\u3002\n\n\u7b2c\u4e94\u4e2a\u53c2\u6570\u662f\u7b80\u5316\u7684 JSON \u683c\u5f0f\uff0c\u7528\u4e8e\u914d\u7f6e\u51fd\u6570\u7684\u67d0\u4e9b\u65b9\u9762\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c`GEODIST` \u671f\u671b\u5750\u6807\u4e3a\u5f27\u5ea6\uff0c\u4f46\u53ef\u901a\u8fc7\u6dfb\u52a0 `in=degrees` \u5141\u8bb8\u4f7f\u7528\u89d2\u5ea6\u4f5c\u4e3a\u8f93\u5165\u3002\u7528\u4e8e\u8ba1\u7b97\u5730\u7406\u8ddd\u79bb\u7684\u5750\u6807\u5fc5\u987b\u548c\u8868\u4e2d\u5b58\u50a8\u7684\u7c7b\u578b\u76f8\u540c\uff08\u5ea6\u6216\u5f27\u5ea6\uff09\uff0c\u5426\u5219\u7ed3\u679c\u4f1a\u8bef\u5bfc\u3002\n\n\u8ba1\u7b97\u51fa\u7684\u8ddd\u79bb\u9ed8\u8ba4\u5355\u4f4d\u4e3a\u7c73\uff0c\u4f46\u901a\u8fc7 `out` \u9009\u9879\u53ef\u4ee5\u8f6c\u6362\u4e3a\u516c\u91cc\u3001\u82f1\u5c3a\u6216\u82f1\u91cc\u3002\u6700\u540e\uff0c\u9ed8\u8ba4\u4f7f\u7528\u4e00\u79cd\u79f0\u4e3a `adaptive` \u7684\u8ba1\u7b97\u65b9\u6cd5\u3002\u57fa\u4e8e `haversine` \u7b97\u6cd5\u7684\u5907\u9009\u65b9\u6cd5\u53ef\u7528\uff0c\u4f46\u901f\u5ea6\u8f83\u6162\u4e14\u7cbe\u5ea6\u8f83\u4f4e\u3002\n\n\u51fd\u6570\u7684\u7ed3\u679c\u2014\u2014\u8ddd\u79bb\u2014\u2014\u53ef\u4ee5\u5728 `ORDER BY` \u5b50\u53e5\u4e2d\u4f7f\u7528\uff0c\u7528\u4e8e\u5bf9\u7ed3\u679c\u6392\u5e8f\uff1a\n\nCODE_BLOCK_1\n\n\u6216\u8005\u7528\u4e8e\u9650\u5236\u534a\u5f84\u533a\u57df\u5185\u7684\u7ed3\u679c\uff1a\n\nCODE_BLOCK_2\n\n## \u591a\u8fb9\u5f62\u5185\u641c\u7d22\n\n\u53e6\u4e00\u4e2a\u5730\u7406\u641c\u7d22\u529f\u80fd\u662f\u5224\u65ad\u67d0\u4f4d\u7f6e\u662f\u5426\u4f4d\u4e8e\u6307\u5b9a\u533a\u57df\u5185\u3002\u4e00\u4e2a\u7279\u6b8a\u51fd\u6570\u7528\u4e8e\u6784\u9020\u591a\u8fb9\u5f62\u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u968f\u540e\u53ef\u88ab\u53e6\u4e00\u4e2a\u51fd\u6570\u7528\u6765\u68c0\u6d4b\u67d0\u5750\u6807\u96c6\u5408\u662f\u5426\u5305\u542b\u5728\u8be5\u591a\u8fb9\u5f62\u5185\u3002\n\n\u6709\u4e24\u4e2a\u51fd\u6570\u53ef\u7528\u4e8e\u521b\u5efa\u591a\u8fb9\u5f62\uff1a\n\n*   [GEOPOLY2D()](../Functions/Geo_spatial_functions.md#GEOPOLY2D%28%29) - \u521b\u5efa\u8003\u8651\u5730\u7403\u66f2\u7387\u7684\u591a\u8fb9\u5f62\n*   [POLY2D()](../Functions/Geo_spatial_functions.md#POLY2D%28%29) - \u521b\u5efa\u5e73\u9762\u7a7a\u95f4\u4e2d\u7684\u7b80\u5355\u591a\u8fb9\u5f62\n\n`POLY2D` \u9002\u7528\u4e8e\u591a\u8fb9\u5f62\u8fb9\u957f\u5c0f\u4e8e 500 \u516c\u91cc\u7684\u5730\u7406\u641c\u7d22\uff08\u5bf9\u4e8e 3-4 \u8fb9\u591a\u8fb9\u5f62\uff1b\u8fb9\u6570\u66f4\u591a\u7684\u591a\u8fb9\u5f62\u5e94\u8003\u8651\u66f4\u5c0f\u7684\u503c\uff09\u3002\u8fb9\u957f\u8f83\u957f\u533a\u57df\u5fc5\u987b\u4f7f\u7528 `GEOPOLY2D` \u4ee5\u4fdd\u6301\u51c6\u786e\u7ed3\u679c\u3002`GEOPOLY2D` \u671f\u671b\u5750\u6807\u4e3a\u5ea6\u8868\u793a\u7684\u7eac\u5ea6/\u7ecf\u5ea6\u5bf9\uff1b\u4f7f\u7528\u5f27\u5ea6\u65f6\uff0c\u7ed3\u679c\u662f\u5728\u5e73\u9762\u7a7a\u95f4\u4e2d\uff08\u7c7b\u4f3c `POLY2D`\uff09\u3002\n\n[CONTAINS()](../Functions/Arrays_and_conditions_functions.md#CONTAINS%28%29) \u4ee5\u591a\u8fb9\u5f62\u548c\u5750\u6807\u96c6\u4e3a\u8f93\u5165\uff0c\u82e5\u70b9\u5728\u591a\u8fb9\u5f62\u5185\u5219\u8f93\u51fa `1`\uff0c\u5426\u5219\u8f93\u51fa `0`\u3002\n\nCODE_BLOCK_3\n<!-- proofread -->",
            "russian": "# \u0413\u0435\u043e \u043f\u043e\u0438\u0441\u043a\n\n\u041e\u0434\u043d\u043e\u0439 \u0438\u0437 \u043b\u0443\u0447\u0448\u0438\u0445 \u0444\u0443\u043d\u043a\u0446\u0438\u0439 Manticore Search \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043a\u043e\u043c\u0431\u0438\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u043b\u043d\u043e\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0439 \u043f\u043e\u0438\u0441\u043a \u0441 \u0433\u0435\u043e\u043b\u043e\u043a\u0430\u0446\u0438\u0435\u0439. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0440\u0438\u0442\u0435\u0439\u043b\u0435\u0440 \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u0442\u044c \u043f\u043e\u0438\u0441\u043a, \u043f\u0440\u0438 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0438\u0449\u0435\u0442 \u0442\u043e\u0432\u0430\u0440, \u0430 \u0432 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430\u0445 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0435\u0442\u0441\u044f \u0431\u043b\u0438\u0436\u0430\u0439\u0448\u0438\u0439 \u043c\u0430\u0433\u0430\u0437\u0438\u043d, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u044d\u0442\u043e\u0442 \u0442\u043e\u0432\u0430\u0440 \u0435\u0441\u0442\u044c \u0432 \u043d\u0430\u043b\u0438\u0447\u0438\u0438, \u0442\u0430\u043a \u0447\u0442\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043c\u043e\u0436\u0435\u0442 \u0437\u0430\u0439\u0442\u0438 \u0438 \u0437\u0430\u0431\u0440\u0430\u0442\u044c \u0435\u0433\u043e. \u0421\u0430\u0439\u0442 \u043e \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f\u0445 \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0442\u044c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u043f\u043e\u0438\u0441\u043a\u0430, \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u043d\u043e\u0433\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u044c\u044e, \u0438 \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043f\u043e \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u044e \u043e\u0442 \u0442\u043e\u0447\u043a\u0438 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u00ab\u043d\u0430\u0439\u0442\u0438 \u043c\u0443\u0437\u0435\u0438 \u0440\u044f\u0434\u043e\u043c \u0441 \u043e\u0442\u0435\u043b\u0435\u043c\u00bb).\n\n\u0414\u043b\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0433\u0435\u043e\u043f\u043e\u0438\u0441\u043a\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043f\u0430\u0440\u044b \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442 \u0448\u0438\u0440\u043e\u0442\u044b / \u0434\u043e\u043b\u0433\u043e\u0442\u044b. \u041a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b \u043c\u043e\u0433\u0443\u0442 \u0445\u0440\u0430\u043d\u0438\u0442\u044c\u0441\u044f \u043a\u0430\u043a \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u044b \u0441 \u043f\u043b\u0430\u0432\u0430\u044e\u0449\u0435\u0439 \u0442\u043e\u0447\u043a\u043e\u0439. \u0415\u0441\u043b\u0438 \u0443 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043b\u043e\u043a\u0430\u0446\u0438\u0439, \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0443\u0434\u043e\u0431\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c JSON-\u0430\u0442\u0440\u0438\u0431\u0443\u0442 \u0434\u043b\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u043f\u0430\u0440 \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442.\n\n\n\nCODE_BLOCK_0\n\n\u041a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b \u043c\u043e\u0433\u0443\u0442 \u0445\u0440\u0430\u043d\u0438\u0442\u044c\u0441\u044f \u0432 \u0433\u0440\u0430\u0434\u0443\u0441\u0430\u0445 \u0438\u043b\u0438 \u0440\u0430\u0434\u0438\u0430\u043d\u0430\u0445.\n\n\u0415\u0441\u043b\u0438 \u0434\u043b\u044f \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u043e\u0432 \u0448\u0438\u0440\u043e\u0442\u044b \u0438 \u0434\u043e\u043b\u0433\u043e\u0442\u044b \u0441\u0433\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b \u0432\u0442\u043e\u0440\u0438\u0447\u043d\u044b\u0435 \u0438\u043d\u0434\u0435\u043a\u0441\u044b, \u043e\u043d\u0438 \u043c\u043e\u0433\u0443\u0442 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0434\u043b\u044f \u0443\u0441\u043a\u043e\u0440\u0435\u043d\u0438\u044f \u0433\u0435\u043e\u043f\u043e\u0438\u0441\u043a\u0430, \u0435\u0441\u043b\u0438 [Cost based optimizer](../Searching/Cost_based_optimizer.md) \u0440\u0435\u0448\u0438\u0442 \u0438\u0445 \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c.\n\n## \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0441\u0447\u0451\u0442\u0430 \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u044f\n\n\u0414\u043b\u044f \u0442\u043e\u0433\u043e \u0447\u0442\u043e\u0431\u044b \u0443\u0437\u043d\u0430\u0442\u044c \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u043c\u0435\u0436\u0434\u0443 \u0434\u0432\u0443\u043c\u044f \u0442\u043e\u0447\u043a\u0430\u043c\u0438, \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e [GEODIST()](../Functions/Geo_spatial_functions.md#GEODIST%28%29). `GEODIST` \u0442\u0440\u0435\u0431\u0443\u0435\u0442 \u0434\u0432\u0435 \u043f\u0430\u0440\u044b \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442 \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u043f\u0435\u0440\u0432\u044b\u0445 \u0447\u0435\u0442\u044b\u0440\u0451\u0445 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432.\n\n5-\u0439 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u0432 \u0443\u043f\u0440\u043e\u0449\u0451\u043d\u043d\u043e\u043c JSON-\u0444\u043e\u0440\u043c\u0430\u0442\u0435 \u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0442\u044c \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u044b\u0435 \u0430\u0441\u043f\u0435\u043a\u0442\u044b \u0444\u0443\u043d\u043a\u0446\u0438\u0438. \u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e `GEODIST` \u043e\u0436\u0438\u0434\u0430\u0435\u0442 \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b \u0432 \u0440\u0430\u0434\u0438\u0430\u043d\u0430\u0445, \u043d\u043e \u043c\u043e\u0436\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c `in=degrees` \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0433\u0440\u0430\u0434\u0443\u0441\u043e\u0432 \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0432\u0445\u043e\u0434\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445. \u041a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b, \u0434\u043b\u044f \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0440\u0430\u0441\u0447\u0451\u0442 \u0433\u0435\u043e\u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u044f, \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0442\u043e\u0433\u043e \u0436\u0435 \u0442\u0438\u043f\u0430 (\u0433\u0440\u0430\u0434\u0443\u0441\u044b \u0438\u043b\u0438 \u0440\u0430\u0434\u0438\u0430\u043d\u044b), \u0447\u0442\u043e \u0438 \u0445\u0440\u0430\u043d\u044f\u0449\u0438\u0435\u0441\u044f \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0435, \u0438\u043d\u0430\u0447\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u0431\u0443\u0434\u0443\u0442 \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u043c\u0438.\n\n\u0420\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u043d\u043d\u043e\u0435 \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0432 \u043c\u0435\u0442\u0440\u0430\u0445, \u043d\u043e \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043e\u043f\u0446\u0438\u0438 `out` \u0435\u0433\u043e \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u0442\u044c \u0432 \u043a\u0438\u043b\u043e\u043c\u0435\u0442\u0440\u044b, \u0444\u0443\u0442\u044b \u0438\u043b\u0438 \u043c\u0438\u043b\u0438. \u041d\u0430\u043a\u043e\u043d\u0435\u0446, \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043c\u0435\u0442\u043e\u0434 \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f \u043f\u043e\u0434 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\u043c `adaptive`. \u0410\u043b\u044c\u0442\u0435\u0440\u043d\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u043c\u0435\u0442\u043e\u0434, \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043d\u0430 \u0430\u043b\u0433\u043e\u0440\u0438\u0442\u043c\u0435 `haversine`, \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d; \u043e\u0434\u043d\u0430\u043a\u043e \u043e\u043d \u043c\u0435\u0434\u043b\u0435\u043d\u043d\u0435\u0435 \u0438 \u043c\u0435\u043d\u0435\u0435 \u0442\u043e\u0447\u0435\u043d.\n\n\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u2014 \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u2014 \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0432 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0438 `ORDER BY` \u0434\u043b\u044f \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0438 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432:\n\nCODE_BLOCK_1\n\n\u0418\u043b\u0438 \u0434\u043b\u044f \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432 \u0440\u0430\u0434\u0438\u0430\u043b\u044c\u043d\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u044c\u044e \u0432\u043e\u043a\u0440\u0443\u0433 \u0442\u043e\u0447\u043a\u0438:\n\nCODE_BLOCK_2\n\n## \u041f\u043e\u0438\u0441\u043a \u0432 \u043f\u043e\u043b\u0438\u0433\u043e\u043d\u0430\u0445\n\n\u0415\u0449\u0451 \u043e\u0434\u043d\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0433\u0435\u043e\u043f\u043e\u0438\u0441\u043a\u0430 \u2014 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435, \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u043b\u0438 \u043b\u043e\u043a\u0430\u0446\u0438\u044f \u0432\u043d\u0443\u0442\u0440\u0438 \u0437\u0430\u0434\u0430\u043d\u043d\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438. \u0421\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u0430\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u0438\u0440\u0443\u0435\u0442 \u043e\u0431\u044a\u0435\u043a\u0442 \u043f\u043e\u043b\u0438\u0433\u043e\u043d\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0437\u0430\u0442\u0435\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u0440\u0443\u0433\u043e\u0439 \u0444\u0443\u043d\u043a\u0446\u0438\u0435\u0439, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c, \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u0441\u044f \u043b\u0438 \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b \u0432\u043d\u0443\u0442\u0440\u0438 \u044d\u0442\u043e\u0433\u043e \u043f\u043e\u043b\u0438\u0433\u043e\u043d\u0430.\n\n\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u0434\u0432\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043f\u043e\u043b\u0438\u0433\u043e\u043d\u0430:\n\n*   [GEOPOLY2D()](../Functions/Geo_spatial_functions.md#GEOPOLY2D%28%29) \u2014 \u0441\u043e\u0437\u0434\u0430\u0451\u0442 \u043f\u043e\u043b\u0438\u0433\u043e\u043d \u0441 \u0443\u0447\u0451\u0442\u043e\u043c \u043a\u0440\u0438\u0432\u0438\u0437\u043d\u044b \u0417\u0435\u043c\u043b\u0438\n*   [POLY2D()](../Functions/Geo_spatial_functions.md#POLY2D%28%29) \u2014 \u0441\u043e\u0437\u0434\u0430\u0451\u0442 \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u043f\u043e\u043b\u0438\u0433\u043e\u043d \u0432 \u043f\u043b\u043e\u0441\u043a\u043e\u043c \u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0441\u0442\u0432\u0435\n\n`POLY2D` \u043f\u043e\u0434\u0445\u043e\u0434\u0438\u0442 \u0434\u043b\u044f \u0433\u0435\u043e\u043f\u043e\u0438\u0441\u043a\u0430, \u043a\u043e\u0433\u0434\u0430 \u0441\u0442\u043e\u0440\u043e\u043d\u044b \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u043a\u043e\u0440\u043e\u0447\u0435 500 \u043a\u043c (\u0434\u043b\u044f \u043f\u043e\u043b\u0438\u0433\u043e\u043d\u043e\u0432 \u0441 3-4 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438; \u0434\u043b\u044f \u043f\u043e\u043b\u0438\u0433\u043e\u043d\u043e\u0432 \u0441 \u0431\u043e\u043b\u044c\u0448\u0438\u043c \u0447\u0438\u0441\u043b\u043e\u043c \u0441\u0442\u043e\u0440\u043e\u043d \u0441\u0442\u043e\u0438\u0442 \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c \u043c\u0435\u043d\u044c\u0448\u0438\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f). \u0414\u043b\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u0435\u0439 \u0441 \u0431\u043e\u043b\u0435\u0435 \u0434\u043b\u0438\u043d\u043d\u044b\u043c\u0438 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c `GEOPOLY2D` \u0434\u043b\u044f \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u044f \u0442\u043e\u0447\u043d\u043e\u0441\u0442\u0438 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432. `GEOPOLY2D` \u043e\u0436\u0438\u0434\u0430\u0435\u0442 \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b \u0432 \u0432\u0438\u0434\u0435 \u043f\u0430\u0440 \u0448\u0438\u0440\u043e\u0442\u044b/\u0434\u043e\u043b\u0433\u043e\u0442\u044b \u0432 \u0433\u0440\u0430\u0434\u0443\u0441\u0430\u0445; \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0440\u0430\u0434\u0438\u0430\u043d\u043e\u0432 \u043f\u0440\u0438\u0432\u0435\u0434\u0451\u0442 \u043a \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f\u043c \u0432 \u043f\u043b\u043e\u0441\u043a\u043e\u043c \u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0441\u0442\u0432\u0435 (\u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u043e `POLY2D`).\n\n[CONTAINS()](../Functions/Arrays_and_conditions_functions.md#CONTAINS%28%29) \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u0442 \u043d\u0430 \u0432\u0445\u043e\u0434 \u043f\u043e\u043b\u0438\u0433\u043e\u043d \u0438 \u043d\u0430\u0431\u043e\u0440 \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442 \u0438 \u0432\u044b\u0432\u043e\u0434\u0438\u0442 `1`, \u0435\u0441\u043b\u0438 \u0442\u043e\u0447\u043a\u0430 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u0432\u043d\u0443\u0442\u0440\u0438 \u043f\u043e\u043b\u0438\u0433\u043e\u043d\u0430, \u0438\u043b\u0438 `0` \u0432 \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435.\n\nCODE_BLOCK_3\n<!-- proofread -->"
        },
        "is_code_or_comment": false,
        "model": "openai:gpt-4.1-mini",
        "updated_at": 1766369453
    },
    "f7eaedb4f828f7c9d3ae9ccf4c88cd5dcb8559e2946c47aab5a33ef099f17812": {
        "original": "# Geo search\n\nOne of the greatest features of Manticore Search is the ability to combine full-text searching with geo-location. For example, a retailer can offer a search where a user looks for a product, and the result set can indicate the closest shop that has the product in stock, so the user can go in-store and pick it up. A travel site can provide results based on a search limited to a certain area and have the results sorted by the distance from a point (for example, 'search museums near a hotel').\n\nTo perform geo-searching, a document needs to contain pairs of latitude/longitude coordinates. The coordinates can be stored as float attributes. If the document has multiple locations, it may be convenient to use a JSON attribute to store coordinate pairs.\n\nCODE_BLOCK_0\n\nThe coordinates can be stored as degrees or radians.\n\nIf secondary indexes are generated for latitude and longitude attributes, they may automatically be used to speed up geo searches if the [Cost based optimizer](../Searching/Cost_based_optimizer.md) decides to use them.\n\n## Performing distance \u0441alculation\n\nTo find out the distance between two points, the [GEODIST()](../Functions/Geo_spatial_functions.md#GEODIST%28%29) function can be used. `GEODIST` requires two pairs of coordinates as its first four parameters.\n\nThe 5th parameter in a simplified JSON format can configure certain aspects of the function. By default, `GEODIST` expects coordinates to be in radians, but `in=degrees` can be added to allow using degrees as input. The coordinates for which we perform the geo distance must have the same type (degrees or radians) as the ones stored in the table; otherwise, results will be misleading.\n\nThe calculated distance is by default in meters, but with the `out` option, it can be transformed to kilometers, feet, or miles. Lastly, by default, a calculation method called `adaptive` is used. An alternative method based on the `haversine` algorithm is available; however, this one is slower and less precise.\n\nThe result of the function - the distance - can be used in the`ORDER BY` clause to sort the results:\n\nCODE_BLOCK_1\n\nOr to limit the results to a radial area around the point:\n\nCODE_BLOCK_2\n\n## Searching in polygons\n\nAnother geo search feature is the ability to determine if a location is within a specified area. A special function constructs a polygon object, which is then used by another function to test whether a set of coordinates is contained within that polygon or not.\n\nThere are two functions available for creating the polygon:\n\n*   [GEOPOLY2D()](../Functions/Geo_spatial_functions.md#GEOPOLY2D%28%29) - creates a polygon that takes into account the Earth's curvature\n*   [POLY2D()](../Functions/Geo_spatial_functions.md#POLY2D%28%29) - creates a simple polygon in flat space\n\n`POLY2D` is suitable for geo searches when the area has sides shorter than 500km (for polygons with 3-4 sides; for polygons with more sides, lower values should be considered). For areas with longer sides, using `GEOPOLY2D` is required to maintain accurate results. `GEOPOLY2D` expects coordinates as latitude/longitude pairs in degrees; using radians will yield results in flat space (similar to `POLY2D`).\n\n[CONTAINS()](../Functions/Arrays_and_conditions_functions.md#CONTAINS%28%29) takes a polygon and a set of coordinates as input and outputs `1` if the point is inside the polygon or `0` otherwise.\n\nCODE_BLOCK_3\n<!-- proofread -->\n\n",
        "translations": {
            "chinese": "# \u5730\u7406\u641c\u7d22\n\nManticore Search \u6700\u4f1f\u5927\u7684\u529f\u80fd\u4e4b\u4e00\u662f\u80fd\u591f\u7ed3\u5408\u5168\u6587\u641c\u7d22\u4e0e\u5730\u7406\u5b9a\u4f4d\u3002\u4f8b\u5982\uff0c\u96f6\u552e\u5546\u53ef\u4ee5\u63d0\u4f9b\u4e00\u4e2a\u641c\u7d22\u529f\u80fd\uff0c\u7528\u6237\u53ef\u4ee5\u67e5\u627e\u4ea7\u54c1\uff0c\u7ed3\u679c\u96c6\u53ef\u4ee5\u6307\u793a\u6700\u8fd1\u7684\u5546\u5e97\u662f\u5426\u6709\u5e93\u5b58\uff0c\u8fd9\u6837\u7528\u6237\u53ef\u4ee5\u53bb\u5e97\u5185\u53d6\u8d27\u3002\u65c5\u6e38\u7f51\u7ad9\u53ef\u4ee5\u6839\u636e\u7279\u5b9a\u533a\u57df\u8fdb\u884c\u641c\u7d22\uff0c\u5e76\u6309\u8ddd\u79bb\u67d0\u4e2a\u70b9\u7684\u8ddd\u79bb\u5bf9\u7ed3\u679c\u8fdb\u884c\u6392\u5e8f\uff08\u4f8b\u5982\uff0c\u201c\u641c\u7d22\u9152\u5e97\u9644\u8fd1\u7684\u535a\u7269\u9986\u201d\uff09\u3002\n\n\u8981\u6267\u884c\u5730\u7406\u641c\u7d22\uff0c\u6587\u6863\u9700\u8981\u5305\u542b\u7ecf\u7eac\u5ea6\u5750\u6807\u5bf9\u3002\u8fd9\u4e9b\u5750\u6807\u53ef\u4ee5\u5b58\u50a8\u4e3a\u6d6e\u70b9\u6570\u5c5e\u6027\u3002\u5982\u679c\u6587\u6863\u4e2d\u6709\u591a\u4e2a\u4f4d\u7f6e\uff0c\u4f7f\u7528 JSON \u5c5e\u6027\u5b58\u50a8\u5750\u6807\u5bf9\u53ef\u80fd\u4f1a\u66f4\u65b9\u4fbf\u3002\n\nCODE_BLOCK_0\n\n\u5750\u6807\u53ef\u4ee5\u5b58\u50a8\u4e3a\u5ea6\u6216\u5f27\u5ea6\u3002\n\n\u5982\u679c\u4e3a\u7eac\u5ea6\u548c\u7ecf\u5ea6\u5c5e\u6027\u751f\u6210\u4e86\u4e8c\u7ea7\u7d22\u5f15\uff0c\u90a3\u4e48\u5728 [\u6210\u672c\u57fa\u4f18\u5316\u5668](../Searching/Cost_based_optimizer.md) \u51b3\u5b9a\u4f7f\u7528\u5b83\u4eec\u7684\u60c5\u51b5\u4e0b\uff0c\u5b83\u4eec\u53ef\u80fd\u4f1a\u81ea\u52a8\u7528\u4e8e\u52a0\u5feb\u5730\u7406\u641c\u7d22\u901f\u5ea6\u3002\n\n## \u6267\u884c\u8ddd\u79bb\u8ba1\u7b97\n\n\u8981\u627e\u51fa\u4e24\u4e2a\u70b9\u4e4b\u95f4\u7684\u8ddd\u79bb\uff0c\u53ef\u4ee5\u4f7f\u7528 [GEODIST()](../Functions/Geo_spatial_functions.md#GEODIST%28%29) \u51fd\u6570\u3002`GEODIST` \u9700\u8981\u4f5c\u4e3a\u524d\u56db\u4e2a\u53c2\u6570\u7684\u4e24\u4e2a\u5750\u6807\u5bf9\u3002\n\n`GEODIST` \u7684\u7b2c\u4e94\u4e2a\u53c2\u6570\u53ef\u4ee5\u4ee5\u7b80\u5316 JSON \u683c\u5f0f\u914d\u7f6e\u67d0\u4e9b\u65b9\u9762\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c`GEODIST` \u5047\u5b9a\u5750\u6807\u4e3a\u5f27\u5ea6\uff0c\u4f46\u53ef\u4ee5\u6dfb\u52a0 `in=degrees` \u4ee5\u5141\u8bb8\u4f7f\u7528\u5ea6\u4f5c\u4e3a\u8f93\u5165\u3002\u6211\u4eec\u6267\u884c\u5730\u7406\u8ddd\u79bb\u7684\u5750\u6807\u7c7b\u578b\u5fc5\u987b\u4e0e\u8868\u4e2d\u5b58\u50a8\u7684\u5750\u6807\u7c7b\u578b\u76f8\u540c\uff1b\u5426\u5219\uff0c\u7ed3\u679c\u4f1a\u8bef\u5bfc\u4eba\u3002\n\n\u8ba1\u7b97\u51fa\u7684\u8ddd\u79bb\u9ed8\u8ba4\u4ee5\u7c73\u4e3a\u5355\u4f4d\uff0c\u4f46\u53ef\u4ee5\u901a\u8fc7 `out` \u9009\u9879\u5c06\u5176\u8f6c\u6362\u4e3a\u5343\u7c73\u3001\u82f1\u5c3a\u6216\u82f1\u91cc\u3002\u6700\u540e\uff0c\u9ed8\u8ba4\u4f7f\u7528\u4e00\u79cd\u79f0\u4e3a `adaptive` \u7684\u8ba1\u7b97\u65b9\u6cd5\u3002\u57fa\u4e8e `haversine` \u7b97\u6cd5\u7684\u53e6\u4e00\u79cd\u65b9\u6cd5\u53ef\u7528\uff0c\u4f46\u8fd9\u79cd\u65b9\u6cd5\u8f83\u6162\u4e14\u4e0d\u591f\u7cbe\u786e\u3002\n\n\u51fd\u6570\u7684\u7ed3\u679c\u2014\u2014\u8ddd\u79bb\u2014\u2014\u53ef\u4ee5\u7528\u4e8e `ORDER BY` \u5b50\u53e5\u4ee5\u5bf9\u7ed3\u679c\u8fdb\u884c\u6392\u5e8f\uff1a\n\nCODE_BLOCK_1\n\n\u6216\u8005\u9650\u5236\u7ed3\u679c\u4e3a\u67d0\u4e2a\u70b9\u5468\u56f4\u7684\u5706\u5f62\u533a\u57df\uff1a\n\nCODE_BLOCK_2\n\n## \u5728\u591a\u8fb9\u5f62\u4e2d\u641c\u7d22\n\n\u53e6\u4e00\u4e2a\u5730\u7406\u641c\u7d22\u529f\u80fd\u662f\u786e\u5b9a\u67d0\u4e2a\u4f4d\u7f6e\u662f\u5426\u5728\u6307\u5b9a\u533a\u57df\u5185\u3002\u6709\u4e00\u4e2a\u7279\u6b8a\u51fd\u6570\u6784\u5efa\u4e00\u4e2a\u591a\u8fb9\u5f62\u5bf9\u8c61\uff0c\u7136\u540e\u4f7f\u7528\u53e6\u4e00\u4e2a\u51fd\u6570\u6d4b\u8bd5\u4e00\u7ec4\u5750\u6807\u662f\u5426\u5305\u542b\u5728\u8be5\u591a\u8fb9\u5f62\u5185\u3002\n\n\u6709\u4e24\u79cd\u51fd\u6570\u53ef\u7528\u4e8e\u521b\u5efa\u591a\u8fb9\u5f62\uff1a\n\n*   [GEOPOLY2D()](../Functions/Geo_spatial_functions.md#GEOPOLY2D%28%29) - \u8003\u8651\u5730\u7403\u66f2\u7387\u521b\u5efa\u591a\u8fb9\u5f62\n*   [POLY2D()](../Functions/Geo_spatial_functions.md#POLY2D%28%29) - \u5728\u5e73\u9762\u7a7a\u95f4\u4e2d\u521b\u5efa\u7b80\u5355\u591a\u8fb9\u5f62\n\n`POLY2D` \u9002\u7528\u4e8e\u591a\u8fb9\u5f62\u7684\u8fb9\u957f\u5c0f\u4e8e 500km\uff08\u5bf9\u4e8e 3-4 \u8fb9\u7684\u591a\u8fb9\u5f62\uff1b\u5bf9\u4e8e\u66f4\u591a\u8fb9\u7684\u591a\u8fb9\u5f62\uff0c\u5e94\u8003\u8651\u8f83\u4f4e\u7684\u503c\uff09\u7684\u5730\u7406\u641c\u7d22\u3002\u5bf9\u4e8e\u8fb9\u957f\u8f83\u957f\u7684\u533a\u57df\uff0c\u5fc5\u987b\u4f7f\u7528 `GEOPOLY2D` \u4ee5\u4fdd\u6301\u7ed3\u679c\u7684\u51c6\u786e\u6027\u3002`GEOPOLY2D` \u9884\u671f\u5750\u6807\u4e3a\u5ea6\u6570\u7684\u7eac\u5ea6/\u7ecf\u5ea6\u5bf9\uff1b\u4f7f\u7528\u5f27\u5ea6\u5c06\u5bfc\u81f4\u5e73\u9762\u7a7a\u95f4\u4e2d\u7684\u7ed3\u679c\uff08\u7c7b\u4f3c\u4e8e `POLY2D`\uff09\u3002\n\n[CONTAINS()](../Functions/Arrays_and_conditions_functions.md#CONTAINS%28%29) \u63a5\u53d7\u4e00\u4e2a\u591a\u8fb9\u5f62\u548c\u4e00\u7ec4\u5750\u6807\u4f5c\u4e3a\u8f93\u5165\uff0c\u5e76\u8f93\u51fa `1` \u5982\u679c\u70b9\u5728\u591a\u8fb9\u5f62\u5185\uff0c\u5426\u5219\u8f93\u51fa `0`\u3002\n\nCODE_BLOCK_3\n<!-- proofread -->",
            "russian": "# \u0413\u0435\u043e\u043f\u043e\u0438\u0441\u043a\n\n\u041e\u0434\u043d\u043e\u0439 \u0438\u0437 \u0441\u0430\u043c\u044b\u0445 \u043c\u043e\u0449\u043d\u044b\u0445 \u0444\u0443\u043d\u043a\u0446\u0438\u0439 Manticore Search \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043a\u043e\u043c\u0431\u0438\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u043b\u043d\u043e\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0439 \u043f\u043e\u0438\u0441\u043a \u0441 \u0433\u0435\u043e\u043b\u043e\u043a\u0430\u0446\u0438\u0435\u0439. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0440\u0438\u0442\u0435\u0439\u043b\u0435\u0440 \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u0442\u044c \u043f\u043e\u0438\u0441\u043a, \u0433\u0434\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0438\u0449\u0435\u0442 \u0442\u043e\u0432\u0430\u0440, \u0430 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043c\u043e\u0433\u0443\u0442 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043d\u0430 \u0431\u043b\u0438\u0436\u0430\u0439\u0448\u0438\u0439 \u043c\u0430\u0433\u0430\u0437\u0438\u043d, \u0433\u0434\u0435 \u044d\u0442\u043e\u0442 \u0442\u043e\u0432\u0430\u0440 \u0435\u0441\u0442\u044c \u0432 \u043d\u0430\u043b\u0438\u0447\u0438\u0438, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043c\u043e\u0433 \u043f\u0440\u0438\u0439\u0442\u0438 \u0432 \u043c\u0430\u0433\u0430\u0437\u0438\u043d \u0438 \u0437\u0430\u0431\u0440\u0430\u0442\u044c \u0435\u0433\u043e. \u0422\u0443\u0440\u0438\u0441\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0441\u0430\u0439\u0442 \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0442\u044c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043f\u043e\u0438\u0441\u043a\u0430, \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u043d\u044b\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u044c\u044e, \u0438 \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0438\u0445 \u043f\u043e \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u044e \u043e\u0442 \u0442\u043e\u0447\u043a\u0438 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, '\u043f\u043e\u0438\u0441\u043a \u043c\u0443\u0437\u0435\u0435\u0432 \u0440\u044f\u0434\u043e\u043c \u0441 \u043e\u0442\u0435\u043b\u0435\u043c').\n\n\u0414\u043b\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0433\u0435\u043e\u043f\u043e\u0438\u0441\u043a\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043f\u0430\u0440\u044b \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442 \u0448\u0438\u0440\u043e\u0442\u044b/\u0434\u043e\u043b\u0433\u043e\u0442\u044b. \u041a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b \u043c\u043e\u0433\u0443\u0442 \u0445\u0440\u0430\u043d\u0438\u0442\u044c\u0441\u044f \u043a\u0430\u043a \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u044b \u0441 \u043f\u043b\u0430\u0432\u0430\u044e\u0449\u0435\u0439 \u0442\u043e\u0447\u043a\u043e\u0439. \u0415\u0441\u043b\u0438 \u0443 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0439, \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0443\u0434\u043e\u0431\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c JSON-\u0430\u0442\u0440\u0438\u0431\u0443\u0442 \u0434\u043b\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u043f\u0430\u0440 \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442.\n\nCODE_BLOCK_0\n\n\u041a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b \u043c\u043e\u0433\u0443\u0442 \u0445\u0440\u0430\u043d\u0438\u0442\u044c\u0441\u044f \u0432 \u0433\u0440\u0430\u0434\u0443\u0441\u0430\u0445 \u0438\u043b\u0438 \u0440\u0430\u0434\u0438\u0430\u043d\u0430\u0445.\n\n\u0415\u0441\u043b\u0438 \u0434\u043b\u044f \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u043e\u0432 \u0448\u0438\u0440\u043e\u0442\u044b \u0438 \u0434\u043e\u043b\u0433\u043e\u0442\u044b \u0441\u043e\u0437\u0434\u0430\u043d\u044b \u0432\u0442\u043e\u0440\u0438\u0447\u043d\u044b\u0435 \u0438\u043d\u0434\u0435\u043a\u0441\u044b, \u043e\u043d\u0438 \u043c\u043e\u0433\u0443\u0442 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0434\u043b\u044f \u0443\u0441\u043a\u043e\u0440\u0435\u043d\u0438\u044f \u0433\u0435\u043e\u043f\u043e\u0438\u0441\u043a\u0430, \u0435\u0441\u043b\u0438 [\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u043d\u043e\u0439 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0442\u043e\u0440](../Searching/Cost_based_optimizer.md) \u0440\u0435\u0448\u0438\u0442 \u0438\u0445 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c.\n\n## \u0412\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0435 \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u044f\n\n\u0427\u0442\u043e\u0431\u044b \u0443\u0437\u043d\u0430\u0442\u044c \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u043c\u0435\u0436\u0434\u0443 \u0434\u0432\u0443\u043c\u044f \u0442\u043e\u0447\u043a\u0430\u043c\u0438, \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e [GEODIST()](../Functions/Geo_spatial_functions.md#GEODIST%28%29). `GEODIST` \u0442\u0440\u0435\u0431\u0443\u0435\u0442 \u0434\u0432\u0435 \u043f\u0430\u0440\u044b \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442 \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u043f\u0435\u0440\u0432\u044b\u0445 \u0447\u0435\u0442\u044b\u0440\u0435\u0445 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432.\n\n5-\u0439 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u0432 \u0443\u043f\u0440\u043e\u0449\u0435\u043d\u043d\u043e\u043c \u0444\u043e\u0440\u043c\u0430\u0442\u0435 JSON \u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0442\u044c \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0435 \u0430\u0441\u043f\u0435\u043a\u0442\u044b \u0444\u0443\u043d\u043a\u0446\u0438\u0438. \u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e `GEODIST` \u043e\u0436\u0438\u0434\u0430\u0435\u0442 \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b \u0432 \u0440\u0430\u0434\u0438\u0430\u043d\u0430\u0445, \u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 `in=degrees` \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0433\u0440\u0430\u0434\u0443\u0441\u044b \u043d\u0430 \u0432\u0445\u043e\u0434\u0435. \u041a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b, \u0434\u043b\u044f \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043c\u044b \u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0435\u043c \u0433\u0435\u043e-\u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435, \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0442\u043e\u0433\u043e \u0436\u0435 \u0442\u0438\u043f\u0430 (\u0433\u0440\u0430\u0434\u0443\u0441\u044b \u0438\u043b\u0438 \u0440\u0430\u0434\u0438\u0430\u043d\u044b), \u0447\u0442\u043e \u0438 \u0445\u0440\u0430\u043d\u044f\u0449\u0438\u0435\u0441\u044f \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0435; \u0432 \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u0431\u0443\u0434\u0443\u0442 \u043d\u0435\u0432\u0435\u0440\u043d\u044b\u043c\u0438.\n\n\u0412\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u043d\u043e\u0435 \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0432 \u043c\u0435\u0442\u0440\u0430\u0445, \u043d\u043e \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043e\u043f\u0446\u0438\u0438 `out` \u0435\u0433\u043e \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u0442\u044c \u0432 \u043a\u0438\u043b\u043e\u043c\u0435\u0442\u0440\u044b, \u0444\u0443\u0442\u044b \u0438\u043b\u0438 \u043c\u0438\u043b\u0438. \u041d\u0430\u043a\u043e\u043d\u0435\u0446, \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043c\u0435\u0442\u043e\u0434 \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f `adaptive`. \u0414\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u0430\u043b\u044c\u0442\u0435\u0440\u043d\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u043c\u0435\u0442\u043e\u0434 \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u0430\u043b\u0433\u043e\u0440\u0438\u0442\u043c\u0430 `haversine`; \u043e\u0434\u043d\u0430\u043a\u043e \u043e\u043d \u043c\u0435\u0434\u043b\u0435\u043d\u043d\u0435\u0435 \u0438 \u043c\u0435\u043d\u0435\u0435 \u0442\u043e\u0447\u0435\u043d.\n\n\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 - \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435 - \u043c\u043e\u0436\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0438 `ORDER BY` \u0434\u043b\u044f \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0438 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432:\n\nCODE_BLOCK_1\n\n\u0418\u043b\u0438 \u0434\u043b\u044f \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432 \u0440\u0430\u0434\u0438\u0430\u043b\u044c\u043d\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u044c\u044e \u0432\u043e\u043a\u0440\u0443\u0433 \u0442\u043e\u0447\u043a\u0438:\n\nCODE_BLOCK_2\n\n## \u041f\u043e\u0438\u0441\u043a \u0432\u043d\u0443\u0442\u0440\u0438 \u043f\u043e\u043b\u0438\u0433\u043e\u043d\u043e\u0432\n\n\u0414\u0440\u0443\u0433\u0430\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0433\u0435\u043e\u043f\u043e\u0438\u0441\u043a\u0430 - \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c, \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u043b\u0438 \u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0432 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438. \u0421\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u0430\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0441\u043e\u0437\u0434\u0430\u0435\u0442 \u043e\u0431\u044a\u0435\u043a\u0442 \u043f\u043e\u043b\u0438\u0433\u043e\u043d\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0437\u0430\u0442\u0435\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u0440\u0443\u0433\u043e\u0439 \u0444\u0443\u043d\u043a\u0446\u0438\u0435\u0439 \u0434\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438, \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u0441\u044f \u043b\u0438 \u043d\u0430\u0431\u043e\u0440 \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442 \u0432\u043d\u0443\u0442\u0440\u0438 \u044d\u0442\u043e\u0433\u043e \u043f\u043e\u043b\u0438\u0433\u043e\u043d\u0430 \u0438\u043b\u0438 \u043d\u0435\u0442.\n\n\u0414\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043f\u043e\u043b\u0438\u0433\u043e\u043d\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u0434\u0432\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438:\n\n*   [GEOPOLY2D()](../Functions/Geo_spatial_functions.md#GEOPOLY2D%28%29) - \u0441\u043e\u0437\u0434\u0430\u0435\u0442 \u043f\u043e\u043b\u0438\u0433\u043e\u043d, \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u044e\u0449\u0438\u0439 \u043a\u0440\u0438\u0432\u0438\u0437\u043d\u0443 \u0417\u0435\u043c\u043b\u0438\n*   [POLY2D()](../Functions/Geo_spatial_functions.md#POLY2D%28%29) - \u0441\u043e\u0437\u0434\u0430\u0435\u0442 \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u043f\u043e\u043b\u0438\u0433\u043e\u043d \u0432 \u043f\u043b\u043e\u0441\u043a\u043e\u043c \u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0441\u0442\u0432\u0435\n\n`POLY2D` \u043f\u043e\u0434\u0445\u043e\u0434\u0438\u0442 \u0434\u043b\u044f \u0433\u0435\u043e\u043f\u043e\u0438\u0441\u043a\u0430, \u043a\u043e\u0433\u0434\u0430 \u0441\u0442\u043e\u0440\u043e\u043d\u044b \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u043a\u043e\u0440\u043e\u0447\u0435 500 \u043a\u043c (\u0434\u043b\u044f \u043f\u043e\u043b\u0438\u0433\u043e\u043d\u043e\u0432 \u0441 3-4 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438; \u0434\u043b\u044f \u043f\u043e\u043b\u0438\u0433\u043e\u043d\u043e\u0432 \u0441 \u0431\u043e\u043b\u044c\u0448\u0438\u043c \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u043c \u0441\u0442\u043e\u0440\u043e\u043d \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0440\u0430\u0441\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0442\u044c \u043c\u0435\u043d\u044c\u0448\u0438\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f). \u0414\u043b\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u0435\u0439 \u0441 \u0431\u043e\u043b\u0435\u0435 \u0434\u043b\u0438\u043d\u043d\u044b\u043c\u0438 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 `GEOPOLY2D` \u0434\u043b\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0442\u043e\u0447\u043d\u043e\u0441\u0442\u0438 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432. `GEOPOLY2D` \u043e\u0436\u0438\u0434\u0430\u0435\u0442 \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b \u0432 \u0432\u0438\u0434\u0435 \u043f\u0430\u0440 \u0448\u0438\u0440\u043e\u0442\u0430/\u0434\u043e\u043b\u0433\u043e\u0442\u0430 \u0432 \u0433\u0440\u0430\u0434\u0443\u0441\u0430\u0445; \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0440\u0430\u0434\u0438\u0430\u043d\u043e\u0432 \u0434\u0430\u0441\u0442 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u0432 \u043f\u043b\u043e\u0441\u043a\u043e\u043c \u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0441\u0442\u0432\u0435 (\u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u043e `POLY2D`).\n\n[CONTAINS()](../Functions/Arrays_and_conditions_functions.md#CONTAINS%28%29) \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u0442 \u043f\u043e\u043b\u0438\u0433\u043e\u043d \u0438 \u043d\u0430\u0431\u043e\u0440 \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442 \u043d\u0430 \u0432\u0445\u043e\u0434 \u0438 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 `1`, \u0435\u0441\u043b\u0438 \u0442\u043e\u0447\u043a\u0430 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u0432\u043d\u0443\u0442\u0440\u0438 \u043f\u043e\u043b\u0438\u0433\u043e\u043d\u0430, \u0438\u043b\u0438 `0` \u0432 \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435.\n\nCODE_BLOCK_3\n<!-- proofread -->"
        },
        "is_code_or_comment": false,
        "model": "deepseek/deepseek-v3.2",
        "updated_at": 1766374217
    },
    "__meta": {
        "source_text": "# Geo search\n\nOne of the greatest features of Manticore Search is the ability to combine full-text searching with geo-location. For example, a retailer can offer a search where a user looks for a product, and the result set can indicate the closest shop that has the product in stock, so the user can go in-store and pick it up. A travel site can provide results based on a search limited to a certain area and have the results sorted by the distance from a point (for example, 'search museums near a hotel').\n\nTo perform geo-searching, a document needs to contain pairs of latitude/longitude coordinates. The coordinates can be stored as float attributes. If the document has multiple locations, it may be convenient to use a JSON attribute to store coordinate pairs.\n\n\n\n```ini\ntable myrt\n{\n    ...\n    rt_attr_float = lat\n    rt_attr_float = lon\n    ...\n}\n```\n\nThe coordinates can be stored as degrees or radians.\n\nIf secondary indexes are generated for latitude and longitude attributes, they may automatically be used to speed up geo searches if the [Cost based optimizer](../Searching/Cost_based_optimizer.md) decides to use them.\n\n## Performing distance \u0441alculation\n\nTo find out the distance between two points, the [GEODIST()](../Functions/Geo_spatial_functions.md#GEODIST%28%29) function can be used. `GEODIST` requires two pairs of coordinates as its first four parameters.\n\nThe 5th parameter in a simplified JSON format can configure certain aspects of the function. By default, `GEODIST` expects coordinates to be in radians, but `in=degrees` can be added to allow using degrees as input. The coordinates for which we perform the geo distance must have the same type (degrees or radians) as the ones stored in the table; otherwise, results will be misleading.\n\nThe calculated distance is by default in meters, but with the `out` option, it can be transformed to kilometers, feet, or miles. Lastly, by default, a calculation method called `adaptive` is used. An alternative method based on the `haversine` algorithm is available; however, this one is slower and less precise.\n\nThe result of the function - the distance - can be used in the`ORDER BY` clause to sort the results:\n\n```sql\nSELECT *, GEODIST(40.7643929, -73.9997683, lat, lon, {in=degrees, out=miles}) AS distance FROM myindex WHERE MATCH('...') ORDER BY distance ASC, WEIGHT() DESC;\n```\n\nOr to limit the results to a radial area around the point:\n\n```sql\nSELECT *,GEODIST(40.7643929, -73.9997683, lat,lon, {in=degrees, out=miles}) AS distance FROM myindex WHERE MATCH('...') AND distance <1000 ORDER BY WEIGHT(), DISTANCE ASC;\n```\n\n## Searching in polygons\n\nAnother geo search feature is the ability to determine if a location is within a specified area. A special function constructs a polygon object, which is then used by another function to test whether a set of coordinates is contained within that polygon or not.\n\nThere are two functions available for creating the polygon:\n\n*   [GEOPOLY2D()](../Functions/Geo_spatial_functions.md#GEOPOLY2D%28%29) - creates a polygon that takes into account the Earth's curvature\n*   [POLY2D()](../Functions/Geo_spatial_functions.md#POLY2D%28%29) - creates a simple polygon in flat space\n\n`POLY2D` is suitable for geo searches when the area has sides shorter than 500km (for polygons with 3-4 sides; for polygons with more sides, lower values should be considered). For areas with longer sides, using `GEOPOLY2D` is required to maintain accurate results. `GEOPOLY2D` expects coordinates as latitude/longitude pairs in degrees; using radians will yield results in flat space (similar to `POLY2D`).\n\n[CONTAINS()](../Functions/Arrays_and_conditions_functions.md#CONTAINS%28%29) takes a polygon and a set of coordinates as input and outputs `1` if the point is inside the polygon or `0` otherwise.\n\n```sql\nSELECT *,CONTAINS(GEOPOLY2D(40.76439, -73.9997, 42.21211, -73.999,  42.21211, -76.123, 40.76439, -76.123), 41.5445, -74.973) AS inside FROM myindex WHERE MATCH('...') AND inside=1;\n```\n<!-- proofread -->\n\n",
        "updated_at": 1768530797,
        "source_md5": "7f2fc8151f86e8842a0c4aa5a5a0c0d9"
    }
}