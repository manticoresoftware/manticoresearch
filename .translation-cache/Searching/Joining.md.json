{
    "8fc084640b280cc9907f63d2a4e273224825e3df812cda05f24e398eaec87b3a": {
        "original": "This query demonstrates full-text matching across both the `customers` and `orders` tables, combined with range filtering and faceting. It searches for customers named \"Alice\" or \"Bob\" and their orders containing \"laptop\", \"phone\", or \"tablet\" with prices above $500. The results are ordered by order ID and faceted by warranty terms.\n\n<!-- request SQL -->\nCODE_BLOCK_25\n\n<!-- request JSON -->\nCODE_BLOCK_26\n\n<!-- response SQL -->\nCODE_BLOCK_27\n\n<!-- response JSON -->\n\nCODE_BLOCK_28\n\n\n<!-- end -->\n\n## Search options and match weights\n\nSeparate options can be specified for queries in a join: for the left table and the right table. The syntax is `OPTION(<table_name>)` for SQL queries and one or more subobjects under `\"options\"` for JSON queries.\n\n\n<!-- example join_options -->\n\nHere's an example of how to specify different field weights for a full-text query on the right table. To retrieve match weights via SQL, use the `<table_name>.weight()` expression.\nIn JSON queries, this weight is represented as `<table_name>._score`.\n\n<!-- request SQL -->\nCODE_BLOCK_29\n\n<!-- request JSON -->\nCODE_BLOCK_30\n\n<!-- response SQL -->\n\nCODE_BLOCK_31\n\n<!-- response JSON -->\n\nCODE_BLOCK_32\n<!-- end -->\n\n## Join batching\n\nWhen performing table joins, Manticore Search processes the results in batches to optimize performance and resource usage. Here's how it works:\n\n- **How Batching Works**:\n  - The query on the left table is executed first, and the results are accumulated into a batch.\n  - This batch is then used as input for the query on the right table, which is executed as a single operation.\n  - This approach minimizes the number of queries sent to the right table, improving efficiency.\n\n- **Configuring Batch Size**:\n  - The size of the batch can be adjusted using the `join_batch_size` search option.\n  - It is also [configurable](../Server_settings/Searchd.md#join_batch_size) in the `searchd` section of the configuration file.\n  - The default batch size is `1000`, but you can increase or decrease it depending on your use case.\n  - Setting `join_batch_size=0` disables batching entirely, which may be useful for debugging or specific scenarios.\n\n- **Performance Considerations**:\n  - A larger batch size can improve performance by reducing the number of queries executed on the right table.\n  - However, larger batches may consume more memory, especially for complex queries or large datasets.\n  - Experiment with different batch sizes to find the optimal balance between performance and resource usage.\n\n## Join caching\n\nTo further optimize join operations, Manticore Search employs a caching mechanism for queries executed on the right table. Here's what you need to know:\n\n- **How Caching Works**:\n  - Each query on the right table is defined by the `JOIN ON` conditions.\n  - If the same `JOIN ON` conditions are repeated across multiple queries, the results are cached and reused.\n  - This avoids redundant queries and speeds up subsequent join operations.\n\n- **Configuring Cache Size**:\n  - The size of the join cache can be configured using the [join_cache_size](../Server_settings/Searchd.md#join_cache_size) option in the `searchd` section of the configuration file.\n  - The default cache size is `20MB`, but you can adjust it based on your workload and available memory.\n  - Setting `join_cache_size=0` disables caching entirely.\n\n- **Memory Considerations**:\n  - Each thread maintains its own cache, so the total memory usage depends on the number of threads and the cache size.\n  - Ensure your server has sufficient memory to accommodate the cache, especially for high-concurrency environments.\n\n## Joining distributed tables\n\nDistributed tables consisting only of local tables are supported on both the left and right sides of a join query. However, distributed tables that include remote tables are not supported.\n\n## Caveats and best practices\n\nWhen using JOINs in Manticore Search, keep the following points in mind:\n\n1. **Field selection**: When selecting fields from two tables in a JOIN, do not prefix fields from the left table, but do prefix fields from the right table. For example:\nCODE_BLOCK_33\n\n2. **JOIN conditions**: Always explicitly specify the table names in your JOIN conditions:\nCODE_BLOCK_34\n\n3. **Expressions with JOINs**: When using expressions that combine fields from both joined tables, alias the result of the expression:\nCODE_BLOCK_35\n\n4. **Filtering on aliased expressions**: You cannot use aliases for expressions involving fields from both tables in the WHERE clause.\n\n5. **JSON attributes**: When joining on JSON attributes, you must explicitly cast the values to the appropriate type:\nCODE_BLOCK_36\n\n6. **NULL handling**: You can use IS NULL and IS NOT NULL conditions on joined fields:\nCODE_BLOCK_37\n\n7. **Using ANY with MVA**: When using the `ANY()` function with multi-valued attributes in JOINs, alias the multi-valued attribute from the joined table:\nCODE_BLOCK_38\n\nBy following these guidelines, you can effectively use JOINs in Manticore Search to combine data from multiple indexes and perform complex queries.\n\n<!-- proofread -->\n\n",
        "translations": {
            "chinese": "\u6b64\u67e5\u8be2\u6f14\u793a\u4e86\u8de8 `customers` \u548c `orders` \u8868\u7684\u5168\u6587\u5339\u914d\uff0c\u7ed3\u5408\u8303\u56f4\u8fc7\u6ee4\u548c\u5206\u9762\u3002\u5b83\u641c\u7d22\u540d\u4e3a \u201cAlice\u201d \u6216 \u201cBob\u201d \u7684\u5ba2\u6237\u53ca\u5176\u5305\u542b \u201claptop\u201d\u3001\u201cphone\u201d \u6216 \u201ctablet\u201d \u4e14\u4ef7\u683c\u9ad8\u4e8e 500 \u7f8e\u5143\u7684\u8ba2\u5355\u3002\u7ed3\u679c\u6309\u8ba2\u5355 ID \u6392\u5e8f\uff0c\u5e76\u6309\u4fdd\u4fee\u6761\u6b3e\u8fdb\u884c\u5206\u9762\u3002\n\n<!-- request SQL -->\nCODE_BLOCK_25\n\n<!-- request JSON -->\nCODE_BLOCK_26\n\n<!-- response SQL -->\nCODE_BLOCK_27\n\n<!-- response JSON -->\n\nCODE_BLOCK_28\n\n\n<!-- end -->\n\n## \u641c\u7d22\u9009\u9879\u4e0e\u5339\u914d\u6743\u91cd\n\n\u53ef\u4ee5\u4e3a\u8fde\u63a5\u4e2d\u7684\u67e5\u8be2\u5206\u522b\u6307\u5b9a\u9009\u9879\uff1a\u9488\u5bf9\u5de6\u8868\u548c\u53f3\u8868\u3002\u8bed\u6cd5\u4e3a SQL \u67e5\u8be2\u4e2d\u7684 `OPTION(<table_name>)`\uff0c\u4ee5\u53ca JSON \u67e5\u8be2\u4e2d `\"options\"` \u4e0b\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u5b50\u5bf9\u8c61\u3002\n\n\n<!-- example join_options -->\n\n\u4ee5\u4e0b\u662f\u4e3a\u53f3\u8868\u7684\u5168\u6587\u67e5\u8be2\u6307\u5b9a\u4e0d\u540c\u5b57\u6bb5\u6743\u91cd\u7684\u793a\u4f8b\u3002\u8981\u901a\u8fc7 SQL \u83b7\u53d6\u5339\u914d\u6743\u91cd\uff0c\u4f7f\u7528 `<table_name>.weight()` \u8868\u8fbe\u5f0f\u3002\n\u5728 JSON \u67e5\u8be2\u4e2d\uff0c\u6b64\u6743\u91cd\u8868\u793a\u4e3a `<table_name>._score`\u3002\n\n<!-- request SQL -->\nCODE_BLOCK_29\n\n<!-- request JSON -->\nCODE_BLOCK_30\n\n<!-- response SQL -->\n\nCODE_BLOCK_31\n\n<!-- response JSON -->\n\nCODE_BLOCK_32\n<!-- end -->\n\n## \u8fde\u63a5\u6279\u5904\u7406\n\n\u6267\u884c\u8868\u8fde\u63a5\u65f6\uff0cManticore Search \u4f1a\u4ee5\u6279\u5904\u7406\u65b9\u5f0f\u5904\u7406\u7ed3\u679c\uff0c\u4ee5\u4f18\u5316\u6027\u80fd\u548c\u8d44\u6e90\u4f7f\u7528\u3002\u5177\u4f53\u6d41\u7a0b\u5982\u4e0b\uff1a\n\n- **\u6279\u5904\u7406\u7684\u5de5\u4f5c\u539f\u7406**\uff1a\n  - \u5148\u6267\u884c\u5de6\u8868\u7684\u67e5\u8be2\uff0c\u5e76\u5c06\u7ed3\u679c\u79ef\u7d2f\u4e3a\u4e00\u4e2a\u6279\u6b21\u3002\n  - \u8be5\u6279\u6b21\u4f5c\u4e3a\u53f3\u8868\u67e5\u8be2\u7684\u8f93\u5165\uff0c\u53f3\u8868\u7684\u67e5\u8be2\u4f5c\u4e3a\u5355\u6b21\u64cd\u4f5c\u6267\u884c\u3002\n  - \u8fd9\u79cd\u65b9\u6cd5\u51cf\u5c11\u4e86\u53d1\u9001\u5230\u53f3\u8868\u7684\u67e5\u8be2\u6b21\u6570\uff0c\u63d0\u9ad8\u6548\u7387\u3002\n\n- **\u914d\u7f6e\u6279\u5904\u7406\u5927\u5c0f**\uff1a\n  - \u53ef\u4f7f\u7528\u641c\u7d22\u9009\u9879 `join_batch_size` \u8c03\u6574\u6279\u5904\u7406\u5927\u5c0f\u3002\n  - \u8be5\u9009\u9879\u4e5f\u53ef\u5728\u914d\u7f6e\u6587\u4ef6 `searchd` \u90e8\u5206\u4e2d[\u914d\u7f6e](../Server_settings/Searchd.md#join_batch_size)\u3002\n  - \u9ed8\u8ba4\u6279\u5904\u7406\u5927\u5c0f\u4e3a `1000`\uff0c\u53ef\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u589e\u51cf\u3002\n  - \u8bbe\u7f6e `join_batch_size=0` \u53ef\u5b8c\u5168\u7981\u7528\u6279\u5904\u7406\uff0c\u9002\u7528\u4e8e\u8c03\u8bd5\u6216\u7279\u5b9a\u573a\u666f\u3002\n\n- **\u6027\u80fd\u8003\u8651**\uff1a\n  - \u8f83\u5927\u7684\u6279\u5904\u7406\u5927\u5c0f\u53ef\u901a\u8fc7\u51cf\u5c11\u53f3\u8868\u67e5\u8be2\u6b21\u6570\u63d0\u5347\u6027\u80fd\u3002\n  - \u4f46\u6279\u6b21\u8fc7\u5927\u53ef\u80fd\u4f1a\u8017\u8d39\u66f4\u591a\u5185\u5b58\uff0c\u5c24\u5176\u662f\u9488\u5bf9\u590d\u6742\u67e5\u8be2\u6216\u5927\u6570\u636e\u96c6\u3002\n  - \u9700\u5c1d\u8bd5\u4e0d\u540c\u6279\u5904\u7406\u5927\u5c0f\u4ee5\u627e\u5230\u6027\u80fd\u548c\u8d44\u6e90\u4f7f\u7528\u7684\u6700\u4f73\u5e73\u8861\u3002\n\n## \u8fde\u63a5\u7f13\u5b58\n\n\u4e3a\u8fdb\u4e00\u6b65\u4f18\u5316\u8fde\u63a5\u64cd\u4f5c\uff0cManticore Search \u5bf9\u53f3\u8868\u6267\u884c\u7684\u67e5\u8be2\u91c7\u7528\u7f13\u5b58\u673a\u5236\u3002\u76f8\u5173\u8bf4\u660e\u5982\u4e0b\uff1a\n\n- **\u7f13\u5b58\u7684\u5de5\u4f5c\u539f\u7406**\uff1a\n  - \u53f3\u8868\u7684\u6bcf\u4e2a\u67e5\u8be2\u7531 `JOIN ON` \u6761\u4ef6\u5b9a\u4e49\u3002\n  - \u540c\u4e00\u7ec4 `JOIN ON` \u6761\u4ef6\u5728\u591a\u6b21\u67e5\u8be2\u4e2d\u91cd\u590d\u65f6\uff0c\u7ed3\u679c\u4f1a\u88ab\u7f13\u5b58\u5e76\u91cd\u7528\u3002\n  - \u907f\u514d\u91cd\u590d\u67e5\u8be2\uff0c\u52a0\u5feb\u540e\u7eed\u8fde\u63a5\u64cd\u4f5c\u7684\u901f\u5ea6\u3002\n\n- **\u914d\u7f6e\u7f13\u5b58\u5927\u5c0f**\uff1a\n  - \u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6 `searchd` \u90e8\u5206\u901a\u8fc7 [join_cache_size](../Server_settings/Searchd.md#join_cache_size) \u9009\u9879\u8bbe\u7f6e\u8fde\u63a5\u7f13\u5b58\u5927\u5c0f\u3002\n  - \u9ed8\u8ba4\u7f13\u5b58\u5927\u5c0f\u4e3a `20MB`\uff0c\u53ef\u6839\u636e\u5de5\u4f5c\u8d1f\u8f7d\u548c\u53ef\u7528\u5185\u5b58\u8c03\u6574\u3002\n  - \u8bbe\u7f6e `join_cache_size=0` \u53ef\u7981\u7528\u7f13\u5b58\u3002\n\n- **\u5185\u5b58\u8003\u8651**\uff1a\n  - \u6bcf\u4e2a\u7ebf\u7a0b\u7ef4\u62a4\u81ea\u5df1\u7684\u7f13\u5b58\uff0c\u56e0\u6b64\u603b\u5185\u5b58\u4f7f\u7528\u91cf\u53d6\u51b3\u4e8e\u7ebf\u7a0b\u6570\u548c\u7f13\u5b58\u5927\u5c0f\u3002\n  - \u8bf7\u786e\u4fdd\u670d\u52a1\u5668\u6709\u8db3\u591f\u5185\u5b58\u4ee5\u6ee1\u8db3\u7f13\u5b58\u9700\u6c42\uff0c\u5c24\u5176\u662f\u5728\u9ad8\u5e76\u53d1\u73af\u5883\u4e0b\u3002\n\n## \u8fde\u63a5\u5206\u5e03\u5f0f\u8868\n\n\u4ec5\u5305\u542b\u672c\u5730\u8868\u7684\u5206\u5e03\u5f0f\u8868\u652f\u6301\u4f5c\u4e3a\u8fde\u63a5\u67e5\u8be2\u7684\u5de6\u8868\u548c\u53f3\u8868\u3002\u4f46\u662f\u5305\u542b\u8fdc\u7a0b\u8868\u7684\u5206\u5e03\u5f0f\u8868\u76ee\u524d\u4e0d\u652f\u6301\u3002\n\n## \u6ce8\u610f\u4e8b\u9879\u548c\u6700\u4f73\u5b9e\u8df5\n\n\u4f7f\u7528 Manticore Search \u4e2d\u7684 JOIN \u65f6\uff0c\u8bf7\u6ce8\u610f\u4ee5\u4e0b\u51e0\u70b9\uff1a\n\n1. **\u5b57\u6bb5\u9009\u62e9**\uff1a\u8fde\u63a5\u65f6\u4ece\u4e24\u4e2a\u8868\u9009\u62e9\u5b57\u6bb5\uff0c\u4e0d\u8981\u4e3a\u5de6\u8868\u5b57\u6bb5\u52a0\u524d\u7f00\uff0c\u4f46\u8981\u4e3a\u53f3\u8868\u5b57\u6bb5\u52a0\u524d\u7f00\u3002\u4f8b\u5982\uff1a\nCODE_BLOCK_33\n\n2. **JOIN \u6761\u4ef6**\uff1a\u52a1\u5fc5\u5728 JOIN \u6761\u4ef6\u4e2d\u660e\u786e\u6307\u5b9a\u8868\u540d\uff1a\nCODE_BLOCK_34\n\n3. **JOIN \u4e2d\u7684\u8868\u8fbe\u5f0f**\uff1a\u5f53\u4f7f\u7528\u7ed3\u5408\u4e24\u4e2a\u8fde\u63a5\u8868\u5b57\u6bb5\u7684\u8868\u8fbe\u5f0f\u65f6\uff0c\u4e3a\u8868\u8fbe\u5f0f\u7ed3\u679c\u521b\u5efa\u522b\u540d\uff1a\nCODE_BLOCK_35\n\n4. **\u5bf9\u522b\u540d\u8868\u8fbe\u5f0f\u7684\u8fc7\u6ee4**\uff1a\u65e0\u6cd5\u5728 WHERE \u5b50\u53e5\u4e2d\u5bf9\u5305\u542b\u4e24\u4e2a\u8868\u5b57\u6bb5\u7684\u8868\u8fbe\u5f0f\u4f7f\u7528\u522b\u540d\u3002\n\n5. **JSON \u5c5e\u6027**\uff1a\u8fde\u63a5\u65f6\u5bf9 JSON \u5c5e\u6027\uff0c\u9700\u8981\u663e\u5f0f\u5c06\u503c\u8f6c\u6362\u4e3a\u9002\u5f53\u7c7b\u578b\uff1a\nCODE_BLOCK_36\n\n6. **NULL \u5904\u7406**\uff1a\u53ef\u4ee5\u5bf9\u8fde\u63a5\u5b57\u6bb5\u4f7f\u7528 IS NULL \u548c IS NOT NULL \u6761\u4ef6\uff1a\nCODE_BLOCK_37\n\n7. **\u5728 MVA \u4e2d\u4f7f\u7528 ANY**\uff1a\u4f7f\u7528 JOIN \u7ed3\u5408\u591a\u503c\u5c5e\u6027\u65f6\uff0c\u4f7f\u7528 `ANY()` \u51fd\u6570\u9700\u7ed9\u8fde\u63a5\u8868\u7684\u591a\u503c\u5c5e\u6027\u8d77\u522b\u540d\uff1a\nCODE_BLOCK_38\n\n\u9075\u5faa\u8fd9\u4e9b\u6307\u5357\uff0c\u60a8\u53ef\u4ee5\u6709\u6548\u5229\u7528 Manticore Search \u4e2d\u7684 JOIN \u6765\u7ec4\u5408\u591a\u4e2a\u7d22\u5f15\u4e2d\u7684\u6570\u636e\uff0c\u6267\u884c\u590d\u6742\u67e5\u8be2\u3002\n\n<!-- proofread -->",
            "russian": "\u042d\u0442\u043e\u0442 \u0437\u0430\u043f\u0440\u043e\u0441 \u0434\u0435\u043c\u043e\u043d\u0441\u0442\u0440\u0438\u0440\u0443\u0435\u0442 \u043f\u043e\u043b\u043d\u043e\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0439 \u043f\u043e\u0438\u0441\u043a \u043e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u043f\u043e \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u043c `customers` \u0438 `orders`, \u0432 \u0441\u043e\u0447\u0435\u0442\u0430\u043d\u0438\u0438 \u0441 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0435\u0439 \u043f\u043e \u0434\u0438\u0430\u043f\u0430\u0437\u043e\u043d\u0443 \u0438 \u0444\u0430\u0441\u0435\u0442\u043e\u0447\u043d\u044b\u043c \u043f\u043e\u0438\u0441\u043a\u043e\u043c. \u041e\u043d \u0438\u0449\u0435\u0442 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u0441 \u0438\u043c\u0435\u043d\u0430\u043c\u0438 \"Alice\" \u0438\u043b\u0438 \"Bob\" \u0438 \u0438\u0445 \u0437\u0430\u043a\u0430\u0437\u044b, \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0449\u0438\u0435 \"laptop\", \"phone\" \u0438\u043b\u0438 \"tablet\", \u0441 \u0446\u0435\u043d\u0430\u043c\u0438 \u0432\u044b\u0448\u0435 500 \u0434\u043e\u043b\u043b\u0430\u0440\u043e\u0432. \u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u0443\u043f\u043e\u0440\u044f\u0434\u043e\u0447\u0435\u043d\u044b \u043f\u043e ID \u0437\u0430\u043a\u0430\u0437\u0430 \u0438 \u0441\u0433\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u044b \u043f\u043e \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u0439\u043d\u044b\u043c \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u043c.\n\n<!-- request SQL -->\nCODE_BLOCK_25\n\n<!-- request JSON -->\nCODE_BLOCK_26\n\n<!-- response SQL -->\nCODE_BLOCK_27\n\n<!-- response JSON -->\n\nCODE_BLOCK_28\n\n\n<!-- end -->\n\n## \u041e\u043f\u0446\u0438\u0438 \u043f\u043e\u0438\u0441\u043a\u0430 \u0438 \u0432\u0435\u0441\u0430 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439\n\n\u041e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0435 \u043e\u043f\u0446\u0438\u0438 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u0437\u0430\u0434\u0430\u043d\u044b \u0434\u043b\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0441 JOIN: \u0434\u043b\u044f \u043b\u0435\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0438 \u0434\u043b\u044f \u043f\u0440\u0430\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b. \u0421\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441 \u2014 `OPTION(<table_name>)` \u0434\u043b\u044f SQL-\u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0438 \u043e\u0434\u0438\u043d \u0438\u043b\u0438 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043f\u043e\u0434\u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432 \u0432 `\"options\"` \u0434\u043b\u044f JSON-\u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432.\n\n\n<!-- example join_options -->\n\n\u0412\u043e\u0442 \u043f\u0440\u0438\u043c\u0435\u0440, \u043a\u0430\u043a \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0440\u0430\u0437\u043d\u044b\u0435 \u0432\u0435\u0441\u0430 \u043f\u043e\u043b\u0435\u0439 \u0434\u043b\u044f \u043f\u043e\u043b\u043d\u043e\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u0433\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043f\u043e \u043f\u0440\u0430\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435. \u0427\u0442\u043e\u0431\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0432\u0435\u0441\u0430 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439 \u0447\u0435\u0440\u0435\u0437 SQL, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435 `<table_name>.weight()`.\n\u0412 JSON-\u0437\u0430\u043f\u0440\u043e\u0441\u0430\u0445 \u044d\u0442\u043e\u0442 \u0432\u0435\u0441 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d \u043a\u0430\u043a `<table_name>._score`.\n\n<!-- request SQL -->\nCODE_BLOCK_29\n\n<!-- request JSON -->\nCODE_BLOCK_30\n\n<!-- response SQL -->\n\nCODE_BLOCK_31\n\n<!-- response JSON -->\n\nCODE_BLOCK_32\n<!-- end -->\n\n## \u041f\u0430\u043a\u0435\u0442\u043d\u0430\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 JOIN\n\n\u041f\u0440\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0438 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439 \u0442\u0430\u0431\u043b\u0438\u0446, Manticore Search \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043f\u0430\u043a\u0435\u0442\u0430\u043c\u0438 \u0434\u043b\u044f \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0440\u0435\u0441\u0443\u0440\u0441\u043e\u0432. \u041f\u0440\u0438\u043d\u0446\u0438\u043f \u0440\u0430\u0431\u043e\u0442\u044b:\n\n- **\u041a\u0430\u043a \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043f\u0430\u043a\u0435\u0442\u043d\u0430\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430**:\n  - \u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0437\u0430\u043f\u0440\u043e\u0441 \u043a \u043b\u0435\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435, \u0438 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043d\u0430\u043a\u0430\u043f\u043b\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u0432 \u043f\u0430\u043a\u0435\u0442\u0435.\n  - \u042d\u0442\u043e\u0442 \u043f\u0430\u043a\u0435\u0442 \u0437\u0430\u0442\u0435\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043a\u0430\u043a \u0432\u0445\u043e\u0434\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043a \u043f\u0440\u0430\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u043a\u0430\u043a \u0435\u0434\u0438\u043d\u0430\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f.\n  - \u0422\u0430\u043a\u043e\u0439 \u043f\u043e\u0434\u0445\u043e\u0434 \u043c\u0438\u043d\u0438\u043c\u0438\u0437\u0438\u0440\u0443\u0435\u0442 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u043a \u043f\u0440\u0430\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435, \u0443\u043b\u0443\u0447\u0448\u0430\u044f \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c.\n\n- **\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0440\u0430\u0437\u043c\u0435\u0440\u0430 \u043f\u0430\u043a\u0435\u0442\u0430**:\n  - \u0420\u0430\u0437\u043c\u0435\u0440 \u043f\u0430\u043a\u0435\u0442\u0430 \u043c\u043e\u0436\u043d\u043e \u0440\u0435\u0433\u0443\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043e\u043f\u0446\u0438\u0438 \u043f\u043e\u0438\u0441\u043a\u0430 `join_batch_size`.\n  - \u0422\u0430\u043a\u0436\u0435 \u043e\u043d \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0432 \u0440\u0430\u0437\u0434\u0435\u043b\u0435 `searchd` \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430 ([\u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435](../Server_settings/Searchd.md#join_batch_size)).\n  - \u0420\u0430\u0437\u043c\u0435\u0440 \u043f\u0430\u043a\u0435\u0442\u0430 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0440\u0430\u0432\u0435\u043d `1000`, \u043d\u043e \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c \u0438\u043b\u0438 \u0443\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u044c \u0435\u0433\u043e \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0437\u0430\u0434\u0430\u0447\u0438.\n  - \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 `join_batch_size=0` \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u043e\u0442\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u043f\u0430\u043a\u0435\u0442\u043d\u0443\u044e \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443, \u0447\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u043e\u043b\u0435\u0437\u043d\u043e \u043f\u0440\u0438 \u043e\u0442\u043b\u0430\u0434\u043a\u0435 \u0438\u043b\u0438 \u0432 \u0441\u043f\u0435\u0446\u0438\u0444\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u044f\u0445.\n\n- **\u0421\u043e\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u043f\u043e \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438**:\n  - \u0411\u043e\u043b\u044c\u0448\u0438\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 \u043f\u0430\u043a\u0435\u0442\u0430 \u043c\u043e\u0436\u0435\u0442 \u0443\u043b\u0443\u0447\u0448\u0438\u0442\u044c \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0437\u0430 \u0441\u0447\u0435\u0442 \u0441\u043d\u0438\u0436\u0435\u043d\u0438\u044f \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u043a \u043f\u0440\u0430\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435.\n  - \u041e\u0434\u043d\u0430\u043a\u043e \u0431\u043e\u043b\u044c\u0448\u0438\u0435 \u043f\u0430\u043a\u0435\u0442\u044b \u043c\u043e\u0433\u0443\u0442 \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u044f\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u043f\u0430\u043c\u044f\u0442\u0438, \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e \u043f\u0440\u0438 \u0441\u043b\u043e\u0436\u043d\u044b\u0445 \u0437\u0430\u043f\u0440\u043e\u0441\u0430\u0445 \u0438\u043b\u0438 \u0431\u043e\u043b\u044c\u0448\u0438\u0445 \u0434\u0430\u043d\u043d\u044b\u0445.\n  - \u042d\u043a\u0441\u043f\u0435\u0440\u0438\u043c\u0435\u043d\u0442\u0438\u0440\u0443\u0439\u0442\u0435 \u0441 \u0440\u0430\u0437\u043d\u044b\u043c\u0438 \u0440\u0430\u0437\u043c\u0435\u0440\u0430\u043c\u0438 \u043f\u0430\u043a\u0435\u0442\u043e\u0432, \u0447\u0442\u043e\u0431\u044b \u043d\u0430\u0439\u0442\u0438 \u043e\u043f\u0442\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0431\u0430\u043b\u0430\u043d\u0441 \u043c\u0435\u0436\u0434\u0443 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c\u044e \u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0440\u0435\u0441\u0443\u0440\u0441\u043e\u0432.\n\n## \u041a\u044d\u0448\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 JOIN\n\n\u0414\u043b\u044f \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0439 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f Manticore Search \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 \u043c\u0435\u0445\u0430\u043d\u0438\u0437\u043c \u043a\u044d\u0448\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432, \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u043c\u044b\u0445 \u043f\u043e \u043f\u0440\u0430\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435. \u0412\u043e\u0442 \u0447\u0442\u043e \u0432\u0430\u0436\u043d\u043e \u0437\u043d\u0430\u0442\u044c:\n\n- **\u041a\u0430\u043a \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043a\u044d\u0448\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435**:\n  - \u041a\u0430\u0436\u0434\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441 \u043f\u043e \u043f\u0440\u0430\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442\u0441\u044f \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u043c\u0438 `JOIN ON`.\n  - \u0415\u0441\u043b\u0438 \u043e\u0434\u043d\u0438 \u0438 \u0442\u0435 \u0436\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f `JOIN ON` \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u044e\u0442\u0441\u044f \u0432 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0437\u0430\u043f\u0440\u043e\u0441\u0430\u0445, \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043a\u044d\u0448\u0438\u0440\u0443\u044e\u0442\u0441\u044f \u0438 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f.\n  - \u042d\u0442\u043e \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0438\u0437\u0431\u044b\u0442\u043e\u0447\u043d\u044b\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u0438 \u0443\u0441\u043a\u043e\u0440\u044f\u0435\u0442 \u043f\u043e\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f.\n\n- **\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0440\u0430\u0437\u043c\u0435\u0440\u0430 \u043a\u044d\u0448\u0430**:\n  - \u0420\u0430\u0437\u043c\u0435\u0440 \u043a\u044d\u0448\u0430 JOIN \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043e\u043f\u0446\u0438\u0438 [join_cache_size](../Server_settings/Searchd.md#join_cache_size) \u0432 \u0440\u0430\u0437\u0434\u0435\u043b\u0435 `searchd` \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430.\n  - \u0420\u0430\u0437\u043c\u0435\u0440 \u043a\u044d\u0448\u0430 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u2014 `20MB`, \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0435\u0433\u043e \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0438 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0439 \u043f\u0430\u043c\u044f\u0442\u0438.\n  - \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 `join_cache_size=0` \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u043e\u0442\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u043a\u044d\u0448\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435.\n\n- **\u041e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u043f\u0430\u043c\u044f\u0442\u0438**:\n  - \u041a\u0430\u0436\u0434\u044b\u0439 \u043f\u043e\u0442\u043e\u043a \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u043a\u044d\u0448, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u043e\u0431\u0449\u0438\u0439 \u0440\u0430\u0441\u0445\u043e\u0434 \u043f\u0430\u043c\u044f\u0442\u0438 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u043f\u043e\u0442\u043e\u043a\u043e\u0432 \u0438 \u0440\u0430\u0437\u043c\u0435\u0440\u0430 \u043a\u044d\u0448\u0430.\n  - \u0423\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044c, \u0447\u0442\u043e \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435 \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u043f\u0430\u043c\u044f\u0442\u0438 \u0434\u043b\u044f \u043a\u044d\u0448\u0430, \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e \u043f\u0440\u0438 \u0440\u0430\u0431\u043e\u0442\u0435 \u0432 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u0432\u044b\u0441\u043e\u043a\u043e\u0439 \u043a\u043e\u043d\u043a\u0443\u0440\u0435\u043d\u0446\u0438\u0438.\n\n## \u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u044b\u0445 \u0442\u0430\u0431\u043b\u0438\u0446\n\n\u0420\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u044b\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b, \u0441\u043e\u0441\u0442\u043e\u044f\u0449\u0438\u0435 \u0438\u0441\u043a\u043b\u044e\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0438\u0437 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0445 \u0442\u0430\u0431\u043b\u0438\u0446, \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u043a\u0430\u043a \u0441 \u043b\u0435\u0432\u043e\u0439, \u0442\u0430\u043a \u0438 \u0441 \u043f\u0440\u0430\u0432\u043e\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u044b \u0432 \u0437\u0430\u043f\u0440\u043e\u0441\u0430\u0445 \u0441 JOIN. \u0422\u0435\u043c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435, \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u044b\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b, \u0432\u043a\u043b\u044e\u0447\u0430\u044e\u0449\u0438\u0435 \u0443\u0434\u0430\u043b\u0451\u043d\u043d\u044b\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b, \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442\u0441\u044f.\n\n## \u041e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0438 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438 \u043f\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044e\n\n\u041f\u0440\u0438 \u0440\u0430\u0431\u043e\u0442\u0435 \u0441 JOIN \u0432 Manticore Search \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0439\u0442\u0435 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043c\u043e\u043c\u0435\u043d\u0442\u044b:\n\n1. **\u0412\u044b\u0431\u043e\u0440 \u043f\u043e\u043b\u0435\u0439**: \u041f\u0440\u0438 \u0432\u044b\u0431\u043e\u0440\u043a\u0435 \u043f\u043e\u043b\u0435\u0439 \u0438\u0437 \u0434\u0432\u0443\u0445 \u0442\u0430\u0431\u043b\u0438\u0446 \u0432 JOIN \u043d\u0435 \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u0438\u0440\u0443\u0439\u0442\u0435 \u043f\u043e\u043b\u044f \u043b\u0435\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b, \u043d\u043e \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u0438\u0440\u0443\u0439\u0442\u0435 \u043f\u043e\u043b\u044f \u043f\u0440\u0430\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440:\nCODE_BLOCK_33\n\n2. **\u0423\u0441\u043b\u043e\u0432\u0438\u044f JOIN**: \u0412\u0441\u0435\u0433\u0434\u0430 \u044f\u0432\u043d\u043e \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0439\u0442\u0435 \u0438\u043c\u0435\u043d\u0430 \u0442\u0430\u0431\u043b\u0438\u0446 \u0432 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 JOIN:\nCODE_BLOCK_34\n\n3. **\u0412\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0441 JOIN**: \u041f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0439, \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u044f\u044e\u0449\u0438\u0445 \u043f\u043e\u043b\u044f \u043e\u0431\u0435\u0438\u0445 \u0442\u0430\u0431\u043b\u0438\u0446, \u043f\u0440\u0438\u0441\u0432\u0430\u0438\u0432\u0430\u0439\u0442\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u043f\u0441\u0435\u0432\u0434\u043e\u043d\u0438\u043c:\nCODE_BLOCK_35\n\n4. **\u0424\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u043e \u0430\u043b\u0438\u0430\u0441\u0430\u043c \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0439**: \u041d\u0435\u043b\u044c\u0437\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043f\u0441\u0435\u0432\u0434\u043e\u043d\u0438\u043c\u044b \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0439, \u0432\u043a\u043b\u044e\u0447\u0430\u044e\u0449\u0438\u0445 \u043f\u043e\u043b\u044f \u0438\u0437 \u043e\u0431\u0435\u0438\u0445 \u0442\u0430\u0431\u043b\u0438\u0446, \u0432 WHERE.\n\n5. **JSON-\u0430\u0442\u0440\u0438\u0431\u0443\u0442\u044b**: \u041f\u0440\u0438 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0438 \u043f\u043e JSON-\u0430\u0442\u0440\u0438\u0431\u0443\u0442\u0430\u043c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u044f\u0432\u043d\u043e \u043f\u0440\u0438\u0432\u043e\u0434\u0438\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043a \u043d\u0443\u0436\u043d\u043e\u043c\u0443 \u0442\u0438\u043f\u0443:\nCODE_BLOCK_36\n\n6. **\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 NULL**: \u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0443\u0441\u043b\u043e\u0432\u0438\u044f IS NULL \u0438 IS NOT NULL \u043f\u043e \u043f\u043e\u043b\u044f\u043c \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f:\nCODE_BLOCK_37\n\n7. **\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 ANY \u0441 MVA**: \u041f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 `ANY()` \u0441 \u043c\u0443\u043b\u044c\u0442\u0438\u0437\u043d\u0430\u0447\u043d\u044b\u043c\u0438 \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u0430\u043c\u0438 \u0432 JOIN \u043f\u0440\u0438\u0441\u0432\u0430\u0438\u0432\u0430\u0439\u0442\u0435 \u043f\u0441\u0435\u0432\u0434\u043e\u043d\u0438\u043c \u043c\u0443\u043b\u044c\u0442\u0438\u0437\u043d\u0430\u0447\u043d\u043e\u043c\u0443 \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u0443 \u0438\u0437 \u0441\u043e\u0435\u0434\u0438\u043d\u0451\u043d\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b:\nCODE_BLOCK_38\n\n\u0421\u043b\u0435\u0434\u0443\u044f \u044d\u0442\u0438\u043c \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u044f\u043c, \u0432\u044b \u0441\u043c\u043e\u0436\u0435\u0442\u0435 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c JOIN \u0432 Manticore Search \u0434\u043b\u044f \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u0438\u0437 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0438\u043d\u0434\u0435\u043a\u0441\u043e\u0432 \u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0441\u043b\u043e\u0436\u043d\u044b\u0445 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432.\n\n<!-- proofread -->"
        },
        "is_code_or_comment": false,
        "model": "openai:gpt-4.1-mini",
        "updated_at": 1766339809
    },
    "95c046b272482bf5b89fe0458bc1be58c98bb8fb011e9000ed4c8eab1675a41f": {
        "original": "# Joining tables\n\nTable joins in Manticore Search enable you to combine documents from two tables by matching related columns. This functionality allows for more complex queries and enhanced data retrieval across multiple tables.\n\n## General syntax\n\n### SQL\n\nCODE_BLOCK_0\n\nFor more information on select options, refer to the [SELECT](../Searching/Intro.md#General-syntax) section.\n\n<!--example join_sql_json_type -->\n\nWhen joining by a value from a JSON attribute, you need to explicitly specify the value's type using the `int()` or `string()` function.\n\n<!-- request String JSON attribute -->\nCODE_BLOCK_1\n\n<!-- request Int JSON attribute -->\nCODE_BLOCK_2\n\n<!-- end -->\n\n### JSON\n\nCODE_BLOCK_3\nNote, there is the `type` field in the `left` operand section which you should use when joining two tables using json attributes. The allowed values are `string` and `int`.\n\n## Types of joins\n\nManticore Search supports two types of joins:\n\n<!-- example inner_basic -->\n\n1. **INNER JOIN**: Returns only the rows where there is a match in both tables. For example, the query performs an INNER JOIN between the `orders` and `customers` tables, including only the orders that have matching customers.\n\n<!-- request SQL -->\nCODE_BLOCK_4\n\n<!-- request JSON -->\nCODE_BLOCK_5\n\n<!-- response SQL -->\n\nCODE_BLOCK_6\n\n<!-- response JSON -->\n\nCODE_BLOCK_7\n<!-- end -->\n\n<!-- example left_basic -->\n\n2. **LEFT JOIN**: Returns all rows from the left table and the matched rows from the right table. If there is no match, NULL values are returned for the right table's columns. For example, this query retrieves all customers along with their corresponding orders using a LEFT JOIN. If no corresponding order exists, NULL values will appear. The results are sorted by the customer's email, and only the customer's name and the order quantity are selected.\n\n<!-- request SQL -->\nCODE_BLOCK_8\n\n<!-- request JSON -->\nCODE_BLOCK_9\n\n<!-- response SQL -->\nCODE_BLOCK_10\n\n<!-- response JSON -->\n\nCODE_BLOCK_11\n\n<!-- end -->\n\n## Full-text matching across joined tables\n\nOne of the powerful features of table joins in Manticore Search is the ability to perform full-text searches on both the left and right tables simultaneously. This allows you to create complex queries that filter based on text content in multiple tables.\n\n<!-- example fulltext_basic -->\n\nYou can use separate `MATCH()` functions for each table in your JOIN query. The query filters results based on text content in both tables.\n\n<!-- request SQL -->\nCODE_BLOCK_12\n\n<!-- request JSON -->\nCODE_BLOCK_13\n\n<!-- response SQL -->\n\nCODE_BLOCK_14\n\n<!-- response JSON -->\n\nCODE_BLOCK_15\n\n<!-- end -->\n\n### JSON query structure for joins\n\nIn JSON API queries, table-specific full-text matching is structured differently than SQL:\n\n<!-- example fulltext_json_structure -->\n\n**Main table query**: The `\"query\"` field at the root level applies to the main table (specified in `\"table\"`).\n\n**Joined table query**: Each join definition can include its own `\"query\"` field that applies specifically to that joined table.\n\n<!-- request JSON -->\nCODE_BLOCK_16\n\n<!-- response JSON -->\n\nCODE_BLOCK_17\n\n<!-- end -->\n\n### Understanding query behavior in JOIN operations\n\n<!-- example fulltext_json_behavior -->\n\n**1. Query on main table only**: Returns all matching rows from the main table. For unmatched joined records (LEFT JOIN), SQL returns NULL values while JSON API returns default values (0 for numbers, empty strings for text).\n\n<!-- request SQL -->\nCODE_BLOCK_18\n\n<!-- response SQL -->\n\nCODE_BLOCK_19\n\n<!-- request JSON -->\nCODE_BLOCK_20\n\n<!-- response JSON -->\n\nCODE_BLOCK_21\n<!--end -->\n\n<!-- example fulltext_json_behavior_2 -->\n**2. Query on joined table acts as filter**: When a joined table has a query, only records matching both the join condition AND the query condition are returned.\n\n<!-- request JSON -->\nCODE_BLOCK_22\n\n<!-- response JSON -->\n\nCODE_BLOCK_23\n<!-- end -->\n\n**3. JOIN type affects filtering**: INNER JOIN requires both join and query conditions to be satisfied, while LEFT JOIN returns matching left table rows even when right table conditions fail.\n\n\n### Important considerations for full-text matching in JOINs\n\nWhen using full-text matching with joins, keep these points in mind:\n\n1. **Table-specific matching**: \n   - **SQL**: Each `MATCH()` function should specify which table to search in: `MATCH('term', table_name)`\n   - **JSON**: Use the root-level `\"query\"` for the main table and `\"query\"` within each join definition for joined tables\n\n2. **Query syntax flexibility**: JSON API supports both `\"query_string\"` and `\"match\"` syntaxes for full-text queries\n\n3. **Performance implications**: Full-text matching on both tables may impact query performance, especially with large datasets. Consider using appropriate indexes and batch sizes.\n\n4. **NULL/default value handling**: With LEFT JOIN, if there's no matching record in the right table, the query optimizer decides whether to evaluate full-text conditions or filtering conditions first based on performance. SQL returns NULL values while JSON API returns default values (0 for numbers, empty strings for text).\n\n5. **Filtering behavior**: Queries on joined tables act as filters - they restrict results to records that satisfy both join and query conditions.\n\n6. **Full-text operator support**: All [full-text operators](../Searching/Full_text_matching/Operators.md) are supported in JOIN queries, including phrase, proximity, field search, NEAR, quorum matching, and advanced operators.\n\n7. **Score calculation**: Each table maintains its own relevance score, accessible via `table_name.weight()` in SQL or `table_name._score` in JSON responses.\n\n## Example: Complex JOIN with faceting\n\nBuilding on the previous examples, let's explore a more advanced scenario where we combine table joins with faceting and full-text matching across multiple tables. This demonstrates the full power of Manticore's JOIN capabilities with complex filtering and aggregation.\n\n<details>\n\nInit queries for the following example:\n\nCODE_BLOCK_24\n\n</details>\n\n<!-- example basic_complex -->",
        "translations": {
            "chinese": "# \u8fde\u63a5\u8868\n\nManticore Search \u4e2d\u7684\u8868\u8fde\u63a5\u4f7f\u60a8\u80fd\u591f\u901a\u8fc7\u5339\u914d\u76f8\u5173\u5217\u6765\u5408\u5e76\u4e24\u4e2a\u8868\u4e2d\u7684\u6587\u6863\u3002\u6b64\u529f\u80fd\u5141\u8bb8\u66f4\u590d\u6742\u7684\u67e5\u8be2\u548c\u8de8\u591a\u4e2a\u8868\u7684\u589e\u5f3a\u6570\u636e\u68c0\u7d22\u3002\n\n## \u4e00\u822c\u8bed\u6cd5\n\n### SQL\n\nCODE_BLOCK_0\n\n\u6709\u5173\u9009\u62e9\u9009\u9879\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605[SELECT](../Searching/Intro.md#General-syntax)\u90e8\u5206\u3002\n\n<!--example join_sql_json_type -->\n\n\u5f53\u901a\u8fc7 JSON \u5c5e\u6027\u4e2d\u7684\u503c\u8fdb\u884c\u8fde\u63a5\u65f6\uff0c\u60a8\u9700\u8981\u4f7f\u7528 `int()` \u6216 `string()` \u51fd\u6570\u663e\u5f0f\u6307\u5b9a\u8be5\u503c\u7684\u7c7b\u578b\u3002\n\n<!-- request String JSON attribute -->\nCODE_BLOCK_1\n\n<!-- request Int JSON attribute -->\nCODE_BLOCK_2\n\n<!-- end -->\n\n### JSON\n\nCODE_BLOCK_3\n\u6ce8\u610f\uff0c\u5728 `left` \u64cd\u4f5c\u6570\u90e8\u5206\u6709\u4e00\u4e2a `type` \u5b57\u6bb5\uff0c\u5f53\u60a8\u4f7f\u7528 JSON \u5c5e\u6027\u8fde\u63a5\u4e24\u4e2a\u8868\u65f6\u5e94\u4f7f\u7528\u5b83\u3002\u5141\u8bb8\u7684\u503c\u4e3a `string` \u548c `int`\u3002\n\n## \u8fde\u63a5\u7c7b\u578b\n\nManticore Search \u652f\u6301\u4e24\u79cd\u8fde\u63a5\u7c7b\u578b\uff1a\n\n<!-- example inner_basic -->\n\n1. **INNER JOIN**\uff1a\u4ec5\u8fd4\u56de\u5728\u4e24\u4e2a\u8868\u4e2d\u90fd\u6709\u5339\u914d\u7684\u884c\u3002\u4f8b\u5982\uff0c\u8be5\u67e5\u8be2\u6267\u884c `orders` \u548c `customers` \u8868\u4e4b\u95f4\u7684 INNER JOIN\uff0c\u53ea\u5305\u542b\u5177\u6709\u5339\u914d\u5ba2\u6237\u7684\u8ba2\u5355\u3002\n\n<!-- request SQL -->\nCODE_BLOCK_4\n\n<!-- request JSON -->\nCODE_BLOCK_5\n\n<!-- response SQL -->\n\nCODE_BLOCK_6\n\n<!-- response JSON -->\n\nCODE_BLOCK_7\n<!-- end -->\n\n<!-- example left_basic -->\n\n2. **LEFT JOIN**\uff1a\u8fd4\u56de\u5de6\u8868\u7684\u6240\u6709\u884c\u4ee5\u53ca\u53f3\u8868\u4e2d\u5339\u914d\u7684\u884c\u3002\u5982\u679c\u6ca1\u6709\u5339\u914d\uff0c\u5219\u53f3\u8868\u7684\u5217\u8fd4\u56de NULL \u503c\u3002\u4f8b\u5982\uff0c\u6b64\u67e5\u8be2\u4f7f\u7528 LEFT JOIN \u68c0\u7d22\u6240\u6709\u5ba2\u6237\u53ca\u5176\u76f8\u5e94\u7684\u8ba2\u5355\u3002\u5982\u679c\u6ca1\u6709\u76f8\u5e94\u7684\u8ba2\u5355\uff0c\u5219\u663e\u793a NULL \u503c\u3002\u7ed3\u679c\u6309\u5ba2\u6237\u7684\u7535\u5b50\u90ae\u4ef6\u6392\u5e8f\uff0c\u53ea\u9009\u62e9\u5ba2\u6237\u7684\u59d3\u540d\u548c\u8ba2\u5355\u6570\u91cf\u3002\n\n<!-- request SQL -->\nCODE_BLOCK_8\n\n<!-- request JSON -->\nCODE_BLOCK_9\n\n<!-- response SQL -->\nCODE_BLOCK_10\n\n<!-- response JSON -->\n\nCODE_BLOCK_11\n\n<!-- end -->\n\n## \u8de8\u8fde\u63a5\u8868\u7684\u5168\u6587\u5339\u914d\n\nManticore Search \u4e2d\u8868\u8fde\u63a5\u7684\u5f3a\u5927\u529f\u80fd\u4e4b\u4e00\u662f\u80fd\u591f\u540c\u65f6\u5bf9\u5de6\u53f3\u8868\u6267\u884c\u5168\u6587\u641c\u7d22\u3002\u8fd9\u5141\u8bb8\u60a8\u521b\u5efa\u57fa\u4e8e\u591a\u4e2a\u8868\u4e2d\u6587\u672c\u5185\u5bb9\u8fc7\u6ee4\u7684\u590d\u6742\u67e5\u8be2\u3002\n\n<!-- example fulltext_basic -->\n\n\u60a8\u53ef\u4ee5\u4e3a JOIN \u67e5\u8be2\u4e2d\u7684\u6bcf\u4e2a\u8868\u4f7f\u7528\u72ec\u7acb\u7684 `MATCH()` \u51fd\u6570\u3002\u67e5\u8be2\u6839\u636e\u4e24\u4e2a\u8868\u4e2d\u7684\u6587\u672c\u5185\u5bb9\u8fc7\u6ee4\u7ed3\u679c\u3002\n\n<!-- request SQL -->\nCODE_BLOCK_12\n\n<!-- request JSON -->\nCODE_BLOCK_13\n\n<!-- response SQL -->\n\nCODE_BLOCK_14\n\n<!-- response JSON -->\n\nCODE_BLOCK_15\n\n<!-- end -->\n\n### \u8fde\u63a5\u7684 JSON \u67e5\u8be2\u7ed3\u6784\n\n\u5728 JSON API \u67e5\u8be2\u4e2d\uff0c\u8868\u7279\u5b9a\u7684\u5168\u6587\u5339\u914d\u7ed3\u6784\u4e0e SQL \u4e0d\u540c\uff1a\n\n<!-- example fulltext_json_structure -->\n\n**\u4e3b\u8868\u67e5\u8be2**\uff1a\u6839\u7ea7 `\"query\"` \u5b57\u6bb5\u9002\u7528\u4e8e\u4e3b\u8868\uff08\u7531 `\"table\"` \u6307\u5b9a\uff09\u3002\n\n**\u8fde\u63a5\u8868\u67e5\u8be2**\uff1a\u6bcf\u4e2a\u8fde\u63a5\u5b9a\u4e49\u53ef\u4ee5\u5305\u542b\u5176\u4e13\u95e8\u9002\u7528\u4e8e\u8be5\u8fde\u63a5\u8868\u7684 `\"query\"` \u5b57\u6bb5\u3002\n\n<!-- request JSON -->\nCODE_BLOCK_16\n\n<!-- response JSON -->\n\nCODE_BLOCK_17\n\n<!-- end -->\n\n### \u7406\u89e3 JOIN \u64cd\u4f5c\u4e2d\u7684\u67e5\u8be2\u884c\u4e3a\n\n<!-- example fulltext_json_behavior -->\n\n**1. \u4ec5\u4e3b\u8868\u67e5\u8be2**\uff1a\u8fd4\u56de\u4e3b\u8868\u4e2d\u6240\u6709\u5339\u914d\u7684\u884c\u3002\u5bf9\u4e8e\u672a\u5339\u914d\u7684\u8fde\u63a5\u8bb0\u5f55\uff08LEFT JOIN\uff09\uff0cSQL \u8fd4\u56de NULL \u503c\uff0c\u800c JSON API \u8fd4\u56de\u9ed8\u8ba4\u503c\uff08\u6570\u5b57\u4e3a 0\uff0c\u6587\u672c\u4e3a\u7a7a\u5b57\u7b26\u4e32\uff09\u3002\n\n<!-- request SQL -->\nCODE_BLOCK_18\n\n<!-- response SQL -->\n\nCODE_BLOCK_19\n\n<!-- request JSON -->\nCODE_BLOCK_20\n\n<!-- response JSON -->\n\nCODE_BLOCK_21\n<!--end -->\n\n<!-- example fulltext_json_behavior_2 -->\n**2. \u8fde\u63a5\u8868\u4e0a\u7684\u67e5\u8be2\u4f5c\u4e3a\u8fc7\u6ee4\u5668**\uff1a\u5f53\u8fde\u63a5\u8868\u6709\u67e5\u8be2\u65f6\uff0c\u4ec5\u8fd4\u56de\u540c\u65f6\u6ee1\u8db3\u8fde\u63a5\u6761\u4ef6\u548c\u67e5\u8be2\u6761\u4ef6\u7684\u8bb0\u5f55\u3002\n\n<!-- request JSON -->\nCODE_BLOCK_22\n\n<!-- response JSON -->\n\nCODE_BLOCK_23\n<!-- end -->\n\n**3. \u8fde\u63a5\u7c7b\u578b\u5f71\u54cd\u8fc7\u6ee4**\uff1aINNER JOIN \u9700\u8981\u540c\u65f6\u6ee1\u8db3\u8fde\u63a5\u548c\u67e5\u8be2\u6761\u4ef6\uff0c\u800c LEFT JOIN \u5373\u4f7f\u53f3\u8868\u6761\u4ef6\u672a\u6ee1\u8db3\uff0c\u4e5f\u8fd4\u56de\u5339\u914d\u7684\u5de6\u8868\u884c\u3002\n\n### JOIN \u4e2d\u5168\u6587\u5339\u914d\u7684\u91cd\u8981\u6ce8\u610f\u4e8b\u9879\n\n\u4f7f\u7528\u5168\u6587\u5339\u914d\u4e0e\u8fde\u63a5\u65f6\uff0c\u8bf7\u6ce8\u610f\u4ee5\u4e0b\u51e0\u70b9\uff1a\n\n1. **\u8868\u7279\u5b9a\u5339\u914d**\uff1a\n   - **SQL**\uff1a\u6bcf\u4e2a `MATCH()` \u51fd\u6570\u5e94\u6307\u5b9a\u8981\u5728\u54ea\u4e2a\u8868\u4e2d\u641c\u7d22\uff1a`MATCH('term', table_name)`\n   - **JSON**\uff1a\u4e3b\u8868\u4f7f\u7528\u6839\u7ea7 `\"query\"`\uff0c\u8fde\u63a5\u8868\u4f7f\u7528\u5404\u8fde\u63a5\u5b9a\u4e49\u5185\u7684 `\"query\"`\n\n2. **\u67e5\u8be2\u8bed\u6cd5\u7075\u6d3b\u6027**\uff1aJSON API \u652f\u6301 `\"query_string\"` \u548c `\"match\"` \u4e24\u79cd\u5168\u6587\u67e5\u8be2\u8bed\u6cd5\n\n3. **\u6027\u80fd\u5f71\u54cd**\uff1a\u5728\u4e24\u4e2a\u8868\u4e0a\u8fdb\u884c\u5168\u6587\u5339\u914d\u53ef\u80fd\u5f71\u54cd\u67e5\u8be2\u6027\u80fd\uff0c\u5c24\u5176\u662f\u6570\u636e\u96c6\u8f83\u5927\u65f6\u3002\u5efa\u8bae\u4f7f\u7528\u5408\u9002\u7684\u7d22\u5f15\u548c\u6279\u5904\u7406\u5927\u5c0f\u3002\n\n4. **NULL/\u9ed8\u8ba4\u503c\u5904\u7406**\uff1a\u4f7f\u7528 LEFT JOIN \u65f6\uff0c\u5982\u679c\u53f3\u8868\u65e0\u5339\u914d\u8bb0\u5f55\uff0c\u67e5\u8be2\u4f18\u5316\u5668\u5c06\u6839\u636e\u6027\u80fd\u51b3\u5b9a\u5148\u8bc4\u4f30\u5168\u6587\u6761\u4ef6\u8fd8\u662f\u8fc7\u6ee4\u6761\u4ef6\u3002SQL \u8fd4\u56de NULL \u503c\uff0cJSON API \u8fd4\u56de\u9ed8\u8ba4\u503c\uff08\u6570\u5b57\u4e3a 0\uff0c\u6587\u672c\u4e3a\u7a7a\u5b57\u7b26\u4e32\uff09\u3002\n\n5. **\u8fc7\u6ee4\u884c\u4e3a**\uff1a\u8fde\u63a5\u8868\u4e0a\u7684\u67e5\u8be2\u4f5c\u4e3a\u8fc7\u6ee4\u5668\u2014\u2014\u9650\u5236\u7ed3\u679c\u4e3a\u6ee1\u8db3\u8fde\u63a5\u6761\u4ef6\u548c\u67e5\u8be2\u6761\u4ef6\u7684\u8bb0\u5f55\u3002\n\n6. **\u5168\u6587\u64cd\u4f5c\u7b26\u652f\u6301**\uff1aJOIN \u67e5\u8be2\u652f\u6301\u6240\u6709[\u5168\u6587\u64cd\u4f5c\u7b26](../Searching/Full_text_matching/Operators.md)\uff0c\u5305\u62ec\u77ed\u8bed\u3001\u90bb\u8fd1\u3001\u5b57\u6bb5\u641c\u7d22\u3001NEAR\u3001\u4ef2\u88c1\u5339\u914d\u548c\u9ad8\u7ea7\u64cd\u4f5c\u7b26\u3002\n\n7. **\u8bc4\u5206\u8ba1\u7b97**\uff1a\u6bcf\u4e2a\u8868\u7ef4\u62a4\u5176\u81ea\u5df1\u7684\u76f8\u5173\u6027\u8bc4\u5206\uff0cSQL \u901a\u8fc7 `table_name.weight()` \u8bbf\u95ee\uff0cJSON \u54cd\u5e94\u4e2d\u901a\u8fc7 `table_name._score` \u8bbf\u95ee\u3002\n\n## \u793a\u4f8b\uff1a\u5e26\u5206\u9762\u529f\u80fd\u7684\u590d\u6742 JOIN\n\n\u57fa\u4e8e\u4e4b\u524d\u7684\u793a\u4f8b\uff0c\u6211\u4eec\u6765\u770b\u4e00\u4e2a\u66f4\u9ad8\u7ea7\u7684\u573a\u666f\uff0c\u5c06\u8868\u8fde\u63a5\u4e0e\u5206\u9762\u548c\u8de8\u591a\u4e2a\u8868\u7684\u5168\u6587\u5339\u914d\u76f8\u7ed3\u5408\u3002\u8fd9\u5c55\u793a\u4e86 Manticore JOIN \u529f\u80fd\u5728\u590d\u6742\u8fc7\u6ee4\u548c\u805a\u5408\u4e2d\u7684\u5f3a\u5927\u80fd\u529b\u3002\n\n<details>\n\n\u4ee5\u4e0b\u793a\u4f8b\u7684\u521d\u59cb\u5316\u67e5\u8be2\uff1a\n\nCODE_BLOCK_24\n\n</details>\n\n<!-- example basic_complex -->",
            "russian": "# \u041e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\n\n\u041e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0442\u0430\u0431\u043b\u0438\u0446 \u0432 Manticore Search \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u044e\u0442 \u043a\u043e\u043c\u0431\u0438\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b \u0438\u0437 \u0434\u0432\u0443\u0445 \u0442\u0430\u0431\u043b\u0438\u0446, \u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u044f \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u0441\u0442\u043e\u043b\u0431\u0446\u044b. \u042d\u0442\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442 \u0431\u043e\u043b\u0435\u0435 \u0441\u043b\u043e\u0436\u043d\u044b\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u0438 \u0443\u043b\u0443\u0447\u0448\u0435\u043d\u043d\u044b\u0439 \u043f\u043e\u0438\u0441\u043a \u0434\u0430\u043d\u043d\u044b\u0445 \u0432 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u0445.\n\n## \u041e\u0431\u0449\u0438\u0439 \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441\n\n### SQL\n\nCODE_BLOCK_0\n\n\u0414\u043b\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u0445 select \u0441\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u0440\u0430\u0437\u0434\u0435\u043b [SELECT](../Searching/Intro.md#General-syntax).\n\n<!--example join_sql_json_type -->\n\n\u041f\u0440\u0438 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0438 \u043f\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044e \u0438\u0437 JSON-\u0430\u0442\u0440\u0438\u0431\u0443\u0442\u0430 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u044f\u0432\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0442\u0438\u043f \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u0444\u0443\u043d\u043a\u0446\u0438\u0438 `int()` \u0438\u043b\u0438 `string()`.\n\n<!-- request String JSON attribute -->\nCODE_BLOCK_1\n\n<!-- request Int JSON attribute -->\nCODE_BLOCK_2\n\n<!-- end -->\n\n### JSON\n\nCODE_BLOCK_3\n\u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435, \u0447\u0442\u043e \u0432 \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u043e\u043f\u0435\u0440\u0430\u043d\u0434\u0430 `left` \u0435\u0441\u0442\u044c \u043f\u043e\u043b\u0435 `type`, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u0438 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0438 \u0434\u0432\u0443\u0445 \u0442\u0430\u0431\u043b\u0438\u0446 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e JSON-\u0430\u0442\u0440\u0438\u0431\u0443\u0442\u043e\u0432. \u0420\u0430\u0437\u0440\u0435\u0448\u0451\u043d\u043d\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u2014 `string` \u0438 `int`.\n\n## \u0422\u0438\u043f\u044b \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439\n\nManticore Search \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0434\u0432\u0430 \u0442\u0438\u043f\u0430 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439:\n\n<!-- example inner_basic -->\n\n1. **INNER JOIN**: \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u0441\u0442\u0440\u043e\u043a\u0438, \u0433\u0434\u0435 \u0435\u0441\u0442\u044c \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0435 \u0432 \u043e\u0431\u0435\u0438\u0445 \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u0445. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0437\u0430\u043f\u0440\u043e\u0441 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 INNER JOIN \u043c\u0435\u0436\u0434\u0443 \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u043c\u0438 `orders` \u0438 `customers`, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u0435 \u0437\u0430\u043a\u0430\u0437\u044b, \u0434\u043b\u044f \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0435\u0441\u0442\u044c \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u044b.\n\n<!-- request SQL -->\nCODE_BLOCK_4\n\n<!-- request JSON -->\nCODE_BLOCK_5\n\n<!-- response SQL -->\n\nCODE_BLOCK_6\n\n<!-- response JSON -->\n\nCODE_BLOCK_7\n<!-- end -->\n\n<!-- example left_basic -->\n\n2. **LEFT JOIN**: \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0432\u0441\u0435 \u0441\u0442\u0440\u043e\u043a\u0438 \u0438\u0437 \u043b\u0435\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0438 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0435 \u0441\u0442\u0440\u043e\u043a\u0438 \u0438\u0437 \u043f\u0440\u0430\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b. \u0415\u0441\u043b\u0438 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u044f \u043d\u0435\u0442, \u0434\u043b\u044f \u0441\u0442\u043e\u043b\u0431\u0446\u043e\u0432 \u043f\u0440\u0430\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u044e\u0442\u0441\u044f NULL. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u044d\u0442\u043e\u0442 \u0437\u0430\u043f\u0440\u043e\u0441 \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 \u0432\u0441\u0435\u0445 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u0432\u043c\u0435\u0441\u0442\u0435 \u0441 \u0438\u0445 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u043c\u0438 \u0437\u0430\u043a\u0430\u0437\u0430\u043c\u0438 \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c LEFT JOIN. \u0415\u0441\u043b\u0438 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0433\u043e \u0437\u0430\u043a\u0430\u0437\u0430 \u043d\u0435\u0442, \u0431\u0443\u0434\u0443\u0442 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u044b \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f NULL. \u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u0441\u043e\u0440\u0442\u0438\u0440\u0443\u044e\u0442\u0441\u044f \u043f\u043e email \u043a\u043b\u0438\u0435\u043d\u0442\u0430, \u0430 \u0432\u044b\u0431\u0438\u0440\u0430\u044e\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u043c\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u0438 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043a\u0430\u0437\u0430.\n\n<!-- request SQL -->\nCODE_BLOCK_8\n\n<!-- request JSON -->\nCODE_BLOCK_9\n\n<!-- response SQL -->\nCODE_BLOCK_10\n\n<!-- response JSON -->\n\nCODE_BLOCK_11\n\n<!-- end -->\n\n## \u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043f\u043e\u043b\u043d\u043e\u043c\u0443 \u0442\u0435\u043a\u0441\u0442\u0443 \u0432 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0451\u043d\u043d\u044b\u0445 \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u0445\n\n\u041e\u0434\u043d\u043e\u0439 \u0438\u0437 \u043c\u043e\u0449\u043d\u044b\u0445 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0435\u0439 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439 \u0442\u0430\u0431\u043b\u0438\u0446 \u0432 Manticore Search \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u043f\u043e\u043b\u043d\u043e\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0435 \u043f\u043e\u0438\u0441\u043a\u0438 \u043e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u043f\u043e \u043b\u0435\u0432\u043e\u0439 \u0438 \u043f\u0440\u0430\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u043c. \u042d\u0442\u043e \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0441\u043b\u043e\u0436\u043d\u044b\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u0441 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0435\u0439 \u043f\u043e \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u043c\u0443 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u043c\u0443 \u0432 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u0445.\n\n<!-- example fulltext_basic -->\n\n\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 `MATCH()` \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0432 \u0432\u0430\u0448\u0435\u043c JOIN-\u0437\u0430\u043f\u0440\u043e\u0441\u0435. \u0417\u0430\u043f\u0440\u043e\u0441 \u0444\u0438\u043b\u044c\u0442\u0440\u0443\u0435\u0442 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u0433\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0433\u043e \u0432 \u043e\u0431\u0435\u0438\u0445 \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u0445.\n\n<!-- request SQL -->\nCODE_BLOCK_12\n\n<!-- request JSON -->\nCODE_BLOCK_13\n\n<!-- response SQL -->\n\nCODE_BLOCK_14\n\n<!-- response JSON -->\n\nCODE_BLOCK_15\n\n<!-- end -->\n\n### \u0421\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 JSON-\u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u0434\u043b\u044f \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439\n\n\u0412 \u0437\u0430\u043f\u0440\u043e\u0441\u0430\u0445 \u0447\u0435\u0440\u0435\u0437 JSON API \u043f\u043e\u043b\u043d\u043e\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0439 \u043f\u043e\u0438\u0441\u043a \u043f\u043e \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u043c \u0441\u0442\u0440\u043e\u0438\u0442\u0441\u044f \u0438\u043d\u0430\u0447\u0435, \u0447\u0435\u043c \u0432 SQL:\n\n<!-- example fulltext_json_structure -->\n\n**\u0417\u0430\u043f\u0440\u043e\u0441 \u043a \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435**: \u041f\u043e\u043b\u0435 `\"query\"` \u043d\u0430 \u043a\u043e\u0440\u043d\u0435\u0432\u043e\u043c \u0443\u0440\u043e\u0432\u043d\u0435 \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u043a \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 (\u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0439 \u0432 `\"table\"`).\n\n**\u0417\u0430\u043f\u0440\u043e\u0441 \u043a \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0451\u043d\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435**: \u041a\u0430\u0436\u0434\u043e\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u043c\u043e\u0436\u0435\u0442 \u0432\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0435 \u043f\u043e\u043b\u0435 `\"query\"`, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u043e \u043a \u044d\u0442\u043e\u0439 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0451\u043d\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435.\n\n<!-- request JSON -->\nCODE_BLOCK_16\n\n<!-- response JSON -->\n\nCODE_BLOCK_17\n\n<!-- end -->\n\n### \u041f\u043e\u043d\u0438\u043c\u0430\u043d\u0438\u0435 \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043f\u0440\u0438 JOIN-\u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f\u0445\n\n<!-- example fulltext_json_behavior -->\n\n**1. \u0417\u0430\u043f\u0440\u043e\u0441 \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u043e \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435**: \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0432\u0441\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0449\u0438\u0435 \u0441\u0442\u0440\u043e\u043a\u0438 \u0438\u0437 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b. \u0414\u043b\u044f \u043d\u0435\u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0445 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0451\u043d\u043d\u044b\u0445 \u0437\u0430\u043f\u0438\u0441\u0435\u0439 (LEFT JOIN) SQL \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 NULL, \u0430 JSON API \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e (0 \u0434\u043b\u044f \u0447\u0438\u0441\u0435\u043b, \u043f\u0443\u0441\u0442\u044b\u0435 \u0441\u0442\u0440\u043e\u043a\u0438 \u0434\u043b\u044f \u0442\u0435\u043a\u0441\u0442\u0430).\n\n<!-- request SQL -->\nCODE_BLOCK_18\n\n<!-- response SQL -->\n\nCODE_BLOCK_19\n\n<!-- request JSON -->\nCODE_BLOCK_20\n\n<!-- response JSON -->\n\nCODE_BLOCK_21\n<!--end -->\n\n<!-- example fulltext_json_behavior_2 -->\n**2. \u0417\u0430\u043f\u0440\u043e\u0441 \u043a \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0451\u043d\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0443\u0435\u0442 \u043a\u0430\u043a \u0444\u0438\u043b\u044c\u0442\u0440**: \u041a\u043e\u0433\u0434\u0430 \u0434\u043b\u044f \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0451\u043d\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0437\u0430\u0434\u0430\u043d \u0437\u0430\u043f\u0440\u043e\u0441, \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u044e\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u0437\u0430\u043f\u0438\u0441\u0438, \u0443\u0434\u043e\u0432\u043b\u0435\u0442\u0432\u043e\u0440\u044f\u044e\u0449\u0438\u0435 \u043a\u0430\u043a \u0443\u0441\u043b\u043e\u0432\u0438\u044e \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f, \u0442\u0430\u043a \u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u044e \u0437\u0430\u043f\u0440\u043e\u0441\u0430.\n\n<!-- request JSON -->\nCODE_BLOCK_22\n\n<!-- response JSON -->\n\nCODE_BLOCK_23\n<!-- end -->\n\n**3. \u0422\u0438\u043f JOIN \u0432\u043b\u0438\u044f\u0435\u0442 \u043d\u0430 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044e**: INNER JOIN \u0442\u0440\u0435\u0431\u0443\u0435\u0442 \u0443\u0434\u043e\u0432\u043b\u0435\u0442\u0432\u043e\u0440\u0435\u043d\u0438\u044f \u043a\u0430\u043a \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f, \u0442\u0430\u043a \u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u0430, \u0430 LEFT JOIN \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0449\u0438\u0435 \u0441\u0442\u0440\u043e\u043a\u0438 \u043b\u0435\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0434\u0430\u0436\u0435 \u043f\u0440\u0438 \u043d\u0435\u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u043f\u0440\u0430\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b.\n\n\n### \u0412\u0430\u0436\u043d\u044b\u0435 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438 \u043f\u0440\u0438 \u043f\u043e\u043b\u043d\u043e\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u043c \u043f\u043e\u0438\u0441\u043a\u0435 \u0432 JOIN\n\n\u041f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 \u043f\u043e\u043b\u043d\u043e\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u0438\u0441\u043a\u0430 \u0441 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f\u043c\u0438 \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0439\u0442\u0435 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043c\u043e\u043c\u0435\u043d\u0442\u044b:\n\n1. **\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u043c \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u043c**: \n   - **SQL**: \u041a\u0430\u0436\u0434\u0430\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u044f `MATCH()` \u0434\u043e\u043b\u0436\u043d\u0430 \u044f\u0432\u043d\u043e \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c, \u0432 \u043a\u0430\u043a\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 \u0438\u0441\u043a\u0430\u0442\u044c: `MATCH('term', table_name)`\n   - **JSON**: \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043a\u043e\u0440\u043d\u0435\u0432\u043e\u0435 `\"query\"` \u0434\u043b\u044f \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0438 `\"query\"` \u0432\u043d\u0443\u0442\u0440\u0438 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0434\u043b\u044f \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0451\u043d\u043d\u044b\u0445 \u0442\u0430\u0431\u043b\u0438\u0446\n\n2. **\u0413\u0438\u0431\u043a\u043e\u0441\u0442\u044c \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430**: JSON API \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u043a\u0430\u043a \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441 `\"query_string\"`, \u0442\u0430\u043a \u0438 `\"match\"` \u0434\u043b\u044f \u043f\u043e\u043b\u043d\u043e\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0445 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432\n\n3. **\u0412\u043b\u0438\u044f\u043d\u0438\u0435 \u043d\u0430 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c**: \u041f\u043e\u043b\u043d\u043e\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0439 \u043f\u043e\u0438\u0441\u043a \u0441\u0440\u0430\u0437\u0443 \u043f\u043e \u043e\u0431\u0435\u0438\u043c \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u043c \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u0432\u043b\u0438\u044f\u0442\u044c \u043d\u0430 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432, \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e \u043f\u0440\u0438 \u0431\u043e\u043b\u044c\u0448\u0438\u0445 \u043e\u0431\u044a\u0451\u043c\u0430\u0445 \u0434\u0430\u043d\u043d\u044b\u0445. \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0435 \u0438\u043d\u0434\u0435\u043a\u0441\u044b \u0438 \u0440\u0430\u0437\u043c\u0435\u0440\u044b \u043f\u0430\u043a\u0435\u0442\u043e\u0432.\n\n4. **\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 NULL/\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e**: \u041f\u0440\u0438 LEFT JOIN, \u0435\u0441\u043b\u0438 \u043d\u0435\u0442 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0439 \u0437\u0430\u043f\u0438\u0441\u0438 \u0432 \u043f\u0440\u0430\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435, \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0442\u043e\u0440 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u0440\u0435\u0448\u0430\u0435\u0442, \u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u043f\u043e\u043b\u043d\u043e\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0438\u043b\u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438 \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438. SQL \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 NULL, \u0430 JSON API \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e (0 \u0434\u043b\u044f \u0447\u0438\u0441\u0435\u043b, \u043f\u0443\u0441\u0442\u044b\u0435 \u0441\u0442\u0440\u043e\u043a\u0438 \u0434\u043b\u044f \u0442\u0435\u043a\u0441\u0442\u0430).\n\n5. **\u041f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438**: \u0417\u0430\u043f\u0440\u043e\u0441\u044b \u043a \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0451\u043d\u043d\u044b\u043c \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u043c \u0434\u0435\u0439\u0441\u0442\u0432\u0443\u044e\u0442 \u043a\u0430\u043a \u0444\u0438\u043b\u044c\u0442\u0440\u044b \u2014 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0438\u0432\u0430\u044e\u0442 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u0437\u0430\u043f\u0438\u0441\u044f\u043c\u0438, \u0443\u0434\u043e\u0432\u043b\u0435\u0442\u0432\u043e\u0440\u044f\u044e\u0449\u0438\u043c\u0438 \u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u043c \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f, \u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u043c \u0437\u0430\u043f\u0440\u043e\u0441\u0430.\n\n6. **\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430 \u043f\u043e\u043b\u043d\u043e\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0445 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u043e\u0432**: \u0412\u0441\u0435 [\u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u044b \u043f\u043e\u043b\u043d\u043e\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u0438\u0441\u043a\u0430](../Searching/Full_text_matching/Operators.md) \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u0432 JOIN-\u0437\u0430\u043f\u0440\u043e\u0441\u0430\u0445, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0444\u0440\u0430\u0437\u044b, \u0431\u043b\u0438\u0437\u043e\u0441\u0442\u044c, \u043f\u043e\u0438\u0441\u043a \u043f\u043e \u043f\u043e\u043b\u044f\u043c, NEAR, \u043a\u0432\u043e\u0440\u0443\u043c\u043d\u044b\u0439 \u043f\u043e\u0438\u0441\u043a \u0438 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u043d\u044b\u0435 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u044b.\n\n7. **\u0412\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0435 \u0440\u0435\u043b\u0435\u0432\u0430\u043d\u0442\u043d\u043e\u0441\u0442\u0438**: \u041a\u0430\u0436\u0434\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u0445\u0440\u0430\u043d\u0438\u0442 \u0441\u0432\u043e\u0439 \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0440\u0435\u0439\u0442\u0438\u043d\u0433 \u0440\u0435\u043b\u0435\u0432\u0430\u043d\u0442\u043d\u043e\u0441\u0442\u0438, \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0439 \u0447\u0435\u0440\u0435\u0437 `table_name.weight()` \u0432 SQL \u0438\u043b\u0438 `table_name._score` \u0432 JSON-\u043e\u0442\u0432\u0435\u0442\u0430\u0445.\n\n## \u041f\u0440\u0438\u043c\u0435\u0440: \u0421\u043b\u043e\u0436\u043d\u044b\u0439 JOIN \u0441 \u0444\u0430\u0441\u0435\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\u043c\n\n\u041e\u043f\u0438\u0440\u0430\u044f\u0441\u044c \u043d\u0430 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0435 \u043f\u0440\u0438\u043c\u0435\u0440\u044b, \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u0431\u043e\u043b\u0435\u0435 \u043f\u0440\u043e\u0434\u0432\u0438\u043d\u0443\u0442\u044b\u0439 \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439, \u0433\u0434\u0435 \u043c\u044b \u043a\u043e\u043c\u0431\u0438\u043d\u0438\u0440\u0443\u0435\u043c \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0442\u0430\u0431\u043b\u0438\u0446 \u0441 \u0444\u0430\u0441\u0435\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0438 \u043f\u043e\u043b\u043d\u043e\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u043c \u043f\u043e\u0438\u0441\u043a\u043e\u043c \u043f\u043e \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u043c \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u043c. \u042d\u0442\u043e \u0434\u0435\u043c\u043e\u043d\u0441\u0442\u0440\u0438\u0440\u0443\u0435\u0442 \u0432\u0441\u044e \u043c\u043e\u0449\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0435\u0439 JOIN \u0432 Manticore \u0441 \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0441\u043d\u043e\u0439 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0435\u0439 \u0438 \u0430\u0433\u0440\u0435\u0433\u0430\u0446\u0438\u0435\u0439.\n\n<details>\n\n\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u0434\u043b\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0433\u043e \u043f\u0440\u0438\u043c\u0435\u0440\u0430:\n\nCODE_BLOCK_24\n\n</details>\n\n<!-- example basic_complex -->"
        },
        "is_code_or_comment": false,
        "model": "openai:gpt-4.1-mini",
        "updated_at": 1766339813
    },
    "e0c86fd3a020743e0c877312caf6ef29fdd371db58cf0cdd81d85434af5b7acf": {
        "original": "# Joining tables\n\nTable joins in Manticore Search enable you to combine documents from two tables by matching related columns. This functionality allows for more complex queries and enhanced data retrieval across multiple tables.\n\n## General syntax\n\n### SQL\n\nCODE_BLOCK_0\n\nFor more information on select options, refer to the [SELECT](../Searching/Intro.md#General-syntax) section.\n\n<!--example join_sql_json_type -->\n\nWhen joining by a value from a JSON attribute, you need to explicitly specify the value's type using the `int()` or `string()` function.\n\n<!-- request String JSON attribute -->\nCODE_BLOCK_1\n\n<!-- request Int JSON attribute -->\nCODE_BLOCK_2\n\n<!-- end -->\n\n### JSON\n\nCODE_BLOCK_3\nNote, there is the `type` field in the `left` operand section which you should use when joining two tables using json attributes. The allowed values are `string` and `int`.\n\n## Types of joins\n\nManticore Search supports two types of joins:\n\n<!-- example inner_basic -->\n\n1. **INNER JOIN**: Returns only the rows where there is a match in both tables. For example, the query performs an INNER JOIN between the `orders` and `customers` tables, including only the orders that have matching customers.\n\n<!-- request SQL -->\nCODE_BLOCK_4\n\n<!-- request JSON -->\nCODE_BLOCK_5\n\n<!-- response SQL -->\n\nCODE_BLOCK_6\n\n<!-- response JSON -->\n\nCODE_BLOCK_7\n<!-- end -->\n\n<!-- example left_basic -->\n\n2. **LEFT JOIN**: Returns all rows from the left table and the matched rows from the right table. If there is no match, NULL values are returned for the right table's columns. For example, this query retrieves all customers along with their corresponding orders using a LEFT JOIN. If no corresponding order exists, NULL values will appear. The results are sorted by the customer's email, and only the customer's name and the order quantity are selected.\n\n<!-- request SQL -->\nCODE_BLOCK_8\n\n<!-- request JSON -->\nCODE_BLOCK_9\n\n<!-- response SQL -->\nCODE_BLOCK_10\n\n<!-- response JSON -->\n\nCODE_BLOCK_11\n\n<!-- end -->\n\n## Full-text matching across joined tables\n\nOne of the powerful features of table joins in Manticore Search is the ability to perform full-text searches on both the left and right tables simultaneously. This allows you to create complex queries that filter based on text content in multiple tables.\n\n<!-- example fulltext_basic -->\n\nYou can use separate `MATCH()` functions for each table in your JOIN query. The query filters results based on text content in both tables.\n\n<!-- request SQL -->\nCODE_BLOCK_12\n\n<!-- request JSON -->\nCODE_BLOCK_13\n\n<!-- response SQL -->\n\nCODE_BLOCK_14\n\n<!-- response JSON -->\n\nCODE_BLOCK_15\n\n<!-- end -->\n\n### JSON query structure for joins\n\nIn JSON API queries, table-specific full-text matching is structured differently than SQL:\n\n<!-- example fulltext_json_structure -->\n\n**Main table query**: The `\"query\"` field at the root level applies to the main table (specified in `\"table\"`).\n\n**Joined table query**: Each join definition can include its own `\"query\"` field that applies specifically to that joined table.\n\n<!-- request JSON -->\nCODE_BLOCK_16\n\n<!-- response JSON -->\n\nCODE_BLOCK_17\n\n<!-- end -->\n\n### Understanding query behavior in JOIN operations\n\n<!-- example fulltext_json_behavior -->\n\n**1. Query on main table only**: Returns all matching rows from the main table. For unmatched joined records (LEFT JOIN), SQL returns NULL values while JSON API returns default values (0 for numbers, empty strings for text).\n\n<!-- request SQL -->\nCODE_BLOCK_18\n\n<!-- response SQL -->\n\nCODE_BLOCK_19\n\n<!-- request JSON -->\nCODE_BLOCK_20\n\n<!-- response JSON -->\n\nCODE_BLOCK_21\n<!--end -->\n\n<!-- example fulltext_json_behavior_2 -->\n**2. Query on joined table acts as filter**: When a joined table has a query, only records matching both the join condition AND the query condition are returned.\n\n<!-- request JSON -->\nCODE_BLOCK_22\n\n<!-- response JSON -->\n\nCODE_BLOCK_23\n<!-- end -->\n\n**3. JOIN type affects filtering**: INNER JOIN requires both join and query conditions to be satisfied, while LEFT JOIN returns matching left table rows even when right table conditions fail.\n\n### Important considerations for full-text matching in JOINs\n\nWhen using full-text matching with joins, keep these points in mind:\n\n1. **Table-specific matching**: \n   - **SQL**: Each `MATCH()` function should specify which table to search in: `MATCH('term', table_name)`\n   - **JSON**: Use the root-level `\"query\"` for the main table and `\"query\"` within each join definition for joined tables\n\n2. **Query syntax flexibility**: JSON API supports both `\"query_string\"` and `\"match\"` syntaxes for full-text queries\n\n3. **Performance implications**: Full-text matching on both tables may impact query performance, especially with large datasets. Consider using appropriate indexes and batch sizes.\n\n4. **NULL/default value handling**: With LEFT JOIN, if there's no matching record in the right table, the query optimizer decides whether to evaluate full-text conditions or filtering conditions first based on performance. SQL returns NULL values while JSON API returns default values (0 for numbers, empty strings for text).\n\n5. **Filtering behavior**: Queries on joined tables act as filters - they restrict results to records that satisfy both join and query conditions.\n\n6. **Full-text operator support**: All [full-text operators](../Searching/Full_text_matching/Operators.md) are supported in JOIN queries, including phrase, proximity, field search, NEAR, quorum matching, and advanced operators.\n\n7. **Score calculation**: Each table maintains its own relevance score, accessible via `table_name.weight()` in SQL or `table_name._score` in JSON responses.\n\n## Example: Complex JOIN with faceting\n\nBuilding on the previous examples, let's explore a more advanced scenario where we combine table joins with faceting and full-text matching across multiple tables. This demonstrates the full power of Manticore's JOIN capabilities with complex filtering and aggregation.\n\n<details>\n\nInit queries for the following example:\n\nCODE_BLOCK_24\n\n</details>\n\n<!-- example basic_complex -->",
        "translations": {
            "chinese": "# Joining tables\n\n\u8868\u8fde\u63a5\u5728Manticore Search\u4e2d\u5141\u8bb8\u60a8\u901a\u8fc7\u5339\u914d\u76f8\u5173\u5217\u5c06\u4e24\u4e2a\u8868\u4e2d\u7684\u6587\u6863\u5408\u5e76\u3002\u6b64\u529f\u80fd\u5141\u8bb8\u6267\u884c\u66f4\u590d\u6742\u7684\u67e5\u8be2\u5e76\u589e\u5f3a\u8de8\u591a\u4e2a\u8868\u7684\u6570\u636e\u68c0\u7d22\u3002\n\n## \u901a\u7528\u8bed\u6cd5\n\n### SQL\n\nCODE_BLOCK_0\n\n\u6709\u5173\u9009\u62e9\u9009\u9879\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605[SELECT](../Searching/Intro.md#General-syntax)\u90e8\u5206\u3002\n\n<!--example join_sql_json_type -->\n\n\u5f53\u901a\u8fc7JSON\u5c5e\u6027\u7684\u503c\u8fdb\u884c\u8fde\u63a5\u65f6\uff0c\u60a8\u9700\u8981\u663e\u5f0f\u6307\u5b9a\u8be5\u503c\u7684\u7c7b\u578b\uff0c\u4f7f\u7528`int()`\u6216`string()`\u51fd\u6570\u3002\n\n<!-- request String JSON attribute -->\nCODE_BLOCK_1\n\n<!-- request Int JSON attribute -->\nCODE_BLOCK_2\n\n<!-- end -->\n\n### JSON\n\nCODE_BLOCK_3\n\u6ce8\u610f\uff0c\u5728`left`\u64cd\u4f5c\u6570\u90e8\u5206\u6709`type`\u5b57\u6bb5\uff0c\u60a8\u5e94\u8be5\u5728\u4f7f\u7528json\u5c5e\u6027\u8fde\u63a5\u4e24\u4e2a\u8868\u65f6\u4f7f\u7528\u5b83\u3002\u5141\u8bb8\u7684\u503c\u4e3a`string`\u548c`int`\u3002\n\n## \u8fde\u63a5\u7c7b\u578b\n\nManticore Search \u652f\u6301\u4e24\u79cd\u7c7b\u578b\u7684\u8fde\u63a5\uff1a\n\n<!-- example inner_basic -->\n\n1. **INNER JOIN**\uff1a\u4ec5\u8fd4\u56de\u5728\u4e24\u4e2a\u8868\u4e2d\u90fd\u6709\u5339\u914d\u7684\u884c\u3002\u4f8b\u5982\uff0c\u67e5\u8be2\u5728`orders`\u548c`customers`\u8868\u4e4b\u95f4\u6267\u884cINNER JOIN\uff0c\u4ec5\u5305\u62ec\u5339\u914d\u7684\u8ba2\u5355\u3002\n\n<!-- request SQL -->\nCODE_BLOCK_4\n\n<!-- request JSON -->\nCODE_BLOCK_5\n\n<!-- response SQL -->\n\nCODE_BLOCK_6\n\n<!-- response JSON -->\n\nCODE_BLOCK_7\n<!-- end -->\n\n<!-- example left_basic -->\n\n2. **LEFT JOIN**\uff1a\u8fd4\u56de\u5de6\u8868\u7684\u6240\u6709\u884c\u4ee5\u53ca\u53f3\u8868\u7684\u5339\u914d\u884c\u3002\u5982\u679c\u6ca1\u6709\u5339\u914d\uff0c\u5219\u53f3\u8868\u7684\u5217\u8fd4\u56deNULL\u503c\u3002\u4f8b\u5982\uff0c\u6b64\u67e5\u8be2\u4f7f\u7528LEFT JOIN\u68c0\u7d22\u6240\u6709\u5ba2\u6237\u53ca\u5176\u76f8\u5e94\u7684\u8ba2\u5355\u3002\u5982\u679c\u6ca1\u6709\u76f8\u5e94\u7684\u8ba2\u5355\uff0c\u5219\u4f1a\u51fa\u73b0NULL\u503c\u3002\u7ed3\u679c\u6309\u5ba2\u6237\u7684\u7535\u5b50\u90ae\u4ef6\u6392\u5e8f\uff0c\u5e76\u4ec5\u9009\u62e9\u5ba2\u6237\u7684\u59d3\u540d\u548c\u8ba2\u5355\u6570\u91cf\u3002\n\n<!-- request SQL -->\nCODE_BLOCK_8\n\n<!-- request JSON -->\nCODE_BLOCK_9\n\n<!-- response SQL -->\nCODE_BLOCK_10\n\n<!-- response JSON -->\n\nCODE_BLOCK_11\n\n<!-- end -->\n\n## \u8de8\u8fde\u63a5\u8868\u7684\u5168\u6587\u5339\u914d\n\nManticore Search \u4e2d\u8868\u8fde\u63a5\u7684\u4e00\u4e2a\u5f3a\u5927\u529f\u80fd\u662f\u80fd\u591f\u5728\u8fde\u63a5\u7684\u4e24\u4e2a\u8868\u4e2d\u540c\u65f6\u6267\u884c\u5168\u6587\u641c\u7d22\u3002\u8fd9\u5141\u8bb8\u60a8\u521b\u5efa\u57fa\u4e8e\u591a\u4e2a\u8868\u4e2d\u7684\u6587\u672c\u5185\u5bb9\u7684\u590d\u6742\u67e5\u8be2\u3002\n\n<!-- example fulltext_basic -->\n\n\u60a8\u53ef\u4ee5\u4e3a JOIN \u67e5\u8be2\u4e2d\u7684\u6bcf\u4e2a\u8868\u5355\u72ec\u4f7f\u7528 `MATCH()` \u51fd\u6570\u3002\u67e5\u8be2\u6839\u636e\u4e24\u4e2a\u8868\u4e2d\u7684\u6587\u672c\u5185\u5bb9\u8fc7\u6ee4\u7ed3\u679c\u3002\n\n<!-- request SQL -->\nCODE_BLOCK_12\n\n<!-- request JSON -->\nCODE_BLOCK_13\n\n<!-- response SQL -->\n\nCODE_BLOCK_14\n\n<!-- response JSON -->\n\nCODE_BLOCK_15\n\n<!-- end -->\n\n### \u8fde\u63a5\u7684JSON\u67e5\u8be2\u7ed3\u6784\n\n\u5728JSON API\u67e5\u8be2\u4e2d\uff0c\u8868\u7279\u5b9a\u7684\u5168\u6587\u5339\u914d\u4e0eSQL\u4e0d\u540c\uff1a\n\n<!-- example fulltext_json_structure -->\n\n**\u4e3b\u8868\u67e5\u8be2**\uff1a\u6839\u7ea7\u522b\u4e0a\u7684 `\"query\"` \u5b57\u6bb5\u5e94\u7528\u4e8e\u4e3b\u8868\uff08\u5728 `\"table\"` \u4e2d\u6307\u5b9a\uff09\u3002\n\n**\u8fde\u63a5\u8868\u67e5\u8be2**\uff1a\u6bcf\u4e2a\u8fde\u63a5\u5b9a\u4e49\u53ef\u4ee5\u5305\u62ec\u5176\u81ea\u5df1\u7684 `\"query\"` \u5b57\u6bb5\uff0c\u4e13\u95e8\u5e94\u7528\u4e8e\u8be5\u8fde\u63a5\u8868\u3002\n\n<!-- request JSON -->\nCODE_BLOCK_16\n\n<!-- response JSON -->\n\nCODE_BLOCK_17\n\n<!-- end -->\n\n### \u7406\u89e3\u8fde\u63a5\u64cd\u4f5c\u4e2d\u7684\u67e5\u8be2\u884c\u4e3a\n\n<!-- example fulltext_json_behavior -->\n\n**1. \u4ec5\u5728\u4e3b\u8868\u4e0a\u67e5\u8be2**\uff1a\u8fd4\u56de\u4e3b\u8868\u4e2d\u6240\u6709\u5339\u914d\u7684\u884c\u3002\u5bf9\u4e8e\u672a\u5339\u914d\u7684\u8fde\u63a5\u8bb0\u5f55\uff08LEFT JOIN\uff09\uff0cSQL\u8fd4\u56deNULL\u503c\uff0c\u800cJSON API\u8fd4\u56de\u9ed8\u8ba4\u503c\uff08\u6570\u5b57\u4e3a0\uff0c\u6587\u672c\u4e3a\u7a7a\u5b57\u7b26\u4e32\uff09\u3002\n\n<!-- request SQL -->\nCODE_BLOCK_18\n\n<!-- response SQL -->\n\nCODE_BLOCK_19\n\n<!-- request JSON -->\nCODE_BLOCK_20\n\n<!-- response JSON -->\n\nCODE_BLOCK_21\n<!--end -->\n\n<!-- example fulltext_json_behavior_2 -->\n**2. \u8fde\u63a5\u8868\u4e0a\u7684\u67e5\u8be2\u4f5c\u4e3a\u8fc7\u6ee4\u5668**\uff1a\u5f53\u8fde\u63a5\u8868\u6709\u67e5\u8be2\u65f6\uff0c\u4ec5\u8fd4\u56de\u540c\u65f6\u6ee1\u8db3\u8fde\u63a5\u6761\u4ef6\u548c\u67e5\u8be2\u6761\u4ef6\u7684\u8bb0\u5f55\u3002\n\n<!-- request JSON -->\nCODE_BLOCK_22\n\n<!-- response JSON -->\n\nCODE_BLOCK_23\n<!-- end -->\n\n**3. \u8fde\u63a5\u7c7b\u578b\u5f71\u54cd\u8fc7\u6ee4**\uff1aINNER JOIN \u8981\u6c42\u540c\u65f6\u6ee1\u8db3\u8fde\u63a5\u548c\u67e5\u8be2\u6761\u4ef6\uff0c\u800cLEFT JOIN\u5373\u4f7f\u53f3\u8868\u6761\u4ef6\u5931\u8d25\u4e5f\u4f1a\u8fd4\u56de\u5339\u914d\u7684\u5de6\u8868\u884c\u3002\n\n### \u4f7f\u7528\u8fde\u63a5\u4e2d\u7684\u5168\u6587\u5339\u914d\u7684\u91cd\u8981\u6ce8\u610f\u4e8b\u9879\n\n\u5728\u4f7f\u7528\u8fde\u63a5\u4e2d\u7684\u5168\u6587\u5339\u914d\u65f6\uff0c\u8bf7\u6ce8\u610f\u4ee5\u4e0b\u51e0\u70b9\uff1a\n\n1. **\u8868\u7279\u5b9a\u5339\u914d**\uff1a\n   - **SQL**\uff1a\u6bcf\u4e2a `MATCH()` \u51fd\u6570\u5e94\u6307\u5b9a\u8981\u641c\u7d22\u7684\u8868\uff1a`MATCH('term', table_name)`\n   - **JSON**\uff1a\u4f7f\u7528\u6839\u7ea7\u7684 `\"query\"` \u7528\u4e8e\u4e3b\u8868\uff0c\u5e76\u5728\u6bcf\u4e2a\u8fde\u63a5\u5b9a\u4e49\u4e2d\u7684 `\"query\"` \u7528\u4e8e\u8fde\u63a5\u8868\n\n2. **\u67e5\u8be2\u8bed\u6cd5\u7075\u6d3b\u6027**\uff1aJSON API \u652f\u6301 `\"query_string\"` \u548c `\"match\"` \u4e24\u79cd\u5168\u6587\u67e5\u8be2\u8bed\u6cd5\n\n3. **\u6027\u80fd\u5f71\u54cd**\uff1a\u5728\u4e24\u4e2a\u8868\u4e0a\u6267\u884c\u5168\u6587\u5339\u914d\u53ef\u80fd\u4f1a\u5f71\u54cd\u67e5\u8be2\u6027\u80fd\uff0c\u7279\u522b\u662f\u5728\u5927\u6570\u636e\u96c6\u4e0a\u3002\u8003\u8651\u4f7f\u7528\u9002\u5f53\u7684\u7d22\u5f15\u548c\u6279\u6b21\u5927\u5c0f\u3002\n\n4. **NULL/\u9ed8\u8ba4\u503c\u5904\u7406**\uff1a\u4f7f\u7528LEFT JOIN\u65f6\uff0c\u5982\u679c\u53f3\u8868\u4e2d\u6ca1\u6709\u5339\u914d\u8bb0\u5f55\uff0c\u67e5\u8be2\u4f18\u5316\u5668\u5c06\u6839\u636e\u6027\u80fd\u51b3\u5b9a\u662f\u5426\u5148\u8bc4\u4f30\u5168\u6587\u6761\u4ef6\u8fd8\u662f\u8fc7\u6ee4\u6761\u4ef6\u3002SQL\u8fd4\u56deNULL\u503c\uff0c\u800cJSON API\u8fd4\u56de\u9ed8\u8ba4\u503c\uff08\u6570\u5b57\u4e3a0\uff0c\u6587\u672c\u4e3a\u7a7a\u5b57\u7b26\u4e32\uff09\u3002\n\n5. **\u8fc7\u6ee4\u884c\u4e3a**\uff1a\u8fde\u63a5\u8868\u4e0a\u7684\u67e5\u8be2\u4f5c\u4e3a\u8fc7\u6ee4\u5668 - \u5b83\u4eec\u9650\u5236\u7ed3\u679c\u4e3a\u540c\u65f6\u6ee1\u8db3\u8fde\u63a5\u548c\u67e5\u8be2\u6761\u4ef6\u7684\u8bb0\u5f55\u3002\n\n6. **\u5168\u6587\u8fd0\u7b97\u7b26\u652f\u6301**\uff1a\u6240\u6709[\u5168\u6587\u8fd0\u7b97\u7b26](../Searching/Full_text_matching/Operators.md)\u90fd\u652f\u6301\u5728\u8fde\u63a5\u67e5\u8be2\u4e2d\u4f7f\u7528\uff0c\u5305\u62ec\u77ed\u8bed\u3001\u63a5\u8fd1\u3001\u5b57\u6bb5\u641c\u7d22\u3001NEAR\u3001\u5171\u8bc6\u5339\u914d\u548c\u9ad8\u7ea7\u8fd0\u7b97\u7b26\u3002\n\n7. **\u8bc4\u5206\u8ba1\u7b97**\uff1a\u6bcf\u4e2a\u8868\u90fd\u7ef4\u62a4\u81ea\u5df1\u7684\u76f8\u5173\u6027\u8bc4\u5206\uff0c\u53ef\u901a\u8fc7SQL\u4e2d\u7684 `table_name.weight()` \u6216JSON\u54cd\u5e94\u4e2d\u7684 `table_name._score` \u8bbf\u95ee\u3002\n\n## \u793a\u4f8b\uff1a\u590d\u6742\u7684\u8fde\u63a5\u4e0e\u5206\u9762\n\n\u5728\u524d\u9762\u7684\u793a\u4f8b\u57fa\u7840\u4e0a\uff0c\u8ba9\u6211\u4eec\u63a2\u7d22\u4e00\u4e2a\u66f4\u9ad8\u7ea7\u7684\u573a\u666f\uff0c\u5176\u4e2d\u6211\u4eec\u5c06\u8868\u8fde\u63a5\u4e0e\u8de8\u591a\u4e2a\u8868\u7684\u5168\u6587\u5339\u914d\u548c\u5206\u9762\u7ed3\u5408\u3002\u8fd9\u5c55\u793a\u4e86Manticore\u8fde\u63a5\u529f\u80fd\u7684\u5168\u90e8\u529b\u91cf\uff0c\u5305\u62ec\u590d\u6742\u7684\u8fc7\u6ee4\u548c\u805a\u5408\u3002\n\n<details>\n\n\u521d\u59cb\u5316\u4ee5\u4e0b\u793a\u4f8b\u7684\u67e5\u8be2\uff1a\n\nCODE_BLOCK_24\n\n</details>\n\n<!-- example basic_complex -->",
            "russian": "# \u041e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\n\n\u041e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0442\u0430\u0431\u043b\u0438\u0446 \u0432 Manticore Search \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u044e\u0442 \u043a\u043e\u043c\u0431\u0438\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b \u0438\u0437 \u0434\u0432\u0443\u0445 \u0442\u0430\u0431\u043b\u0438\u0446 \u043f\u0443\u0442\u0435\u043c \u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0445 \u0441\u0442\u043e\u043b\u0431\u0446\u043e\u0432. \u042d\u0442\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442 \u0431\u043e\u043b\u0435\u0435 \u0441\u043b\u043e\u0436\u043d\u044b\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u0438 \u0443\u043b\u0443\u0447\u0448\u0435\u043d\u043d\u044b\u0439 \u043f\u043e\u0438\u0441\u043a \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u043c \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u043c.\n\n## \u041e\u0431\u0449\u0438\u0439 \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441\n\n### SQL\n\nCODE_BLOCK_0\n\n\u0414\u043b\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u0445 select \u0441\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u0440\u0430\u0437\u0434\u0435\u043b [SELECT](../Searching/Intro.md#General-syntax).\n\n<!--example join_sql_json_type -->\n\n\u041f\u0440\u0438 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0438 \u043f\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044e \u0438\u0437 JSON-\u0430\u0442\u0440\u0438\u0431\u0443\u0442\u0430 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u044f\u0432\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0442\u0438\u043f \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u0444\u0443\u043d\u043a\u0446\u0438\u0438 `int()` \u0438\u043b\u0438 `string()`.\n\n<!-- request String JSON attribute -->\nCODE_BLOCK_1\n\n<!-- request Int JSON attribute -->\nCODE_BLOCK_2\n\n<!-- end -->\n\n### JSON\n\nCODE_BLOCK_3\n\u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435, \u0447\u0442\u043e \u0432 \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u043e\u043f\u0435\u0440\u0430\u043d\u0434\u0430 `left` \u0435\u0441\u0442\u044c \u043f\u043e\u043b\u0435 `type`, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u0438 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0438 \u0434\u0432\u0443\u0445 \u0442\u0430\u0431\u043b\u0438\u0446 \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c json-\u0430\u0442\u0440\u0438\u0431\u0443\u0442\u043e\u0432. \u0414\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u2014 `string` \u0438 `int`.\n\n## \u0422\u0438\u043f\u044b \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439\n\nManticore Search \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0434\u0432\u0430 \u0442\u0438\u043f\u0430 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439:\n\n<!-- example inner_basic -->\n\n1. **INNER JOIN**: \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u0435 \u0441\u0442\u0440\u043e\u043a\u0438, \u0433\u0434\u0435 \u0435\u0441\u0442\u044c \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0435 \u0432 \u043e\u0431\u0435\u0438\u0445 \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u0445. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0437\u0430\u043f\u0440\u043e\u0441 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 INNER JOIN \u043c\u0435\u0436\u0434\u0443 \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u043c\u0438 `orders` \u0438 `customers`, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u0437\u0430\u043a\u0430\u0437\u044b, \u0443 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0435\u0441\u0442\u044c \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u044b.\n\n<!-- request SQL -->\nCODE_BLOCK_4\n\n<!-- request JSON -->\nCODE_BLOCK_5\n\n<!-- response SQL -->\n\nCODE_BLOCK_6\n\n<!-- response JSON -->\n\nCODE_BLOCK_7\n<!-- end -->\n\n<!-- example left_basic -->\n\n2. **LEFT JOIN**: \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0432\u0441\u0435 \u0441\u0442\u0440\u043e\u043a\u0438 \u0438\u0437 \u043b\u0435\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0438 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0435 \u0441\u0442\u0440\u043e\u043a\u0438 \u0438\u0437 \u043f\u0440\u0430\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b. \u0415\u0441\u043b\u0438 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u044f \u043d\u0435\u0442, \u0442\u043e \u0434\u043b\u044f \u0441\u0442\u043e\u043b\u0431\u0446\u043e\u0432 \u043f\u0440\u0430\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u044e\u0442\u0441\u044f \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f NULL. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u044d\u0442\u043e\u0442 \u0437\u0430\u043f\u0440\u043e\u0441 \u0438\u0437\u0432\u043b\u0435\u043a\u0430\u0435\u0442 \u0432\u0441\u0435\u0445 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u0432\u043c\u0435\u0441\u0442\u0435 \u0441 \u0438\u0445 \u0437\u0430\u043a\u0430\u0437\u0430\u043c\u0438 \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c LEFT JOIN. \u0415\u0441\u043b\u0438 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0439 \u0437\u0430\u043a\u0430\u0437 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442, \u043f\u043e\u044f\u0432\u044f\u0442\u0441\u044f \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f NULL. \u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u0441\u043e\u0440\u0442\u0438\u0440\u0443\u044e\u0442\u0441\u044f \u043f\u043e \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0439 \u043f\u043e\u0447\u0442\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u0430, \u0438 \u0432\u044b\u0431\u0438\u0440\u0430\u044e\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u043c\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u0438 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043a\u0430\u0437\u043e\u0432.\n\n<!-- request SQL -->\nCODE_BLOCK_8\n\n<!-- request JSON -->\nCODE_BLOCK_9\n\n<!-- response SQL -->\nCODE_BLOCK_10\n\n<!-- response JSON -->\n\nCODE_BLOCK_11\n\n<!-- end -->\n\n## \u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043f\u043e\u043b\u043d\u043e\u043c\u0443 \u0442\u0435\u043a\u0441\u0442\u0443 \u0432 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u043d\u044b\u0445 \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u0445\n\n\u041e\u0434\u043d\u0430 \u0438\u0437 \u043c\u043e\u0449\u043d\u044b\u0445 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0435\u0439 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439 \u0442\u0430\u0431\u043b\u0438\u0446 \u0432 Manticore Search \u2014 \u044d\u0442\u043e \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u043f\u043e\u043b\u043d\u043e\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0439 \u043f\u043e\u0438\u0441\u043a \u043e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u043f\u043e \u043b\u0435\u0432\u043e\u0439 \u0438 \u043f\u0440\u0430\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u043c. \u042d\u0442\u043e \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0441\u043b\u043e\u0436\u043d\u044b\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u0441 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0435\u0439 \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u0433\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0433\u043e \u0432 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u0445.\n\n<!-- example fulltext_basic -->\n\n\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 `MATCH()` \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0432 \u0437\u0430\u043f\u0440\u043e\u0441\u0435 JOIN. \u0417\u0430\u043f\u0440\u043e\u0441 \u0444\u0438\u043b\u044c\u0442\u0440\u0443\u0435\u0442 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u0433\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0433\u043e \u0432 \u043e\u0431\u0435\u0438\u0445 \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u0445.\n\n<!-- request SQL -->\nCODE_BLOCK_12\n\n<!-- request JSON -->\nCODE_BLOCK_13\n\n<!-- response SQL -->\n\nCODE_BLOCK_14\n\n<!-- response JSON -->\n\nCODE_BLOCK_15\n\n<!-- end -->\n\n### \u0421\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 JSON-\u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u0434\u043b\u044f \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439\n\n\u0412 \u0437\u0430\u043f\u0440\u043e\u0441\u0430\u0445 JSON API \u043f\u043e\u043b\u043d\u043e\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0439 \u043f\u043e\u0438\u0441\u043a, \u0441\u043f\u0435\u0446\u0438\u0444\u0438\u0447\u043d\u044b\u0439 \u0434\u043b\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u044b, \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u043e\u0432\u0430\u043d \u0438\u043d\u0430\u0447\u0435, \u0447\u0435\u043c \u0432 SQL:\n\n<!-- example fulltext_json_structure -->\n\n**\u0417\u0430\u043f\u0440\u043e\u0441 \u0433\u043b\u0430\u0432\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b**: \u041f\u043e\u043b\u0435 `\"query\"` \u043d\u0430 \u043a\u043e\u0440\u043d\u0435\u0432\u043e\u043c \u0443\u0440\u043e\u0432\u043d\u0435 \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u043a \u0433\u043b\u0430\u0432\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 (\u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0439 \u0432 `\"table\"`).\n\n**\u0417\u0430\u043f\u0440\u043e\u0441 \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b**: \u0412 \u043a\u0430\u0436\u0434\u043e\u043c \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0438 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0441\u0432\u043e\u0435 \u043f\u043e\u043b\u0435 `\"query\"`, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e \u043a \u044d\u0442\u043e\u0439 \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435.\n\n<!-- request JSON -->\nCODE_BLOCK_16\n\n<!-- response JSON -->\n\nCODE_BLOCK_17\n\n<!-- end -->\n\n### \u041f\u043e\u043d\u0438\u043c\u0430\u043d\u0438\u0435 \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043f\u0440\u0438 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f\u0445 JOIN\n\n<!-- example fulltext_json_behavior -->\n\n**1. \u0417\u0430\u043f\u0440\u043e\u0441 \u0442\u043e\u043b\u044c\u043a\u043e \u043a \u0433\u043b\u0430\u0432\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435**: \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0432\u0441\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0449\u0438\u0435 \u0441\u0442\u0440\u043e\u043a\u0438 \u0438\u0437 \u0433\u043b\u0430\u0432\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b. \u0414\u043b\u044f \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0432\u0448\u0438\u0445 \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0445 \u0437\u0430\u043f\u0438\u0441\u0435\u0439 (LEFT JOIN), SQL \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f NULL, \u0442\u043e\u0433\u0434\u0430 \u043a\u0430\u043a JSON API \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e (0 \u0434\u043b\u044f \u0447\u0438\u0441\u0435\u043b, \u043f\u0443\u0441\u0442\u044b\u0435 \u0441\u0442\u0440\u043e\u043a\u0438 \u0434\u043b\u044f \u0442\u0435\u043a\u0441\u0442\u0430).\n\n<!-- request SQL -->\nCODE_BLOCK_18\n\n<!-- response SQL -->\n\nCODE_BLOCK_19\n\n<!-- request JSON -->\nCODE_BLOCK_20\n\n<!-- response JSON -->\n\nCODE_BLOCK_21\n<!--end -->\n\n<!-- example fulltext_json_behavior_2 -->\n**2. \u0417\u0430\u043f\u0440\u043e\u0441 \u043a \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0443\u0435\u0442 \u043a\u0430\u043a \u0444\u0438\u043b\u044c\u0442\u0440**: \u041a\u043e\u0433\u0434\u0430 \u0443 \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0435\u0441\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441, \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u044e\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u0437\u0430\u043f\u0438\u0441\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0443\u0434\u043e\u0432\u043b\u0435\u0442\u0432\u043e\u0440\u044f\u044e\u0442 \u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u044e \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f, \u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u044e \u0437\u0430\u043f\u0440\u043e\u0441\u0430.\n\n<!-- request JSON -->\nCODE_BLOCK_22\n\n<!-- response JSON -->\n\nCODE_BLOCK_23\n<!-- end -->\n\n**3. \u0422\u0438\u043f JOIN \u0432\u043b\u0438\u044f\u0435\u0442 \u043d\u0430 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044e**: INNER JOIN \u0442\u0440\u0435\u0431\u0443\u0435\u0442 \u0443\u0434\u043e\u0432\u043b\u0435\u0442\u0432\u043e\u0440\u0435\u043d\u0438\u044f \u043a\u0430\u043a \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f, \u0442\u0430\u043a \u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0430, \u0430 LEFT JOIN \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0449\u0438\u0435 \u0441\u0442\u0440\u043e\u043a\u0438 \u043b\u0435\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0434\u0430\u0436\u0435 \u043f\u0440\u0438 \u043d\u0435\u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u043f\u0440\u0430\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b.\n\n### \u0412\u0430\u0436\u043d\u044b\u0435 \u043c\u043e\u043c\u0435\u043d\u0442\u044b \u043f\u0440\u0438 \u043f\u043e\u043b\u043d\u043e\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u043c \u043f\u043e\u0438\u0441\u043a\u0435 \u0432 JOIN\n\n\u041f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 \u043f\u043e\u043b\u043d\u043e\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u0438\u0441\u043a\u0430 \u0441 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f\u043c\u0438 \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0439\u0442\u0435 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043c\u043e\u043c\u0435\u043d\u0442\u044b:\n\n1. **\u041f\u043e\u0438\u0441\u043a \u0441\u043f\u0435\u0446\u0438\u0444\u0438\u0447\u043d\u044b\u0439 \u0434\u043b\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u044b**: \n   - **SQL**: \u043a\u0430\u0436\u0434\u0430\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u044f `MATCH()` \u0434\u043e\u043b\u0436\u043d\u0430 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c, \u0432 \u043a\u0430\u043a\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 \u0438\u0441\u043a\u0430\u0442\u044c: `MATCH('term', table_name)`\n   - **JSON**: \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0443\u0440\u043e\u0432\u0435\u043d\u044c `\"query\"` \u0434\u043b\u044f \u0433\u043b\u0430\u0432\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0438 `\"query\"` \u0432\u043d\u0443\u0442\u0440\u0438 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0434\u043b\u044f \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u043d\u044b\u0445 \u0442\u0430\u0431\u043b\u0438\u0446\n\n2. **\u0413\u0438\u0431\u043a\u043e\u0441\u0442\u044c \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430**: JSON API \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441\u044b `\"query_string\"` \u0438 `\"match\"` \u0434\u043b\u044f \u043f\u043e\u043b\u043d\u043e\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0445 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432\n\n3. **\u0412\u043b\u0438\u044f\u043d\u0438\u0435 \u043d\u0430 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c**: \u041f\u043e\u043b\u043d\u043e\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0439 \u043f\u043e\u0438\u0441\u043a \u043f\u043e \u043e\u0431\u0435\u0438\u043c \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u043c \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u0432\u043b\u0438\u044f\u0442\u044c \u043d\u0430 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c, \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e \u043f\u0440\u0438 \u0431\u043e\u043b\u044c\u0448\u0438\u0445 \u043e\u0431\u044a\u0435\u043c\u0430\u0445 \u0434\u0430\u043d\u043d\u044b\u0445. \u0420\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0445 \u0438\u043d\u0434\u0435\u043a\u0441\u043e\u0432 \u0438 \u0440\u0430\u0437\u043c\u0435\u0440\u043e\u0432 \u043f\u0430\u043a\u0435\u0442\u043e\u0432.\n\n4. **\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 NULL/\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e**: \u041f\u0440\u0438 LEFT JOIN, \u0435\u0441\u043b\u0438 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0449\u0435\u0439 \u0437\u0430\u043f\u0438\u0441\u0438 \u0432 \u043f\u0440\u0430\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435, \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0442\u043e\u0440 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u0440\u0435\u0448\u0430\u0435\u0442, \u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u043b\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u043f\u043e\u043b\u043d\u043e\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u0438\u0441\u043a\u0430 \u0438\u043b\u0438 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438, \u0438\u0441\u0445\u043e\u0434\u044f \u0438\u0437 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438. SQL \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 NULL, \u0442\u043e\u0433\u0434\u0430 \u043a\u0430\u043a JSON API \u2014 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e (0 \u0434\u043b\u044f \u0447\u0438\u0441\u0435\u043b, \u043f\u0443\u0441\u0442\u044b\u0435 \u0441\u0442\u0440\u043e\u043a\u0438 \u0434\u043b\u044f \u0442\u0435\u043a\u0441\u0442\u0430).\n\n5. **\u041f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438**: \u0417\u0430\u043f\u0440\u043e\u0441\u044b \u043a \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u043d\u044b\u043c \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u043c \u0434\u0435\u0439\u0441\u0442\u0432\u0443\u044e\u0442 \u043a\u0430\u043a \u0444\u0438\u043b\u044c\u0442\u0440\u044b \u2014 \u043e\u043d\u0438 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0438\u0432\u0430\u044e\u0442 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u0437\u0430\u043f\u0438\u0441\u044f\u043c\u0438, \u0443\u0434\u043e\u0432\u043b\u0435\u0442\u0432\u043e\u0440\u044f\u044e\u0449\u0438\u043c\u0438 \u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u043c \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f, \u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u044e \u0437\u0430\u043f\u0440\u043e\u0441\u0430.\n\n6. **\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430 \u043f\u043e\u043b\u043d\u043e\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0445 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u043e\u0432**: \u0412\u0441\u0435 [\u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u044b \u043f\u043e\u043b\u043d\u043e\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u0438\u0441\u043a\u0430](../Searching/Full_text_matching/Operators.md) \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u0432 JOIN-\u0437\u0430\u043f\u0440\u043e\u0441\u0430\u0445, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0444\u0440\u0430\u0437\u044b, \u0431\u043b\u0438\u0437\u043e\u0441\u0442\u044c, \u043f\u043e\u0438\u0441\u043a \u043f\u043e \u043f\u043e\u043b\u044f\u043c, NEAR, \u043a\u0432\u043e\u0440\u0443\u043c \u0438 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u043d\u044b\u0435 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u044b.\n\n7. **\u0420\u0430\u0441\u0447\u0435\u0442 \u0440\u0435\u0439\u0442\u0438\u043d\u0433\u0430**: \u041a\u0430\u0436\u0434\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u0442 \u0441\u0432\u043e\u0439 \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0440\u0435\u0439\u0442\u0438\u043d\u0433 \u0440\u0435\u043b\u0435\u0432\u0430\u043d\u0442\u043d\u043e\u0441\u0442\u0438, \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0439 \u0447\u0435\u0440\u0435\u0437 `table_name.weight()` \u0432 SQL \u0438\u043b\u0438 `table_name._score` \u0432 JSON-\u043e\u0442\u0432\u0435\u0442\u0430\u0445.\n\n## \u041f\u0440\u0438\u043c\u0435\u0440: \u0421\u043b\u043e\u0436\u043d\u043e\u0435 JOIN \u0441 \u0444\u0430\u0441\u0435\u0442\u0430\u043c\u0438\n\n\u041d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0445 \u043f\u0440\u0438\u043c\u0435\u0440\u043e\u0432 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u0431\u043e\u043b\u0435\u0435 \u0441\u043b\u043e\u0436\u043d\u044b\u0439 \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439, \u0433\u0434\u0435 \u043c\u044b \u043a\u043e\u043c\u0431\u0438\u043d\u0438\u0440\u0443\u0435\u043c \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0442\u0430\u0431\u043b\u0438\u0446 \u0441 \u0444\u0430\u0441\u0435\u0442\u0430\u043c\u0438 \u0438 \u043f\u043e\u043b\u043d\u043e\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u043c \u043f\u043e\u0438\u0441\u043a\u043e\u043c \u043f\u043e \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u043c \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u043c. \u042d\u0442\u043e \u0434\u0435\u043c\u043e\u043d\u0441\u0442\u0440\u0438\u0440\u0443\u0435\u0442 \u0432\u0435\u0441\u044c \u043f\u043e\u0442\u0435\u043d\u0446\u0438\u0430\u043b \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0435\u0439 JOIN \u0432 Manticore \u0441 \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0441\u043d\u043e\u0439 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0435\u0439 \u0438 \u0430\u0433\u0440\u0435\u0433\u0430\u0446\u0438\u0435\u0439.\n\n<details>\n\n\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0434\u043b\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0433\u043e \u043f\u0440\u0438\u043c\u0435\u0440\u0430:\n\nCODE_BLOCK_24\n\n</details>\n\n<!-- example basic_complex -->"
        },
        "is_code_or_comment": false,
        "model": "openai:gpt-4.1-mini",
        "updated_at": 1766374267
    },
    "f3c0e24ff56438d8743554f1a79bc884848a30585298719867481cfb9c767799": {
        "original": "This query demonstrates full-text matching across both the `customers` and `orders` tables, combined with range filtering and faceting. It searches for customers named \"Alice\" or \"Bob\" and their orders containing \"laptop\", \"phone\", or \"tablet\" with prices above $500. The results are ordered by order ID and faceted by warranty terms.\n\n<!-- request SQL -->\nCODE_BLOCK_25\n\n<!-- request JSON -->\nCODE_BLOCK_26\n\n<!-- response SQL -->\nCODE_BLOCK_27\n\n<!-- response JSON -->\n\nCODE_BLOCK_28\n\n<!-- end -->\n\n## Search options and match weights\n\nSeparate options can be specified for queries in a join: for the left table and the right table. The syntax is `OPTION(<table_name>)` for SQL queries and one or more subobjects under `\"options\"` for JSON queries.\n\n<!-- example join_options -->\n\nHere's an example of how to specify different field weights for a full-text query on the right table. To retrieve match weights via SQL, use the `<table_name>.weight()` expression.\nIn JSON queries, this weight is represented as `<table_name>._score`.\n\n<!-- request SQL -->\nCODE_BLOCK_29\n\n<!-- request JSON -->\nCODE_BLOCK_30\n\n<!-- response SQL -->\n\nCODE_BLOCK_31\n\n<!-- response JSON -->\n\nCODE_BLOCK_32\n<!-- end -->\n\n## Join batching\n\nWhen performing table joins, Manticore Search processes the results in batches to optimize performance and resource usage. Here's how it works:\n\n- **How Batching Works**:\n  - The query on the left table is executed first, and the results are accumulated into a batch.\n  - This batch is then used as input for the query on the right table, which is executed as a single operation.\n  - This approach minimizes the number of queries sent to the right table, improving efficiency.\n\n- **Configuring Batch Size**:\n  - The size of the batch can be adjusted using the `join_batch_size` search option.\n  - It is also [configurable](../Server_settings/Searchd.md#join_batch_size) in the `searchd` section of the configuration file.\n  - The default batch size is `1000`, but you can increase or decrease it depending on your use case.\n  - Setting `join_batch_size=0` disables batching entirely, which may be useful for debugging or specific scenarios.\n\n- **Performance Considerations**:\n  - A larger batch size can improve performance by reducing the number of queries executed on the right table.\n  - However, larger batches may consume more memory, especially for complex queries or large datasets.\n  - Experiment with different batch sizes to find the optimal balance between performance and resource usage.\n\n## Join caching\n\nTo further optimize join operations, Manticore Search employs a caching mechanism for queries executed on the right table. Here's what you need to know:\n\n- **How Caching Works**:\n  - Each query on the right table is defined by the `JOIN ON` conditions.\n  - If the same `JOIN ON` conditions are repeated across multiple queries, the results are cached and reused.\n  - This avoids redundant queries and speeds up subsequent join operations.\n\n- **Configuring Cache Size**:\n  - The size of the join cache can be configured using the [join_cache_size](../Server_settings/Searchd.md#join_cache_size) option in the `searchd` section of the configuration file.\n  - The default cache size is `20MB`, but you can adjust it based on your workload and available memory.\n  - Setting `join_cache_size=0` disables caching entirely.\n\n- **Memory Considerations**:\n  - Each thread maintains its own cache, so the total memory usage depends on the number of threads and the cache size.\n  - Ensure your server has sufficient memory to accommodate the cache, especially for high-concurrency environments.\n\n## Joining distributed tables\n\nDistributed tables consisting only of local tables are supported on both the left and right sides of a join query. However, distributed tables that include remote tables are not supported.\n\n## Caveats and best practices\n\nWhen using JOINs in Manticore Search, keep the following points in mind:\n\n1. **Field selection**: When selecting fields from two tables in a JOIN, do not prefix fields from the left table, but do prefix fields from the right table. For example:\nCODE_BLOCK_33\n\n2. **JOIN conditions**: Always explicitly specify the table names in your JOIN conditions:\nCODE_BLOCK_34\n\n3. **Expressions with JOINs**: When using expressions that combine fields from both joined tables, alias the result of the expression:\nCODE_BLOCK_35\n\n4. **Filtering on aliased expressions**: You cannot use aliases for expressions involving fields from both tables in the WHERE clause.\n\n5. **JSON attributes**: When joining on JSON attributes, you must explicitly cast the values to the appropriate type:\nCODE_BLOCK_36\n\n6. **NULL handling**: You can use IS NULL and IS NOT NULL conditions on joined fields:\nCODE_BLOCK_37\n\n7. **Using ANY with MVA**: When using the `ANY()` function with multi-valued attributes in JOINs, alias the multi-valued attribute from the joined table:\nCODE_BLOCK_38\n\nBy following these guidelines, you can effectively use JOINs in Manticore Search to combine data from multiple indexes and perform complex queries.\n\n<!-- proofread -->\n\n",
        "translations": {
            "chinese": "\u8be5\u67e5\u8be2\u6f14\u793a\u4e86\u5728 `customers` \u548c `orders` \u8868\u4e0a\u8fdb\u884c\u5168\u6587\u5339\u914d\uff0c\u5e76\u7ed3\u5408\u8303\u56f4\u8fc7\u6ee4\u548c\u5206\u9762\u529f\u80fd\u3002\u5b83\u641c\u7d22\u540d\u4e3a \"Alice\" \u6216 \"Bob\" \u7684\u5ba2\u6237\u53ca\u5176\u5305\u542b \"laptop\"\u3001\"phone\" \u6216 \"tablet\" \u4e14\u4ef7\u683c\u9ad8\u4e8e $500 \u7684\u8ba2\u5355\u3002\u7ed3\u679c\u6309\u8ba2\u5355 ID \u6392\u5e8f\uff0c\u5e76\u6309\u4fdd\u4fee\u6761\u6b3e\u8fdb\u884c\u5206\u9762\u3002\n\n<!-- request SQL -->\nCODE_BLOCK_25\n\n<!-- request JSON -->\nCODE_BLOCK_26\n\n<!-- response SQL -->\nCODE_BLOCK_27\n\n<!-- response JSON -->\n\nCODE_BLOCK_28\n\n<!-- end -->\n\n## \u641c\u7d22\u9009\u9879\u4e0e\u5339\u914d\u6743\u91cd\n\n\u53ef\u4ee5\u4e3a\u8fde\u63a5\u67e5\u8be2\u4e2d\u7684\u5de6\u8868\u548c\u53f3\u8868\u5206\u522b\u6307\u5b9a\u4e0d\u540c\u7684\u9009\u9879\u3002SQL \u67e5\u8be2\u7684\u8bed\u6cd5\u662f `OPTION(<table_name>)`\uff0cJSON \u67e5\u8be2\u5219\u662f\u5728 `\"options\"` \u4e0b\u4f7f\u7528\u4e00\u4e2a\u6216\u591a\u4e2a\u5b50\u5bf9\u8c61\u3002\n\n<!-- example join_options -->\n\n\u4ee5\u4e0b\u793a\u4f8b\u5c55\u793a\u4e86\u5982\u4f55\u4e3a\u53f3\u8868\u7684\u5168\u6587\u67e5\u8be2\u6307\u5b9a\u4e0d\u540c\u7684\u5b57\u6bb5\u6743\u91cd\u3002\u8981\u901a\u8fc7 SQL \u83b7\u53d6\u5339\u914d\u6743\u91cd\uff0c\u8bf7\u4f7f\u7528 `<table_name>.weight()` \u8868\u8fbe\u5f0f\u3002\n\u5728 JSON \u67e5\u8be2\u4e2d\uff0c\u6b64\u6743\u91cd\u8868\u793a\u4e3a `<table_name>._score`\u3002\n\n<!-- request SQL -->\nCODE_BLOCK_29\n\n<!-- request JSON -->\nCODE_BLOCK_30\n\n<!-- response SQL -->\n\nCODE_BLOCK_31\n\n<!-- response JSON -->\n\nCODE_BLOCK_32\n<!-- end -->\n\n## \u8fde\u63a5\u6279\u5904\u7406\n\n\u5728\u6267\u884c\u8868\u8fde\u63a5\u65f6\uff0cManticore Search \u4f1a\u4ee5\u6279\u5904\u7406\u65b9\u5f0f\u5904\u7406\u7ed3\u679c\uff0c\u4ee5\u4f18\u5316\u6027\u80fd\u548c\u8d44\u6e90\u4f7f\u7528\u3002\u5176\u5de5\u4f5c\u539f\u7406\u5982\u4e0b\uff1a\n\n- **\u6279\u5904\u7406\u5982\u4f55\u5de5\u4f5c**\uff1a\n  - \u9996\u5148\u6267\u884c\u5de6\u8868\u7684\u67e5\u8be2\uff0c\u5e76\u5c06\u7ed3\u679c\u7d2f\u79ef\u5230\u4e00\u4e2a\u6279\u6b21\u4e2d\u3002\n  - \u7136\u540e\uff0c\u8be5\u6279\u6b21\u4f5c\u4e3a\u53f3\u8868\u67e5\u8be2\u7684\u8f93\u5165\uff0c\u53f3\u8868\u67e5\u8be2\u4f5c\u4e3a\u5355\u4e2a\u64cd\u4f5c\u6267\u884c\u3002\n  - \u8fd9\u79cd\u65b9\u6cd5\u6700\u5927\u9650\u5ea6\u5730\u51cf\u5c11\u4e86\u53d1\u9001\u5230\u53f3\u8868\u7684\u67e5\u8be2\u6b21\u6570\uff0c\u63d0\u9ad8\u4e86\u6548\u7387\u3002\n\n- **\u914d\u7f6e\u6279\u6b21\u5927\u5c0f**\uff1a\n  - \u53ef\u4ee5\u4f7f\u7528 `join_batch_size` \u641c\u7d22\u9009\u9879\u8c03\u6574\u6279\u6b21\u7684\u5927\u5c0f\u3002\n  - \u4e5f\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6\u7684 `searchd` \u90e8\u5206\u4e2d[\u914d\u7f6e](../Server_settings/Searchd.md#join_batch_size)\u6b64\u9009\u9879\u3002\n  - \u9ed8\u8ba4\u6279\u6b21\u5927\u5c0f\u4e3a `1000`\uff0c\u4f46\u60a8\u53ef\u4ee5\u6839\u636e\u60a8\u7684\u7528\u4f8b\u589e\u52a0\u6216\u51cf\u5c11\u5b83\u3002\n  - \u8bbe\u7f6e `join_batch_size=0` \u5c06\u5b8c\u5168\u7981\u7528\u6279\u5904\u7406\uff0c\u8fd9\u53ef\u80fd\u5bf9\u8c03\u8bd5\u6216\u7279\u5b9a\u573a\u666f\u6709\u7528\u3002\n\n- **\u6027\u80fd\u8003\u8651**\uff1a\n  - \u8f83\u5927\u7684\u6279\u6b21\u5927\u5c0f\u53ef\u4ee5\u901a\u8fc7\u51cf\u5c11\u5728\u53f3\u8868\u4e0a\u6267\u884c\u7684\u67e5\u8be2\u6b21\u6570\u6765\u63d0\u9ad8\u6027\u80fd\u3002\n  - \u4f46\u662f\uff0c\u8f83\u5927\u7684\u6279\u6b21\u53ef\u80fd\u4f1a\u6d88\u8017\u66f4\u591a\u5185\u5b58\uff0c\u7279\u522b\u662f\u5bf9\u4e8e\u590d\u6742\u67e5\u8be2\u6216\u5927\u578b\u6570\u636e\u96c6\u3002\n  - \u5c1d\u8bd5\u4e0d\u540c\u7684\u6279\u6b21\u5927\u5c0f\uff0c\u4ee5\u627e\u5230\u6027\u80fd\u548c\u8d44\u6e90\u4f7f\u7528\u4e4b\u95f4\u7684\u6700\u4f73\u5e73\u8861\u70b9\u3002\n\n## \u8fde\u63a5\u7f13\u5b58\n\n\u4e3a\u4e86\u8fdb\u4e00\u6b65\u4f18\u5316\u8fde\u63a5\u64cd\u4f5c\uff0cManticore Search \u5bf9\u53f3\u8868\u6267\u884c\u7684\u67e5\u8be2\u91c7\u7528\u4e86\u7f13\u5b58\u673a\u5236\u3002\u4ee5\u4e0b\u662f\u60a8\u9700\u8981\u4e86\u89e3\u7684\u5185\u5bb9\uff1a\n\n- **\u7f13\u5b58\u5982\u4f55\u5de5\u4f5c**\uff1a\n  - \u53f3\u8868\u7684\u6bcf\u4e2a\u67e5\u8be2\u90fd\u7531 `JOIN ON` \u6761\u4ef6\u5b9a\u4e49\u3002\n  - \u5982\u679c\u76f8\u540c\u7684 `JOIN ON` \u6761\u4ef6\u5728\u591a\u4e2a\u67e5\u8be2\u4e2d\u91cd\u590d\u51fa\u73b0\uff0c\u7ed3\u679c\u5c06\u88ab\u7f13\u5b58\u5e76\u91cd\u590d\u4f7f\u7528\u3002\n  - \u8fd9\u907f\u514d\u4e86\u5197\u4f59\u67e5\u8be2\uff0c\u5e76\u52a0\u5feb\u4e86\u540e\u7eed\u8fde\u63a5\u64cd\u4f5c\u7684\u901f\u5ea6\u3002\n\n- **\u914d\u7f6e\u7f13\u5b58\u5927\u5c0f**\uff1a\n  - \u8fde\u63a5\u7f13\u5b58\u7684\u5927\u5c0f\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6 `searchd` \u90e8\u5206\u4e2d\u7684 [join_cache_size](../Server_settings/Searchd.md#join_cache_size) \u9009\u9879\u8fdb\u884c\u914d\u7f6e\u3002\n  - \u9ed8\u8ba4\u7f13\u5b58\u5927\u5c0f\u4e3a `20MB`\uff0c\u4f46\u60a8\u53ef\u4ee5\u6839\u636e\u5de5\u4f5c\u8d1f\u8f7d\u548c\u53ef\u7528\u5185\u5b58\u8fdb\u884c\u8c03\u6574\u3002\n  - \u8bbe\u7f6e `join_cache_size=0` \u5c06\u5b8c\u5168\u7981\u7528\u7f13\u5b58\u3002\n\n- **\u5185\u5b58\u8003\u8651**\uff1a\n  - \u6bcf\u4e2a\u7ebf\u7a0b\u7ef4\u62a4\u81ea\u5df1\u7684\u7f13\u5b58\uff0c\u56e0\u6b64\u603b\u5185\u5b58\u4f7f\u7528\u91cf\u53d6\u51b3\u4e8e\u7ebf\u7a0b\u6570\u91cf\u548c\u7f13\u5b58\u5927\u5c0f\u3002\n  - \u8bf7\u786e\u4fdd\u60a8\u7684\u670d\u52a1\u5668\u6709\u8db3\u591f\u7684\u5185\u5b58\u6765\u5bb9\u7eb3\u7f13\u5b58\uff0c\u7279\u522b\u662f\u5728\u9ad8\u5e76\u53d1\u73af\u5883\u4e2d\u3002\n\n## \u8fde\u63a5\u5206\u5e03\u5f0f\u8868\n\n\u4ec5\u7531\u672c\u5730\u8868\u7ec4\u6210\u7684\u5206\u5e03\u5f0f\u8868\u5728\u8fde\u63a5\u67e5\u8be2\u7684\u5de6\u4fa7\u548c\u53f3\u4fa7\u90fd\u53d7\u652f\u6301\u3002\u4f46\u662f\uff0c\u5305\u542b\u8fdc\u7a0b\u8868\u7684\u5206\u5e03\u5f0f\u8868\u4e0d\u53d7\u652f\u6301\u3002\n\n## \u6ce8\u610f\u4e8b\u9879\u4e0e\u6700\u4f73\u5b9e\u8df5\n\n\u5728 Manticore Search \u4e2d\u4f7f\u7528 JOIN \u65f6\uff0c\u8bf7\u8bb0\u4f4f\u4ee5\u4e0b\u51e0\u70b9\uff1a\n\n1. **\u5b57\u6bb5\u9009\u62e9**\uff1a\u5728 JOIN \u4e2d\u9009\u62e9\u4e24\u4e2a\u8868\u7684\u5b57\u6bb5\u65f6\uff0c\u4e0d\u8981\u4e3a\u5de6\u8868\u7684\u5b57\u6bb5\u6dfb\u52a0\u524d\u7f00\uff0c\u4f46\u9700\u8981\u4e3a\u53f3\u8868\u7684\u5b57\u6bb5\u6dfb\u52a0\u524d\u7f00\u3002\u4f8b\u5982\uff1a\nCODE_BLOCK_33\n\n2. **JOIN \u6761\u4ef6**\uff1a\u59cb\u7ec8\u5728 JOIN \u6761\u4ef6\u4e2d\u660e\u786e\u6307\u5b9a\u8868\u540d\uff1a\nCODE_BLOCK_34\n\n3. **\u4f7f\u7528 JOIN \u7684\u8868\u8fbe\u5f0f**\uff1a\u5f53\u4f7f\u7528\u7ec4\u5408\u4e86\u8fde\u63a5\u8868\u4e2d\u4e24\u4e2a\u5b57\u6bb5\u7684\u8868\u8fbe\u5f0f\u65f6\uff0c\u8bf7\u4e3a\u8868\u8fbe\u5f0f\u7684\u7ed3\u679c\u8bbe\u7f6e\u522b\u540d\uff1a\nCODE_BLOCK_35\n\n4. **\u5bf9\u5e26\u522b\u540d\u7684\u8868\u8fbe\u5f0f\u8fdb\u884c\u8fc7\u6ee4**\uff1a\u4e0d\u80fd\u5728 WHERE \u5b50\u53e5\u4e2d\u4f7f\u7528\u6d89\u53ca\u4e24\u4e2a\u8868\u5b57\u6bb5\u7684\u8868\u8fbe\u5f0f\u7684\u522b\u540d\u3002\n\n5. **JSON \u5c5e\u6027**\uff1a\u5728 JSON \u5c5e\u6027\u4e0a\u8fdb\u884c\u8fde\u63a5\u65f6\uff0c\u5fc5\u987b\u5c06\u503c\u663e\u5f0f\u8f6c\u6362\u4e3a\u9002\u5f53\u7684\u7c7b\u578b\uff1a\nCODE_BLOCK_36\n\n6. **NULL \u5904\u7406**\uff1a\u53ef\u4ee5\u5728\u8fde\u63a5\u5b57\u6bb5\u4e0a\u4f7f\u7528 IS NULL \u548c IS NOT NULL \u6761\u4ef6\uff1a\nCODE_BLOCK_37\n\n7. **\u5728 MVA \u4e2d\u4f7f\u7528 ANY**\uff1a\u5728 JOIN \u4e2d\u5bf9\u591a\u503c\u5c5e\u6027\u4f7f\u7528 `ANY()` \u51fd\u6570\u65f6\uff0c\u8bf7\u4e3a\u8fde\u63a5\u8868\u4e2d\u7684\u591a\u503c\u5c5e\u6027\u8bbe\u7f6e\u522b\u540d\uff1a\nCODE_BLOCK_38\n\n\u9075\u5faa\u8fd9\u4e9b\u6307\u5357\uff0c\u60a8\u53ef\u4ee5\u6709\u6548\u5730\u5728 Manticore Search \u4e2d\u4f7f\u7528 JOIN \u6765\u7ec4\u5408\u6765\u81ea\u591a\u4e2a\u7d22\u5f15\u7684\u6570\u636e\u5e76\u6267\u884c\u590d\u6742\u67e5\u8be2\u3002\n\n<!-- proofread -->",
            "russian": "\u042d\u0442\u043e\u0442 \u0437\u0430\u043f\u0440\u043e\u0441 \u0434\u0435\u043c\u043e\u043d\u0441\u0442\u0440\u0438\u0440\u0443\u0435\u0442 \u043f\u043e\u043b\u043d\u043e\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0439 \u043f\u043e\u0438\u0441\u043a \u043f\u043e \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u043c `customers` \u0438 `orders`, \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u043d\u044b\u0439 \u0441 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0435\u0439 \u043f\u043e \u0434\u0438\u0430\u043f\u0430\u0437\u043e\u043d\u0443 \u0438 \u0444\u0430\u0441\u0435\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\u043c. \u041e\u043d \u0438\u0449\u0435\u0442 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u0441 \u0438\u043c\u0435\u043d\u0430\u043c\u0438 \"Alice\" \u0438\u043b\u0438 \"Bob\" \u0438 \u0438\u0445 \u0437\u0430\u043a\u0430\u0437\u044b, \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0449\u0438\u0435 \"laptop\", \"phone\" \u0438\u043b\u0438 \"tablet\" \u0441 \u0446\u0435\u043d\u043e\u0439 \u0432\u044b\u0448\u0435 $500. \u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u0443\u043f\u043e\u0440\u044f\u0434\u043e\u0447\u0435\u043d\u044b \u043f\u043e ID \u0437\u0430\u043a\u0430\u0437\u0430 \u0438 \u0441\u0444\u0430\u0441\u0435\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u044b \u043f\u043e \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u043c \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u0438.\n\n<!-- request SQL -->\nCODE_BLOCK_25\n\n<!-- request JSON -->\nCODE_BLOCK_26\n\n<!-- response SQL -->\nCODE_BLOCK_27\n\n<!-- response JSON -->\n\nCODE_BLOCK_28\n\n<!-- end -->\n\n## \u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043f\u043e\u0438\u0441\u043a\u0430 \u0438 \u0432\u0435\u0441\u0430 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439\n\n\u0414\u043b\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0432 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0438 \u043c\u043e\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b: \u0434\u043b\u044f \u043b\u0435\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0438 \u0434\u043b\u044f \u043f\u0440\u0430\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b. \u0421\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441: `OPTION(<table_name>)` \u0434\u043b\u044f SQL-\u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0438 \u043e\u0434\u0438\u043d \u0438\u043b\u0438 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043f\u043e\u0434\u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432 \u0432 `\"options\"` \u0434\u043b\u044f JSON-\u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432.\n\n<!-- example join_options -->\n\n\u0412\u043e\u0442 \u043f\u0440\u0438\u043c\u0435\u0440, \u043a\u0430\u043a \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0440\u0430\u0437\u043d\u044b\u0435 \u0432\u0435\u0441\u0430 \u043f\u043e\u043b\u0435\u0439 \u0434\u043b\u044f \u043f\u043e\u043b\u043d\u043e\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u0433\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043f\u043e \u043f\u0440\u0430\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435. \u0427\u0442\u043e\u0431\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0432\u0435\u0441\u0430 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439 \u0447\u0435\u0440\u0435\u0437 SQL, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435 `<table_name>.weight()`.\n\u0412 JSON-\u0437\u0430\u043f\u0440\u043e\u0441\u0430\u0445 \u044d\u0442\u043e\u0442 \u0432\u0435\u0441 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d \u043a\u0430\u043a `<table_name>._score`.\n\n<!-- request SQL -->\nCODE_BLOCK_29\n\n<!-- request JSON -->\nCODE_BLOCK_30\n\n<!-- response SQL -->\n\nCODE_BLOCK_31\n\n<!-- response JSON -->\n\nCODE_BLOCK_32\n<!-- end -->\n\n## \u041f\u0430\u043a\u0435\u0442\u043d\u0430\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439\n\n\u041f\u0440\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0438 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439 \u0442\u0430\u0431\u043b\u0438\u0446 Manticore Search \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043f\u0430\u043a\u0435\u0442\u0430\u043c\u0438 \u0434\u043b\u044f \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0440\u0435\u0441\u0443\u0440\u0441\u043e\u0432. \u0412\u043e\u0442 \u043a\u0430\u043a \u044d\u0442\u043e \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442:\n\n- **\u041a\u0430\u043a \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043f\u0430\u043a\u0435\u0442\u043d\u0430\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430**:\n  - \u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0437\u0430\u043f\u0440\u043e\u0441 \u043f\u043e \u043b\u0435\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435, \u0438 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043d\u0430\u043a\u0430\u043f\u043b\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u0432 \u043f\u0430\u043a\u0435\u0442.\n  - \u0417\u0430\u0442\u0435\u043c \u044d\u0442\u043e\u0442 \u043f\u0430\u043a\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043a\u0430\u043a \u0432\u0445\u043e\u0434\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043f\u043e \u043f\u0440\u0430\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u043a\u0430\u043a \u0435\u0434\u0438\u043d\u0430\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f.\n  - \u0422\u0430\u043a\u043e\u0439 \u043f\u043e\u0434\u0445\u043e\u0434 \u043c\u0438\u043d\u0438\u043c\u0438\u0437\u0438\u0440\u0443\u0435\u0442 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432, \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u043c\u044b\u0445 \u043a \u043f\u0440\u0430\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435, \u043f\u043e\u0432\u044b\u0448\u0430\u044f \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c.\n\n- **\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0440\u0430\u0437\u043c\u0435\u0440\u0430 \u043f\u0430\u043a\u0435\u0442\u0430**:\n  - \u0420\u0430\u0437\u043c\u0435\u0440 \u043f\u0430\u043a\u0435\u0442\u0430 \u043c\u043e\u0436\u043d\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043e\u043f\u0446\u0438\u0438 \u043f\u043e\u0438\u0441\u043a\u0430 `join_batch_size`.\n  - \u041e\u043d \u0442\u0430\u043a\u0436\u0435 [\u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442\u0441\u044f](../Server_settings/Searchd.md#join_batch_size) \u0432 \u0440\u0430\u0437\u0434\u0435\u043b\u0435 `searchd` \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430.\n  - \u0420\u0430\u0437\u043c\u0435\u0440 \u043f\u0430\u043a\u0435\u0442\u0430 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u2014 `1000`, \u043d\u043e \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c \u0438\u043b\u0438 \u0443\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u044c \u0435\u0433\u043e \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0432\u0430\u0448\u0435\u0433\u043e \u0441\u043b\u0443\u0447\u0430\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f.\n  - \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 `join_batch_size=0` \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u043e\u0442\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u043f\u0430\u043a\u0435\u0442\u043d\u0443\u044e \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443, \u0447\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u043e\u043b\u0435\u0437\u043d\u043e \u0434\u043b\u044f \u043e\u0442\u043b\u0430\u0434\u043a\u0438 \u0438\u043b\u0438 \u0441\u043f\u0435\u0446\u0438\u0444\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0435\u0432.\n\n- **\u0421\u043e\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438**:\n  - \u0423\u0432\u0435\u043b\u0438\u0447\u0435\u043d\u0438\u0435 \u0440\u0430\u0437\u043c\u0435\u0440\u0430 \u043f\u0430\u043a\u0435\u0442\u0430 \u043c\u043e\u0436\u0435\u0442 \u0443\u043b\u0443\u0447\u0448\u0438\u0442\u044c \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c, \u0441\u043e\u043a\u0440\u0430\u0449\u0430\u044f \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432, \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u043c\u044b\u0445 \u043a \u043f\u0440\u0430\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435.\n  - \u041e\u0434\u043d\u0430\u043a\u043e \u0431\u043e\u043b\u044c\u0448\u0438\u0435 \u043f\u0430\u043a\u0435\u0442\u044b \u043c\u043e\u0433\u0443\u0442 \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u044f\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u043f\u0430\u043c\u044f\u0442\u0438, \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e \u0434\u043b\u044f \u0441\u043b\u043e\u0436\u043d\u044b\u0445 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0438\u043b\u0438 \u0431\u043e\u043b\u044c\u0448\u0438\u0445 \u043d\u0430\u0431\u043e\u0440\u043e\u0432 \u0434\u0430\u043d\u043d\u044b\u0445.\n  - \u042d\u043a\u0441\u043f\u0435\u0440\u0438\u043c\u0435\u043d\u0442\u0438\u0440\u0443\u0439\u0442\u0435 \u0441 \u0440\u0430\u0437\u043d\u044b\u043c\u0438 \u0440\u0430\u0437\u043c\u0435\u0440\u0430\u043c\u0438 \u043f\u0430\u043a\u0435\u0442\u043e\u0432, \u0447\u0442\u043e\u0431\u044b \u043d\u0430\u0439\u0442\u0438 \u043e\u043f\u0442\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0431\u0430\u043b\u0430\u043d\u0441 \u043c\u0435\u0436\u0434\u0443 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c\u044e \u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0440\u0435\u0441\u0443\u0440\u0441\u043e\u0432.\n\n## \u041a\u044d\u0448\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439\n\n\u0414\u043b\u044f \u0434\u0430\u043b\u044c\u043d\u0435\u0439\u0448\u0435\u0439 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f Manticore Search \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 \u043c\u0435\u0445\u0430\u043d\u0438\u0437\u043c \u043a\u044d\u0448\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0434\u043b\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432, \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u043c\u044b\u0445 \u043f\u043e \u043f\u0440\u0430\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435. \u0412\u043e\u0442 \u0447\u0442\u043e \u043d\u0443\u0436\u043d\u043e \u0437\u043d\u0430\u0442\u044c:\n\n- **\u041a\u0430\u043a \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043a\u044d\u0448\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435**:\n  - \u041a\u0430\u0436\u0434\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441 \u043a \u043f\u0440\u0430\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442\u0441\u044f \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u043c\u0438 `JOIN ON`.\n  - \u0415\u0441\u043b\u0438 \u043e\u0434\u043d\u0438 \u0438 \u0442\u0435 \u0436\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f `JOIN ON` \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u044e\u0442\u0441\u044f \u0432 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0437\u0430\u043f\u0440\u043e\u0441\u0430\u0445, \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043a\u044d\u0448\u0438\u0440\u0443\u044e\u0442\u0441\u044f \u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e.\n  - \u042d\u0442\u043e \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0438\u0437\u0431\u0435\u0436\u0430\u0442\u044c \u0438\u0437\u0431\u044b\u0442\u043e\u0447\u043d\u044b\u0445 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0438 \u0443\u0441\u043a\u043e\u0440\u0438\u0442\u044c \u043f\u043e\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f.\n\n- **\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0440\u0430\u0437\u043c\u0435\u0440\u0430 \u043a\u044d\u0448\u0430**:\n  - \u0420\u0430\u0437\u043c\u0435\u0440 \u043a\u044d\u0448\u0430 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439 \u043c\u043e\u0436\u043d\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043e\u043f\u0446\u0438\u0438 [join_cache_size](../Server_settings/Searchd.md#join_cache_size) \u0432 \u0440\u0430\u0437\u0434\u0435\u043b\u0435 `searchd` \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430.\n  - \u0420\u0430\u0437\u043c\u0435\u0440 \u043a\u044d\u0448\u0430 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u2014 `20MB`, \u043d\u043e \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0435\u0433\u043e \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0440\u0430\u0431\u043e\u0447\u0435\u0439 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0438 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0439 \u043f\u0430\u043c\u044f\u0442\u0438.\n  - \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 `join_cache_size=0` \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u043e\u0442\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u043a\u044d\u0448\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435.\n\n- **\u0421\u043e\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u043f\u043e \u043f\u0430\u043c\u044f\u0442\u0438**:\n  - \u041a\u0430\u0436\u0434\u044b\u0439 \u043f\u043e\u0442\u043e\u043a \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0441\u0432\u043e\u0439 \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u043a\u044d\u0448, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u043e\u0431\u0449\u0435\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0430\u043c\u044f\u0442\u0438 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u043f\u043e\u0442\u043e\u043a\u043e\u0432 \u0438 \u0440\u0430\u0437\u043c\u0435\u0440\u0430 \u043a\u044d\u0448\u0430.\n  - \u0423\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044c, \u0447\u0442\u043e \u0432\u0430\u0448 \u0441\u0435\u0440\u0432\u0435\u0440 \u0438\u043c\u0435\u0435\u0442 \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u043f\u0430\u043c\u044f\u0442\u0438 \u0434\u043b\u044f \u0440\u0430\u0437\u043c\u0435\u0449\u0435\u043d\u0438\u044f \u043a\u044d\u0448\u0430, \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e \u0432 \u0441\u0440\u0435\u0434\u0430\u0445 \u0441 \u0432\u044b\u0441\u043e\u043a\u043e\u0439 \u043a\u043e\u043d\u043a\u0443\u0440\u0435\u043d\u0442\u043d\u043e\u0441\u0442\u044c\u044e.\n\n## \u041e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0445 \u0442\u0430\u0431\u043b\u0438\u0446\n\n\u0420\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b, \u0441\u043e\u0441\u0442\u043e\u044f\u0449\u0438\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0445 \u0442\u0430\u0431\u043b\u0438\u0446, \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u043a\u0430\u043a \u0441 \u043b\u0435\u0432\u043e\u0439, \u0442\u0430\u043a \u0438 \u0441 \u043f\u0440\u0430\u0432\u043e\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u044b \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043d\u0430 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435. \u041e\u0434\u043d\u0430\u043a\u043e \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b, \u0432\u043a\u043b\u044e\u0447\u0430\u044e\u0449\u0438\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b, \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442\u0441\u044f.\n\n## \u041e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0438 \u043b\u0443\u0447\u0448\u0438\u0435 \u043f\u0440\u0430\u043a\u0442\u0438\u043a\u0438\n\n\u041f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 JOIN \u0432 Manticore Search \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0439\u0442\u0435 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043c\u043e\u043c\u0435\u043d\u0442\u044b:\n\n1. **\u0412\u044b\u0431\u043e\u0440 \u043f\u043e\u043b\u0435\u0439**: \u041f\u0440\u0438 \u0432\u044b\u0431\u043e\u0440\u0435 \u043f\u043e\u043b\u0435\u0439 \u0438\u0437 \u0434\u0432\u0443\u0445 \u0442\u0430\u0431\u043b\u0438\u0446 \u0432 JOIN \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043f\u0440\u0435\u0444\u0438\u043a\u0441 \u0434\u043b\u044f \u043f\u043e\u043b\u0435\u0439 \u0438\u0437 \u043b\u0435\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b, \u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043f\u0440\u0435\u0444\u0438\u043a\u0441 \u0434\u043b\u044f \u043f\u043e\u043b\u0435\u0439 \u0438\u0437 \u043f\u0440\u0430\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440:\nCODE_BLOCK_33\n\n2. **\u0423\u0441\u043b\u043e\u0432\u0438\u044f JOIN**: \u0412\u0441\u0435\u0433\u0434\u0430 \u044f\u0432\u043d\u043e \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0439\u0442\u0435 \u0438\u043c\u0435\u043d\u0430 \u0442\u0430\u0431\u043b\u0438\u0446 \u0432 \u0432\u0430\u0448\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 JOIN:\nCODE_BLOCK_34\n\n3. **\u0412\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0441 JOIN**: \u041f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0439, \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u044f\u044e\u0449\u0438\u0445 \u043f\u043e\u043b\u044f \u0438\u0437 \u043e\u0431\u0435\u0438\u0445 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u043d\u044b\u0445 \u0442\u0430\u0431\u043b\u0438\u0446, \u043f\u0440\u0438\u0441\u0432\u0430\u0438\u0432\u0430\u0439\u0442\u0435 \u043f\u0441\u0435\u0432\u0434\u043e\u043d\u0438\u043c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f:\nCODE_BLOCK_35\n\n4. **\u0424\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u043e \u043f\u0441\u0435\u0432\u0434\u043e\u043d\u0438\u043c\u0430\u043c \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0439**: \u0412\u044b \u043d\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043f\u0441\u0435\u0432\u0434\u043e\u043d\u0438\u043c\u044b \u0434\u043b\u044f \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0439, \u0432\u043a\u043b\u044e\u0447\u0430\u044e\u0449\u0438\u0445 \u043f\u043e\u043b\u044f \u0438\u0437 \u043e\u0431\u0435\u0438\u0445 \u0442\u0430\u0431\u043b\u0438\u0446, \u0432 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0438 WHERE.\n\n5. **JSON-\u0430\u0442\u0440\u0438\u0431\u0443\u0442\u044b**: \u041f\u0440\u0438 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0438 \u043f\u043e JSON-\u0430\u0442\u0440\u0438\u0431\u0443\u0442\u0430\u043c \u0432\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u044f\u0432\u043d\u043e \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u044b\u0432\u0430\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u043c\u0443 \u0442\u0438\u043f\u0443:\nCODE_BLOCK_36\n\n6. **\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 NULL**: \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0443\u0441\u043b\u043e\u0432\u0438\u044f IS NULL \u0438 IS NOT NULL \u0434\u043b\u044f \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u043d\u044b\u0445 \u043f\u043e\u043b\u0435\u0439:\nCODE_BLOCK_37\n\n7. **\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 ANY \u0441 MVA**: \u041f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 `ANY()` \u0441 \u043c\u043d\u043e\u0433\u043e\u0437\u043d\u0430\u0447\u043d\u044b\u043c\u0438 \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u0430\u043c\u0438 \u0432 JOIN \u043f\u0440\u0438\u0441\u0432\u0430\u0438\u0432\u0430\u0439\u0442\u0435 \u043f\u0441\u0435\u0432\u0434\u043e\u043d\u0438\u043c \u043c\u043d\u043e\u0433\u043e\u0437\u043d\u0430\u0447\u043d\u043e\u043c\u0443 \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u0443 \u0438\u0437 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b:\nCODE_BLOCK_38\n\n\u0421\u043b\u0435\u0434\u0443\u044f \u044d\u0442\u0438\u043c \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u044f\u043c, \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c JOIN \u0432 Manticore Search \u0434\u043b\u044f \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u0438\u0437 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0438\u043d\u0434\u0435\u043a\u0441\u043e\u0432 \u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0441\u043b\u043e\u0436\u043d\u044b\u0445 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432.\n\n<!-- proofread -->"
        },
        "is_code_or_comment": false,
        "model": "deepseek/deepseek-v3.2",
        "updated_at": 1766374263
    },
    "__meta": {
        "source_text": "# Joining tables\n\nTable joins in Manticore Search enable you to combine documents from two tables by matching related columns. This functionality allows for more complex queries and enhanced data retrieval across multiple tables.\n\n## General syntax\n\n### SQL\n\n```sql\nSELECT\n\tselect_expr [, select_expr] ...\n\tFROM tbl_name\n\t{INNER | LEFT} JOIN tbl2_name\n\tON join_condition\n\t[...other select options]\n\njoin_condition: {\n\tleft_table.attr = right_table.attr\n\t| left_table.json_attr.string_id = string(right_table.json_attr.string_id)\n\t| left_table.json_attr.int_id = int(right_table.json_attr.int_id)\n\t| [..filters on right table attributes]\n}\n```\n\nFor more information on select options, refer to the [SELECT](../Searching/Intro.md#General-syntax) section.\n\n<!--example join_sql_json_type -->\n\nWhen joining by a value from a JSON attribute, you need to explicitly specify the value's type using the `int()` or `string()` function.\n\n<!-- request String JSON attribute -->\n```sql\nSELECT ... ON left_table.json_attr.string_id = string(right_table.json_attr.string_id)\n```\n\n<!-- request Int JSON attribute -->\n```sql\nSELECT ... ON left_table.json_attr.int_id = int(right_table.json_attr.int_id)\n```\n\n<!-- end -->\n\n### JSON\n\n```json\nPOST /search\n{\n  \"table\": \"table_name\",\n  \"query\": {\n    <optional full-text query against the left table>\n  },\n  \"join\": [\n    {\n      \"type\": \"inner\" | \"left\",\n      \"table\": \"joined_table_name\",\n      \"query\": {\n        <optional full-text query against the right table>\n      },\n      \"on\": [\n        {\n          \"left\": {\n            \"table\": \"left_table_name\",\n            \"field\": \"field_name\",\n            \"type\": \"<common field's type when joining using json attributes>\"\n          },\n          \"operator\": \"eq\",\n          \"right\": {\n            \"table\": \"right_table_name\",\n            \"field\": \"field_name\"\n          }\n        }\n      ]\n    }\n  ],\n  \"options\": {\n    ...\n  }\n}\n\non.type: {\n\tint\n\t| string\n}\n```\nNote, there is the `type` field in the `left` operand section which you should use when joining two tables using json attributes. The allowed values are `string` and `int`.\n\n## Types of joins\n\nManticore Search supports two types of joins:\n\n<!-- example inner_basic -->\n\n1. **INNER JOIN**: Returns only the rows where there is a match in both tables. For example, the query performs an INNER JOIN between the `orders` and `customers` tables, including only the orders that have matching customers.\n\n<!-- request SQL -->\n```sql\nSELECT product, customers.email, customers.name, customers.address\nFROM orders\nINNER JOIN customers\nON customers.id = orders.customer_id\nWHERE MATCH('maple', customers)\nORDER BY customers.email ASC;\n```\n\n<!-- request JSON -->\n```json\nPOST /search\n{\n  \"table\": \"orders\",\n  \"join\": [\n    {\n      \"type\": \"inner\",\n      \"table\": \"customers\",\n      \"query\": {\n        \"query_string\": \"maple\"\n      },\n      \"on\": [\n        {\n          \"left\": {\n            \"table\": \"orders\",\n            \"field\": \"customer_id\"\n          },\n          \"operator\": \"eq\",\n          \"right\": {\n            \"table\": \"customers\",\n            \"field\": \"id\"\n          }\n        }\n      ]\n    }\n  ],\n  \"_source\": [\"product\", \"customers.email\", \"customers.name\", \"customers.address\"],\n  \"sort\": [{\"customers.email\": \"asc\"}]\n}\n```\n\n<!-- response SQL -->\n\n```sql\n+---------+-------------------+----------------+-------------------+\n| product | customers.email   | customers.name | customers.address |\n+---------+-------------------+----------------+-------------------+\n| Laptop  | alice@example.com | Alice Johnson  | 123 Maple St      |\n| Tablet  | alice@example.com | Alice Johnson  | 123 Maple St      |\n+---------+-------------------+----------------+-------------------+\n2 rows in set (0.00 sec)\n```\n\n<!-- response JSON -->\n\n```json\n{\n  \"took\": 0,\n  \"timed_out\": false,\n  \"hits\": {\n    \"total\": 2,\n    \"total_relation\": \"eq\",\n    \"hits\": [\n      {\n        \"_id\": 1,\n        \"_score\": 1,\n        \"_source\": {\n          \"product\": \"Laptop\",\n          \"customers.email\": \"alice@example.com\",\n          \"customers.name\": \"Alice Johnson\",\n          \"customers.address\": \"123 Maple St\"\n        }\n      },\n      {\n        \"_id\": 3,\n        \"_score\": 1,\n        \"_source\": {\n          \"product\": \"Tablet\",\n          \"customers.email\": \"alice@example.com\",\n          \"customers.name\": \"Alice Johnson\",\n          \"customers.address\": \"123 Maple St\"\n        }\n      }\n    ]\n  }\n}\n```\n<!-- end -->\n\n<!-- example left_basic -->\n\n2. **LEFT JOIN**: Returns all rows from the left table and the matched rows from the right table. If there is no match, NULL values are returned for the right table's columns. For example, this query retrieves all customers along with their corresponding orders using a LEFT JOIN. If no corresponding order exists, NULL values will appear. The results are sorted by the customer's email, and only the customer's name and the order quantity are selected.\n\n<!-- request SQL -->\n```sql\nSELECT\nname, orders.quantity\nFROM customers\nLEFT JOIN orders\nON orders.customer_id = customers.id\nORDER BY email ASC;\n```\n\n<!-- request JSON -->\n```json\nPOST /search\n{\n\t\"table\": \"customers\",\n\t\"_source\": [\"name\", \"orders.quantity\"],\n\t\"join\": [\n    {\n      \"type\": \"left\",\n      \"table\": \"orders\",\n      \"on\": [\n        {\n          \"left\": {\n            \"table\": \"orders\",\n            \"field\": \"customer_id\"\n          },\n          \"operator\": \"eq\",\n          \"right\": {\n            \"table\": \"customers\",\n            \"field\": \"id\"\n          }\n        }\n      ]\n    }\n  ],\n  \"sort\": [{\"email\": \"asc\"}]\n}\n```\n\n<!-- response SQL -->\n```\n+---------------+-----------------+-------------------+\n| name          | orders.quantity | @int_attr_email   |\n+---------------+-----------------+-------------------+\n| Alice Johnson |               1 | alice@example.com |\n| Alice Johnson |               1 | alice@example.com |\n| Bob Smith     |               2 | bob@example.com   |\n| Carol White   |               1 | carol@example.com |\n| John Smith    |            NULL | john@example.com  |\n+---------------+-----------------+-------------------+\n5 rows in set (0.00 sec)\n```\n\n<!-- response JSON -->\n\n```\n{\n  \"took\": 0,\n  \"timed_out\": false,\n  \"hits\": {\n    \"total\": 5,\n    \"total_relation\": \"eq\",\n    \"hits\": [\n      {\n        \"_id\": 1,\n        \"_score\": 1,\n        \"_source\": {\n          \"name\": \"Alice Johnson\",\n          \"address\": \"123 Maple St\",\n          \"email\": \"alice@example.com\",\n          \"orders.id\": 3,\n          \"orders.customer_id\": 1,\n          \"orders.quantity\": 1,\n          \"orders.order_date\": \"2023-01-03\",\n          \"orders.tags\": [\n            101,\n            104\n          ],\n          \"orders.details\": {\n            \"price\": 450,\n            \"warranty\": \"1 year\"\n          },\n          \"orders.product\": \"Tablet\"\n        }\n      },\n      {\n        \"_id\": 1,\n        \"_score\": 1,\n        \"_source\": {\n          \"name\": \"Alice Johnson\",\n          \"address\": \"123 Maple St\",\n          \"email\": \"alice@example.com\",\n          \"orders.id\": 1,\n          \"orders.customer_id\": 1,\n          \"orders.quantity\": 1,\n          \"orders.order_date\": \"2023-01-01\",\n          \"orders.tags\": [\n            101,\n            102\n          ],\n          \"orders.details\": {\n            \"price\": 1200,\n            \"warranty\": \"2 years\"\n          },\n          \"orders.product\": \"Laptop\"\n        }\n      },\n      {\n        \"_id\": 2,\n        \"_score\": 1,\n        \"_source\": {\n          \"name\": \"Bob Smith\",\n          \"address\": \"456 Oak St\",\n          \"email\": \"bob@example.com\",\n          \"orders.id\": 2,\n          \"orders.customer_id\": 2,\n          \"orders.quantity\": 2,\n          \"orders.order_date\": \"2023-01-02\",\n          \"orders.tags\": [\n            103\n          ],\n          \"orders.details\": {\n            \"price\": 800,\n            \"warranty\": \"1 year\"\n          },\n          \"orders.product\": \"Phone\"\n        }\n      },\n      {\n        \"_id\": 3,\n        \"_score\": 1,\n        \"_source\": {\n          \"name\": \"Carol White\",\n          \"address\": \"789 Pine St\",\n          \"email\": \"carol@example.com\",\n          \"orders.id\": 4,\n          \"orders.customer_id\": 3,\n          \"orders.quantity\": 1,\n          \"orders.order_date\": \"2023-01-04\",\n          \"orders.tags\": [\n            105\n          ],\n          \"orders.details\": {\n            \"price\": 300,\n            \"warranty\": \"1 year\"\n          },\n          \"orders.product\": \"Monitor\"\n        }\n      },\n      {\n        \"_id\": 4,\n        \"_score\": 1,\n        \"_source\": {\n          \"name\": \"John Smith\",\n          \"address\": \"15 Barclays St\",\n          \"email\": \"john@example.com\",\n          \"orders.id\": 0,\n          \"orders.customer_id\": 0,\n          \"orders.quantity\": 0,\n          \"orders.order_date\": \"\",\n          \"orders.tags\": [],\n          \"orders.details\": null,\n          \"orders.product\": \"\"\n        }\n      }\n    ]\n  }\n}\n```\n\n<!-- end -->\n\n## Full-text matching across joined tables\n\nOne of the powerful features of table joins in Manticore Search is the ability to perform full-text searches on both the left and right tables simultaneously. This allows you to create complex queries that filter based on text content in multiple tables.\n\n<!-- example fulltext_basic -->\n\nYou can use separate `MATCH()` functions for each table in your JOIN query. The query filters results based on text content in both tables.\n\n<!-- request SQL -->\n```sql\nSELECT t1.f, t2.f \nFROM t1 \nLEFT JOIN t2 ON t1.id = t2.id \nWHERE MATCH('hello', t1) AND MATCH('goodbye', t2);\n```\n\n<!-- request JSON -->\n```json\nPOST /search\n{\n  \"table\": \"t1\",\n  \"query\": {\n    \"query_string\": \"hello\"\n  },\n  \"join\": [\n    {\n      \"type\": \"left\",\n      \"table\": \"t2\",\n      \"query\": {\n        \"query_string\": \"goodbye\"\n      },\n      \"on\": [\n        {\n          \"left\": {\n            \"table\": \"t1\",\n            \"field\": \"id\"\n          },\n          \"operator\": \"eq\",\n          \"right\": {\n            \"table\": \"t2\",\n            \"field\": \"id\"\n          }\n        }\n      ]\n    }\n  ],\n  \"_source\": [\"f\", \"t2.f\"]\n}\n```\n\n<!-- response SQL -->\n\n```sql\n+-------------+---------------+\n| f           | t2.f          |\n+-------------+---------------+\n| hello world | goodbye world |\n+-------------+---------------+\n1 row in set (0.00 sec)\n```\n\n<!-- response JSON -->\n\n```json\n{\n  \"took\": 1,\n  \"timed_out\": false,\n  \"hits\": {\n    \"total\": 1,\n    \"total_relation\": \"eq\",\n    \"hits\": [\n      {\n        \"_id\": 2,\n        \"_score\": 1680,\n        \"t2._score\": 1680,\n        \"_source\": {\n          \"f\": \"hello world\",\n          \"t2.f\": \"goodbye world\"\n        }\n      }\n    ]\n  }\n}\n```\n\n<!-- end -->\n\n### JSON query structure for joins\n\nIn JSON API queries, table-specific full-text matching is structured differently than SQL:\n\n<!-- example fulltext_json_structure -->\n\n**Main table query**: The `\"query\"` field at the root level applies to the main table (specified in `\"table\"`).\n\n**Joined table query**: Each join definition can include its own `\"query\"` field that applies specifically to that joined table.\n\n<!-- request JSON -->\n```json\nPOST /search\n{\n  \"table\": \"t1\",\n  \"query\": {\n    \"query_string\": \"hello\"\n  },\n  \"join\": [\n    {\n      \"type\": \"left\",\n      \"table\": \"t2\",\n      \"query\": {\n        \"match\": {\n          \"*\": \"goodbye\"\n        }\n      },\n      \"on\": [\n        {\n          \"left\": {\n            \"table\": \"t1\",\n            \"field\": \"id\"\n          },\n          \"operator\": \"eq\",\n          \"right\": {\n            \"table\": \"t2\",\n            \"field\": \"id\"\n          }\n        }\n      ]\n    }\n  ]\n}\n```\n\n<!-- response JSON -->\n\n```json\n{\n  \"took\": 1,\n  \"timed_out\": false,\n  \"hits\": {\n    \"total\": 1,\n    \"total_relation\": \"eq\",\n    \"hits\": [\n      {\n        \"_id\": 1,\n        \"_score\": 1680,\n        \"t2._score\": 1680,\n        \"_source\": {\n          \"f\": \"hello world\",\n          \"t2.id\": 1,\n          \"t2.f\": \"goodbye world\"\n        }\n      }\n    ]\n  }\n}\n```\n\n<!-- end -->\n\n### Understanding query behavior in JOIN operations\n\n<!-- example fulltext_json_behavior -->\n\n**1. Query on main table only**: Returns all matching rows from the main table. For unmatched joined records (LEFT JOIN), SQL returns NULL values while JSON API returns default values (0 for numbers, empty strings for text).\n\n<!-- request SQL -->\n```sql\nSELECT * FROM t1 \nLEFT JOIN t2 ON t1.id = t2.id \nWHERE MATCH('database', t1);\n```\n\n<!-- response SQL -->\n\n```sql\n+------+-----------------+-------+------+\n| id   | f               | t2.id | t2.f |\n+------+-----------------+-------+------+\n|    3 | database search |  NULL | NULL |\n+------+-----------------+-------+------+\n1 row in set (0.00 sec)\n```\n\n<!-- request JSON -->\n```json\nPOST /search\n{\n  \"table\": \"t1\",\n  \"query\": {\n    \"query_string\": \"database\"\n  },\n  \"join\": [\n    {\n      \"type\": \"left\",\n      \"table\": \"t2\",\n      \"on\": [\n        {\n          \"left\": {\n            \"table\": \"t1\",\n            \"field\": \"id\"\n          },\n          \"operator\": \"eq\",\n          \"right\": {\n            \"table\": \"t2\",\n            \"field\": \"id\"\n          }\n        }\n      ]\n    }\n  ]\n}\n```\n\n<!-- response JSON -->\n\n```json\n{\n  \"took\": 0,\n  \"timed_out\": false,\n  \"hits\": {\n    \"total\": 1,\n    \"total_relation\": \"eq\",\n    \"hits\": [\n      {\n        \"_id\": 3,\n        \"_score\": 1680,\n        \"t2._score\": 0,\n        \"_source\": {\n          \"f\": \"database search\",\n          \"t2.id\": 0,\n          \"t2.f\": \"\"\n        }\n      }\n    ]\n  }\n}\n```\n<!--end -->\n\n<!-- example fulltext_json_behavior_2 -->\n**2. Query on joined table acts as filter**: When a joined table has a query, only records matching both the join condition AND the query condition are returned.\n\n<!-- request JSON -->\n```json\nPOST /search\n{\n  \"table\": \"t1\",\n  \"query\": {\n    \"query_string\": \"database\"\n  },\n  \"join\": [\n    {\n      \"type\": \"left\",\n      \"table\": \"t2\",\n      \"query\": {\n        \"query_string\": \"nonexistent\"\n      },\n      \"on\": [\n        {\n          \"left\": {\n            \"table\": \"t1\",\n            \"field\": \"id\"\n          },\n          \"operator\": \"eq\",\n          \"right\": {\n            \"table\": \"t2\",\n            \"field\": \"id\"\n          }\n        }\n      ]\n    }\n  ]\n}\n```\n\n<!-- response JSON -->\n\n```json\n{\n  \"took\": 0,\n  \"timed_out\": false,\n  \"hits\": {\n    \"total\": 0,\n    \"total_relation\": \"eq\",\n    \"hits\": []\n  }\n}\n```\n<!-- end -->\n\n**3. JOIN type affects filtering**: INNER JOIN requires both join and query conditions to be satisfied, while LEFT JOIN returns matching left table rows even when right table conditions fail.\n\n\n### Important considerations for full-text matching in JOINs\n\nWhen using full-text matching with joins, keep these points in mind:\n\n1. **Table-specific matching**: \n   - **SQL**: Each `MATCH()` function should specify which table to search in: `MATCH('term', table_name)`\n   - **JSON**: Use the root-level `\"query\"` for the main table and `\"query\"` within each join definition for joined tables\n\n2. **Query syntax flexibility**: JSON API supports both `\"query_string\"` and `\"match\"` syntaxes for full-text queries\n\n3. **Performance implications**: Full-text matching on both tables may impact query performance, especially with large datasets. Consider using appropriate indexes and batch sizes.\n\n4. **NULL/default value handling**: With LEFT JOIN, if there's no matching record in the right table, the query optimizer decides whether to evaluate full-text conditions or filtering conditions first based on performance. SQL returns NULL values while JSON API returns default values (0 for numbers, empty strings for text).\n\n5. **Filtering behavior**: Queries on joined tables act as filters - they restrict results to records that satisfy both join and query conditions.\n\n6. **Full-text operator support**: All [full-text operators](../Searching/Full_text_matching/Operators.md) are supported in JOIN queries, including phrase, proximity, field search, NEAR, quorum matching, and advanced operators.\n\n7. **Score calculation**: Each table maintains its own relevance score, accessible via `table_name.weight()` in SQL or `table_name._score` in JSON responses.\n\n## Example: Complex JOIN with faceting\n\nBuilding on the previous examples, let's explore a more advanced scenario where we combine table joins with faceting and full-text matching across multiple tables. This demonstrates the full power of Manticore's JOIN capabilities with complex filtering and aggregation.\n\n<details>\n\nInit queries for the following example:\n\n```\ndrop table if exists customers; drop table if exists orders; create table customers(name text, email text, address text); create table orders(product text, customer_id int, quantity int, order_date string, tags multi, details json); insert into customers values (1, 'Alice Johnson', 'alice@example.com', '123 Maple St'), (2, 'Bob Smith', 'bob@example.com', '456 Oak St'), (3, 'Carol White', 'carol@example.com', '789 Pine St'), (4, 'John Smith', 'john@example.com', '15 Barclays St'); insert into orders values (1, 'Laptop Computer', 1, 1, '2023-01-01', (101,102), '{\"price\":1200,\"warranty\":\"2 years\"}'), (2, 'Smart Phone', 2, 2, '2023-01-02', (103), '{\"price\":800,\"warranty\":\"1 year\"}'), (3, 'Tablet Device', 1, 1, '2023-01-03', (101,104), '{\"price\":450,\"warranty\":\"1 year\"}'), (4, 'Monitor Display', 3, 1, '2023-01-04', (105), '{\"price\":300,\"warranty\":\"1 year\"}');\n```\n\n</details>\n\n<!-- example basic_complex -->\n\nThis query demonstrates full-text matching across both the `customers` and `orders` tables, combined with range filtering and faceting. It searches for customers named \"Alice\" or \"Bob\" and their orders containing \"laptop\", \"phone\", or \"tablet\" with prices above $500. The results are ordered by order ID and faceted by warranty terms.\n\n<!-- request SQL -->\n```sql\nSELECT orders.product, name, orders.details.price, orders.tags\nFROM customers\nLEFT JOIN orders ON customers.id = orders.customer_id\nWHERE orders.details.price > 500\nAND MATCH('laptop | phone | tablet', orders)\nAND MATCH('alice | bob', customers)\nORDER BY orders.id ASC\nFACET orders.details.warranty;\n```\n\n<!-- request JSON -->\n```json\nPOST /search\n{\n  \"table\": \"customers\",\n  \"query\":  {\n      \"bool\": {\n          \"must\": [\n          {\n              \"range\": {\n                  \"orders.details.price\": {\n                      \"gt\": 500\n                  }\n               },\n               \"query_string\": \"alice | bob\"\n          ]\n      }\n  },\n  \"join\": [\n    {\n      \"type\": \"left\",\n      \"table\": \"orders\",\n      \"query\": {\n          \"query_string\": \"laptop | phone | tablet\"\n      },\n      \"on\": [\n        {\n          \"left\": {\n            \"table\": \"customers\",\n            \"field\": \"id\"\n          },\n          \"operator\": \"eq\",\n          \"right\": {\n            \"table\": \"orders\",\n            \"field\": \"customer_id\"\n          }\n        }\n      ]\n    }\n  ],\n  \"_source\": [\"orders.product\", \"name\", \"orders.details.price\", \"orders.tags\"],\n  \"sort\": [{\"orders.id\": \"asc\"}],\n  \"aggs\": {\n    \"warranty_facet\": {\n      \"terms\": {\n        \"field\": \"orders.details.warranty\"\n      }\n    }\n  }\n}\n```\n\n<!-- response SQL -->\n```sql\n+-----------------+---------------+----------------------+-------------+\n| orders.product  | name          | orders.details.price | orders.tags |\n+-----------------+---------------+----------------------+-------------+\n| Laptop Computer | Alice Johnson |                 1200 | 101,102     |\n| Smart Phone     | Bob Smith     |                  800 | 103         |\n+-----------------+---------------+----------------------+-------------+\n2 rows in set (0.00 sec)\n\n+-------------------------+----------+\n| orders.details.warranty | count(*) |\n+-------------------------+----------+\n| 2 years                 |        1 |\n| 1 year                  |        1 |\n+-------------------------+----------+\n2 rows in set (0.00 sec)\n```\n\n<!-- response JSON -->\n\n```json\n{\n  \"took\": 0,\n  \"timed_out\": false,\n  \"hits\": {\n    \"total\": 3,\n    \"total_relation\": \"eq\",\n    \"hits\": [\n      {\n        \"_id\": 1,\n        \"_score\": 1,\n        \"orders._score\": 1565,\n        \"_source\": {\n          \"name\": \"Alice Johnson\",\n          \"orders.tags\": [\n            101,\n            102\n          ],\n          \"orders.product\": \"Laptop Computer\"\n        }\n      },\n      {\n        \"_id\": 2,\n        \"_score\": 1,\n        \"orders._score\": 1565,\n        \"_source\": {\n          \"name\": \"Bob Smith\",\n          \"orders.tags\": [\n            103\n          ],\n          \"orders.product\": \"Smart Phone\"\n        }\n      },\n      {\n        \"_id\": 1,\n        \"_score\": 1,\n        \"orders._score\": 1565,\n        \"_source\": {\n          \"name\": \"Alice Johnson\",\n          \"orders.tags\": [\n            101,\n            104\n          ],\n          \"orders.product\": \"Tablet Device\"\n        }\n      }\n    ]\n  },\n  \"aggregations\": {\n    \"warranty_facet\": {\n      \"buckets\": [\n        {\n          \"key\": \"2 years\",\n          \"doc_count\": 1\n        },\n        {\n          \"key\": \"1 year\",\n          \"doc_count\": 2\n        }\n      ]\n    }\n  }\n}\n```\n\n\n<!-- end -->\n\n## Search options and match weights\n\nSeparate options can be specified for queries in a join: for the left table and the right table. The syntax is `OPTION(<table_name>)` for SQL queries and one or more subobjects under `\"options\"` for JSON queries.\n\n\n<!-- example join_options -->\n\nHere's an example of how to specify different field weights for a full-text query on the right table. To retrieve match weights via SQL, use the `<table_name>.weight()` expression.\nIn JSON queries, this weight is represented as `<table_name>._score`.\n\n<!-- request SQL -->\n```sql\nSELECT product, customers.email, customers.name, customers.address, customers.weight()\nFROM orders\nINNER JOIN customers\nON customers.id = orders.customer_id\nWHERE MATCH('maple', customers)\nOPTION(customers) field_weights=(address=1500);\n```\n\n<!-- request JSON -->\n```json\nPOST /search\n{\n  \"table\": \"orders\",\n  \"options\": {\n    \"customers\": {\n      \"field_weights\": {\n        \"address\": 1500\n      }\n    }\n  },\n  \"join\": [\n    {\n      \"type\": \"inner\",\n      \"table\": \"customers\",\n      \"query\": {\n        \"query_string\": \"maple\"\n      },\n      \"on\": [\n        {\n          \"left\": {\n            \"table\": \"orders\",\n            \"field\": \"customer_id\"\n          },\n          \"operator\": \"eq\",\n          \"right\": {\n            \"table\": \"customers\",\n            \"field\": \"id\"\n          }\n        }\n      ]\n    }\n  ],\n  \"_source\": [\"product\", \"customers.email\", \"customers.name\", \"customers.address\"]\n}\n```\n\n<!-- response SQL -->\n\n```sql\n+---------+-------------------+----------------+-------------------+--------------------+\n| product | customers.email   | customers.name | customers.address | customers.weight() |\n+---------+-------------------+----------------+-------------------+--------------------+\n| Laptop  | alice@example.com | Alice Johnson  | 123 Maple St      |            1500680 |\n| Tablet  | alice@example.com | Alice Johnson  | 123 Maple St      |            1500680 |\n+---------+-------------------+----------------+-------------------+--------------------+\n2 rows in set (0.00 sec)\n```\n\n<!-- response JSON -->\n\n```json\n{\n  \"took\": 0,\n  \"timed_out\": false,\n  \"hits\": {\n    \"total\": 2,\n    \"total_relation\": \"eq\",\n    \"hits\": [\n      {\n        \"_id\": 1,\n        \"_score\": 1,\n        \"customers._score\": 15000680,\n        \"_source\": {\n          \"product\": \"Laptop\",\n          \"customers.email\": \"alice@example.com\",\n          \"customers.name\": \"Alice Johnson\",\n          \"customers.address\": \"123 Maple St\"\n        }\n      },\n      {\n        \"_id\": 3,\n        \"_score\": 1,\n        \"customers._score\": 15000680,\n        \"_source\": {\n          \"product\": \"Tablet\",\n          \"customers.email\": \"alice@example.com\",\n          \"customers.name\": \"Alice Johnson\",\n          \"customers.address\": \"123 Maple St\"\n        }\n      }\n    ]\n  }\n}\n```\n<!-- end -->\n\n## Join batching\n\nWhen performing table joins, Manticore Search processes the results in batches to optimize performance and resource usage. Here's how it works:\n\n- **How Batching Works**:\n  - The query on the left table is executed first, and the results are accumulated into a batch.\n  - This batch is then used as input for the query on the right table, which is executed as a single operation.\n  - This approach minimizes the number of queries sent to the right table, improving efficiency.\n\n- **Configuring Batch Size**:\n  - The size of the batch can be adjusted using the `join_batch_size` search option.\n  - It is also [configurable](../Server_settings/Searchd.md#join_batch_size) in the `searchd` section of the configuration file.\n  - The default batch size is `1000`, but you can increase or decrease it depending on your use case.\n  - Setting `join_batch_size=0` disables batching entirely, which may be useful for debugging or specific scenarios.\n\n- **Performance Considerations**:\n  - A larger batch size can improve performance by reducing the number of queries executed on the right table.\n  - However, larger batches may consume more memory, especially for complex queries or large datasets.\n  - Experiment with different batch sizes to find the optimal balance between performance and resource usage.\n\n## Join caching\n\nTo further optimize join operations, Manticore Search employs a caching mechanism for queries executed on the right table. Here's what you need to know:\n\n- **How Caching Works**:\n  - Each query on the right table is defined by the `JOIN ON` conditions.\n  - If the same `JOIN ON` conditions are repeated across multiple queries, the results are cached and reused.\n  - This avoids redundant queries and speeds up subsequent join operations.\n\n- **Configuring Cache Size**:\n  - The size of the join cache can be configured using the [join_cache_size](../Server_settings/Searchd.md#join_cache_size) option in the `searchd` section of the configuration file.\n  - The default cache size is `20MB`, but you can adjust it based on your workload and available memory.\n  - Setting `join_cache_size=0` disables caching entirely.\n\n- **Memory Considerations**:\n  - Each thread maintains its own cache, so the total memory usage depends on the number of threads and the cache size.\n  - Ensure your server has sufficient memory to accommodate the cache, especially for high-concurrency environments.\n\n## Joining distributed tables\n\nDistributed tables consisting only of local tables are supported on both the left and right sides of a join query. However, distributed tables that include remote tables are not supported.\n\n## Caveats and best practices\n\nWhen using JOINs in Manticore Search, keep the following points in mind:\n\n1. **Field selection**: When selecting fields from two tables in a JOIN, do not prefix fields from the left table, but do prefix fields from the right table. For example:\n   ```sql\n   SELECT field_name, right_table.field_name FROM ...\n   ```\n\n2. **JOIN conditions**: Always explicitly specify the table names in your JOIN conditions:\n   ```sql\n   JOIN ON table_name.some_field = another_table_name.some_field\n   ```\n\n3. **Expressions with JOINs**: When using expressions that combine fields from both joined tables, alias the result of the expression:\n   ```sql\n   SELECT *, (nums2.n + 3) AS x, x * n FROM nums LEFT JOIN nums2 ON nums2.id = nums.num2_id\n   ```\n\n4. **Filtering on aliased expressions**: You cannot use aliases for expressions involving fields from both tables in the WHERE clause.\n\n5. **JSON attributes**: When joining on JSON attributes, you must explicitly cast the values to the appropriate type:\n   ```sql\n   -- Correct:\n   SELECT * FROM t1 LEFT JOIN t2 ON int(t1.json_attr.id) = t2.json_attr.id\n\n   -- Incorrect:\n   SELECT * FROM t1 LEFT JOIN t2 ON t1.json_attr.id = t2.json_attr.id\n   ```\n\n6. **NULL handling**: You can use IS NULL and IS NOT NULL conditions on joined fields:\n   ```sql\n   SELECT * FROM t1 LEFT JOIN t2 ON t1.id = t2.id WHERE t2.name IS NULL\n   SELECT * FROM t1 LEFT JOIN t2 ON t1.id = t2.id WHERE t2.name IS NOT NULL\n   ```\n\n7. **Using ANY with MVA**: When using the `ANY()` function with multi-valued attributes in JOINs, alias the multi-valued attribute from the joined table:\n   ```sql\n   SELECT *, t2.m AS alias\n   FROM t\n   LEFT JOIN t2 ON t.id = t2.t_id\n   WHERE ANY(alias) IN (3, 5)\n   ```\n\nBy following these guidelines, you can effectively use JOINs in Manticore Search to combine data from multiple indexes and perform complex queries.\n\n<!-- proofread -->\n\n",
        "updated_at": 1768530797,
        "source_md5": "c7124fb4b24049b32e3aa8eca338b945"
    }
}