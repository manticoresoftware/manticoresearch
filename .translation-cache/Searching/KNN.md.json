{
    "7588c014047338483f497f770cdf20e6f79b2ac9719a85ada59124aa9aa7efde": {
        "original": "<!-- end -->\n\n##### Inserting data with auto embeddings\n\n<!-- example inserting_embeddings -->\n\nWhen using auto embeddings, **do not specify the vector field** in your INSERT statement. The embeddings are generated automatically from the text fields specified in the `FROM` parameter.\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\n\nInsert text data only - embeddings generated automatically\nCODE_BLOCK_10\n\nInsert multiple fields - both used for embedding if FROM='title,description'  \nCODE_BLOCK_11\n\nInsert empty vector (document excluded from vector search)\nCODE_BLOCK_12\n\n<!-- end -->\n\n##### Searching with auto embeddings\n\n<!-- example embeddings_search -->\nSearch works the same way - provide your query text and Manticore will generate embeddings and find similar documents:\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_13\n\n<!-- response SQL -->\n\nCODE_BLOCK_14\n\n<!-- intro -->\n##### JSON:\n\n<!-- request JSON -->\n\nUsing text query with auto-embeddings\nCODE_BLOCK_15\n\nUsing vector query directly\nCODE_BLOCK_16\n\n<!-- response JSON -->\n\nCODE_BLOCK_17\n\n<!-- end -->\n\n#### Manual Vector Insertion\n\n<!-- example manual_vector -->\nAlternatively, you can manually insert pre-computed vector data, ensuring it matches the dimensions you specified when creating the table. You can also insert an empty vector; this means that the document will be excluded from vector search results.\n\n**Important:** When using `hnsw_similarity='cosine'`, vectors are automatically normalized upon insertion to unit vectors (vectors with a mathematical length/magnitude of 1.0). This normalization preserves the direction of the vector while standardizing its length, which is required for efficient cosine similarity calculations. This means the stored values will differ from your original input values.\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_18\n<!-- response SQL -->\n\nCODE_BLOCK_19\n\n<!-- intro -->\n##### JSON:\n\n<!-- request JSON -->\n\nCODE_BLOCK_20\n\n<!-- response JSON -->\n\nCODE_BLOCK_21\n\n<!-- end -->\n\n<!-- example knn_search -->\n\n### KNN vector search\n\nNow, you can perform a KNN search using the `knn` clause in either SQL or JSON format. Both interfaces support the same essential parameters, ensuring a consistent experience regardless of the format you choose:\n\n- SQL: `select ... from <table name> where knn ( <field>, <query vector> [,<options>] )`\n- JSON:\nCODE_BLOCK_22\n\nThe parameters are:\n* `field`: This is the name of the float vector attribute containing vector data.\n* `k`: Deprecated option. Use query `limit` instead. It was used to specify the quantity of documents that a single HNSW index should return. However, the actual number of documents included in the final results may vary. For instance, if the system is dealing with real-time tables divided into disk chunks, each chunk could return `k` documents, leading to a total that exceeds the specified `k` (as the cumulative count would be `num_chunks * k`). On the other hand, the final document count might be less than `k` if, after requesting `k` documents, some are filtered out based on specific attributes. It's important to note that the parameter `k` does not apply to ramchunks. In the context of ramchunks, the retrieval process operates differently, and thus, the `k` parameter's effect on the number of documents returned is not applicable.\n* `query`: (Recommended parameter) The search query, which can be either:\n  - Text string: Automatically converted to embeddings if the field has auto-embeddings configured. Will return an error if the field doesn't have auto-embeddings.\n  - Vector array: Works the same as `query_vector`.\n* `query_vector`: (Legacy parameter) The search vector as an array of numbers. Still supported for backward compatibility.\n  **Note:** Use either `query` or `query_vector`, not both in the same request.\n* `ef`: optional size of the dynamic list used during the search. A higher `ef` leads to more accurate but slower search. The default is 10.\n* `rescore`: Enables KNN rescoring (enabled by default). Set to `0` in SQL or `false` in JSON to disable rescoring. After the KNN search is completed using quantized vectors (with possible oversampling), distances are recalculated with the original (full-precision) vectors and results are re-sorted to improve ranking accuracy.\n* `oversampling`: Sets a factor (float value) by which `k` is multiplied when executing the KNN search, causing more candidates to be retrieved than needed using quantized vectors. `oversampling=3.0` is applied by default. These candidates can be re-evaluated later if rescoring is enabled. Oversampling also works with non-quantized vectors. Since it increases `k`, which affects how the HNSW index works, it may cause a small change in result accuracy.\n\nDocuments are always sorted by their distance to the search vector. Any additional sorting criteria you specify will be applied after this primary sort condition. For retrieving the distance, there is a built-in function called [knn_dist()](../Functions/Other_functions.md#KNN_DIST%28%29).\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_23\n<!-- response SQL -->\n\nCODE_BLOCK_24\n\n<!-- intro -->\n##### JSON:\n\n<!-- request JSON -->\n\nCODE_BLOCK_25\n\n<!-- response JSON -->\n\nCODE_BLOCK_26\n\n<!-- end -->\n\n<!-- example knn_quantization -->\n\n### Vector quantization",
        "translations": {
            "chinese": "<!-- end -->\n\n##### \u4f7f\u7528\u81ea\u52a8\u5d4c\u5165\u63d2\u5165\u6570\u636e\n\n<!-- example inserting_embeddings -->\n\n\u4f7f\u7528\u81ea\u52a8\u5d4c\u5165\u65f6\uff0c**\u5728INSERT\u8bed\u53e5\u4e2d\u4e0d\u8981\u6307\u5b9a\u5411\u91cf\u5b57\u6bb5**\u3002\u5d4c\u5165\u5c06\u6839\u636e`FROM`\u53c2\u6570\u4e2d\u6307\u5b9a\u7684\u6587\u672c\u5b57\u6bb5\u81ea\u52a8\u751f\u6210\u3002\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\n\n\u4ec5\u63d2\u5165\u6587\u672c\u6570\u636e - \u5d4c\u5165\u81ea\u52a8\u751f\u6210\nCODE_BLOCK_10\n\n\u63d2\u5165\u591a\u4e2a\u5b57\u6bb5 - \u5982\u679cFROM='title,description'\uff0c\u4e24\u4e2a\u5b57\u6bb5\u5747\u7528\u4e8e\u5d4c\u5165  \nCODE_BLOCK_11\n\n\u63d2\u5165\u7a7a\u5411\u91cf\uff08\u6587\u6863\u5c06\u88ab\u6392\u9664\u5728\u5411\u91cf\u641c\u7d22\u4e4b\u5916\uff09\nCODE_BLOCK_12\n\n<!-- end -->\n\n##### \u4f7f\u7528\u81ea\u52a8\u5d4c\u5165\u8fdb\u884c\u641c\u7d22\n\n<!-- example embeddings_search -->\n\u641c\u7d22\u65b9\u5f0f\u76f8\u540c - \u63d0\u4f9b\u67e5\u8be2\u6587\u672c\uff0cManticore\u5c06\u751f\u6210\u5d4c\u5165\u5e76\u67e5\u627e\u76f8\u4f3c\u6587\u6863\uff1a\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_13\n\n<!-- response SQL -->\n\nCODE_BLOCK_14\n\n<!-- intro -->\n##### JSON:\n\n<!-- request JSON -->\n\n\u4f7f\u7528\u6587\u672c\u67e5\u8be2\u4e0e\u81ea\u52a8\u5d4c\u5165\nCODE_BLOCK_15\n\n\u76f4\u63a5\u4f7f\u7528\u5411\u91cf\u67e5\u8be2\nCODE_BLOCK_16\n\n<!-- response JSON -->\n\nCODE_BLOCK_17\n\n<!-- end -->\n\n#### \u624b\u52a8\u5411\u91cf\u63d2\u5165\n\n<!-- example manual_vector -->\n\u6216\u8005\uff0c\u60a8\u53ef\u4ee5\u624b\u52a8\u63d2\u5165\u9884\u8ba1\u7b97\u7684\u5411\u91cf\u6570\u636e\uff0c\u786e\u4fdd\u5176\u7ef4\u5ea6\u4e0e\u521b\u5efa\u8868\u65f6\u6307\u5b9a\u7684\u7ef4\u5ea6\u5339\u914d\u3002\u60a8\u4e5f\u53ef\u4ee5\u63d2\u5165\u7a7a\u5411\u91cf\uff1b\u8fd9\u610f\u5473\u7740\u6587\u6863\u5c06\u88ab\u6392\u9664\u5728\u5411\u91cf\u641c\u7d22\u7ed3\u679c\u4e4b\u5916\u3002\n\n**\u91cd\u8981\u63d0\u793a\uff1a** \u5f53\u4f7f\u7528`hnsw_similarity='cosine'`\u65f6\uff0c\u63d2\u5165\u65f6\u5411\u91cf\u4f1a\u81ea\u52a8\u5f52\u4e00\u5316\u4e3a\u5355\u4f4d\u5411\u91cf\uff08\u6570\u5b66\u957f\u5ea6/\u5e45\u5ea6\u4e3a1.0\u7684\u5411\u91cf\uff09\u3002\u8fd9\u79cd\u5f52\u4e00\u5316\u4fdd\u7559\u4e86\u5411\u91cf\u7684\u65b9\u5411\uff0c\u540c\u65f6\u6807\u51c6\u5316\u5176\u957f\u5ea6\uff0c\u8fd9\u662f\u9ad8\u6548\u4f59\u5f26\u76f8\u4f3c\u5ea6\u8ba1\u7b97\u6240\u5fc5\u9700\u7684\u3002\u8fd9\u610f\u5473\u7740\u5b58\u50a8\u7684\u503c\u5c06\u4e0e\u60a8\u539f\u59cb\u8f93\u5165\u503c\u4e0d\u540c\u3002\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_18\n<!-- response SQL -->\n\nCODE_BLOCK_19\n\n<!-- intro -->\n##### JSON:\n\n<!-- request JSON -->\n\nCODE_BLOCK_20\n\n<!-- response JSON -->\n\nCODE_BLOCK_21\n\n<!-- end -->\n\n<!-- example knn_search -->\n\n### KNN\u5411\u91cf\u641c\u7d22\n\n\u73b0\u5728\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528SQL\u6216JSON\u683c\u5f0f\u4e2d\u7684`knn`\u5b50\u53e5\u6267\u884cKNN\u641c\u7d22\u3002\u4e24\u79cd\u63a5\u53e3\u652f\u6301\u76f8\u540c\u7684\u53c2\u6570\uff0c\u65e0\u8bba\u60a8\u9009\u62e9\u54ea\u79cd\u683c\u5f0f\uff0c\u90fd\u80fd\u786e\u4fdd\u4e00\u81f4\u7684\u4f53\u9a8c\uff1a\n\n- SQL: `select ... from <\u8868\u540d> where knn ( <\u5b57\u6bb5>, <\u67e5\u8be2\u5411\u91cf> [,<\u9009\u9879>] )`\n- JSON:\nCODE_BLOCK_22\n\n\u53c2\u6570\u5305\u62ec\uff1a\n* `field`: \u8fd9\u662f\u5305\u542b\u5411\u91cf\u6570\u636e\u7684\u6d6e\u70b9\u5411\u91cf\u5c5e\u6027\u7684\u540d\u79f0\u3002\n* `k`: \u5df2\u5f03\u7528\u7684\u9009\u9879\u3002\u8bf7\u6539\u7528\u67e5\u8be2`limit`\u3002\u5b83\u66fe\u7528\u4e8e\u6307\u5b9a\u5355\u4e2aHNSW\u7d22\u5f15\u5e94\u8fd4\u56de\u7684\u6587\u6863\u6570\u91cf\u3002\u7136\u800c\uff0c\u6700\u7ec8\u7ed3\u679c\u4e2d\u5305\u542b\u7684\u6587\u6863\u6570\u91cf\u53ef\u80fd\u6709\u6240\u4e0d\u540c\u3002\u4f8b\u5982\uff0c\u5982\u679c\u7cfb\u7edf\u5904\u7406\u7684\u662f\u5212\u5206\u4e3a\u78c1\u76d8\u5757\u7684\u5b9e\u65f6\u8868\uff0c\u6bcf\u4e2a\u5757\u53ef\u80fd\u8fd4\u56de`k`\u4e2a\u6587\u6863\uff0c\u5bfc\u81f4\u603b\u6570\u8d85\u8fc7\u6307\u5b9a\u7684`k`\uff08\u7d2f\u79ef\u8ba1\u6570\u4e3a`num_chunks * k`\uff09\u3002\u53e6\u4e00\u65b9\u9762\uff0c\u5982\u679c\u5728\u8bf7\u6c42`k`\u4e2a\u6587\u6863\u540e\uff0c\u6839\u636e\u7279\u5b9a\u5c5e\u6027\u8fc7\u6ee4\u6389\u4e00\u4e9b\u6587\u6863\uff0c\u6700\u7ec8\u6587\u6863\u6570\u91cf\u53ef\u80fd\u5c11\u4e8e`k`\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u53c2\u6570`k`\u4e0d\u9002\u7528\u4e8eramchunks\u3002\u5728ramchunks\u7684\u4e0a\u4e0b\u6587\u4e2d\uff0c\u68c0\u7d22\u8fc7\u7a0b\u7684\u5de5\u4f5c\u65b9\u5f0f\u4e0d\u540c\uff0c\u56e0\u6b64`k`\u53c2\u6570\u5bf9\u8fd4\u56de\u6587\u6863\u6570\u91cf\u7684\u5f71\u54cd\u4e0d\u9002\u7528\u3002\n* `query`:\uff08\u63a8\u8350\u53c2\u6570\uff09\u641c\u7d22\u67e5\u8be2\uff0c\u53ef\u4ee5\u662f\uff1a\n  - \u6587\u672c\u5b57\u7b26\u4e32\uff1a\u5982\u679c\u5b57\u6bb5\u914d\u7f6e\u4e86\u81ea\u52a8\u5d4c\u5165\uff0c\u5c06\u81ea\u52a8\u8f6c\u6362\u4e3a\u5d4c\u5165\u3002\u5982\u679c\u5b57\u6bb5\u672a\u914d\u7f6e\u81ea\u52a8\u5d4c\u5165\uff0c\u5c06\u8fd4\u56de\u9519\u8bef\u3002\n  - \u5411\u91cf\u6570\u7ec4\uff1a\u4e0e`query_vector`\u7684\u5de5\u4f5c\u65b9\u5f0f\u76f8\u540c\u3002\n* `query_vector`:\uff08\u65e7\u7248\u53c2\u6570\uff09\u4f5c\u4e3a\u6570\u5b57\u6570\u7ec4\u7684\u641c\u7d22\u5411\u91cf\u3002\u4ecd\u4e3a\u5411\u540e\u517c\u5bb9\u6027\u63d0\u4f9b\u652f\u6301\u3002\n  **\u6ce8\u610f\uff1a** \u5728\u540c\u4e00\u8bf7\u6c42\u4e2d\uff0c\u4f7f\u7528`query`\u6216`query_vector`\uff0c\u4e0d\u8981\u540c\u65f6\u4f7f\u7528\u4e24\u8005\u3002\n* `ef`: \u641c\u7d22\u671f\u95f4\u4f7f\u7528\u7684\u52a8\u6001\u5217\u8868\u7684\u53ef\u9009\u5927\u5c0f\u3002\u8f83\u9ad8\u7684`ef`\u4f1a\u5bfc\u81f4\u66f4\u51c6\u786e\u4f46\u66f4\u6162\u7684\u641c\u7d22\u3002\u9ed8\u8ba4\u503c\u4e3a10\u3002\n* `rescore`: \u542f\u7528KNN\u91cd\u65b0\u8bc4\u5206\uff08\u9ed8\u8ba4\u542f\u7528\uff09\u3002\u5728SQL\u4e2d\u8bbe\u7f6e\u4e3a`0`\u6216\u5728JSON\u4e2d\u8bbe\u7f6e\u4e3a`false`\u4ee5\u7981\u7528\u91cd\u65b0\u8bc4\u5206\u3002\u5728\u4f7f\u7528\u91cf\u5316\u5411\u91cf\u5b8c\u6210KNN\u641c\u7d22\uff08\u53ef\u80fd\u6709\u8fc7\u91c7\u6837\uff09\u540e\uff0c\u5c06\u4f7f\u7528\u539f\u59cb\uff08\u5168\u7cbe\u5ea6\uff09\u5411\u91cf\u91cd\u65b0\u8ba1\u7b97\u8ddd\u79bb\uff0c\u5e76\u91cd\u65b0\u6392\u5e8f\u7ed3\u679c\u4ee5\u63d0\u9ad8\u6392\u540d\u51c6\u786e\u6027\u3002\n* `oversampling`: \u8bbe\u7f6e\u4e00\u4e2a\u56e0\u5b50\uff08\u6d6e\u70b9\u503c\uff09\uff0c\u5728\u6267\u884cKNN\u641c\u7d22\u65f6\u4e58\u4ee5`k`\uff0c\u5bfc\u81f4\u4f7f\u7528\u91cf\u5316\u5411\u91cf\u68c0\u7d22\u7684\u5019\u9009\u5bf9\u8c61\u6570\u91cf\u8d85\u8fc7\u6240\u9700\u3002\u9ed8\u8ba4\u5e94\u7528`oversampling=3.0`\u3002\u5982\u679c\u542f\u7528\u4e86\u91cd\u65b0\u8bc4\u5206\uff0c\u8fd9\u4e9b\u5019\u9009\u5bf9\u8c61\u53ef\u4ee5\u7a0d\u540e\u91cd\u65b0\u8bc4\u4f30\u3002\u8fc7\u91c7\u6837\u4e5f\u9002\u7528\u4e8e\u975e\u91cf\u5316\u5411\u91cf\u3002\u7531\u4e8e\u5b83\u4f1a\u589e\u52a0`k`\uff0c\u8fd9\u4f1a\u5f71\u54cdHNSW\u7d22\u5f15\u7684\u5de5\u4f5c\u65b9\u5f0f\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u7ed3\u679c\u51c6\u786e\u6027\u7684\u5c0f\u5e45\u53d8\u5316\u3002\n\n\u6587\u6863\u59cb\u7ec8\u6309\u5176\u4e0e\u641c\u7d22\u5411\u91cf\u7684\u8ddd\u79bb\u6392\u5e8f\u3002\u60a8\u6307\u5b9a\u7684\u4efb\u4f55\u5176\u4ed6\u6392\u5e8f\u6761\u4ef6\u5c06\u5728\u6b64\u4e3b\u8981\u6392\u5e8f\u6761\u4ef6\u4e4b\u540e\u5e94\u7528\u3002\u8981\u83b7\u53d6\u8ddd\u79bb\uff0c\u6709\u4e00\u4e2a\u5185\u7f6e\u51fd\u6570\u79f0\u4e3a[knn_dist()](../Functions/Other_functions.md#KNN_DIST%28%29)\u3002\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_23\n<!-- response SQL -->\n\nCODE_BLOCK_24\n\n<!-- intro -->\n##### JSON:\n\n<!-- request JSON -->\n\nCODE_BLOCK_25\n\n<!-- response JSON -->\n\nCODE_BLOCK_26\n\n<!-- end -->\n\n<!-- example knn_quantization -->\n\n### \u5411\u91cf\u91cf\u5316",
            "russian": "<!-- end -->\n\n##### \u0412\u0441\u0442\u0430\u0432\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445 \u0441 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u043c\u0438 \u044d\u043c\u0431\u0435\u0434\u0434\u0438\u043d\u0433\u0430\u043c\u0438\n\n<!-- example inserting_embeddings -->\n\n\u041f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u044d\u043c\u0431\u0435\u0434\u0434\u0438\u043d\u0433\u043e\u0432 **\u043d\u0435 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0439\u0442\u0435 \u0432\u0435\u043a\u0442\u043e\u0440\u043d\u043e\u0435 \u043f\u043e\u043b\u0435** \u0432 \u0432\u0430\u0448\u0435\u043c \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0435 INSERT. \u042d\u043c\u0431\u0435\u0434\u0434\u0438\u043d\u0433\u0438 \u0433\u0435\u043d\u0435\u0440\u0438\u0440\u0443\u044e\u0442\u0441\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0438\u0437 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0445 \u043f\u043e\u043b\u0435\u0439, \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0445 \u0432 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0435 `FROM`.\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\n\n\u0412\u0441\u0442\u0430\u0432\u043a\u0430 \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 - \u044d\u043c\u0431\u0435\u0434\u0434\u0438\u043d\u0433\u0438 \u0433\u0435\u043d\u0435\u0440\u0438\u0440\u0443\u044e\u0442\u0441\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\nCODE_BLOCK_10\n\n\u0412\u0441\u0442\u0430\u0432\u043a\u0430 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u043f\u043e\u043b\u0435\u0439 - \u043e\u0431\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0434\u043b\u044f \u044d\u043c\u0431\u0435\u0434\u0434\u0438\u043d\u0433\u0430, \u0435\u0441\u043b\u0438 FROM='title,description'\nCODE_BLOCK_11\n\n\u0412\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0443\u0441\u0442\u043e\u0433\u043e \u0432\u0435\u043a\u0442\u043e\u0440\u0430 (\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u0438\u0441\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f \u0438\u0437 \u0432\u0435\u043a\u0442\u043e\u0440\u043d\u043e\u0433\u043e \u043f\u043e\u0438\u0441\u043a\u0430)\nCODE_BLOCK_12\n\n<!-- end -->\n\n##### \u041f\u043e\u0438\u0441\u043a \u0441 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u043c\u0438 \u044d\u043c\u0431\u0435\u0434\u0434\u0438\u043d\u0433\u0430\u043c\u0438\n\n<!-- example embeddings_search -->\n\u041f\u043e\u0438\u0441\u043a \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u044b\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c - \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0432\u0430\u0448 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441, \u0438 Manticore \u0441\u0433\u0435\u043d\u0435\u0440\u0438\u0440\u0443\u0435\u0442 \u044d\u043c\u0431\u0435\u0434\u0434\u0438\u043d\u0433\u0438 \u0438 \u043d\u0430\u0439\u0434\u0435\u0442 \u043f\u043e\u0445\u043e\u0436\u0438\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b:\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_13\n\n<!-- response SQL -->\n\nCODE_BLOCK_14\n\n<!-- intro -->\n##### JSON:\n\n<!-- request JSON -->\n\n\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u0433\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u0441 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u043c\u0438 \u044d\u043c\u0431\u0435\u0434\u0434\u0438\u043d\u0433\u0430\u043c\u0438\nCODE_BLOCK_15\n\n\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0432\u0435\u043a\u0442\u043e\u0440\u043d\u043e\u0433\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043d\u0430\u043f\u0440\u044f\u043c\u0443\u044e\nCODE_BLOCK_16\n\n<!-- response JSON -->\n\nCODE_BLOCK_17\n\n<!-- end -->\n\n#### \u0420\u0443\u0447\u043d\u0430\u044f \u0432\u0441\u0442\u0430\u0432\u043a\u0430 \u0432\u0435\u043a\u0442\u043e\u0440\u043e\u0432\n\n<!-- example manual_vector -->\n\u0412 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0430\u043b\u044c\u0442\u0435\u0440\u043d\u0430\u0442\u0438\u0432\u044b \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u0440\u0443\u0447\u043d\u0443\u044e \u0432\u0441\u0442\u0430\u0432\u043b\u044f\u0442\u044c \u043f\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u043d\u044b\u0435 \u0432\u0435\u043a\u0442\u043e\u0440\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435, \u0443\u0431\u0435\u0434\u0438\u0432\u0448\u0438\u0441\u044c, \u0447\u0442\u043e \u043e\u043d\u0438 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0442 \u0440\u0430\u0437\u043c\u0435\u0440\u043d\u043e\u0441\u0442\u0438, \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0439 \u0432\u0430\u043c\u0438 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u0442\u0430\u0431\u043b\u0438\u0446\u044b. \u0412\u044b \u0442\u0430\u043a\u0436\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043f\u0443\u0441\u0442\u043e\u0439 \u0432\u0435\u043a\u0442\u043e\u0440; \u044d\u0442\u043e \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442, \u0447\u0442\u043e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u0431\u0443\u0434\u0435\u0442 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d \u0438\u0437 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432 \u0432\u0435\u043a\u0442\u043e\u0440\u043d\u043e\u0433\u043e \u043f\u043e\u0438\u0441\u043a\u0430.\n\n**\u0412\u0430\u0436\u043d\u043e:** \u041f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 `hnsw_similarity='cosine'` \u0432\u0435\u043a\u0442\u043e\u0440\u044b \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043d\u043e\u0440\u043c\u0430\u043b\u0438\u0437\u0443\u044e\u0442\u0441\u044f \u043f\u0440\u0438 \u0432\u0441\u0442\u0430\u0432\u043a\u0435 \u0434\u043e \u0435\u0434\u0438\u043d\u0438\u0447\u043d\u044b\u0445 \u0432\u0435\u043a\u0442\u043e\u0440\u043e\u0432 (\u0432\u0435\u043a\u0442\u043e\u0440\u043e\u0432 \u0441 \u043c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0434\u043b\u0438\u043d\u043e\u0439/\u0432\u0435\u043b\u0438\u0447\u0438\u043d\u043e\u0439 1.0). \u042d\u0442\u0430 \u043d\u043e\u0440\u043c\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u0442 \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0432\u0435\u043a\u0442\u043e\u0440\u0430, \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u0438\u0437\u0438\u0440\u0443\u044f \u0435\u0433\u043e \u0434\u043b\u0438\u043d\u0443, \u0447\u0442\u043e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u044b\u0445 \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0439 \u043a\u043e\u0441\u0438\u043d\u0443\u0441\u043d\u043e\u0433\u043e \u0441\u0445\u043e\u0434\u0441\u0442\u0432\u0430. \u042d\u0442\u043e \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442, \u0447\u0442\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0431\u0443\u0434\u0443\u0442 \u043e\u0442\u043b\u0438\u0447\u0430\u0442\u044c\u0441\u044f \u043e\u0442 \u0432\u0430\u0448\u0438\u0445 \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0445 \u0432\u0445\u043e\u0434\u043d\u044b\u0445 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439.\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_18\n<!-- response SQL -->\n\nCODE_BLOCK_19\n\n<!-- intro -->\n##### JSON:\n\n<!-- request JSON -->\n\nCODE_BLOCK_20\n\n<!-- response JSON -->\n\nCODE_BLOCK_21\n\n<!-- end -->\n\n<!-- example knn_search -->\n\n### KNN \u0432\u0435\u043a\u0442\u043e\u0440\u043d\u044b\u0439 \u043f\u043e\u0438\u0441\u043a\n\n\u0422\u0435\u043f\u0435\u0440\u044c \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c KNN \u043f\u043e\u0438\u0441\u043a, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0435 `knn` \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 SQL \u0438\u043b\u0438 JSON. \u041e\u0431\u0430 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442 \u043e\u0434\u0438\u043d\u0430\u043a\u043e\u0432\u044b\u0435 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u044f \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043e\u043f\u044b\u0442 \u043d\u0435\u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e \u043e\u0442 \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u0433\u043e \u0444\u043e\u0440\u043c\u0430\u0442\u0430:\n\n- SQL: `select ... from <table name> where knn ( <field>, <query vector> [,<options>] )`\n- JSON:\nCODE_BLOCK_22\n\n\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b:\n* `field`: \u042d\u0442\u043e \u0438\u043c\u044f \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u0430 \u0432\u0435\u043a\u0442\u043e\u0440\u0430 \u0441 \u043f\u043b\u0430\u0432\u0430\u044e\u0449\u0435\u0439 \u0442\u043e\u0447\u043a\u043e\u0439, \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0449\u0435\u0433\u043e \u0432\u0435\u043a\u0442\u043e\u0440\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435.\n* `k`: \u0423\u0441\u0442\u0430\u0440\u0435\u0432\u0448\u0430\u044f \u043e\u043f\u0446\u0438\u044f. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 `limit` \u0432 \u0437\u0430\u043f\u0440\u043e\u0441\u0435. \u0420\u0430\u043d\u0435\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043b\u0430\u0441\u044c \u0434\u043b\u044f \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u044f \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0434\u043e\u043b\u0436\u0435\u043d \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043e\u0434\u0438\u043d \u0438\u043d\u0434\u0435\u043a\u0441 HNSW. \u041e\u0434\u043d\u0430\u043a\u043e \u0444\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u043d\u044b\u0445 \u0432 \u043e\u043a\u043e\u043d\u0447\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b, \u043c\u043e\u0436\u0435\u0442 \u0432\u0430\u0440\u044c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0435\u0441\u043b\u0438 \u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0441 \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u043c\u0438 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438, \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u043c\u0438 \u043d\u0430 \u0434\u0438\u0441\u043a\u043e\u0432\u044b\u0435 \u0447\u0430\u043d\u043a\u0438, \u043a\u0430\u0436\u0434\u044b\u0439 \u0447\u0430\u043d\u043a \u043c\u043e\u0436\u0435\u0442 \u0432\u0435\u0440\u043d\u0443\u0442\u044c `k` \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432, \u0447\u0442\u043e \u043f\u0440\u0438\u0432\u043e\u0434\u0438\u0442 \u043a \u043e\u0431\u0449\u0435\u043c\u0443 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0443, \u043f\u0440\u0435\u0432\u044b\u0448\u0430\u044e\u0449\u0435\u043c\u0443 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0435 `k` (\u0442\u0430\u043a \u043a\u0430\u043a \u0441\u043e\u0432\u043e\u043a\u0443\u043f\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0431\u0443\u0434\u0435\u0442 `num_chunks * k`). \u0421 \u0434\u0440\u0443\u0433\u043e\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u044b, \u043e\u043a\u043e\u043d\u0447\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043c\u0435\u043d\u044c\u0448\u0435 `k`, \u0435\u0441\u043b\u0438 \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 `k` \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0438\u0437 \u043d\u0438\u0445 \u043e\u0442\u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0445 \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u043e\u0432. \u0412\u0430\u0436\u043d\u043e \u043e\u0442\u043c\u0435\u0442\u0438\u0442\u044c, \u0447\u0442\u043e \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 `k` \u043d\u0435 \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u043a ramchunks. \u0412 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0435 ramchunks \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u0438\u0437\u0432\u043b\u0435\u0447\u0435\u043d\u0438\u044f \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0438\u043d\u0430\u0447\u0435, \u0438 \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0432\u043b\u0438\u044f\u043d\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430 `k` \u043d\u0430 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043c\u044b\u0445 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432 \u043d\u0435\u043f\u0440\u0438\u043c\u0435\u043d\u0438\u043c\u043e.\n* `query`: (\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u043c\u044b\u0439 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440) \u041f\u043e\u0438\u0441\u043a\u043e\u0432\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c:\n  - \u0422\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u043e\u0439: \u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u0443\u0435\u0442\u0441\u044f \u0432 \u044d\u043c\u0431\u0435\u0434\u0434\u0438\u043d\u0433\u0438, \u0435\u0441\u043b\u0438 \u0434\u043b\u044f \u043f\u043e\u043b\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u044b \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u044d\u043c\u0431\u0435\u0434\u0434\u0438\u043d\u0433\u0438. \u0412\u0435\u0440\u043d\u0435\u0442 \u043e\u0448\u0438\u0431\u043a\u0443, \u0435\u0441\u043b\u0438 \u0443 \u043f\u043e\u043b\u044f \u043d\u0435\u0442 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u044d\u043c\u0431\u0435\u0434\u0434\u0438\u043d\u0433\u043e\u0432.\n  - \u0412\u0435\u043a\u0442\u043e\u0440\u043d\u044b\u043c \u043c\u0430\u0441\u0441\u0438\u0432\u043e\u043c: \u0420\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0442\u0430\u043a \u0436\u0435, \u043a\u0430\u043a `query_vector`.\n* `query_vector`: (\u0423\u0441\u0442\u0430\u0440\u0435\u0432\u0448\u0438\u0439 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440) \u041f\u043e\u0438\u0441\u043a\u043e\u0432\u044b\u0439 \u0432\u0435\u043a\u0442\u043e\u0440 \u0432 \u0432\u0438\u0434\u0435 \u043c\u0430\u0441\u0441\u0438\u0432\u0430 \u0447\u0438\u0441\u0435\u043b. \u0412\u0441\u0435 \u0435\u0449\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u043e\u0431\u0440\u0430\u0442\u043d\u043e\u0439 \u0441\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u043e\u0441\u0442\u0438.\n  **\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435:** \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043b\u0438\u0431\u043e `query`, \u043b\u0438\u0431\u043e `query_vector`, \u043d\u043e \u043d\u0435 \u043e\u0431\u0430 \u0432 \u043e\u0434\u043d\u043e\u043c \u0437\u0430\u043f\u0440\u043e\u0441\u0435.\n* `ef`: \u043d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0441\u043f\u0438\u0441\u043a\u0430, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u043e\u0433\u043e \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u043f\u043e\u0438\u0441\u043a\u0430. \u0411\u043e\u043b\u0435\u0435 \u0432\u044b\u0441\u043e\u043a\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 `ef` \u043f\u0440\u0438\u0432\u043e\u0434\u0438\u0442 \u043a \u0431\u043e\u043b\u0435\u0435 \u0442\u043e\u0447\u043d\u043e\u043c\u0443, \u043d\u043e \u0431\u043e\u043b\u0435\u0435 \u043c\u0435\u0434\u043b\u0435\u043d\u043d\u043e\u043c\u0443 \u043f\u043e\u0438\u0441\u043a\u0443. \u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e 10.\n* `rescore`: \u0412\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e\u0435 \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0435 \u0440\u0435\u043b\u0435\u0432\u0430\u043d\u0442\u043d\u043e\u0441\u0442\u0438 \u0434\u043b\u044f KNN (\u0432\u043a\u043b\u044e\u0447\u0435\u043d\u043e \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e). \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 `0` \u0432 SQL \u0438\u043b\u0438 `false` \u0432 JSON, \u0447\u0442\u043e\u0431\u044b \u043e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e\u0435 \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0435. \u041f\u043e\u0441\u043b\u0435 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u044f KNN \u043f\u043e\u0438\u0441\u043a\u0430 \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u043a\u0432\u0430\u043d\u0442\u043e\u0432\u0430\u043d\u043d\u044b\u0445 \u0432\u0435\u043a\u0442\u043e\u0440\u043e\u0432 (\u0441 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u044b\u043c \u043f\u0435\u0440\u0435\u0434\u0438\u0441\u043a\u0440\u0435\u0442\u0438\u0437\u0430\u0446\u0438\u0435\u0439) \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u043f\u0435\u0440\u0435\u0441\u0447\u0438\u0442\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u0441 \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u043c\u0438 (\u043f\u043e\u043b\u043d\u043e\u0440\u0430\u0437\u0440\u044f\u0434\u043d\u044b\u043c\u0438) \u0432\u0435\u043a\u0442\u043e\u0440\u0430\u043c\u0438, \u0438 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043f\u0435\u0440\u0435\u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u0434\u043b\u044f \u043f\u043e\u0432\u044b\u0448\u0435\u043d\u0438\u044f \u0442\u043e\u0447\u043d\u043e\u0441\u0442\u0438 \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f.\n* `oversampling`: \u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442 \u043a\u043e\u044d\u0444\u0444\u0438\u0446\u0438\u0435\u043d\u0442 (\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0441 \u043f\u043b\u0430\u0432\u0430\u044e\u0449\u0435\u0439 \u0442\u043e\u0447\u043a\u043e\u0439), \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0443\u043c\u043d\u043e\u0436\u0430\u0435\u0442\u0441\u044f `k` \u043f\u0440\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0438 KNN \u043f\u043e\u0438\u0441\u043a\u0430, \u0447\u0442\u043e \u043f\u0440\u0438\u0432\u043e\u0434\u0438\u0442 \u043a \u0438\u0437\u0432\u043b\u0435\u0447\u0435\u043d\u0438\u044e \u0431\u043e\u043b\u044c\u0448\u0435\u0433\u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u043a\u0430\u043d\u0434\u0438\u0434\u0430\u0442\u043e\u0432, \u0447\u0435\u043c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e, \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u043a\u0432\u0430\u043d\u0442\u043e\u0432\u0430\u043d\u043d\u044b\u0445 \u0432\u0435\u043a\u0442\u043e\u0440\u043e\u0432. \u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f `oversampling=3.0`. \u042d\u0442\u0438 \u043a\u0430\u043d\u0434\u0438\u0434\u0430\u0442\u044b \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u043f\u043e\u0437\u0436\u0435 \u043f\u0435\u0440\u0435\u043e\u0446\u0435\u043d\u0435\u043d\u044b, \u0435\u0441\u043b\u0438 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e\u0435 \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0435 \u0440\u0435\u043b\u0435\u0432\u0430\u043d\u0442\u043d\u043e\u0441\u0442\u0438 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u043e. \u041f\u0435\u0440\u0435\u0434\u0438\u0441\u043a\u0440\u0435\u0442\u0438\u0437\u0430\u0446\u0438\u044f \u0442\u0430\u043a\u0436\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0441 \u043d\u0435\u043a\u0432\u0430\u043d\u0442\u043e\u0432\u0430\u043d\u043d\u044b\u043c\u0438 \u0432\u0435\u043a\u0442\u043e\u0440\u0430\u043c\u0438. \u041f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443 \u043e\u043d\u0430 \u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0432\u0430\u0435\u0442 `k`, \u0447\u0442\u043e \u0432\u043b\u0438\u044f\u0435\u0442 \u043d\u0430 \u0440\u0430\u0431\u043e\u0442\u0443 \u0438\u043d\u0434\u0435\u043a\u0441\u0430 HNSW, \u044d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0432\u044b\u0437\u0432\u0430\u0442\u044c \u043d\u0435\u0431\u043e\u043b\u044c\u0448\u043e\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0442\u043e\u0447\u043d\u043e\u0441\u0442\u0438 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432.\n\n\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b \u0432\u0441\u0435\u0433\u0434\u0430 \u0441\u043e\u0440\u0442\u0438\u0440\u0443\u044e\u0442\u0441\u044f \u043f\u043e \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u044e \u0434\u043e \u043f\u043e\u0438\u0441\u043a\u043e\u0432\u043e\u0433\u043e \u0432\u0435\u043a\u0442\u043e\u0440\u0430. \u041b\u044e\u0431\u044b\u0435 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043a\u0440\u0438\u0442\u0435\u0440\u0438\u0438 \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0432\u044b \u0443\u043a\u0430\u0436\u0435\u0442\u0435, \u0431\u0443\u0434\u0443\u0442 \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u044b \u043f\u043e\u0441\u043b\u0435 \u044d\u0442\u043e\u0433\u043e \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0433\u043e \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0438. \u0414\u043b\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0432\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u0430\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u044f [knn_dist()](../Functions/Other_functions.md#KNN_DIST%28%29).\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_23\n<!-- response SQL -->\n\nCODE_BLOCK_24\n\n<!-- intro -->\n##### JSON:\n\n<!-- request JSON -->\n\nCODE_BLOCK_25\n\n<!-- response JSON -->\n\nCODE_BLOCK_26\n\n<!-- end -->\n\n<!-- example knn_quantization -->\n\n### \u041a\u0432\u0430\u043d\u0442\u043e\u0432\u0430\u043d\u0438\u0435 \u0432\u0435\u043a\u0442\u043e\u0440\u043e\u0432"
        },
        "is_code_or_comment": false,
        "model": "deepseek/deepseek-v3.2",
        "updated_at": 1768309330
    },
    "71ddd1d72552d449bccdbe5a192c2ba4bdb3f84712feb5b3e302ccb4b4b916e9": {
        "original": "HNSW indexes need to be fully loaded into memory to perform KNN search, which can lead to significant memory consumption. To reduce memory usage, scalar quantization can be applied - a technique that compresses high-dimensional vectors by representing each component (dimension) with a limited number of discrete values. Manticore supports 8-bit and 1-bit quantization, meaning each vector component is compressed from a 32-bit float to 8 bits or even 1 bit, reducing memory usage by 4x or 32x, respectively. These compressed representations also allow for faster distance calculations, as more vector components can be processed in a single SIMD instruction. Although scalar quantization introduces some approximation error, it is often a worthwhile trade-off between search accuracy and resource efficiency. For even better accuracy, quantization can be combined with rescoring and oversampling: more candidates are retrieved than requested, and distances for these candidates are recalculated using the original 32-bit float vectors.\n\nSupported quantization types include:\n* `8bit`: Each vector component is quantized to 8 bits.\n* `1bit`: Each vector component is quantized to 1 bit. Asymmetric quantization is used, with query vectors quantized to 4 bits and stored vectors to 1 bit. This approach offers greater precision than simpler methods, though with some performance trade-off.\n* `1bitsimple`: Each vector component is quantized to 1 bit. This method is faster than `1bit`, but typically less accurate.\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\nCODE_BLOCK_27\n\n<!-- response SQL -->\n\nCODE_BLOCK_28\n<!-- end -->\n\n<!-- Example knn_similar_docs -->\n\n### Find similar docs by id\n\n> NOTE: Finding similar documents by id requires [Manticore Buddy](../Installation/Manticore_Buddy.md). If it doesn't work, make sure Buddy is installed.\n\nFinding documents similar to a specific one based on its unique ID is a common task. For instance, when a user views a particular item, Manticore Search can efficiently identify and display a list of items that are most similar to it in the vector space. Here's how you can do it:\n\n- SQL: `select ... from <table name> where knn ( <field>, <k>, <document id> )`\n- JSON:\nCODE_BLOCK_29\n\nThe parameters are:\n* `field`: This is the name of the float vector attribute containing vector data.\n* `k`: This represents the number of documents to return and is a key parameter for Hierarchical Navigable Small World (HNSW) indexes. It specifies the quantity of documents that a single HNSW index should return. However, the actual number of documents included in the final results may vary. For instance, if the system is dealing with real-time tables divided into disk chunks, each chunk could return `k` documents, leading to a total that exceeds the specified `k` (as the cumulative count would be `num_chunks * k`). On the other hand, the final document count might be less than `k` if, after requesting `k` documents, some are filtered out based on specific attributes. It's important to note that the parameter `k` does not apply to ramchunks. In the context of ramchunks, the retrieval process operates differently, and thus, the `k` parameter's effect on the number of documents returned is not applicable.\n* `document id`: Document ID for KNN similarity search.\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_30\n<!-- response SQL -->\n\nCODE_BLOCK_31\n\n<!-- intro -->\n##### JSON:\n\n<!-- request JSON -->\n\nCODE_BLOCK_32\n\n<!-- response JSON -->\n\nCODE_BLOCK_33\n\n<!-- end -->\n\n<!-- Example knn_filtering -->\n\n### Filtering KNN vector search results\n\nManticore also supports additional filtering of documents returned by the KNN search, either by full-text matching, attribute filters, or both.\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_34\n<!-- response SQL -->\n\nCODE_BLOCK_35\n\n<!-- intro -->\n##### JSON:\n\n<!-- request JSON -->\n\nCODE_BLOCK_36\n\n<!-- response JSON -->\n\nCODE_BLOCK_37\n\n<!-- end -->\n\n<!-- proofread -->\n\n",
        "translations": {
            "chinese": "HNSW\u7d22\u5f15\u9700\u8981\u5b8c\u5168\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u624d\u80fd\u6267\u884cKNN\u641c\u7d22\uff0c\u8fd9\u53ef\u80fd\u5bfc\u81f4\u663e\u8457\u7684\u5185\u5b58\u6d88\u8017\u3002\u4e3a\u4e86\u51cf\u5c11\u5185\u5b58\u4f7f\u7528\uff0c\u53ef\u4ee5\u5e94\u7528\u6807\u91cf\u91cf\u5316\u2014\u2014\u4e00\u79cd\u901a\u8fc7\u7528\u6709\u9650\u7684\u79bb\u6563\u503c\u8868\u793a\u6bcf\u4e2a\u5206\u91cf\uff08\u7ef4\u5ea6\uff09\u6765\u538b\u7f29\u9ad8\u7ef4\u5411\u91cf\u7684\u6280\u672f\u3002Manticore\u652f\u63018\u4f4d\u548c1\u4f4d\u91cf\u5316\uff0c\u8fd9\u610f\u5473\u7740\u6bcf\u4e2a\u5411\u91cf\u5206\u91cf\u4ece32\u4f4d\u6d6e\u70b9\u6570\u538b\u7f29\u4e3a8\u4f4d\u751a\u81f31\u4f4d\uff0c\u5206\u522b\u5c06\u5185\u5b58\u4f7f\u7528\u91cf\u51cf\u5c114\u500d\u621632\u500d\u3002\u8fd9\u4e9b\u538b\u7f29\u8868\u793a\u8fd8\u5141\u8bb8\u66f4\u5feb\u7684\u8ddd\u79bb\u8ba1\u7b97\uff0c\u56e0\u4e3a\u53ef\u4ee5\u5728\u5355\u4e2aSIMD\u6307\u4ee4\u4e2d\u5904\u7406\u66f4\u591a\u7684\u5411\u91cf\u5206\u91cf\u3002\u5c3d\u7ba1\u6807\u91cf\u91cf\u5316\u4f1a\u5f15\u5165\u4e00\u4e9b\u8fd1\u4f3c\u8bef\u5dee\uff0c\u4f46\u901a\u5e38\u8fd9\u662f\u5728\u641c\u7d22\u7cbe\u5ea6\u548c\u8d44\u6e90\u6548\u7387\u4e4b\u95f4\u503c\u5f97\u6743\u8861\u7684\u6298\u4e2d\u65b9\u6848\u3002\u4e3a\u4e86\u83b7\u5f97\u66f4\u597d\u7684\u7cbe\u5ea6\uff0c\u91cf\u5316\u53ef\u4ee5\u4e0e\u91cd\u8bc4\u5206\u548c\u8fc7\u91c7\u6837\u7ed3\u5408\u4f7f\u7528\uff1a\u68c0\u7d22\u7684\u5019\u9009\u5bf9\u8c61\u6570\u91cf\u591a\u4e8e\u8bf7\u6c42\u7684\u6570\u91cf\uff0c\u5e76\u4f7f\u7528\u539f\u59cb32\u4f4d\u6d6e\u70b9\u5411\u91cf\u91cd\u65b0\u8ba1\u7b97\u8fd9\u4e9b\u5019\u9009\u5bf9\u8c61\u7684\u8ddd\u79bb\u3002\n\n\u652f\u6301\u7684\u91cf\u5316\u7c7b\u578b\u5305\u62ec\uff1a\n* `8bit`\uff1a\u6bcf\u4e2a\u5411\u91cf\u5206\u91cf\u91cf\u5316\u4e3a8\u4f4d\u3002\n* `1bit`\uff1a\u6bcf\u4e2a\u5411\u91cf\u5206\u91cf\u91cf\u5316\u4e3a1\u4f4d\u3002\u4f7f\u7528\u975e\u5bf9\u79f0\u91cf\u5316\uff0c\u67e5\u8be2\u5411\u91cf\u91cf\u5316\u4e3a4\u4f4d\uff0c\u5b58\u50a8\u5411\u91cf\u91cf\u5316\u4e3a1\u4f4d\u3002\u8fd9\u79cd\u65b9\u6cd5\u6bd4\u7b80\u5355\u65b9\u6cd5\u63d0\u4f9b\u66f4\u9ad8\u7684\u7cbe\u5ea6\uff0c\u4f46\u6709\u4e00\u4e9b\u6027\u80fd\u6743\u8861\u3002\n* `1bitsimple`\uff1a\u6bcf\u4e2a\u5411\u91cf\u5206\u91cf\u91cf\u5316\u4e3a1\u4f4d\u3002\u6b64\u65b9\u6cd5\u6bd4`1bit`\u66f4\u5feb\uff0c\u4f46\u901a\u5e38\u7cbe\u5ea6\u8f83\u4f4e\u3002\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\nCODE_BLOCK_27\n\n<!-- response SQL -->\n\nCODE_BLOCK_28\n<!-- end -->\n\n<!-- Example knn_similar_docs -->\n\n### \u901a\u8fc7ID\u67e5\u627e\u76f8\u4f3c\u6587\u6863\n\n> \u6ce8\u610f\uff1a\u901a\u8fc7ID\u67e5\u627e\u76f8\u4f3c\u6587\u6863\u9700\u8981[Manticore Buddy](../Installation/Manticore_Buddy.md)\u3002\u5982\u679c\u4e0d\u8d77\u4f5c\u7528\uff0c\u8bf7\u786e\u4fdd\u5df2\u5b89\u88c5Buddy\u3002\n\n\u57fa\u4e8e\u7279\u5b9a\u6587\u6863\u7684\u552f\u4e00ID\u67e5\u627e\u76f8\u4f3c\u6587\u6863\u662f\u4e00\u9879\u5e38\u89c1\u4efb\u52a1\u3002\u4f8b\u5982\uff0c\u5f53\u7528\u6237\u67e5\u770b\u7279\u5b9a\u9879\u76ee\u65f6\uff0cManticore Search\u53ef\u4ee5\u9ad8\u6548\u5730\u8bc6\u522b\u5e76\u663e\u793a\u5728\u5411\u91cf\u7a7a\u95f4\u4e2d\u4e0e\u8be5\u9879\u76ee\u6700\u76f8\u4f3c\u7684\u9879\u76ee\u5217\u8868\u3002\u4ee5\u4e0b\u662f\u5b9e\u73b0\u65b9\u6cd5\uff1a\n\n- SQL\uff1a`select ... from <table name> where knn ( <field>, <k>, <document id> )`\n- JSON\uff1a\nCODE_BLOCK_29\n\n\u53c2\u6570\u5305\u62ec\uff1a\n* `field`\uff1a\u8fd9\u662f\u5305\u542b\u5411\u91cf\u6570\u636e\u7684\u6d6e\u70b9\u5411\u91cf\u5c5e\u6027\u7684\u540d\u79f0\u3002\n* `k`\uff1a\u8fd9\u8868\u793a\u8981\u8fd4\u56de\u7684\u6587\u6863\u6570\u91cf\uff0c\u662f\u5206\u5c42\u53ef\u5bfc\u822a\u5c0f\u4e16\u754c\uff08HNSW\uff09\u7d22\u5f15\u7684\u5173\u952e\u53c2\u6570\u3002\u5b83\u6307\u5b9a\u4e86\u5355\u4e2aHNSW\u7d22\u5f15\u5e94\u8fd4\u56de\u7684\u6587\u6863\u6570\u91cf\u3002\u7136\u800c\uff0c\u6700\u7ec8\u7ed3\u679c\u4e2d\u5305\u542b\u7684\u6587\u6863\u6570\u91cf\u53ef\u80fd\u4f1a\u6709\u6240\u4e0d\u540c\u3002\u4f8b\u5982\uff0c\u5982\u679c\u7cfb\u7edf\u5904\u7406\u7684\u662f\u5212\u5206\u4e3a\u78c1\u76d8\u5757\u7684\u5b9e\u65f6\u8868\uff0c\u6bcf\u4e2a\u5757\u53ef\u4ee5\u8fd4\u56de`k`\u4e2a\u6587\u6863\uff0c\u5bfc\u81f4\u603b\u6570\u8d85\u8fc7\u6307\u5b9a\u7684`k`\uff08\u7d2f\u79ef\u8ba1\u6570\u4e3a`num_chunks * k`\uff09\u3002\u53e6\u4e00\u65b9\u9762\uff0c\u5982\u679c\u5728\u8bf7\u6c42`k`\u4e2a\u6587\u6863\u540e\uff0c\u6839\u636e\u7279\u5b9a\u5c5e\u6027\u8fc7\u6ee4\u6389\u4e00\u4e9b\u6587\u6863\uff0c\u6700\u7ec8\u6587\u6863\u6570\u91cf\u53ef\u80fd\u5c11\u4e8e`k`\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u53c2\u6570`k`\u4e0d\u9002\u7528\u4e8eramchunks\u3002\u5728ramchunks\u7684\u4e0a\u4e0b\u6587\u4e2d\uff0c\u68c0\u7d22\u8fc7\u7a0b\u4ee5\u4e0d\u540c\u7684\u65b9\u5f0f\u8fd0\u884c\uff0c\u56e0\u6b64`k`\u53c2\u6570\u5bf9\u8fd4\u56de\u6587\u6863\u6570\u91cf\u7684\u5f71\u54cd\u4e0d\u9002\u7528\u3002\n* `document id`\uff1a\u7528\u4e8eKNN\u76f8\u4f3c\u6027\u641c\u7d22\u7684\u6587\u6863ID\u3002\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_30\n<!-- response SQL -->\n\nCODE_BLOCK_31\n\n<!-- intro -->\n##### JSON:\n\n<!-- request JSON -->\n\nCODE_BLOCK_32\n\n<!-- response JSON -->\n\nCODE_BLOCK_33\n\n<!-- end -->\n\n<!-- Example knn_filtering -->\n\n### \u8fc7\u6ee4KNN\u5411\u91cf\u641c\u7d22\u7ed3\u679c\n\nManticore\u8fd8\u652f\u6301\u901a\u8fc7\u5168\u6587\u5339\u914d\u3001\u5c5e\u6027\u8fc7\u6ee4\u6216\u4e24\u8005\u6765\u8fc7\u6ee4KNN\u641c\u7d22\u8fd4\u56de\u7684\u6587\u6863\u3002\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_34\n<!-- response SQL -->\n\nCODE_BLOCK_35\n\n<!-- intro -->\n##### JSON:\n\n<!-- request JSON -->\n\nCODE_BLOCK_36\n\n<!-- response JSON -->\n\nCODE_BLOCK_37\n\n<!-- end -->\n\n<!-- proofread -->\n\n",
            "russian": "\u0418\u043d\u0434\u0435\u043a\u0441\u044b HNSW \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0442\u044c \u0432 \u043f\u0430\u043c\u044f\u0442\u044c \u0434\u043b\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f KNN-\u043f\u043e\u0438\u0441\u043a\u0430, \u0447\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u0438\u0432\u0435\u0441\u0442\u0438 \u043a \u0437\u043d\u0430\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u043c\u0443 \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u044e \u043f\u0430\u043c\u044f\u0442\u0438. \u0414\u043b\u044f \u0443\u043c\u0435\u043d\u044c\u0448\u0435\u043d\u0438\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u043f\u0430\u043c\u044f\u0442\u0438 \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u043a\u0430\u043b\u044f\u0440\u043d\u043e\u0435 \u043a\u0432\u0430\u043d\u0442\u043e\u0432\u0430\u043d\u0438\u0435 \u2014 \u0442\u0435\u0445\u043d\u0438\u043a\u0443 \u0441\u0436\u0430\u0442\u0438\u044f \u0432\u044b\u0441\u043e\u043a\u043e\u0440\u0430\u0437\u043c\u0435\u0440\u043d\u044b\u0445 \u0432\u0435\u043a\u0442\u043e\u0440\u043e\u0432 \u043f\u0443\u0442\u0435\u043c \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043a\u0430\u0436\u0434\u043e\u0439 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b (\u0438\u0437\u043c\u0435\u0440\u0435\u043d\u0438\u044f) \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u043d\u044b\u043c \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u043c \u0434\u0438\u0441\u043a\u0440\u0435\u0442\u043d\u044b\u0445 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439. Manticore \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 8-\u0431\u0438\u0442\u043d\u043e\u0435 \u0438 1-\u0431\u0438\u0442\u043d\u043e\u0435 \u043a\u0432\u0430\u043d\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u0447\u0442\u043e \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442 \u0441\u0436\u0430\u0442\u0438\u0435 \u043a\u0430\u0436\u0434\u043e\u0439 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b \u0432\u0435\u043a\u0442\u043e\u0440\u0430 \u0441 32-\u0431\u0438\u0442\u043d\u043e\u0433\u043e \u0447\u0438\u0441\u043b\u0430 \u0441 \u043f\u043b\u0430\u0432\u0430\u044e\u0449\u0435\u0439 \u0437\u0430\u043f\u044f\u0442\u043e\u0439 \u0434\u043e 8 \u0431\u0438\u0442 \u0438\u043b\u0438 \u0434\u0430\u0436\u0435 1 \u0431\u0438\u0442\u0430, \u0443\u043c\u0435\u043d\u044c\u0448\u0430\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0430\u043c\u044f\u0442\u0438 \u0432 4 \u0438\u043b\u0438 32 \u0440\u0430\u0437\u0430 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e. \u042d\u0442\u0438 \u0441\u0436\u0430\u0442\u044b\u0435 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0442\u0430\u043a\u0436\u0435 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u044e\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u0431\u043e\u043b\u0435\u0435 \u0431\u044b\u0441\u0442\u0440\u044b\u0435 \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0439, \u0442\u0430\u043a \u043a\u0430\u043a \u0431\u043e\u043b\u044c\u0448\u0435 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442 \u0432\u0435\u043a\u0442\u043e\u0440\u0430 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043e \u0437\u0430 \u043e\u0434\u043d\u0443 SIMD-\u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044e. \u0425\u043e\u0442\u044f \u0441\u043a\u0430\u043b\u044f\u0440\u043d\u043e\u0435 \u043a\u0432\u0430\u043d\u0442\u043e\u0432\u0430\u043d\u0438\u0435 \u0432\u043d\u043e\u0441\u0438\u0442 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043e\u0448\u0438\u0431\u043a\u0443 \u0430\u043f\u043f\u0440\u043e\u043a\u0441\u0438\u043c\u0430\u0446\u0438\u0438, \u044d\u0442\u043e \u0447\u0430\u0441\u0442\u043e \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043e\u043f\u0440\u0430\u0432\u0434\u0430\u043d\u043d\u044b\u043c \u043a\u043e\u043c\u043f\u0440\u043e\u043c\u0438\u0441\u0441\u043e\u043c \u043c\u0435\u0436\u0434\u0443 \u0442\u043e\u0447\u043d\u043e\u0441\u0442\u044c\u044e \u043f\u043e\u0438\u0441\u043a\u0430 \u0438 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c\u044e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0440\u0435\u0441\u0443\u0440\u0441\u043e\u0432. \u0414\u043b\u044f \u0435\u0449\u0451 \u0431\u043e\u043b\u044c\u0448\u0435\u0439 \u0442\u043e\u0447\u043d\u043e\u0441\u0442\u0438 \u043a\u0432\u0430\u043d\u0442\u043e\u0432\u0430\u043d\u0438\u0435 \u043c\u043e\u0436\u043d\u043e \u043a\u043e\u043c\u0431\u0438\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441 \u043f\u0435\u0440\u0435\u0441\u0447\u0451\u0442\u043e\u043c \u0440\u0435\u043b\u0435\u0432\u0430\u043d\u0442\u043d\u043e\u0441\u0442\u0438 \u0438 \u0438\u0437\u0431\u044b\u0442\u043e\u0447\u043d\u043e\u0439 \u0432\u044b\u0431\u043e\u0440\u043a\u043e\u0439: \u0438\u0437\u0432\u043b\u0435\u043a\u0430\u0435\u0442\u0441\u044f \u0431\u043e\u043b\u044c\u0448\u0435 \u043a\u0430\u043d\u0434\u0438\u0434\u0430\u0442\u043e\u0432, \u0447\u0435\u043c \u0437\u0430\u043f\u0440\u043e\u0448\u0435\u043d\u043e, \u0438 \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u0434\u043b\u044f \u044d\u0442\u0438\u0445 \u043a\u0430\u043d\u0434\u0438\u0434\u0430\u0442\u043e\u0432 \u043f\u0435\u0440\u0435\u0441\u0447\u0438\u0442\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0445 32-\u0431\u0438\u0442\u043d\u044b\u0445 \u0432\u0435\u043a\u0442\u043e\u0440\u043e\u0432 \u0441 \u043f\u043b\u0430\u0432\u0430\u044e\u0449\u0435\u0439 \u0437\u0430\u043f\u044f\u0442\u043e\u0439.\n\n\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u043c\u044b\u0435 \u0442\u0438\u043f\u044b \u043a\u0432\u0430\u043d\u0442\u043e\u0432\u0430\u043d\u0438\u044f \u0432\u043a\u043b\u044e\u0447\u0430\u044e\u0442:\n* `8bit`: \u041a\u0430\u0436\u0434\u0430\u044f \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430 \u0432\u0435\u043a\u0442\u043e\u0440\u0430 \u043a\u0432\u0430\u043d\u0442\u0443\u0435\u0442\u0441\u044f \u0434\u043e 8 \u0431\u0438\u0442.\n* `1bit`: \u041a\u0430\u0436\u0434\u0430\u044f \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430 \u0432\u0435\u043a\u0442\u043e\u0440\u0430 \u043a\u0432\u0430\u043d\u0442\u0443\u0435\u0442\u0441\u044f \u0434\u043e 1 \u0431\u0438\u0442\u0430. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0430\u0441\u0438\u043c\u043c\u0435\u0442\u0440\u0438\u0447\u043d\u043e\u0435 \u043a\u0432\u0430\u043d\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043f\u0440\u0438 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u0432\u0435\u043a\u0442\u043e\u0440\u044b \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u043a\u0432\u0430\u043d\u0442\u0443\u044e\u0442\u0441\u044f \u0434\u043e 4 \u0431\u0438\u0442, \u0430 \u0445\u0440\u0430\u043d\u0438\u043c\u044b\u0435 \u0432\u0435\u043a\u0442\u043e\u0440\u044b \u2014 \u0434\u043e 1 \u0431\u0438\u0442\u0430. \u042d\u0442\u043e\u0442 \u043f\u043e\u0434\u0445\u043e\u0434 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442 \u0431\u043e\u043b\u044c\u0448\u0443\u044e \u0442\u043e\u0447\u043d\u043e\u0441\u0442\u044c \u043f\u043e \u0441\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u044e \u0441 \u0431\u043e\u043b\u0435\u0435 \u043f\u0440\u043e\u0441\u0442\u044b\u043c\u0438 \u043c\u0435\u0442\u043e\u0434\u0430\u043c\u0438, \u0445\u043e\u0442\u044f \u0438 \u0441 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u043c \u043a\u043e\u043c\u043f\u0440\u043e\u043c\u0438\u0441\u0441\u043e\u043c \u0432 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438.\n* `1bitsimple`: \u041a\u0430\u0436\u0434\u0430\u044f \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430 \u0432\u0435\u043a\u0442\u043e\u0440\u0430 \u043a\u0432\u0430\u043d\u0442\u0443\u0435\u0442\u0441\u044f \u0434\u043e 1 \u0431\u0438\u0442\u0430. \u042d\u0442\u043e\u0442 \u043c\u0435\u0442\u043e\u0434 \u0431\u044b\u0441\u0442\u0440\u0435\u0435, \u0447\u0435\u043c `1bit`, \u043d\u043e \u043e\u0431\u044b\u0447\u043d\u043e \u043c\u0435\u043d\u0435\u0435 \u0442\u043e\u0447\u0435\u043d.\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\nCODE_BLOCK_27\n\n<!-- response SQL -->\n\nCODE_BLOCK_28\n<!-- end -->\n\n<!-- Example knn_similar_docs -->\n\n### \u041f\u043e\u0438\u0441\u043a \u043f\u043e\u0445\u043e\u0436\u0438\u0445 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432 \u043f\u043e id\n\n> \u041f\u0420\u0418\u041c\u0415\u0427\u0410\u041d\u0418\u0415: \u041f\u043e\u0438\u0441\u043a \u043f\u043e\u0445\u043e\u0436\u0438\u0445 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432 \u043f\u043e id \u0442\u0440\u0435\u0431\u0443\u0435\u0442 \u043d\u0430\u043b\u0438\u0447\u0438\u044f [Manticore Buddy](../Installation/Manticore_Buddy.md). \u0415\u0441\u043b\u0438 \u044d\u0442\u043e \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442, \u0443\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044c, \u0447\u0442\u043e Buddy \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d.\n\n\u041f\u043e\u0438\u0441\u043a \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432, \u043f\u043e\u0445\u043e\u0436\u0438\u0445 \u043d\u0430 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0439, \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u0435\u0433\u043e \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u043e\u0433\u043e ID, \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0440\u0430\u0441\u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0451\u043d\u043d\u043e\u0439 \u0437\u0430\u0434\u0430\u0447\u0435\u0439. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043a\u043e\u0433\u0434\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043f\u0440\u043e\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0435\u0442 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u044b\u0439 \u044d\u043b\u0435\u043c\u0435\u043d\u0442, Manticore Search \u043c\u043e\u0436\u0435\u0442 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0438 \u043e\u0442\u043e\u0431\u0440\u0430\u0437\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432, \u043d\u0430\u0438\u0431\u043e\u043b\u0435\u0435 \u043f\u043e\u0445\u043e\u0436\u0438\u0445 \u043d\u0430 \u043d\u0435\u0433\u043e \u0432 \u0432\u0435\u043a\u0442\u043e\u0440\u043d\u043e\u043c \u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0441\u0442\u0432\u0435. \u0412\u043e\u0442 \u043a\u0430\u043a \u044d\u0442\u043e \u043c\u043e\u0436\u043d\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c:\n\n- SQL: `select ... from <table name> where knn ( <field>, <k>, <document id> )`\n- JSON:\nCODE_BLOCK_29\n\n\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b:\n* `field`: \u042d\u0442\u043e \u0438\u043c\u044f \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u0430 \u0432\u0435\u043a\u0442\u043e\u0440\u0430 \u0441 \u043f\u043b\u0430\u0432\u0430\u044e\u0449\u0435\u0439 \u0437\u0430\u043f\u044f\u0442\u043e\u0439, \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0449\u0435\u0433\u043e \u0432\u0435\u043a\u0442\u043e\u0440\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435.\n* `k`: \u042d\u0442\u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432 \u0434\u043b\u044f \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0430 \u0438 \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u0439 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u0434\u043b\u044f \u0438\u043d\u0434\u0435\u043a\u0441\u043e\u0432 Hierarchical Navigable Small World (HNSW). \u041e\u043d \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0434\u043e\u043b\u0436\u0435\u043d \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043e\u0434\u0438\u043d \u0438\u043d\u0434\u0435\u043a\u0441 HNSW. \u041e\u0434\u043d\u0430\u043a\u043e \u0444\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0451\u043d\u043d\u044b\u0445 \u0432 \u043e\u043a\u043e\u043d\u0447\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b, \u043c\u043e\u0436\u0435\u0442 \u0432\u0430\u0440\u044c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0435\u0441\u043b\u0438 \u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0441 \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u043c\u0438 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438, \u0440\u0430\u0437\u0434\u0435\u043b\u0451\u043d\u043d\u044b\u043c\u0438 \u043d\u0430 \u0434\u0438\u0441\u043a\u043e\u0432\u044b\u0435 \u0447\u0430\u043d\u043a\u0438, \u043a\u0430\u0436\u0434\u044b\u0439 \u0447\u0430\u043d\u043a \u043c\u043e\u0436\u0435\u0442 \u0432\u0435\u0440\u043d\u0443\u0442\u044c `k` \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432, \u0447\u0442\u043e \u043f\u0440\u0438\u0432\u043e\u0434\u0438\u0442 \u043a \u043e\u0431\u0449\u0435\u043c\u0443 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0443, \u043f\u0440\u0435\u0432\u044b\u0448\u0430\u044e\u0449\u0435\u043c\u0443 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0435 `k` (\u0442\u0430\u043a \u043a\u0430\u043a \u0441\u043e\u0432\u043e\u043a\u0443\u043f\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0431\u0443\u0434\u0435\u0442 `num_chunks * k`). \u0421 \u0434\u0440\u0443\u0433\u043e\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u044b, \u043e\u043a\u043e\u043d\u0447\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043c\u0435\u043d\u044c\u0448\u0435 `k`, \u0435\u0441\u043b\u0438 \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 `k` \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0438\u0437 \u043d\u0438\u0445 \u043e\u0442\u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u044b\u0445 \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u043e\u0432. \u0412\u0430\u0436\u043d\u043e \u043e\u0442\u043c\u0435\u0442\u0438\u0442\u044c, \u0447\u0442\u043e \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 `k` \u043d\u0435 \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u043a ramchunks. \u0412 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0435 ramchunks \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u0438\u0437\u0432\u043b\u0435\u0447\u0435\u043d\u0438\u044f \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0438\u043d\u0430\u0447\u0435, \u0438, \u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e, \u0432\u043b\u0438\u044f\u043d\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430 `k` \u043d\u0430 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043c\u044b\u0445 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432 \u043d\u0435\u043f\u0440\u0438\u043c\u0435\u043d\u0438\u043c\u043e.\n* `document id`: ID \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430 \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430 \u043f\u043e\u0445\u043e\u0436\u0438\u0445 KNN.\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_30\n<!-- response SQL -->\n\nCODE_BLOCK_31\n\n<!-- intro -->\n##### JSON:\n\n<!-- request JSON -->\n\nCODE_BLOCK_32\n\n<!-- response JSON -->\n\nCODE_BLOCK_33\n\n<!-- end -->\n\n<!-- Example knn_filtering -->\n\n### \u0424\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432 \u0432\u0435\u043a\u0442\u043e\u0440\u043d\u043e\u0433\u043e \u043f\u043e\u0438\u0441\u043a\u0430 KNN\n\nManticore \u0442\u0430\u043a\u0436\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0443\u044e \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432, \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043c\u044b\u0445 KNN-\u043f\u043e\u0438\u0441\u043a\u043e\u043c, \u043b\u0438\u0431\u043e \u043f\u043e \u043f\u043e\u043b\u043d\u043e\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u043c\u0443 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u044e, \u043b\u0438\u0431\u043e \u043f\u043e \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u043c \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u043e\u0432, \u043b\u0438\u0431\u043e \u043f\u043e \u043e\u0431\u043e\u0438\u043c.\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_34\n<!-- response SQL -->\n\nCODE_BLOCK_35\n\n<!-- intro -->\n##### JSON:\n\n<!-- request JSON -->\n\nCODE_BLOCK_36\n\n<!-- response JSON -->\n\nCODE_BLOCK_37\n\n<!-- end -->\n\n<!-- proofread -->\n\n"
        },
        "is_code_or_comment": false,
        "model": "deepseek/deepseek-v3.2",
        "updated_at": 1768309317
    },
    "907d7b6f08412ea34e22fd72bdedd8a754c4edb6fe070b26cac8ae0768f45315": {
        "original": "# K-nearest neighbor vector search\n\nManticore Search supports the ability to add embeddings generated by Machine Learning models to each document, and then doing a nearest-neighbor search on them. This lets you build features like similarity search, recommendations, semantic search, and relevance ranking based on NLP algorithms, among others, including image, video, and sound searches.\n\n## What is an embedding?\n\nAn embedding is a method of representing data - such as text, images, or sound - as vectors in a high-dimensional space. These vectors are crafted to ensure that the distance between them reflects the similarity of the data they represent. This process typically employs algorithms like word embeddings (e.g., Word2Vec, BERT) for text or neural networks for images. The high-dimensional nature of the vector space, with many components per vector, allows for the representation of complex and nuanced relationships between items. Their similarity is gauged by the distance between these vectors, often measured using methods like Euclidean distance or cosine similarity.\n\nManticore Search enables k-nearest neighbor (KNN) vector searches using the HNSW library. This functionality is part of the [Manticore Columnar Library](https://github.com/manticoresoftware/columnar).\n\n<!-- example KNN -->\n\n### Configuring a table for KNN search\n\nTo run KNN searches, you must first configure your table. Float vectors and KNN search are only supported in real-time tables (not in plain tables). The table needs to have at least one [float_vector](../Creating_a_table/Data_types.md#Float-vector) attribute, which serves as a data vector. You need to specify the following properties:\n* `knn_type`: A mandatory setting; currently, only `hnsw` is supported.\n* `knn_dims`: A mandatory setting that specifies the dimensions of the vectors being indexed.\n* `hnsw_similarity`: A mandatory setting that specifies the distance function used by the HNSW index. Acceptable values are:\n  - `L2` - Squared L2\n  - `IP` - Inner product\n  - `COSINE` - Cosine similarity\n  \n  **Note:** When using `COSINE` similarity, vectors are automatically normalized upon insertion. This means the stored vector values may differ from the original input values, as they will be converted to unit vectors (vectors with a mathematical length/magnitude of 1.0) to enable efficient cosine similarity calculations. This normalization preserves the direction of the vector while standardizing its length.\n* `hnsw_m`: An optional setting that defines the maximum number of outgoing connections in the graph. The default is 16.\n* `hnsw_ef_construction`: An optional setting that defines a construction time/accuracy trade-off. The default is 200.\n\n<!-- intro -->\n##### SQL\n\n<!-- request SQL -->\nCODE_BLOCK_0\n\n<!-- response SQL -->\n\nCODE_BLOCK_1\n\n<!-- intro -->\n##### Plain mode (using configuration file) - Manual vectors:\n\n<!-- request Config -->\nCODE_BLOCK_2\n\n**Note:** For auto-embeddings in plain mode, see the example below, which shows how to use `model_name` and `from` parameters in the `knn` configuration.\n\n<!-- end -->\n\n<!-- example knn_insert -->\n\n### Inserting vector data\n\n#### Auto Embeddings (Recommended)\n\nThe easiest way to work with vector data is using **auto embeddings**. With this feature, you create a table with `MODEL_NAME` and `FROM` parameters, then simply insert your text data - Manticore automatically generates embeddings for you.\n\n##### Creating a table with auto embeddings\n\nWhen creating a table for auto embeddings, specify:\n- `MODEL_NAME`: The embedding model to use\n- `FROM`: Which fields to use for embedding generation (empty means all text/string fields)\n- `API_KEY`: Required for remote models (OpenAI, Voyage, Jina). The API key is validated during table creation by making a real API request.\n- `API_URL`: Optional. Custom API endpoint URL. If not specified, uses the default provider endpoint (e.g., `https://api.openai.com/v1/embeddings` for OpenAI).\n- `API_TIMEOUT`: Optional. HTTP timeout in seconds for API requests. Default is 10 seconds. Set to `'0'` to use the default timeout. Applies to both validation requests during table creation and embedding generation during INSERT operations.\n\n**Supported embedding models:**\n- **Sentence Transformers**: Any [suitable BERT-based Hugging Face model](https://huggingface.co/sentence-transformers/models) (e.g., `sentence-transformers/all-MiniLM-L6-v2`) \u2014 no API key needed. Manticore downloads the model when you create the table.\n- **OpenAI, Voyage, Jina**: Remote embedding models (e.g., `openai/text-embedding-ada-002`, `voyage/voyage-3.5-lite`, `jina/jina-embeddings-v2-base-en`) - require `API_KEY='<API_KEY>'` parameter. Optionally specify `API_URL='<CUSTOM_URL>'` to use a custom API endpoint, and `API_TIMEOUT='<SECONDS>'` to configure HTTP timeout (default is 10 seconds).\n\nMore information about setting up a `float_vector` attribute can be found [here](../Creating_a_table/Data_types.md#Float-vector).\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\n\nUsing sentence-transformers (no API key needed)\nCODE_BLOCK_3\n\nUsing OpenAI (requires API_KEY parameter)\nCODE_BLOCK_4\n\nUsing OpenAI with custom API URL and timeout (optional)\nCODE_BLOCK_5\n\nUsing all text fields for embeddings (FROM is empty)\nCODE_BLOCK_6\n\n<!-- intro -->\n##### Plain mode (using configuration file):\n\n<!-- request Config -->\nCODE_BLOCK_7\n\nUsing OpenAI with API key in plain mode:\nCODE_BLOCK_8\n\nUsing all text fields (empty FROM):\nCODE_BLOCK_9\n\n**Important notes for plain mode:**\n- When using `model_name`, you **must not** specify `dims` - the model automatically determines the vector dimensions. The `dims` and `model_name` parameters are mutually exclusive.\n- When **not** using `model_name` (manual vector insertion), you **must** specify `dims` to indicate the vector dimensions.\n- The `from` parameter specifies which fields to use for embedding generation (comma-separated list, or empty string for all text/string fields). This parameter is required when using `model_name`.\n- For API-based models (OpenAI, Voyage, Jina), include the `api_key` parameter in the knn configuration",
        "translations": {
            "chinese": "# K\u8fd1\u90bb\u5411\u91cf\u641c\u7d22\n\nManticore Search \u652f\u6301\u5c06\u673a\u5668\u5b66\u4e60\u6a21\u578b\u751f\u6210\u7684\u5d4c\u5165\u5411\u91cf\u6dfb\u52a0\u5230\u6bcf\u4e2a\u6587\u6863\u4e2d\uff0c\u7136\u540e\u5bf9\u5b83\u4eec\u8fdb\u884c\u6700\u8fd1\u90bb\u641c\u7d22\u3002\u8fd9\u4f7f\u60a8\u53ef\u4ee5\u57fa\u4e8eNLP\u7b97\u6cd5\u6784\u5efa\u76f8\u4f3c\u6027\u641c\u7d22\u3001\u63a8\u8350\u3001\u8bed\u4e49\u641c\u7d22\u548c\u76f8\u5173\u6027\u6392\u5e8f\u7b49\u529f\u80fd\uff0c\u5305\u62ec\u56fe\u50cf\u3001\u89c6\u9891\u548c\u58f0\u97f3\u641c\u7d22\u7b49\u3002\n\n## \u4ec0\u4e48\u662f\u5d4c\u5165\uff1f\n\n\u5d4c\u5165\u662f\u4e00\u79cd\u8868\u793a\u6570\u636e\u7684\u65b9\u6cd5 - \u4f8b\u5982\u6587\u672c\u3001\u56fe\u50cf\u6216\u58f0\u97f3 - \u4f5c\u4e3a\u9ad8\u7ef4\u7a7a\u95f4\u4e2d\u7684\u5411\u91cf\u3002\u8fd9\u4e9b\u5411\u91cf\u7684\u6784\u9020\u662f\u4e3a\u4e86\u786e\u4fdd\u5b83\u4eec\u4e4b\u95f4\u7684\u8ddd\u79bb\u53cd\u6620\u4e86\u5b83\u4eec\u6240\u4ee3\u8868\u6570\u636e\u7684\u76f8\u4f3c\u6027\u3002\u6b64\u8fc7\u7a0b\u901a\u5e38\u4f7f\u7528\u8bf8\u5982\u8bcd\u5d4c\u5165\uff08\u4f8b\u5982Word2Vec\u3001BERT\uff09\u7528\u4e8e\u6587\u672c\u6216\u795e\u7ecf\u7f51\u7edc\u7528\u4e8e\u56fe\u50cf\u7684\u7b97\u6cd5\u3002\u5411\u91cf\u7a7a\u95f4\u7684\u9ad8\u7ef4\u7279\u6027\uff0c\u6bcf\u4e2a\u5411\u91cf\u6709\u591a\u4e2a\u5206\u91cf\uff0c\u5141\u8bb8\u8868\u793a\u9879\u76ee\u4e4b\u95f4\u590d\u6742\u800c\u7ec6\u81f4\u7684\u5173\u7cfb\u3002\u5b83\u4eec\u7684\u76f8\u4f3c\u6027\u901a\u8fc7\u8fd9\u4e9b\u5411\u91cf\u4e4b\u95f4\u7684\u8ddd\u79bb\u6765\u8861\u91cf\uff0c\u901a\u5e38\u4f7f\u7528\u6b27\u51e0\u91cc\u5f97\u8ddd\u79bb\u6216\u4f59\u5f26\u76f8\u4f3c\u5ea6\u7b49\u65b9\u6cd5\u8fdb\u884c\u6d4b\u91cf\u3002\n\nManticore Search \u4f7f\u7528 HNSW \u5e93\u5b9e\u73b0 k \u8fd1\u90bb\uff08KNN\uff09\u5411\u91cf\u641c\u7d22\u3002\u6b64\u529f\u80fd\u662f [Manticore \u5217\u5f0f\u5e93](https://github.com/manticoresoftware/columnar) \u7684\u4e00\u90e8\u5206\u3002\n\n<!-- example KNN -->\n\n### \u4e3a KNN \u641c\u7d22\u914d\u7f6e\u8868\n\n\u8981\u8fd0\u884c KNN \u641c\u7d22\uff0c\u60a8\u5fc5\u987b\u9996\u5148\u914d\u7f6e\u60a8\u7684\u8868\u3002\u6d6e\u70b9\u5411\u91cf\u548c KNN \u641c\u7d22\u4ec5\u652f\u6301\u5b9e\u65f6\u8868\uff08\u4e0d\u652f\u6301\u666e\u901a\u8868\uff09\u3002\u8868\u9700\u8981\u81f3\u5c11\u4e00\u4e2a [float_vector](../Creating_a_table/Data_types.md#Float-vector) \u5c5e\u6027\uff0c\u4f5c\u4e3a\u6570\u636e\u5411\u91cf\u3002\u60a8\u9700\u8981\u6307\u5b9a\u4ee5\u4e0b\u5c5e\u6027\uff1a\n* `knn_type`\uff1a\u5fc5\u586b\u8bbe\u7f6e\uff1b\u76ee\u524d\u4ec5\u652f\u6301 `hnsw`\u3002\n* `knn_dims`\uff1a\u5fc5\u586b\u8bbe\u7f6e\uff0c\u6307\u5b9a\u7d22\u5f15\u7684\u5411\u91cf\u7ef4\u5ea6\u3002\n* `hnsw_similarity`\uff1a\u5fc5\u586b\u8bbe\u7f6e\uff0c\u6307\u5b9a HNSW \u7d22\u5f15\u4f7f\u7528\u7684\u8ddd\u79bb\u51fd\u6570\u3002\u53ef\u63a5\u53d7\u7684\u503c\u4e3a\uff1a\n  - `L2` - \u5e73\u65b9 L2\n  - `IP` - \u70b9\u79ef\n  - `COSINE` - \u4f59\u5f26\u76f8\u4f3c\u5ea6\n  \n  **\u6ce8\u610f\uff1a** \u4f7f\u7528 `COSINE` \u76f8\u4f3c\u5ea6\u65f6\uff0c\u63d2\u5165\u65f6\u5411\u91cf\u4f1a\u81ea\u52a8\u5f52\u4e00\u5316\u3002\u8fd9\u610f\u5473\u7740\u5b58\u50a8\u7684\u5411\u91cf\u503c\u53ef\u80fd\u4e0e\u539f\u59cb\u8f93\u5165\u503c\u4e0d\u540c\uff0c\u56e0\u4e3a\u5b83\u4eec\u5c06\u88ab\u8f6c\u6362\u4e3a\u5355\u4f4d\u5411\u91cf\uff08\u6570\u5b66\u957f\u5ea6/\u5e45\u5ea6\u4e3a 1.0 \u7684\u5411\u91cf\uff09\uff0c\u4ee5\u5b9e\u73b0\u9ad8\u6548\u7684\u4f59\u5f26\u76f8\u4f3c\u5ea6\u8ba1\u7b97\u3002\u8fd9\u79cd\u5f52\u4e00\u5316\u4fdd\u7559\u4e86\u5411\u91cf\u7684\u65b9\u5411\uff0c\u540c\u65f6\u6807\u51c6\u5316\u4e86\u5176\u957f\u5ea6\u3002\n* `hnsw_m`\uff1a\u53ef\u9009\u8bbe\u7f6e\uff0c\u5b9a\u4e49\u56fe\u4e2d\u51fa\u8fb9\u7684\u6700\u5927\u6570\u91cf\u3002\u9ed8\u8ba4\u503c\u4e3a 16\u3002\n* `hnsw_ef_construction`\uff1a\u53ef\u9009\u8bbe\u7f6e\uff0c\u5b9a\u4e49\u6784\u5efa\u65f6\u95f4/\u51c6\u786e\u6027\u6743\u8861\u3002\u9ed8\u8ba4\u503c\u4e3a 200\u3002\n\n<!-- intro -->\n##### SQL\n\n<!-- request SQL -->\nCODE_BLOCK_0\n\n<!-- response SQL -->\n\nCODE_BLOCK_1\n\n<!-- intro -->\n##### \u666e\u901a\u6a21\u5f0f\uff08\u4f7f\u7528\u914d\u7f6e\u6587\u4ef6\uff09- \u624b\u52a8\u5411\u91cf\uff1a\n\n<!-- request Config -->\nCODE_BLOCK_2\n\n**\u6ce8\u610f\uff1a** \u5173\u4e8e\u666e\u901a\u6a21\u5f0f\u4e0b\u7684\u81ea\u52a8\u5d4c\u5165\uff0c\u8bf7\u53c2\u89c1\u4e0b\u9762\u7684\u793a\u4f8b\uff0c\u8be5\u793a\u4f8b\u5c55\u793a\u4e86\u5982\u4f55\u5728 `knn` \u914d\u7f6e\u4e2d\u4f7f\u7528 `model_name` \u548c `from` \u53c2\u6570\u3002\n\n<!-- end -->\n\n<!-- example knn_insert -->\n\n### \u63d2\u5165\u5411\u91cf\u6570\u636e\n\n#### \u81ea\u52a8\u5d4c\u5165\uff08\u63a8\u8350\uff09\n\n\u4f7f\u7528\u5411\u91cf\u6570\u636e\u6700\u7b80\u5355\u7684\u65b9\u6cd5\u662f\u4f7f\u7528 **\u81ea\u52a8\u5d4c\u5165**\u3002\u4f7f\u7528\u6b64\u529f\u80fd\u65f6\uff0c\u60a8\u521b\u5efa\u4e00\u4e2a\u5e26\u6709 `MODEL_NAME` \u548c `FROM` \u53c2\u6570\u7684\u8868\uff0c\u7136\u540e\u53ea\u9700\u63d2\u5165\u60a8\u7684\u6587\u672c\u6570\u636e - Manticore \u4f1a\u81ea\u52a8\u4e3a\u60a8\u751f\u6210\u5d4c\u5165\u3002\n\n##### \u521b\u5efa\u5e26\u6709\u81ea\u52a8\u5d4c\u5165\u7684\u8868\n\n\u521b\u5efa\u81ea\u52a8\u5d4c\u5165\u8868\u65f6\uff0c\u8bf7\u6307\u5b9a\uff1a\n- `MODEL_NAME`\uff1a\u4f7f\u7528\u7684\u5d4c\u5165\u6a21\u578b\n- `FROM`\uff1a\u7528\u4e8e\u751f\u6210\u5d4c\u5165\u7684\u5b57\u6bb5\uff08\u7559\u7a7a\u8868\u793a\u6240\u6709\u6587\u672c/\u5b57\u7b26\u4e32\u5b57\u6bb5\uff09\n- `API_KEY`\uff1a\u5bf9\u4e8e\u8fdc\u7a0b\u6a21\u578b\uff08OpenAI\u3001Voyage\u3001Jina\uff09\u662f\u5fc5\u9700\u7684\u3002\u5728\u521b\u5efa\u8868\u65f6\u901a\u8fc7\u5b9e\u9645\u7684 API \u8bf7\u6c42\u9a8c\u8bc1 API \u5bc6\u94a5\u3002\n- `API_URL`\uff1a\u53ef\u9009\u3002\u81ea\u5b9a\u4e49 API \u7aef\u70b9 URL\u3002\u5982\u679c\u672a\u6307\u5b9a\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u63d0\u4f9b\u7a0b\u5e8f\u7aef\u70b9\uff08\u4f8b\u5982\uff0cOpenAI \u7684 `https://api.openai.com/v1/embeddings`\uff09\u3002\n- `API_TIMEOUT`\uff1a\u53ef\u9009\u3002API \u8bf7\u6c42\u7684 HTTP \u8d85\u65f6\u65f6\u95f4\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u9ed8\u8ba4\u503c\u4e3a 10 \u79d2\u3002\u8bbe\u7f6e\u4e3a `'0'` \u4ee5\u4f7f\u7528\u9ed8\u8ba4\u8d85\u65f6\u3002\u9002\u7528\u4e8e\u8868\u521b\u5efa\u671f\u95f4\u7684\u9a8c\u8bc1\u8bf7\u6c42\u548c\u63d2\u5165\u64cd\u4f5c\u671f\u95f4\u7684\u5d4c\u5165\u751f\u6210\u3002\n\n**\u652f\u6301\u7684\u5d4c\u5165\u6a21\u578b\uff1a**\n- **Sentence Transformers**\uff1a\u4efb\u4f55 [\u5408\u9002\u7684\u57fa\u4e8e BERT \u7684 Hugging Face \u6a21\u578b](https://huggingface.co/sentence-transformers/models)\uff08\u4f8b\u5982\uff0c`sentence-transformers/all-MiniLM-L6-v2`\uff09\u2014\u2014\u4e0d\u9700\u8981 API \u5bc6\u94a5\u3002Manticore \u5728\u60a8\u521b\u5efa\u8868\u65f6\u4e0b\u8f7d\u6a21\u578b\u3002\n- **OpenAI\u3001Voyage\u3001Jina**\uff1a\u8fdc\u7a0b\u5d4c\u5165\u6a21\u578b\uff08\u4f8b\u5982\uff0c`openai/text-embedding-ada-002`\u3001`voyage/voyage-3.5-lite`\u3001`jina/jina-embeddings-v2-base-en`\uff09- \u9700\u8981 `API_KEY='<API_KEY>'` \u53c2\u6570\u3002\u53ef\u9009\u5730\u6307\u5b9a `API_URL='<CUSTOM_URL>'` \u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49 API \u7aef\u70b9\uff0c\u5e76\u6307\u5b9a `API_TIMEOUT='<SECONDS>'` \u4ee5\u914d\u7f6e HTTP \u8d85\u65f6\uff08\u9ed8\u8ba4\u4e3a 10 \u79d2\uff09\u3002\n\n\u6709\u5173\u8bbe\u7f6e `float_vector` \u5c5e\u6027\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 [\u6b64\u5904](../Creating_a_table/Data_types.md#Float-vector)\u3002\n\n<!-- intro -->\n##### SQL\uff1a\n\n<!-- request SQL -->\n\n\u4f7f\u7528 sentence-transformers\uff08\u4e0d\u9700\u8981 API \u5bc6\u94a5\uff09\nCODE_BLOCK_3\n\n\u4f7f\u7528 OpenAI\uff08\u9700\u8981 API_KEY \u53c2\u6570\uff09\nCODE_BLOCK_4\n\n\u4f7f\u7528 OpenAI \u4e0e\u81ea\u5b9a\u4e49 API URL \u548c\u8d85\u65f6\uff08\u53ef\u9009\uff09\nCODE_BLOCK_5\n\n\u4f7f\u7528\u6240\u6709\u6587\u672c\u5b57\u6bb5\u8fdb\u884c\u5d4c\u5165\uff08FROM \u4e3a\u7a7a\uff09\nCODE_BLOCK_6\n\n<!-- intro -->\n##### \u666e\u901a\u6a21\u5f0f\uff08\u4f7f\u7528\u914d\u7f6e\u6587\u4ef6\uff09\uff1a\n\n<!-- request Config -->\nCODE_BLOCK_7\n\n\u5728\u666e\u901a\u6a21\u5f0f\u4e0b\u4f7f\u7528 OpenAI \u4e0e API \u5bc6\u94a5\uff1a\nCODE_BLOCK_8\n\n\u4f7f\u7528\u6240\u6709\u6587\u672c\u5b57\u6bb5\uff08FROM \u4e3a\u7a7a\uff09\uff1a\nCODE_BLOCK_9\n\n**\u666e\u901a\u6a21\u5f0f\u7684\u91cd\u8981\u6ce8\u610f\u4e8b\u9879\uff1a**\n- \u4f7f\u7528 `model_name` \u65f6\uff0c**\u4e0d\u5f97**\u6307\u5b9a `dims` - \u6a21\u578b\u4f1a\u81ea\u52a8\u786e\u5b9a\u5411\u91cf\u7ef4\u5ea6\u3002`dims` \u548c `model_name` \u53c2\u6570\u662f\u4e92\u65a5\u7684\u3002\n- **\u4e0d**\u4f7f\u7528 `model_name`\uff08\u624b\u52a8\u5411\u91cf\u63d2\u5165\uff09\u65f6\uff0c**\u5fc5\u987b**\u6307\u5b9a `dims` \u4ee5\u6307\u793a\u5411\u91cf\u7ef4\u5ea6\u3002\n- `from` \u53c2\u6570\u6307\u5b9a\u7528\u4e8e\u751f\u6210\u5d4c\u5165\u7684\u5b57\u6bb5\uff08\u9017\u53f7\u5206\u9694\u5217\u8868\uff0c\u6216\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u6240\u6709\u6587\u672c/\u5b57\u7b26\u4e32\u5b57\u6bb5\uff09\u3002\u5f53\u4f7f\u7528 `model_name` \u65f6\uff0c\u6b64\u53c2\u6570\u662f\u5fc5\u9700\u7684\u3002\n- \u5bf9\u4e8e\u57fa\u4e8e API \u7684\u6a21\u578b\uff08OpenAI\u3001Voyage\u3001Jina\uff09\uff0c\u5728 knn \u914d\u7f6e\u4e2d\u5305\u542b `api_key` \u53c2\u6570",
            "russian": "# \u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0432\u0435\u043a\u0442\u043e\u0440\u0430\u043c \u043c\u0435\u0442\u043e\u0434\u043e\u043c k-\u0431\u043b\u0438\u0436\u0430\u0439\u0448\u0438\u0445 \u0441\u043e\u0441\u0435\u0434\u0435\u0439\n\nManticore Search \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u044d\u043c\u0431\u0435\u0434\u0434\u0438\u043d\u0433\u043e\u0432, \u0441\u0433\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0445 \u043c\u043e\u0434\u0435\u043b\u044f\u043c\u0438 \u043c\u0430\u0448\u0438\u043d\u043d\u043e\u0433\u043e \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f, \u043a \u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0443, \u0430 \u0437\u0430\u0442\u0435\u043c \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u043f\u043e\u0438\u0441\u043a\u0430 \u0431\u043b\u0438\u0436\u0430\u0439\u0448\u0438\u0445 \u0441\u043e\u0441\u0435\u0434\u0435\u0439 \u043f\u043e \u043d\u0438\u043c. \u042d\u0442\u043e \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0442\u0430\u043a\u0438\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438, \u043a\u0430\u043a \u043f\u043e\u0438\u0441\u043a \u043f\u043e \u0441\u0445\u043e\u0434\u0441\u0442\u0432\u0443, \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438, \u0441\u0435\u043c\u0430\u043d\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u043f\u043e\u0438\u0441\u043a \u0438 \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e \u0440\u0435\u043b\u0435\u0432\u0430\u043d\u0442\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u0430\u043b\u0433\u043e\u0440\u0438\u0442\u043c\u043e\u0432 NLP, \u0441\u0440\u0435\u0434\u0438 \u043f\u0440\u043e\u0447\u0435\u0433\u043e, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u043f\u043e\u0438\u0441\u043a \u043f\u043e \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f\u043c, \u0432\u0438\u0434\u0435\u043e \u0438 \u0437\u0432\u0443\u043a\u0443.\n\n## \u0427\u0442\u043e \u0442\u0430\u043a\u043e\u0435 \u044d\u043c\u0431\u0435\u0434\u0434\u0438\u043d\u0433?\n\n\u042d\u043c\u0431\u0435\u0434\u0434\u0438\u043d\u0433 \u2014 \u044d\u0442\u043e \u043c\u0435\u0442\u043e\u0434 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u2014 \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a \u0442\u0435\u043a\u0441\u0442, \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0438\u043b\u0438 \u0437\u0432\u0443\u043a \u2014 \u0432 \u0432\u0438\u0434\u0435 \u0432\u0435\u043a\u0442\u043e\u0440\u043e\u0432 \u0432 \u043c\u043d\u043e\u0433\u043e\u043c\u0435\u0440\u043d\u043e\u043c \u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0441\u0442\u0432\u0435. \u042d\u0442\u0438 \u0432\u0435\u043a\u0442\u043e\u0440\u044b \u0441\u043e\u0437\u0434\u0430\u043d\u044b \u0442\u0430\u043a\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c, \u0447\u0442\u043e\u0431\u044b \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u043c\u0435\u0436\u0434\u0443 \u043d\u0438\u043c\u0438 \u043e\u0442\u0440\u0430\u0436\u0430\u043b\u043e \u0441\u0445\u043e\u0434\u0441\u0442\u0432\u043e \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u043c\u044b\u0445 \u0438\u043c\u0438 \u0434\u0430\u043d\u043d\u044b\u0445. \u042d\u0442\u043e\u0442 \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u043e\u0431\u044b\u0447\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 \u0430\u043b\u0433\u043e\u0440\u0438\u0442\u043c\u044b, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a word embeddings (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, Word2Vec, BERT) \u0434\u043b\u044f \u0442\u0435\u043a\u0441\u0442\u0430 \u0438\u043b\u0438 \u043d\u0435\u0439\u0440\u043e\u043d\u043d\u044b\u0435 \u0441\u0435\u0442\u0438 \u0434\u043b\u044f \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439. \u041c\u043d\u043e\u0433\u043e\u043c\u0435\u0440\u043d\u0430\u044f \u043f\u0440\u0438\u0440\u043e\u0434\u0430 \u0432\u0435\u043a\u0442\u043e\u0440\u043d\u043e\u0433\u043e \u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0441\u0442\u0432\u0430, \u0441 \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u043e\u043c \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u043e\u0432 \u043d\u0430 \u0432\u0435\u043a\u0442\u043e\u0440, \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u044f\u0442\u044c \u0441\u043b\u043e\u0436\u043d\u044b\u0435 \u0438 \u0442\u043e\u043d\u043a\u0438\u0435 \u0432\u0437\u0430\u0438\u043c\u043e\u0441\u0432\u044f\u0437\u0438 \u043c\u0435\u0436\u0434\u0443 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430\u043c\u0438. \u0418\u0445 \u0441\u0445\u043e\u0434\u0441\u0442\u0432\u043e \u0438\u0437\u043c\u0435\u0440\u044f\u0435\u0442\u0441\u044f \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435\u043c \u043c\u0435\u0436\u0434\u0443 \u044d\u0442\u0438\u043c\u0438 \u0432\u0435\u043a\u0442\u043e\u0440\u0430\u043c\u0438, \u0447\u0430\u0441\u0442\u043e \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u043c\u0435\u0442\u043e\u0434\u043e\u0432, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a \u0435\u0432\u043a\u043b\u0438\u0434\u043e\u0432\u043e \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u0438\u043b\u0438 \u043a\u043e\u0441\u0438\u043d\u0443\u0441\u043d\u043e\u0435 \u0441\u0445\u043e\u0434\u0441\u0442\u0432\u043e.\n\nManticore Search \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u043f\u043e\u0438\u0441\u043a \u043f\u043e \u0432\u0435\u043a\u0442\u043e\u0440\u0430\u043c \u043c\u0435\u0442\u043e\u0434\u043e\u043c k-\u0431\u043b\u0438\u0436\u0430\u0439\u0448\u0438\u0445 \u0441\u043e\u0441\u0435\u0434\u0435\u0439 (KNN) \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 HNSW. \u042d\u0442\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0447\u0430\u0441\u0442\u044c\u044e [Manticore Columnar Library](https://github.com/manticoresoftware/columnar).\n\n<!-- example KNN -->\n\n### \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430 KNN\n\n\u0414\u043b\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043f\u043e\u0438\u0441\u043a\u0430 KNN \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0432\u0430\u0448\u0443 \u0442\u0430\u0431\u043b\u0438\u0446\u0443. \u0412\u0435\u043a\u0442\u043e\u0440\u044b \u0441 \u043f\u043b\u0430\u0432\u0430\u044e\u0449\u0435\u0439 \u0442\u043e\u0447\u043a\u043e\u0439 \u0438 \u043f\u043e\u0438\u0441\u043a KNN \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u0445 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 (\u043d\u0435 \u0432 \u043e\u0431\u044b\u0447\u043d\u044b\u0445 \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u0445). \u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0438\u043c\u0435\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0430\u0442\u0440\u0438\u0431\u0443\u0442 [float_vector](../Creating_a_table/Data_types.md#Float-vector), \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0441\u043b\u0443\u0436\u0438\u0442 \u0432\u0435\u043a\u0442\u043e\u0440\u043e\u043c \u0434\u0430\u043d\u043d\u044b\u0445. \u0412\u0430\u043c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430:\n* `knn_type`: \u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430; \u0432 \u043d\u0430\u0441\u0442\u043e\u044f\u0449\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e `hnsw`.\n* `knn_dims`: \u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u0440\u0430\u0437\u043c\u0435\u0440\u043d\u043e\u0441\u0442\u044c \u0438\u043d\u0434\u0435\u043a\u0441\u0438\u0440\u0443\u0435\u043c\u044b\u0445 \u0432\u0435\u043a\u0442\u043e\u0440\u043e\u0432.\n* `hnsw_similarity`: \u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u0444\u0443\u043d\u043a\u0446\u0438\u044e \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u044f, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u0443\u044e \u0438\u043d\u0434\u0435\u043a\u0441\u043e\u043c HNSW. \u0414\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f:\n  - `L2` - \u041a\u0432\u0430\u0434\u0440\u0430\u0442 L2\n  - `IP` - \u0421\u043a\u0430\u043b\u044f\u0440\u043d\u043e\u0435 \u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u0435\n  - `COSINE` - \u041a\u043e\u0441\u0438\u043d\u0443\u0441\u043d\u043e\u0435 \u0441\u0445\u043e\u0434\u0441\u0442\u0432\u043e\n  \n  **\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435:** \u041f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 \u0441\u0445\u043e\u0434\u0441\u0442\u0432\u0430 `COSINE` \u0432\u0435\u043a\u0442\u043e\u0440\u044b \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043d\u043e\u0440\u043c\u0430\u043b\u0438\u0437\u0443\u044e\u0442\u0441\u044f \u043f\u0440\u0438 \u0432\u0441\u0442\u0430\u0432\u043a\u0435. \u042d\u0442\u043e \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442, \u0447\u0442\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0432\u0435\u043a\u0442\u043e\u0440\u043e\u0432 \u043c\u043e\u0433\u0443\u0442 \u043e\u0442\u043b\u0438\u0447\u0430\u0442\u044c\u0441\u044f \u043e\u0442 \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0445 \u0432\u0445\u043e\u0434\u043d\u044b\u0445 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439, \u0442\u0430\u043a \u043a\u0430\u043a \u043e\u043d\u0438 \u0431\u0443\u0434\u0443\u0442 \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d\u044b \u0432 \u0435\u0434\u0438\u043d\u0438\u0447\u043d\u044b\u0435 \u0432\u0435\u043a\u0442\u043e\u0440\u044b (\u0432\u0435\u043a\u0442\u043e\u0440\u044b \u0441 \u043c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0434\u043b\u0438\u043d\u043e\u0439/\u0432\u0435\u043b\u0438\u0447\u0438\u043d\u043e\u0439 1.0) \u0434\u043b\u044f \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0433\u043e \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f \u043a\u043e\u0441\u0438\u043d\u0443\u0441\u043d\u043e\u0433\u043e \u0441\u0445\u043e\u0434\u0441\u0442\u0432\u0430. \u042d\u0442\u0430 \u043d\u043e\u0440\u043c\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u0442 \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0432\u0435\u043a\u0442\u043e\u0440\u0430, \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u0438\u0437\u0438\u0440\u0443\u044f \u0435\u0433\u043e \u0434\u043b\u0438\u043d\u0443.\n* `hnsw_m`: \u041d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430, \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u044e\u0449\u0430\u044f \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0438\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439 \u0432 \u0433\u0440\u0430\u0444\u0435. \u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e 16.\n* `hnsw_ef_construction`: \u041d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430, \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u044e\u0449\u0430\u044f \u043a\u043e\u043c\u043f\u0440\u043e\u043c\u0438\u0441\u0441 \u043c\u0435\u0436\u0434\u0443 \u0432\u0440\u0435\u043c\u0435\u043d\u0435\u043c \u043f\u043e\u0441\u0442\u0440\u043e\u0435\u043d\u0438\u044f \u0438 \u0442\u043e\u0447\u043d\u043e\u0441\u0442\u044c\u044e. \u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e 200.\n\n<!-- intro -->\n##### SQL\n\n<!-- request SQL -->\nCODE_BLOCK_0\n\n<!-- response SQL -->\n\nCODE_BLOCK_1\n\n<!-- intro -->\n##### \u041e\u0431\u044b\u0447\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c (\u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0444\u0430\u0439\u043b\u0430 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438) - \u0420\u0443\u0447\u043d\u044b\u0435 \u0432\u0435\u043a\u0442\u043e\u0440\u044b:\n\n<!-- request Config -->\nCODE_BLOCK_2\n\n**\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435:** \u0414\u043b\u044f \u0430\u0432\u0442\u043e\u044d\u043c\u0431\u0435\u0434\u0434\u0438\u043d\u0433\u043e\u0432 \u0432 \u043e\u0431\u044b\u0447\u043d\u043e\u043c \u0440\u0435\u0436\u0438\u043c\u0435 \u0441\u043c. \u043f\u0440\u0438\u043c\u0435\u0440 \u043d\u0438\u0436\u0435, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442, \u043a\u0430\u043a \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b `model_name` \u0438 `from` \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 `knn`.\n\n<!-- end -->\n\n<!-- example knn_insert -->\n\n### \u0412\u0441\u0442\u0430\u0432\u043a\u0430 \u0432\u0435\u043a\u0442\u043e\u0440\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445\n\n#### \u0410\u0432\u0442\u043e\u044d\u043c\u0431\u0435\u0434\u0434\u0438\u043d\u0433\u0438 (\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f)\n\n\u0421\u0430\u043c\u044b\u0439 \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u0441\u043f\u043e\u0441\u043e\u0431 \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0432\u0435\u043a\u0442\u043e\u0440\u043d\u044b\u043c\u0438 \u0434\u0430\u043d\u043d\u044b\u043c\u0438 \u2014 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 **\u0430\u0432\u0442\u043e\u044d\u043c\u0431\u0435\u0434\u0434\u0438\u043d\u0433\u043e\u0432**. \u0421 \u044d\u0442\u043e\u0439 \u0444\u0443\u043d\u043a\u0446\u0438\u0435\u0439 \u0432\u044b \u0441\u043e\u0437\u0434\u0430\u0435\u0442\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u0441 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438 `MODEL_NAME` \u0438 `FROM`, \u0430 \u0437\u0430\u0442\u0435\u043c \u043f\u0440\u043e\u0441\u0442\u043e \u0432\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442\u0435 \u0441\u0432\u043e\u0438 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u2014 Manticore \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0433\u0435\u043d\u0435\u0440\u0438\u0440\u0443\u0435\u0442 \u044d\u043c\u0431\u0435\u0434\u0434\u0438\u043d\u0433\u0438 \u0434\u043b\u044f \u0432\u0430\u0441.\n\n##### \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0441 \u0430\u0432\u0442\u043e\u044d\u043c\u0431\u0435\u0434\u0434\u0438\u043d\u0433\u0430\u043c\u0438\n\n\u041f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0434\u043b\u044f \u0430\u0432\u0442\u043e\u044d\u043c\u0431\u0435\u0434\u0434\u0438\u043d\u0433\u043e\u0432 \u0443\u043a\u0430\u0436\u0438\u0442\u0435:\n- `MODEL_NAME`: \u041c\u043e\u0434\u0435\u043b\u044c \u044d\u043c\u0431\u0435\u0434\u0434\u0438\u043d\u0433\u0430 \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f\n- `FROM`: \u041a\u0430\u043a\u0438\u0435 \u043f\u043e\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0434\u043b\u044f \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 \u044d\u043c\u0431\u0435\u0434\u0434\u0438\u043d\u0433\u043e\u0432 (\u043f\u0443\u0441\u0442\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442 \u0432\u0441\u0435 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0435/\u0441\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0435 \u043f\u043e\u043b\u044f)\n- `API_KEY`: \u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0445 \u043c\u043e\u0434\u0435\u043b\u0435\u0439 (OpenAI, Voyage, Jina). \u041a\u043b\u044e\u0447 API \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442\u0441\u044f \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u043f\u0443\u0442\u0435\u043c \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043a API.\n- `API_URL`: \u041d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e. \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 URL \u043a\u043e\u043d\u0435\u0447\u043d\u043e\u0439 \u0442\u043e\u0447\u043a\u0438 API. \u0415\u0441\u043b\u0438 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043a\u043e\u043d\u0435\u0447\u043d\u0430\u044f \u0442\u043e\u0447\u043a\u0430 \u043f\u0440\u043e\u0432\u0430\u0439\u0434\u0435\u0440\u0430 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, `https://api.openai.com/v1/embeddings` \u0434\u043b\u044f OpenAI).\n- `API_TIMEOUT`: \u041d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e. \u0422\u0430\u0439\u043c\u0430\u0443\u0442 HTTP \u0432 \u0441\u0435\u043a\u0443\u043d\u0434\u0430\u0445 \u0434\u043b\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 API. \u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e 10 \u0441\u0435\u043a\u0443\u043d\u0434. \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 `'0'`, \u0447\u0442\u043e\u0431\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u0430\u0439\u043c\u0430\u0443\u0442 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e. \u041f\u0440\u0438\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u043a\u0430\u043a \u043a \u0437\u0430\u043f\u0440\u043e\u0441\u0430\u043c \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u0442\u0430\u0431\u043b\u0438\u0446\u044b, \u0442\u0430\u043a \u0438 \u043a \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 \u044d\u043c\u0431\u0435\u0434\u0434\u0438\u043d\u0433\u043e\u0432 \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439 INSERT.\n\n**\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u043c\u044b\u0435 \u043c\u043e\u0434\u0435\u043b\u0438 \u044d\u043c\u0431\u0435\u0434\u0434\u0438\u043d\u0433\u043e\u0432:**\n- **Sentence Transformers**: \u041b\u044e\u0431\u0430\u044f [\u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0430\u044f \u043c\u043e\u0434\u0435\u043b\u044c \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 BERT \u0438\u0437 Hugging Face](https://huggingface.co/sentence-transformers/models) (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, `sentence-transformers/all-MiniLM-L6-v2`) \u2014 \u043a\u043b\u044e\u0447 API \u043d\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f. Manticore \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442 \u043c\u043e\u0434\u0435\u043b\u044c \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u0442\u0430\u0431\u043b\u0438\u0446\u044b.\n- **OpenAI, Voyage, Jina**: \u0423\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435 \u043c\u043e\u0434\u0435\u043b\u0438 \u044d\u043c\u0431\u0435\u0434\u0434\u0438\u043d\u0433\u043e\u0432 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, `openai/text-embedding-ada-002`, `voyage/voyage-3.5-lite`, `jina/jina-embeddings-v2-base-en`) - \u0442\u0440\u0435\u0431\u0443\u044e\u0442 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 `API_KEY='<API_KEY>'`. \u041f\u0440\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u0438 \u0443\u043a\u0430\u0436\u0438\u0442\u0435 `API_URL='<CUSTOM_URL>'` \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0439 \u043a\u043e\u043d\u0435\u0447\u043d\u043e\u0439 \u0442\u043e\u0447\u043a\u0438 API \u0438 `API_TIMEOUT='<SECONDS>'` \u0434\u043b\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0442\u0430\u0439\u043c\u0430\u0443\u0442\u0430 HTTP (\u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e 10 \u0441\u0435\u043a\u0443\u043d\u0434).\n\n\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0435 \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u0430 `float_vector` \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430 [\u0437\u0434\u0435\u0441\u044c](../Creating_a_table/Data_types.md#Float-vector).\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\n\n\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 sentence-transformers (\u043a\u043b\u044e\u0447 API \u043d\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f)\nCODE_BLOCK_3\n\n\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 OpenAI (\u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 API_KEY)\nCODE_BLOCK_4\n\n\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 OpenAI \u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u043c URL API \u0438 \u0442\u0430\u0439\u043c\u0430\u0443\u0442\u043e\u043c (\u043d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e)\nCODE_BLOCK_5\n\n\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0432\u0441\u0435\u0445 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0445 \u043f\u043e\u043b\u0435\u0439 \u0434\u043b\u044f \u044d\u043c\u0431\u0435\u0434\u0434\u0438\u043d\u0433\u043e\u0432 (FROM \u043f\u0443\u0441\u0442)\nCODE_BLOCK_6\n\n<!-- intro -->\n##### \u041e\u0431\u044b\u0447\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c (\u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0444\u0430\u0439\u043b\u0430 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438):\n\n<!-- request Config -->\nCODE_BLOCK_7\n\n\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 OpenAI \u0441 \u043a\u043b\u044e\u0447\u043e\u043c API \u0432 \u043e\u0431\u044b\u0447\u043d\u043e\u043c \u0440\u0435\u0436\u0438\u043c\u0435:\nCODE_BLOCK_8\n\n\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0432\u0441\u0435\u0445 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0445 \u043f\u043e\u043b\u0435\u0439 (\u043f\u0443\u0441\u0442\u043e\u0439 FROM):\nCODE_BLOCK_9\n\n**\u0412\u0430\u0436\u043d\u044b\u0435 \u043f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u044f \u0434\u043b\u044f \u043e\u0431\u044b\u0447\u043d\u043e\u0433\u043e \u0440\u0435\u0436\u0438\u043c\u0430:**\n- \u041f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 `model_name` \u0432\u044b **\u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u044b** \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c `dims` \u2014 \u043c\u043e\u0434\u0435\u043b\u044c \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u0440\u0430\u0437\u043c\u0435\u0440\u043d\u043e\u0441\u0442\u044c \u0432\u0435\u043a\u0442\u043e\u0440\u043e\u0432. \u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b `dims` \u0438 `model_name` \u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0432\u0437\u0430\u0438\u043c\u043e\u0438\u0441\u043a\u043b\u044e\u0447\u0430\u044e\u0449\u0438\u043c\u0438.\n- \u041a\u043e\u0433\u0434\u0430 **\u043d\u0435** \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f `model_name` (\u0440\u0443\u0447\u043d\u0430\u044f \u0432\u0441\u0442\u0430\u0432\u043a\u0430 \u0432\u0435\u043a\u0442\u043e\u0440\u043e\u0432), \u0432\u044b **\u0434\u043e\u043b\u0436\u043d\u044b** \u0443\u043a\u0430\u0437\u0430\u0442\u044c `dims`, \u0447\u0442\u043e\u0431\u044b \u043e\u0431\u043e\u0437\u043d\u0430\u0447\u0438\u0442\u044c \u0440\u0430\u0437\u043c\u0435\u0440\u043d\u043e\u0441\u0442\u044c \u0432\u0435\u043a\u0442\u043e\u0440\u043e\u0432.\n- \u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 `from` \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442, \u043a\u0430\u043a\u0438\u0435 \u043f\u043e\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0434\u043b\u044f \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 \u044d\u043c\u0431\u0435\u0434\u0434\u0438\u043d\u0433\u043e\u0432 (\u0441\u043f\u0438\u0441\u043e\u043a, \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0439 \u0437\u0430\u043f\u044f\u0442\u044b\u043c\u0438, \u0438\u043b\u0438 \u043f\u0443\u0441\u0442\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430 \u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0445/\u0441\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0445 \u043f\u043e\u043b\u0435\u0439). \u042d\u0442\u043e\u0442 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u0435\u043d \u043f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 `model_name`.\n- \u0414\u043b\u044f API-\u043c\u043e\u0434\u0435\u043b\u0435\u0439 (OpenAI, Voyage, Jina) \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 `api_key` \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e knn"
        },
        "is_code_or_comment": false,
        "model": "deepseek/deepseek-v3.2",
        "updated_at": 1768309338
    }
}