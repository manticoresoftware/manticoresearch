{
    "8bedbcbb905cda6be68b0e4cd11f2cad3f511e610165f4192a4ed3745024e10f": {
        "original": "Ranking (also known as weighting) of search results can be defined as a process of computing a so-called relevance (weight) for every given matched document regards to a given query that matched it. So relevance is, in the end, just a number attached to every document that estimates how relevant the document is to the query. Search results can then be sorted based on this number and/or some additional parameters, so that the most sought-after results would appear higher on the results page.\n\nThere is no single standard one-size-fits-all way to rank any document in any scenario. Moreover, there can never be such a way, because relevance is *subjective*. As in, what seems relevant to you might not seem relevant to me. Hence, in general cases, it's not just hard to compute; it's theoretically impossible.\n\nSo ranking in Manticore is configurable. It has a notion of a so-called **ranker**. A ranker can formally be defined as a function that takes a document and a query as its input and produces a relevance value as output. In layman's terms, a ranker controls exactly how (using which specific algorithm) Manticore will assign weights to the documents.\n\n## Available built-in rankers\n\nManticore ships with several built-in rankers suited for different purposes. Many of them use two factors: phrase proximity (also known as LCS) and BM25. Phrase proximity works on keyword positions, while BM25 works on keyword frequencies. Essentially, the better the degree of phrase match between the document body and the query, the higher the phrase proximity (it maxes out when the document contains the entire query as a verbatim quote). And BM25 is higher when the document contains more rare words. We'll save the detailed discussion for later.\n\nThe currently implemented rankers are:\n\n* `proximity_bm25`, the default ranking mode that uses and combines both phrase proximity and BM25 ranking.\n* `bm25`, a statistical ranking mode that uses BM25 ranking only (similar to most other full-text engines). This mode is faster but may result in worse quality for queries containing more than one keyword.\n* `none`, a no-ranking mode. This mode is obviously the fastest. A weight of 1 is assigned to all matches. This is sometimes called boolean searching, which just matches the documents but does not rank them.\n* `wordcount`, ranking by the keyword occurrences count. This ranker computes the per-field keyword occurrence counts, then multiplies them by field weights, and sums the resulting values.\n* `proximity` returns the raw phrase proximity value as a result. This mode is internally used to emulate `SPH_MATCH_ALL` queries.\n* `matchany` returns rank as it was computed in `SPH_MATCH_ANY` mode earlier and is internally used to emulate `SPH_MATCH_ANY` queries.\n* `fieldmask` returns a 32-bit mask with the N-th bit corresponding to the N-th full-text field, numbering from 0. The bit will only be set when the respective field has any keyword occurrences satisfying the query.\n* `sph04` is generally based on the default 'proximity_bm25' ranker, but additionally boosts matches when they occur at the very beginning or the very end of a text field. Thus, if a field equals the exact query, `sph04` should rank it higher than a field that contains the exact query but is not equal to it. (For instance, when the query is \"Hyde Park\", a document titled \"Hyde Park\" should be ranked higher than one titled \"Hyde Park, London\" or \"The Hyde Park Cafe\".)\n* `expr` allows you to specify the ranking formula at runtime. It exposes several internal text factors and lets you define how the final weight should be computed from those factors. You can find more details about its syntax and a reference of available factors in a [subsection below](../Searching/Sorting_and_ranking.md#Quick-summary-of-the-ranking-factors).\n\nThe ranker name is case-insensitive. Example:\n\nCODE_BLOCK_58\n\n## Quick summary of the ranking factors",
        "translations": {
            "chinese": "\u641c\u7d22\u7ed3\u679c\u7684\u6392\u540d\uff08\u4e5f\u79f0\u4e3a\u52a0\u6743\uff09\u53ef\u4ee5\u5b9a\u4e49\u4e3a\u9488\u5bf9\u6bcf\u4e2a\u4e0e\u7ed9\u5b9a\u67e5\u8be2\u5339\u914d\u7684\u6587\u6863\u8ba1\u7b97\u6240\u8c13\u7684\u76f8\u5173\u6027\uff08\u6743\u91cd\uff09\u7684\u8fc7\u7a0b\u3002\u56e0\u6b64\uff0c\u76f8\u5173\u6027\u6700\u7ec8\u53ea\u662f\u9644\u52a0\u5728\u6bcf\u4e2a\u6587\u6863\u4e0a\u7684\u4e00\u4e2a\u6570\u5b57\uff0c\u7528\u4ee5\u4f30\u8ba1\u8be5\u6587\u6863\u4e0e\u67e5\u8be2\u7684\u76f8\u5173\u7a0b\u5ea6\u3002\u7136\u540e\u53ef\u4ee5\u57fa\u4e8e\u8be5\u6570\u5b57\u548c/\u6216\u4e00\u4e9b\u989d\u5916\u53c2\u6570\u5bf9\u641c\u7d22\u7ed3\u679c\u8fdb\u884c\u6392\u5e8f\uff0c\u4f7f\u5f97\u6700\u53d7\u6b22\u8fce\u7684\u7ed3\u679c\u4f1a\u51fa\u73b0\u5728\u7ed3\u679c\u9875\u7684\u66f4\u9ad8\u4f4d\u7f6e\u3002\n\n\u6ca1\u6709\u4e00\u79cd\u5355\u4e00\u7684\u3001\u9002\u7528\u4e8e\u6240\u6709\u573a\u666f\u7684\u6807\u51c6\u6587\u6863\u6392\u540d\u65b9\u6cd5\u3002\u800c\u4e14\uff0c\u4e5f\u4e0d\u53ef\u80fd\u6709\u8fd9\u6837\u4e00\u79cd\u65b9\u6cd5\uff0c\u56e0\u4e3a\u76f8\u5173\u6027\u662f*\u4e3b\u89c2*\u7684\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5bf9\u4f60\u6765\u8bf4\u76f8\u5173\u7684\u5185\u5bb9\uff0c\u53ef\u80fd\u5bf9\u6211\u6765\u8bf4\u4e0d\u76f8\u5173\u3002\u56e0\u6b64\uff0c\u5728\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u4e0d\u4ec5\u8ba1\u7b97\u8d77\u6765\u56f0\u96be\uff1b\u4ece\u7406\u8bba\u4e0a\u8bb2\u4e5f\u662f\u4e0d\u53ef\u80fd\u7684\u3002\n\n\u6240\u4ee5\uff0cManticore \u4e2d\u7684\u6392\u540d\u662f\u53ef\u914d\u7f6e\u7684\u3002\u5b83\u6709\u4e00\u4e2a\u6240\u8c13\u7684**ranker**\uff08\u6392\u540d\u5668\uff09\u7684\u6982\u5ff5\u3002\u6392\u540d\u5668\u53ef\u4ee5\u5f62\u5f0f\u5316\u5b9a\u4e49\u4e3a\u4e00\u4e2a\u63a5\u53d7\u6587\u6863\u548c\u67e5\u8be2\u4f5c\u4e3a\u8f93\u5165\uff0c\u5e76\u8f93\u51fa\u76f8\u5173\u6027\u503c\u7684\u51fd\u6570\u3002\u901a\u4fd7\u6765\u8bf4\uff0c\u6392\u540d\u5668\u63a7\u5236\u7740 Manticore \u5c06\u5982\u4f55\uff08\u4f7f\u7528\u54ea\u79cd\u5177\u4f53\u7b97\u6cd5\uff09\u7ed9\u6587\u6863\u5206\u914d\u6743\u91cd\u3002\n\n## \u5185\u7f6e\u6392\u540d\u5668\n\nManticore \u63d0\u4f9b\u4e86\u51e0\u79cd\u9002\u7528\u4e8e\u4e0d\u540c\u7528\u9014\u7684\u5185\u7f6e\u6392\u540d\u5668\u3002\u5b83\u4eec\u4e2d\u7684\u8bb8\u591a\u4f7f\u7528\u4e24\u4e2a\u56e0\u7d20\uff1a\u77ed\u8bed\u63a5\u8fd1\u5ea6\uff08\u4e5f\u79f0\u4e3aLCS\uff09\u548cBM25\u3002\u77ed\u8bed\u63a5\u8fd1\u5ea6\u6839\u636e\u5173\u952e\u8bcd\u4f4d\u7f6e\u5de5\u4f5c\uff0c\u800cBM25\u6839\u636e\u5173\u952e\u8bcd\u9891\u7387\u5de5\u4f5c\u3002\u57fa\u672c\u4e0a\uff0c\u6587\u6863\u548c\u67e5\u8be2\u4e4b\u95f4\u7684\u77ed\u8bed\u5339\u914d\u7a0b\u5ea6\u8d8a\u9ad8\uff0c\u77ed\u8bed\u63a5\u8fd1\u5ea6\u8d8a\u9ad8\uff08\u5f53\u6587\u6863\u5305\u542b\u67e5\u8be2\u7684\u5b8c\u6574\u9010\u5b57\u5f15\u7528\u65f6\u8fbe\u5230\u6700\u5927\u503c\uff09\u3002\u800c\u5f53\u6587\u6863\u5305\u542b\u66f4\u591a\u7f55\u89c1\u8bcd\u65f6\uff0cBM25\u5206\u503c\u8d8a\u9ad8\u3002\u8be6\u7ec6\u8ba8\u8bba\u7a0d\u540e\u8fdb\u884c\u3002\n\n\u76ee\u524d\u5b9e\u73b0\u7684\u6392\u540d\u5668\u6709\uff1a\n\n* `proximity_bm25`\uff0c\u9ed8\u8ba4\u7684\u6392\u540d\u6a21\u5f0f\uff0c\u540c\u65f6\u4f7f\u7528\u5e76\u7ed3\u5408\u4e86\u77ed\u8bed\u63a5\u8fd1\u5ea6\u548cBM25\u6392\u540d\u3002\n* `bm25`\uff0c\u4e00\u79cd\u53ea\u4f7f\u7528BM25\u7684\u7edf\u8ba1\u6392\u540d\u6a21\u5f0f\uff08\u7c7b\u4f3c\u5927\u591a\u6570\u5176\u4ed6\u5168\u6587\u5f15\u64ce\uff09\u3002\u8be5\u6a21\u5f0f\u901f\u5ea6\u66f4\u5feb\uff0c\u4f46\u5bf9\u4e8e\u5305\u542b\u591a\u4e2a\u5173\u952e\u8bcd\u7684\u67e5\u8be2\u53ef\u80fd\u5bfc\u81f4\u8d28\u91cf\u8f83\u5dee\u3002\n* `none`\uff0c\u65e0\u6392\u540d\u6a21\u5f0f\u3002\u8be5\u6a21\u5f0f\u663e\u7136\u6700\u5feb\u3002\u6240\u6709\u5339\u914d\u9879\u5747\u8d4b\u503c\u6743\u91cd1\u3002\u6709\u65f6\u79f0\u4e3a\u5e03\u5c14\u641c\u7d22\uff0c\u53ea\u5339\u914d\u6587\u6863\u4f46\u4e0d\u6392\u5e8f\u3002\n* `wordcount`\uff0c\u6309\u5173\u952e\u8bcd\u51fa\u73b0\u6b21\u6570\u6392\u540d\u3002\u8be5\u6392\u540d\u5668\u8ba1\u7b97\u6bcf\u4e2a\u5b57\u6bb5\u7684\u5173\u952e\u8bcd\u51fa\u73b0\u6b21\u6570\uff0c\u518d\u4e58\u4ee5\u5b57\u6bb5\u6743\u91cd\uff0c\u6700\u540e\u6c42\u548c\u3002\n* `proximity` \u8fd4\u56de\u539f\u59cb\u7684\u77ed\u8bed\u63a5\u8fd1\u503c\u4f5c\u4e3a\u7ed3\u679c\u3002\u8be5\u6a21\u5f0f\u5728\u5185\u90e8\u7528\u4e8e\u6a21\u62df `SPH_MATCH_ALL` \u67e5\u8be2\u3002\n* `matchany` \u8fd4\u56de\u5728\u65e9\u671f `SPH_MATCH_ANY` \u6a21\u5f0f\u4e2d\u8ba1\u7b97\u7684\u6392\u540d\u503c\uff0c\u5e76\u5728\u5185\u90e8\u7528\u4e8e\u6a21\u62df `SPH_MATCH_ANY` \u67e5\u8be2\u3002\n* `fieldmask` \u8fd4\u56de\u4e00\u4e2a32\u4f4d\u63a9\u7801\uff0c\u7b2cN\u4f4d\u5bf9\u5e94\u7b2cN\u4e2a\u5168\u6587\u5b57\u6bb5\uff0c\u7f16\u53f7\u4ece0\u5f00\u59cb\u3002\u53ea\u6709\u5f53\u76f8\u5e94\u5b57\u6bb5\u542b\u6709\u6ee1\u8db3\u67e5\u8be2\u7684\u5173\u952e\u8bcd\u51fa\u73b0\u65f6\uff0c\u8be5\u4f4d\u624d\u4f1a\u88ab\u7f6e\u4f4d\u3002\n* `sph04` \u57fa\u672c\u4e0a\u57fa\u4e8e\u9ed8\u8ba4\u7684 `proximity_bm25` \u6392\u540d\u5668\uff0c\u4f46\u989d\u5916\u63d0\u5347\u5f53\u5339\u914d\u53d1\u751f\u5728\u6587\u672c\u5b57\u6bb5\u5f00\u5934\u6216\u7ed3\u5c3e\u7684\u60c5\u51b5\u3002\u56e0\u6b64\uff0c\u5982\u679c\u67d0\u5b57\u6bb5\u5b8c\u5168\u7b49\u4e8e\u67e5\u8be2\uff0c`sph04` \u5e94\u8be5\u5c06\u5176\u6392\u540d\u9ad8\u4e8e\u5305\u542b\u8be5\u67e5\u8be2\u4f46\u4e0d\u5b8c\u5168\u76f8\u7b49\u7684\u5b57\u6bb5\u3002\uff08\u4f8b\u5982\uff0c\u5f53\u67e5\u8be2\u4e3a\u201cHyde Park\u201d\u65f6\uff0c\u6807\u9898\u4e3a\u201cHyde Park\u201d\u7684\u6587\u6863\u5e94\u6392\u540d\u9ad8\u4e8e\u6807\u9898\u4e3a\u201cHyde Park, London\u201d\u6216\u201cThe Hyde Park Cafe\u201d\u7684\u6587\u6863\u3002\uff09\n* `expr` \u5141\u8bb8\u4f60\u5728\u8fd0\u884c\u65f6\u6307\u5b9a\u6392\u540d\u516c\u5f0f\u3002\u5b83\u66b4\u9732\u4e86\u591a\u4e2a\u5185\u90e8\u6587\u672c\u56e0\u7d20\uff0c\u5141\u8bb8\u4f60\u5b9a\u4e49\u5982\u4f55\u4ece\u8fd9\u4e9b\u56e0\u7d20\u8ba1\u7b97\u6700\u7ec8\u6743\u91cd\u3002\u4f60\u53ef\u4ee5\u5728[\u4e0b\u65b9\u5c0f\u8282](../Searching/Sorting_and_ranking.md#Quick-summary-of-the-ranking-factors)\u4e2d\u627e\u5230\u5176\u8bed\u6cd5\u7ec6\u8282\u548c\u53ef\u7528\u56e0\u7d20\u53c2\u8003\u3002\n\n\u6392\u540d\u5668\u540d\u79f0\u4e0d\u533a\u5206\u5927\u5c0f\u5199\u3002\u793a\u4f8b\uff1a\n\nCODE_BLOCK_58\n\n## \u6392\u540d\u56e0\u7d20\u5feb\u901f\u603b\u7ed3",
            "russian": "\u0420\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u0442\u0430\u043a\u0436\u0435 \u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e\u0435 \u043a\u0430\u043a \u0432\u0437\u0432\u0435\u0448\u0438\u0432\u0430\u043d\u0438\u0435) \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432 \u043f\u043e\u0438\u0441\u043a\u0430 \u043c\u043e\u0436\u043d\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043a\u0430\u043a \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f \u0442\u0430\u043a \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u043c\u043e\u0439 \u0440\u0435\u043b\u0435\u0432\u0430\u043d\u0442\u043d\u043e\u0441\u0442\u0438 (\u0432\u0435\u0441\u0430) \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u043d\u0430\u0439\u0434\u0435\u043d\u043d\u043e\u0433\u043e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430 \u043e\u0442\u043d\u043e\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0430, \u043f\u043e \u043a\u043e\u0442\u043e\u0440\u043e\u043c\u0443 \u043e\u043d \u0431\u044b\u043b \u043d\u0430\u0439\u0434\u0435\u043d. \u0422\u0430\u043a\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c, \u0440\u0435\u043b\u0435\u0432\u0430\u043d\u0442\u043d\u043e\u0441\u0442\u044c \u2014 \u044d\u0442\u043e, \u0432 \u043a\u043e\u043d\u0446\u0435 \u043a\u043e\u043d\u0446\u043e\u0432, \u043f\u0440\u043e\u0441\u0442\u043e \u0447\u0438\u0441\u043b\u043e, \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u043e\u0435 \u043a \u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0443, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u043e\u0446\u0435\u043d\u0438\u0432\u0430\u0435\u0442, \u043d\u0430\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u0440\u0435\u043b\u0435\u0432\u0430\u043d\u0442\u0435\u043d \u0437\u0430\u043f\u0440\u043e\u0441\u0443. \u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043f\u043e\u0438\u0441\u043a\u0430 \u0437\u0430\u0442\u0435\u043c \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u043e\u0442\u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u044b \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u044d\u0442\u043e\u0433\u043e \u0447\u0438\u0441\u043b\u0430 \u0438/\u0438\u043b\u0438 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432, \u0447\u0442\u043e\u0431\u044b \u043d\u0430\u0438\u0431\u043e\u043b\u0435\u0435 \u0432\u043e\u0441\u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u043b\u0438\u0441\u044c \u0432\u044b\u0448\u0435 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432.\n\n\u041d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u043e\u0434\u043d\u043e\u0433\u043e \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u043e\u0433\u043e \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0441\u043f\u043e\u0441\u043e\u0431\u0430 \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043b\u044e\u0431\u043e\u0433\u043e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430 \u0432 \u043b\u044e\u0431\u043e\u0439 \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u0438. \u0411\u043e\u043b\u0435\u0435 \u0442\u043e\u0433\u043e, \u0442\u0430\u043a\u043e\u0433\u043e \u0441\u043f\u043e\u0441\u043e\u0431\u0430 \u043d\u0438\u043a\u043e\u0433\u0434\u0430 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c, \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u0440\u0435\u043b\u0435\u0432\u0430\u043d\u0442\u043d\u043e\u0441\u0442\u044c \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f *\u0441\u0443\u0431\u044a\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0439*. \u0422\u043e \u0435\u0441\u0442\u044c, \u0447\u0442\u043e \u043a\u0430\u0436\u0435\u0442\u0441\u044f \u0440\u0435\u043b\u0435\u0432\u0430\u043d\u0442\u043d\u044b\u043c \u0432\u0430\u043c, \u043c\u043e\u0436\u0435\u0442 \u043d\u0435 \u043a\u0430\u0437\u0430\u0442\u044c\u0441\u044f \u0442\u0430\u043a\u043e\u0432\u044b\u043c \u043c\u043d\u0435. \u0421\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e, \u0432 \u043e\u0431\u0449\u0438\u0445 \u0441\u043b\u0443\u0447\u0430\u044f\u0445, \u044d\u0442\u043e \u043d\u0435 \u043f\u0440\u043e\u0441\u0442\u043e \u0442\u0440\u0443\u0434\u043d\u043e \u0432\u044b\u0447\u0438\u0441\u043b\u0438\u0442\u044c; \u044d\u0442\u043e \u0442\u0435\u043e\u0440\u0435\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e.\n\n\u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0432 Manticore \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u043c\u043e. \u0412 \u043d\u0435\u043c \u0435\u0441\u0442\u044c \u043f\u043e\u043d\u044f\u0442\u0438\u0435 \u0442\u0430\u043a \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u043c\u043e\u0433\u043e **\u0440\u0430\u043d\u043a\u0435\u0440\u0430**. \u0420\u0430\u043d\u043a\u0435\u0440 \u0444\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e \u043c\u043e\u0436\u043d\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043a\u0430\u043a \u0444\u0443\u043d\u043a\u0446\u0438\u044e, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u0442 \u043d\u0430 \u0432\u0445\u043e\u0434 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u0438 \u0437\u0430\u043f\u0440\u043e\u0441 \u0438 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442 \u043d\u0430 \u0432\u044b\u0445\u043e\u0434\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0440\u0435\u043b\u0435\u0432\u0430\u043d\u0442\u043d\u043e\u0441\u0442\u0438. \u041f\u0440\u043e\u0449\u0435 \u0433\u043e\u0432\u043e\u0440\u044f, \u0440\u0430\u043d\u043a\u0435\u0440 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u0438\u0440\u0443\u0435\u0442 \u0438\u043c\u0435\u043d\u043d\u043e \u0442\u043e, \u043a\u0430\u043a (\u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043a\u0430\u043a\u043e\u0433\u043e \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0433\u043e \u0430\u043b\u0433\u043e\u0440\u0438\u0442\u043c\u0430) Manticore \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u0438\u0441\u0432\u0430\u0438\u0432\u0430\u0442\u044c \u0432\u0435\u0441\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u043c.\n\n## \u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0432\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u0435 \u0440\u0430\u043d\u043a\u0435\u0440\u044b\n\nManticore \u043f\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0441 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u043c\u0438 \u0432\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u043c\u0438 \u0440\u0430\u043d\u043a\u0435\u0440\u0430\u043c\u0438, \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u043c\u0438 \u0434\u043b\u044f \u0440\u0430\u0437\u043d\u044b\u0445 \u0446\u0435\u043b\u0435\u0439. \u041c\u043d\u043e\u0433\u0438\u0435 \u0438\u0437 \u043d\u0438\u0445 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442 \u0434\u0432\u0430 \u0444\u0430\u043a\u0442\u043e\u0440\u0430: \u0431\u043b\u0438\u0437\u043e\u0441\u0442\u044c \u0444\u0440\u0430\u0437 (\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430\u044f \u0442\u0430\u043a\u0436\u0435 \u043a\u0430\u043a LCS) \u0438 BM25. \u0411\u043b\u0438\u0437\u043e\u0441\u0442\u044c \u0444\u0440\u0430\u0437 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0441 \u043f\u043e\u0437\u0438\u0446\u0438\u044f\u043c\u0438 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432, \u0432 \u0442\u043e \u0432\u0440\u0435\u043c\u044f \u043a\u0430\u043a BM25 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0441 \u0447\u0430\u0441\u0442\u043e\u0442\u0430\u043c\u0438 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432. \u041f\u043e \u0441\u0443\u0442\u0438, \u0447\u0435\u043c \u043b\u0443\u0447\u0448\u0435 \u0441\u0442\u0435\u043f\u0435\u043d\u044c \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u044f \u0444\u0440\u0430\u0437\u044b \u043c\u0435\u0436\u0434\u0443 \u0442\u0435\u043b\u043e\u043c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430 \u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u043c, \u0442\u0435\u043c \u0432\u044b\u0448\u0435 \u0431\u043b\u0438\u0437\u043e\u0441\u0442\u044c \u0444\u0440\u0430\u0437 (\u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c \u0434\u043e\u0441\u0442\u0438\u0433\u0430\u0435\u0442\u0441\u044f, \u043a\u043e\u0433\u0434\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u0432\u0435\u0441\u044c \u0437\u0430\u043f\u0440\u043e\u0441 \u0432 \u0442\u043e\u0447\u043d\u043e\u043c \u0432\u0438\u0434\u0435). \u0410 BM25 \u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0441\u044f \u0432\u044b\u0448\u0435, \u043a\u043e\u0433\u0434\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u0431\u043e\u043b\u0435\u0435 \u0440\u0435\u0434\u043a\u0438\u0435 \u0441\u043b\u043e\u0432\u0430. \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u043e\u0435 \u043e\u0431\u0441\u0443\u0436\u0434\u0435\u043d\u0438\u0435 \u043c\u044b \u043e\u0441\u0442\u0430\u0432\u0438\u043c \u043d\u0430 \u043f\u043e\u0442\u043e\u043c.\n\n\u0412 \u043d\u0430\u0441\u0442\u043e\u044f\u0449\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0440\u0430\u043d\u043a\u0435\u0440\u044b:\n\n* `proximity_bm25` \u2014 \u0440\u0435\u0436\u0438\u043c \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 \u0438 \u043a\u043e\u043c\u0431\u0438\u043d\u0438\u0440\u0443\u0435\u0442 \u043a\u0430\u043a \u0431\u043b\u0438\u0437\u043e\u0441\u0442\u044c \u0444\u0440\u0430\u0437, \u0442\u0430\u043a \u0438 \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 BM25.\n* `bm25` \u2014 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0440\u0435\u0436\u0438\u043c \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e BM25 (\u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u043e \u0431\u043e\u043b\u044c\u0448\u0438\u043d\u0441\u0442\u0432\u0443 \u0434\u0440\u0443\u0433\u0438\u0445 \u043f\u043e\u043b\u043d\u043e\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0445 \u0434\u0432\u0438\u0436\u043a\u043e\u0432). \u042d\u0442\u043e\u0442 \u0440\u0435\u0436\u0438\u043c \u0431\u044b\u0441\u0442\u0440\u0435\u0435, \u043d\u043e \u043c\u043e\u0436\u0435\u0442 \u0434\u0430\u0432\u0430\u0442\u044c \u0445\u0443\u0434\u0448\u0435\u0435 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432, \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0449\u0438\u0445 \u0431\u043e\u043b\u0435\u0435 \u043e\u0434\u043d\u043e\u0433\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u0433\u043e \u0441\u043b\u043e\u0432\u0430.\n* `none` \u2014 \u0440\u0435\u0436\u0438\u043c \u0431\u0435\u0437 \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f. \u042d\u0442\u043e, \u043e\u0447\u0435\u0432\u0438\u0434\u043d\u043e, \u0441\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439 \u0440\u0435\u0436\u0438\u043c. \u0412\u0441\u0435\u043c \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u044f\u043c \u043f\u0440\u0438\u0441\u0432\u0430\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0432\u0435\u0441 1. \u0418\u043d\u043e\u0433\u0434\u0430 \u044d\u0442\u043e \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0431\u0443\u043b\u0435\u0432\u044b\u043c \u043f\u043e\u0438\u0441\u043a\u043e\u043c, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u0440\u043e\u0441\u0442\u043e \u043d\u0430\u0445\u043e\u0434\u0438\u0442 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b, \u043d\u043e \u043d\u0435 \u0440\u0430\u043d\u0436\u0438\u0440\u0443\u0435\u0442 \u0438\u0445.\n* `wordcount` \u2014 \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0443 \u0432\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u0439 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432. \u042d\u0442\u043e\u0442 \u0440\u0430\u043d\u043a\u0435\u0440 \u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0435\u0442 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u0439 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432 \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u043f\u043e\u043b\u044f, \u0437\u0430\u0442\u0435\u043c \u0443\u043c\u043d\u043e\u0436\u0430\u0435\u0442 \u0438\u0445 \u043d\u0430 \u0432\u0435\u0441\u0430 \u043f\u043e\u043b\u0435\u0439 \u0438 \u0441\u0443\u043c\u043c\u0438\u0440\u0443\u0435\u0442 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f.\n* `proximity` \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0441\u044b\u0440\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0431\u043b\u0438\u0437\u043e\u0441\u0442\u0438 \u0444\u0440\u0430\u0437 \u043a\u0430\u043a \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442. \u042d\u0442\u043e\u0442 \u0440\u0435\u0436\u0438\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0432\u043d\u0443\u0442\u0440\u0438 \u0434\u043b\u044f \u044d\u043c\u0443\u043b\u044f\u0446\u0438\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 `SPH_MATCH_ALL`.\n* `matchany` \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0440\u0430\u043d\u0433, \u043a\u0430\u043a \u043e\u043d \u0432\u044b\u0447\u0438\u0441\u043b\u044f\u043b\u0441\u044f \u0432 \u0440\u0435\u0436\u0438\u043c\u0435 `SPH_MATCH_ANY`, \u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0432\u043d\u0443\u0442\u0440\u0438 \u0434\u043b\u044f \u044d\u043c\u0443\u043b\u044f\u0446\u0438\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 `SPH_MATCH_ANY`.\n* `fieldmask` \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 32-\u0431\u0438\u0442\u043d\u0443\u044e \u043c\u0430\u0441\u043a\u0443, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 N-\u0439 \u0431\u0438\u0442 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 N-\u043c\u0443 \u043f\u043e\u043b\u043d\u043e\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u043c\u0443 \u043f\u043e\u043b\u044e, \u043d\u0443\u043c\u0435\u0440\u0430\u0446\u0438\u044f \u0441 0. \u0411\u0438\u0442 \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u043a\u043e\u0433\u0434\u0430 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0435 \u043f\u043e\u043b\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u0432\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432, \u0443\u0434\u043e\u0432\u043b\u0435\u0442\u0432\u043e\u0440\u044f\u044e\u0449\u0438\u0445 \u0437\u0430\u043f\u0440\u043e\u0441\u0443.\n* `sph04` \u0432 \u0446\u0435\u043b\u043e\u043c \u043e\u0441\u043d\u043e\u0432\u0430\u043d \u043d\u0430 \u0440\u0430\u043d\u043a\u0435\u0440\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e 'proximity_bm25', \u043d\u043e \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0443\u0441\u0438\u043b\u0438\u0432\u0430\u0435\u0442 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u044f, \u0435\u0441\u043b\u0438 \u043e\u043d\u0438 \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u044f\u0442 \u0432 \u0441\u0430\u043c\u043e\u043c \u043d\u0430\u0447\u0430\u043b\u0435 \u0438\u043b\u0438 \u0441\u0430\u043c\u043e\u043c \u043a\u043e\u043d\u0446\u0435 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u043b\u044f. \u0422\u0430\u043a\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c, \u0435\u0441\u043b\u0438 \u043f\u043e\u043b\u0435 \u0440\u043e\u0432\u043d\u043e \u0440\u0430\u0432\u043d\u043e \u0442\u043e\u0447\u043d\u043e\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443, `sph04` \u0434\u043e\u043b\u0436\u0435\u043d \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0435\u0433\u043e \u0432\u044b\u0448\u0435, \u0447\u0435\u043c \u043f\u043e\u043b\u0435, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u0442\u043e\u0447\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441, \u043d\u043e \u043d\u0435 \u0440\u0430\u0432\u043d\u043e \u0435\u043c\u0443. (\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0435\u0441\u043b\u0438 \u0437\u0430\u043f\u0440\u043e\u0441 \u00abHyde Park\u00bb, \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u0441 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u043e\u043c \u00abHyde Park\u00bb \u0434\u043e\u043b\u0436\u0435\u043d \u0438\u043c\u0435\u0442\u044c \u0431\u043e\u043b\u0435\u0435 \u0432\u044b\u0441\u043e\u043a\u0438\u0439 \u0440\u0430\u043d\u0433, \u0447\u0435\u043c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u0441 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u043e\u043c \u00abHyde Park, London\u00bb \u0438\u043b\u0438 \u00abThe Hyde Park Cafe\u00bb.)\n* `expr` \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0437\u0430\u0434\u0430\u0442\u044c \u0444\u043e\u0440\u043c\u0443\u043b\u0443 \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f. \u0412 \u043d\u0435\u043c \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0445 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0438 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c, \u043a\u0430\u043a \u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0435\u0442\u0441\u044f \u0438\u0442\u043e\u0433\u043e\u0432\u044b\u0439 \u0432\u0435\u0441 \u0438\u0437 \u044d\u0442\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432. \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u043e \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441\u0435 \u0438 \u0441\u043f\u0440\u0430\u0432\u043a\u0435 \u043f\u043e \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u043c \u0444\u0430\u043a\u0442\u043e\u0440\u0430\u043c \u043c\u043e\u0436\u043d\u043e \u0443\u0437\u043d\u0430\u0442\u044c \u0432 [\u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u043d\u0438\u0436\u0435](../Searching/Sorting_and_ranking.md#Quick-summary-of-the-ranking-factors).\n\n\u0418\u043c\u044f \u0440\u0430\u043d\u043a\u0435\u0440\u0430 \u043d\u0435 \u0447\u0443\u0432\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u043a \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0443. \u041f\u0440\u0438\u043c\u0435\u0440:\n\nCODE_BLOCK_58\n\n## \u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u0440\u0435\u0437\u044e\u043c\u0435 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432 \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f"
        },
        "is_code_or_comment": false,
        "model": "openai:gpt-4.1-mini",
        "updated_at": 1766339806
    },
    "b362c4435a0c54cf512a99f1986fb01ba188ddb527dfcbfe13cabe77c3e2b234": {
        "original": "| Name                    | Level     | Type  | Summary                                                                                                            |\n| ----------------------- | --------- | ----- | ------------------------------------------------------------------------------------------------------------------ |\n| max_lcs                 | query     | int   | maximum possible LCS value for the current query                                                                   |\n| bm25                    | document  | int   | quick estimate of BM25(1.2, 0)                                                                                     |\n| bm25a(k1, b)            | document  | int   | precise BM25() value with configurable K1, B constants and syntax support                                         |\n| bm25f(k1, b, {field=weight, ...}) | document | int   | precise BM25F() value with extra configurable field weights                                                       |\n| field_mask              | document  | int   | bit mask of matched fields                                                                                         |\n| query_word_count        | document  | int   | number of unique inclusive keywords in a query                                                                     |\n| doc_word_count          | document  | int   | number of unique keywords matched in the document                                                                  |\n| lcs                     | field     | int   | Longest Common Subsequence between query and document, in words                                                    |\n| user_weight             | field     | int   | user field weight                                                                                                  |\n| hit_count               | field     | int   | total number of keyword occurrences                                                                                |\n| word_count              | field     | int   | number of unique matched keywords                                                                                  |\n| tf_idf                  | field     | float | sum(tf*idf) over matched keywords == sum(idf) over occurrences                                                     |\n| min_hit_pos             | field     | int   | first matched occurrence position, in words, 1-based                                                               |\n| min_best_span_pos       | field     | int   | first maximum LCS span position, in words, 1-based                                                                 |\n| exact_hit               | field     | bool  | whether query == field                                                                                             |\n| min_idf                 | field     | float | min(idf) over matched keywords                                                                                     |\n| max_idf                 | field     | float | max(idf) over matched keywords                                                                                     |\n| sum_idf                 | field     | float | sum(idf) over matched keywords                                                                                     |\n| exact_order             | field     | bool  | whether all query keywords were a) matched and b) in query order                                                   |\n| min_gaps                | field     | int   | minimum number of gaps between the matched keywords over the matching spans                                        |\n| lccs                    | field     | int   | Longest Common Contiguous Subsequence between query and document, in words                                         |\n| wlccs                   | field     | float | Weighted Longest Common Contiguous Subsequence, sum(idf) over contiguous keyword spans                            |\n| atc                     | field     | float | Aggregate Term Closeness, log(1+sum(idf1*idf2*pow(distance, -1.75)) over the best pairs of keywords               |\n\nNote: For queries using **Phrase**, **Proximity**, or **NEAR** operators with more than 31 keywords, ranking factors that rely on term frequency (like `tf`, `idf`, `bm25`, `hit_count`, `word_count`) may be under-counted for keywords at position 31 and above. This is due to an internal 32-bit mask used to track term occurrences in these complex operators.\n\n### Document-level Ranking Factors\n\nA **document-level factor** is a numeric value computed by the ranking engine for every matched document with regards to the current query. So it differs from a plain document attribute in that the attribute does not depend on the full text query, while factors might. These factors can be used anywhere in the ranking expression. Currently implemented document-level factors are:\n\n* `bm25` (integer), a document-level BM25 estimate (computed without keyword occurrence filtering).\n* `max_lcs` (integer), a query-level maximum possible value that the `sum(lcs*user_weight)` expression can ever take. This can be useful for weight boost scaling. For instance, `MATCHANY` ranker formula uses this to guarantee that a full phrase match in any field ranks higher than any combination of partial matches in all fields.\n* `field_mask` (integer), a document-level 32-bit mask of matched fields.\n* `query_word_count` (integer), the number of unique keywords in a query, adjusted for the number of excluded keywords. For instance, both `(one one one one)` and `(one !two)` queries should assign a value of 1 to this factor, because there is just one unique non-excluded keyword.\n* `doc_word_count` (integer), the number of unique keywords matched in the entire document.\n\n### Field-level Ranking Factors",
        "translations": {
            "chinese": "| Name                    | Level     | Type  | Summary                                                                                                            |\n| ----------------------- | --------- | ----- | ------------------------------------------------------------------------------------------------------------------ |\n| max_lcs                 | query     | int   | \u5f53\u524d\u67e5\u8be2\u7684\u6700\u5927\u53ef\u80fdLCS\u503c                                                                                              |\n| bm25                    | document  | int   | BM25(1.2, 0) \u7684\u5feb\u901f\u4f30\u7b97\u503c                                                                                            |\n| bm25a(k1, b)            | document  | int   | \u7cbe\u786e\u7684BM25()\u503c\uff0c\u652f\u6301\u914d\u7f6eK1\u3001B\u5e38\u6570\u548c\u8bed\u6cd5                                                                             |\n| bm25f(k1, b, {field=weight, ...}) | document | int   | \u7cbe\u786e\u7684BM25F()\u503c\uff0c\u989d\u5916\u652f\u6301\u914d\u7f6e\u5b57\u6bb5\u6743\u91cd                                                                               |\n| field_mask              | document  | int   | \u5339\u914d\u5b57\u6bb5\u7684\u4f4d\u63a9\u7801                                                                                                    |\n| query_word_count        | document  | int   | \u67e5\u8be2\u4e2d\u552f\u4e00\u5305\u542b\u7684\u5173\u952e\u5b57\u6570\u91cf                                                                                            |\n| doc_word_count          | document  | int   | \u6587\u6863\u4e2d\u5339\u914d\u7684\u552f\u4e00\u5173\u952e\u5b57\u6570\u91cf                                                                                            |\n| lcs                     | field     | int   | \u67e5\u8be2\u4e0e\u6587\u6863\u4e4b\u95f4\u7684\u6700\u957f\u516c\u5171\u5b50\u5e8f\u5217\uff0c\u6309\u8bcd\u6570\u8ba1                                                                             |\n| user_weight             | field     | int   | \u7528\u6237\u5b57\u6bb5\u6743\u91cd                                                                                                        |\n| hit_count               | field     | int   | \u5173\u952e\u5b57\u51fa\u73b0\u7684\u603b\u6b21\u6570                                                                                                  |\n| word_count              | field     | int   | \u552f\u4e00\u5339\u914d\u5173\u952e\u5b57\u7684\u6570\u91cf                                                                                                |\n| tf_idf                  | field     | float | \u5339\u914d\u5173\u952e\u5b57\u7684tf*idf\u4e4b\u548c == \u6240\u6709\u51fa\u73b0\u7684idf\u4e4b\u548c                                                                          |\n| min_hit_pos             | field     | int   | \u9996\u6b21\u5339\u914d\u51fa\u73b0\u4f4d\u7f6e\uff0c\u6309\u8bcd\u6570\uff0c1\u8d77\u59cb                                                                                        |\n| min_best_span_pos       | field     | int   | \u9996\u4e2a\u6700\u5927LCS\u8de8\u5ea6\u4f4d\u7f6e\uff0c\u6309\u8bcd\u6570\uff0c1\u8d77\u59cb                                                                                    |\n| exact_hit               | field     | bool  | \u67e5\u8be2\u662f\u5426\u4e0e\u5b57\u6bb5\u5b8c\u5168\u76f8\u7b49                                                                                              |\n| min_idf                 | field     | float | \u5339\u914d\u5173\u952e\u5b57\u4e2d\u6700\u5c0f\u7684idf                                                                                                |\n| max_idf                 | field     | float | \u5339\u914d\u5173\u952e\u5b57\u4e2d\u6700\u5927\u7684idf                                                                                                |\n| sum_idf                 | field     | float | \u5339\u914d\u5173\u952e\u5b57\u7684idf\u4e4b\u548c                                                                                                |\n| exact_order             | field     | bool  | \u662f\u5426\u6240\u6709\u67e5\u8be2\u5173\u952e\u5b57a)\u5747\u5339\u914d\u4e14b)\u987a\u5e8f\u4e0e\u67e5\u8be2\u4e2d\u4e00\u81f4                                                                     |\n| min_gaps                | field     | int   | \u5339\u914d\u8de8\u5ea6\u4e2d\u5339\u914d\u5173\u952e\u5b57\u4e4b\u95f4\u7684\u6700\u5c0f\u95f4\u9699\u6570                                                                                  |\n| lccs                    | field     | int   | \u67e5\u8be2\u4e0e\u6587\u6863\u4e4b\u95f4\u7684\u6700\u957f\u8fde\u7eed\u516c\u5171\u5b50\u5e8f\u5217\uff0c\u6309\u8bcd\u6570\u8ba1                                                                          |\n| wlccs                   | field     | float | \u52a0\u6743\u6700\u957f\u8fde\u7eed\u516c\u5171\u5b50\u5e8f\u5217\uff0c\u8fde\u7eed\u5173\u952e\u5b57\u8de8\u5ea6\u4e0a\u7684idf\u4e4b\u548c                                                                    |\n| atc                     | field     | float | \u805a\u5408\u8bcd\u9879\u63a5\u8fd1\u5ea6\uff0clog(1+\u5339\u914d\u5173\u952e\u5b57\u6700\u4f73\u5bf9\u7684 idf1*idf2*pow(distance, -1.75)\u4e4b\u548c)                                        |\n\n\u6ce8\u610f\uff1a\u5bf9\u4e8e\u4f7f\u7528**\u77ed\u8bed**\u3001**\u90bb\u8fd1**\u6216**NEAR**\u64cd\u4f5c\u7b26\u5e76\u5305\u542b\u8d85\u8fc731\u4e2a\u5173\u952e\u5b57\u7684\u67e5\u8be2\uff0c\u4f9d\u8d56\u8bcd\u9891\u7684\u6392\u540d\u56e0\u5b50\uff08\u5982 `tf`\u3001`idf`\u3001`bm25`\u3001`hit_count`\u3001`word_count`\uff09\u53ef\u80fd\u4f1a\u5bf9\u7b2c31\u4e2a\u53ca\u4ee5\u540e\u4f4d\u7f6e\u7684\u5173\u952e\u5b57\u8ba1\u6570\u4e0d\u8db3\u3002\u8fd9\u662f\u7531\u4e8e\u5185\u90e8\u4f7f\u752832\u4f4d\u63a9\u7801\u6765\u8ddf\u8e2a\u8fd9\u4e9b\u590d\u6742\u64cd\u4f5c\u7b26\u4e2d\u7684\u8bcd\u9879\u51fa\u73b0\u60c5\u51b5\u6240\u81f4\u3002\n\n### \u6587\u6863\u7ea7\u6392\u540d\u56e0\u5b50\n\n**\u6587\u6863\u7ea7\u56e0\u5b50**\u662f\u6392\u540d\u5f15\u64ce\u9488\u5bf9\u5f53\u524d\u67e5\u8be2\u4e3a\u6bcf\u4e2a\u5339\u914d\u6587\u6863\u8ba1\u7b97\u7684\u6570\u503c\u3002\u6240\u4ee5\u5b83\u4e0d\u540c\u4e8e\u5355\u7eaf\u7684\u6587\u6863\u5c5e\u6027\uff0c\u540e\u8005\u4e0d\u4f9d\u8d56\u4e8e\u5168\u6587\u67e5\u8be2\uff0c\u800c\u56e0\u5b50\u53ef\u80fd\u4f9d\u8d56\u3002\u8fd9\u4e9b\u56e0\u5b50\u53ef\u4ee5\u5728\u6392\u540d\u8868\u8fbe\u5f0f\u7684\u4efb\u4f55\u4f4d\u7f6e\u4f7f\u7528\u3002\u76ee\u524d\u5df2\u5b9e\u73b0\u7684\u6587\u6863\u7ea7\u56e0\u5b50\u6709\uff1a\n\n* `bm25`\uff08\u6574\u6570\uff09\uff0c\u6587\u6863\u7ea7BM25\u4f30\u7b97\u503c\uff08\u4e0d\u8003\u8651\u5173\u952e\u5b57\u51fa\u73b0\u6b21\u6570\u8fc7\u6ee4\uff09\u3002\n* `max_lcs`\uff08\u6574\u6570\uff09\uff0c\u4e00\u4e2a\u67e5\u8be2\u7ea7\u7684\u6700\u5927\u53ef\u80fd\u503c\uff0c`sum(lcs*user_weight)`\u8868\u8fbe\u5f0f\u53ef\u8fbe\u5230\u7684\u6700\u5927\u503c\u3002\u8fd9\u5bf9\u4e8e\u6743\u91cd\u63d0\u5347\u7684\u7f29\u653e\u5f88\u6709\u7528\u3002\u4f8b\u5982\uff0c`MATCHANY`\u6392\u5e8f\u516c\u5f0f\u4f7f\u7528\u8be5\u503c\u4fdd\u8bc1\u4efb\u610f\u5b57\u6bb5\u7684\u5b8c\u6574\u77ed\u8bed\u5339\u914d\u6392\u540d\u9ad8\u4e8e\u6240\u6709\u5b57\u6bb5\u7684\u90e8\u5206\u5339\u914d\u7ec4\u5408\u3002\n* `field_mask`\uff08\u6574\u6570\uff09\uff0c\u6587\u6863\u7ea7\u768432\u4f4d\u5339\u914d\u5b57\u6bb5\u63a9\u7801\u3002\n* `query_word_count`\uff08\u6574\u6570\uff09\uff0c\u67e5\u8be2\u4e2d\u552f\u4e00\u5173\u952e\u5b57\u7684\u6570\u91cf\uff0c\u5df2\u8c03\u6574\u6392\u9664\u5173\u952e\u8bcd\u6570\u3002\u4f8b\u5982\uff0c\u67e5\u8be2 `(one one one one)` \u548c `(one !two)` \u90fd\u5e94\u8d4b\u503c\u4e3a1\uff0c\u56e0\u4e3a\u4ec5\u6709\u4e00\u4e2a\u552f\u4e00\u975e\u6392\u9664\u5173\u952e\u5b57\u3002\n* `doc_word_count`\uff08\u6574\u6570\uff09\uff0c\u6574\u4e2a\u6587\u6863\u4e2d\u5339\u914d\u7684\u552f\u4e00\u5173\u952e\u5b57\u6570\u91cf\u3002\n\n### \u5b57\u6bb5\u7ea7\u6392\u540d\u56e0\u5b50",
            "russian": "| Name                    | Level     | Type  | Summary                                                                                                            |\n| ----------------------- | --------- | ----- | ------------------------------------------------------------------------------------------------------------------ |\n| max_lcs                 | query     | int   | \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 LCS \u0434\u043b\u044f \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0430                                                           |\n| bm25                    | document  | int   | \u0431\u044b\u0441\u0442\u0440\u0430\u044f \u043e\u0446\u0435\u043d\u043a\u0430 BM25(1.2, 0)                                                                                        |\n| bm25a(k1, b)            | document  | int   | \u0442\u043e\u0447\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 BM25() \u0441 \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u043c\u044b\u043c\u0438 \u043a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u0430\u043c\u0438 K1, B \u0438 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u043e\u0439 \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441\u0430                                 |\n| bm25f(k1, b, {field=weight, ...}) | document | int   | \u0442\u043e\u0447\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 BM25F() \u0441 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c\u0438 \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u043c\u044b\u043c\u0438 \u0432\u0435\u0441\u0430\u043c\u0438 \u043f\u043e\u043b\u0435\u0439                                             |\n| field_mask              | document  | int   | \u0431\u0438\u0442\u043e\u0432\u0430\u044f \u043c\u0430\u0441\u043a\u0430 \u0441\u043e\u0432\u043f\u0430\u0432\u0448\u0438\u0445 \u043f\u043e\u043b\u0435\u0439                                                                                        |\n| query_word_count        | document  | int   | \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0445 \u0432\u043a\u043b\u044e\u0447\u0451\u043d\u043d\u044b\u0445 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432 \u0432 \u0437\u0430\u043f\u0440\u043e\u0441\u0435                                                           |\n| doc_word_count          | document  | int   | \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0445 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432, \u043d\u0430\u0439\u0434\u0435\u043d\u043d\u044b\u0445 \u0432 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0435                                                        |\n| lcs                     | field     | int   | \u0441\u0430\u043c\u0430\u044f \u0434\u043b\u0438\u043d\u043d\u0430\u044f \u043e\u0431\u0449\u0430\u044f \u043f\u043e\u0434\u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u043c\u0435\u0436\u0434\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u043c \u0438 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u043c, \u0432 \u0441\u043b\u043e\u0432\u0430\u0445                                     |\n| user_weight             | field     | int   | \u0432\u0435\u0441 \u043f\u043e\u043b\u044f, \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c                                                                                    |\n| hit_count               | field     | int   | \u043e\u0431\u0449\u0435\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u0439 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432                                                                            |\n| word_count              | field     | int   | \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0445 \u0441\u043e\u0432\u043f\u0430\u0432\u0448\u0438\u0445 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432                                                                       |\n| tf_idf                  | field     | float | \u0441\u0443\u043c\u043c\u0430(tf*idf) \u043f\u043e \u0441\u043e\u0432\u043f\u0430\u0432\u0448\u0438\u043c \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u043c \u0441\u043b\u043e\u0432\u0430\u043c == \u0441\u0443\u043c\u043c\u0430(idf) \u043f\u043e \u0432\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f\u043c                                              |\n| min_hit_pos             | field     | int   | \u043f\u043e\u0437\u0438\u0446\u0438\u044f \u043f\u0435\u0440\u0432\u043e\u0433\u043e \u0441\u043e\u0432\u043f\u0430\u0432\u0448\u0435\u0433\u043e \u0432\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f, \u0432 \u0441\u043b\u043e\u0432\u0430\u0445, \u043d\u0430\u0447\u0438\u043d\u0430\u044f \u0441 1                                                          |\n| min_best_span_pos       | field     | int   | \u043f\u043e\u0437\u0438\u0446\u0438\u044f \u043f\u0435\u0440\u0432\u043e\u0433\u043e \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0433\u043e LCS \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u0430, \u0432 \u0441\u043b\u043e\u0432\u0430\u0445, \u043d\u0430\u0447\u0438\u043d\u0430\u044f \u0441 1                                                  |\n| exact_hit               | field     | bool  | \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u043b\u0438 \u0437\u0430\u043f\u0440\u043e\u0441 \u043f\u043e\u043b\u044e                                                                                         |\n| min_idf                 | field     | float | \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 idf \u043f\u043e \u0441\u043e\u0432\u043f\u0430\u0432\u0448\u0438\u043c \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u043c \u0441\u043b\u043e\u0432\u0430\u043c                                                               |\n| max_idf                 | field     | float | \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 idf \u043f\u043e \u0441\u043e\u0432\u043f\u0430\u0432\u0448\u0438\u043c \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u043c \u0441\u043b\u043e\u0432\u0430\u043c                                                              |\n| sum_idf                 | field     | float | \u0441\u0443\u043c\u043c\u0430 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439 idf \u043f\u043e \u0441\u043e\u0432\u043f\u0430\u0432\u0448\u0438\u043c \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u043c \u0441\u043b\u043e\u0432\u0430\u043c                                                                     |\n| exact_order             | field     | bool  | \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442 \u043b\u0438 \u0432\u0441\u0435 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0441\u043b\u043e\u0432\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u0430) \u0431\u044b\u043b\u0438 \u043d\u0430\u0439\u0434\u0435\u043d\u044b \u0438 \u0431) \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u044b \u0432 \u043f\u043e\u0440\u044f\u0434\u043a\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u0430                          |\n| min_gaps                | field     | int   | \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0440\u043e\u043f\u0443\u0441\u043a\u043e\u0432 \u043c\u0435\u0436\u0434\u0443 \u0441\u043e\u0432\u043f\u0430\u0432\u0448\u0438\u043c\u0438 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u043c\u0438 \u0441\u043b\u043e\u0432\u0430\u043c\u0438 \u0432 \u043f\u0440\u0435\u0434\u0435\u043b\u0430\u0445 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0449\u0438\u0445 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u043e\u0432                |\n| lccs                    | field     | int   | \u0441\u0430\u043c\u0430\u044f \u0434\u043b\u0438\u043d\u043d\u0430\u044f \u043e\u0431\u0449\u0430\u044f \u043d\u0435\u043f\u0440\u0435\u0440\u044b\u0432\u043d\u0430\u044f \u043f\u043e\u0434\u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u043c\u0435\u0436\u0434\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u043c \u0438 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u043c, \u0432 \u0441\u043b\u043e\u0432\u0430\u0445                           |\n| wlccs                   | field     | float | \u0432\u0437\u0432\u0435\u0448\u0435\u043d\u043d\u0430\u044f \u0441\u0430\u043c\u0430\u044f \u0434\u043b\u0438\u043d\u043d\u0430\u044f \u043e\u0431\u0449\u0430\u044f \u043d\u0435\u043f\u0440\u0435\u0440\u044b\u0432\u043d\u0430\u044f \u043f\u043e\u0434\u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c, \u0441\u0443\u043c\u043c\u0430(idf) \u043f\u043e \u043d\u0435\u043f\u0440\u0435\u0440\u044b\u0432\u043d\u044b\u043c \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u0430\u043c \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432 |\n| atc                     | field     | float | \u0430\u0433\u0440\u0435\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u0431\u043b\u0438\u0437\u043e\u0441\u0442\u044c \u0442\u0435\u0440\u043c\u0438\u043d\u043e\u0432, log(1+sum(idf1*idf2*pow(distance, -1.75)) \u043f\u043e \u043b\u0443\u0447\u0448\u0438\u043c \u043f\u0430\u0440\u0430\u043c \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432            |\n\n\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435: \u0414\u043b\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u043e\u0432 **Phrase**, **Proximity** \u0438\u043b\u0438 **NEAR** \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0449\u0438\u0445 \u0431\u043e\u043b\u0435\u0435 31 \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u0433\u043e \u0441\u043b\u043e\u0432\u0430, \u0444\u0430\u043a\u0442\u043e\u0440\u044b \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f, \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043d\u0430 \u0447\u0430\u0441\u0442\u043e\u0442\u0435 \u0442\u0435\u0440\u043c\u0438\u043d\u0430 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, `tf`, `idf`, `bm25`, `hit_count`, `word_count`), \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u043d\u0435\u0434\u043e\u0443\u0447\u0442\u0435\u043d\u044b \u0434\u043b\u044f \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432 \u0441 \u043f\u043e\u0437\u0438\u0446\u0438\u0438 31 \u0438 \u0434\u0430\u043b\u0435\u0435. \u042d\u0442\u043e \u0441\u0432\u044f\u0437\u0430\u043d\u043e \u0441 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0435\u0439 32-\u0431\u0438\u0442\u043d\u043e\u0439 \u043c\u0430\u0441\u043a\u043e\u0439, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u043e\u0439 \u0434\u043b\u044f \u043e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u043d\u0438\u044f \u0432\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u0439 \u0442\u0435\u0440\u043c\u0438\u043d\u043e\u0432 \u0432 \u044d\u0442\u0438\u0445 \u0441\u043b\u043e\u0436\u043d\u044b\u0445 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430\u0445.\n\n### \u0424\u0430\u043a\u0442\u043e\u0440\u044b \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0443\u0440\u043e\u0432\u043d\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\n\n**\u0424\u0430\u043a\u0442\u043e\u0440 \u0443\u0440\u043e\u0432\u043d\u044f \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430** \u2014 \u044d\u0442\u043e \u0447\u0438\u0441\u043b\u043e\u0432\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435, \u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0435\u043c\u043e\u0435 \u043c\u0435\u0445\u0430\u043d\u0438\u0437\u043c\u043e\u043c \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0441\u043e\u0432\u043f\u0430\u0432\u0448\u0435\u0433\u043e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430 \u043e\u0442\u043d\u043e\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0430. \u041e\u043d \u043e\u0442\u043b\u0438\u0447\u0430\u0435\u0442\u0441\u044f \u043e\u0442 \u043f\u0440\u043e\u0441\u0442\u043e\u0433\u043e \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430 \u0442\u0435\u043c, \u0447\u0442\u043e \u0430\u0442\u0440\u0438\u0431\u0443\u0442 \u043d\u0435 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043f\u043e\u043b\u043d\u043e\u0433\u043e \u0442\u0435\u043a\u0441\u0442\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430, \u0430 \u0444\u0430\u043a\u0442\u043e\u0440\u044b \u043c\u043e\u0433\u0443\u0442 \u0437\u0430\u0432\u0438\u0441\u0435\u0442\u044c. \u042d\u0442\u0438 \u0444\u0430\u043a\u0442\u043e\u0440\u044b \u043c\u043e\u0433\u0443\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u043b\u044e\u0431\u043e\u043c \u043c\u0435\u0441\u0442\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0434\u043b\u044f \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f. \u0412 \u043d\u0430\u0441\u0442\u043e\u044f\u0449\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u044b \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0444\u0430\u043a\u0442\u043e\u0440\u044b \u0443\u0440\u043e\u0432\u043d\u044f \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430:\n\n* `bm25` (\u0446\u0435\u043b\u043e\u0435 \u0447\u0438\u0441\u043b\u043e), \u043e\u0446\u0435\u043d\u043a\u0430 BM25 \u043d\u0430 \u0443\u0440\u043e\u0432\u043d\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430 (\u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0435\u0442\u0441\u044f \u0431\u0435\u0437 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438 \u0432\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u0439 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432).\n* `max_lcs` (\u0446\u0435\u043b\u043e\u0435 \u0447\u0438\u0441\u043b\u043e), \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043d\u0430 \u0443\u0440\u043e\u0432\u043d\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u0430, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u0438\u043d\u044f\u0442\u044c \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435 `sum(lcs*user_weight)`. \u042d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u043e\u043b\u0435\u0437\u043d\u043e \u0434\u043b\u044f \u043c\u0430\u0441\u0448\u0442\u0430\u0431\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043a\u043e\u044d\u0444\u0444\u0438\u0446\u0438\u0435\u043d\u0442\u043e\u0432 \u0432\u0435\u0441\u0430. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0444\u043e\u0440\u043c\u0443\u043b\u0430 \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f `MATCHANY` \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 \u044d\u0442\u043e, \u0447\u0442\u043e\u0431\u044b \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c, \u0447\u0442\u043e \u043f\u043e\u043b\u043d\u043e\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0435 \u0444\u0440\u0430\u0437\u044b \u0432 \u043b\u044e\u0431\u043e\u043c \u043f\u043e\u043b\u0435 \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u0448\u0435 \u043b\u044e\u0431\u043e\u0439 \u043a\u043e\u043c\u0431\u0438\u043d\u0430\u0446\u0438\u0438 \u0447\u0430\u0441\u0442\u0438\u0447\u043d\u044b\u0445 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439 \u0432\u043e \u0432\u0441\u0435\u0445 \u043f\u043e\u043b\u044f\u0445.\n* `field_mask` (\u0446\u0435\u043b\u043e\u0435 \u0447\u0438\u0441\u043b\u043e), 32-\u0431\u0438\u0442\u043e\u0432\u0430\u044f \u043c\u0430\u0441\u043a\u0430 \u0441\u043e\u0432\u043f\u0430\u0432\u0448\u0438\u0445 \u043f\u043e\u043b\u0435\u0439 \u043d\u0430 \u0443\u0440\u043e\u0432\u043d\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430.\n* `query_word_count` (\u0446\u0435\u043b\u043e\u0435 \u0447\u0438\u0441\u043b\u043e), \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0445 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432 \u0432 \u0437\u0430\u043f\u0440\u043e\u0441\u0435 \u0441 \u0443\u0447\u0451\u0442\u043e\u043c \u0438\u0441\u043a\u043b\u044e\u0447\u0451\u043d\u043d\u044b\u0445 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0437\u0430\u043f\u0440\u043e\u0441\u044b `(one one one one)` \u0438 `(one !two)` \u0434\u043e\u043b\u0436\u043d\u044b \u043d\u0430\u0437\u043d\u0430\u0447\u0430\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044e \u044d\u0442\u043e\u0433\u043e \u0444\u0430\u043a\u0442\u043e\u0440\u0430 1, \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u0435\u0441\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u043e\u0434\u043d\u043e \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u043e\u0435 \u043d\u0435 \u0438\u0441\u043a\u043b\u044e\u0447\u0451\u043d\u043d\u043e\u0435 \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u0435 \u0441\u043b\u043e\u0432\u043e.\n* `doc_word_count` (\u0446\u0435\u043b\u043e\u0435 \u0447\u0438\u0441\u043b\u043e), \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0445 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432, \u0441\u043e\u0432\u043f\u0430\u0432\u0448\u0438\u0445 \u0432\u043e \u0432\u0441\u0435\u043c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0435.\n\n### \u0424\u0430\u043a\u0442\u043e\u0440\u044b \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0443\u0440\u043e\u0432\u043d\u0435 \u043f\u043e\u043b\u044f"
        },
        "is_code_or_comment": false,
        "model": "openai:gpt-4.1-mini",
        "updated_at": 1766339807
    },
    "207995276764d56e2e5325e2b44167d2e633549040fb45ea39b0daac632a65a0": {
        "original": "# Sorting and ranking\n\nQuery results can be sorted by full-text ranking weight, one or more attributes or expressions.\n\n**Full-text** queries return matches sorted by default. If nothing is specified, they are sorted by relevance, which is equivalent to `ORDER BY weight() DESC` in SQL format.\n\n**Non-full-text** queries do not perform any sorting by default.\n\n## Advanced sorting\n\nExtended mode is automatically enabled when you explicitly provide sorting rules by adding the `ORDER BY` clause in SQL format or using the `sort` option via HTTP JSON.\n\n### Sorting via SQL\n\nGeneral syntax:\nCODE_BLOCK_0\n\n<!-- example alias -->\n\nIn the sort clause, you can use any combination of up to 5 columns, each followed by `asc` or `desc`. Functions and expressions are not allowed as arguments for the sort clause, except for the `weight()` and `random()` functions (the latter can only be used via SQL in the form of `ORDER BY random()`). However, you can use any expression in the SELECT list and sort by its alias.\n\n<!-- request SQL -->\nCODE_BLOCK_1\n\n<!-- response SQL -->\nCODE_BLOCK_2\n\n<!-- end -->\n\n## Sorting via JSON\n\n<!-- example sorting 1 -->\n`\"sort\"` specifies an array where each element can be an attribute name or `_score` if you want to sort by match weights or `_random` if you want radnom match order. In that case, the sort order defaults to ascending for attributes and descending for `_score`.\n\n<!-- intro -->\n\n<!-- request JSON -->\n\nCODE_BLOCK_3\n\n<!-- response JSON -->\n\nCODE_BLOCK_4\n\n<!-- intro -->\n##### PHP:\n\n<!-- request PHP -->\n\nCODE_BLOCK_5\n\n<!-- intro -->\n\n##### Python:\n\n<!-- request Python -->\nCODE_BLOCK_6\n\n<!-- intro -->\n\n##### Python-asyncio:\n\n<!-- request Python-asyncio -->\nCODE_BLOCK_7\n\n<!-- intro -->\n\n##### Javascript:\n\n<!-- request javascript -->\nCODE_BLOCK_8\n\n<!-- intro -->\n\n##### java:\n\n<!-- request Java -->\nCODE_BLOCK_9\n\n<!-- intro -->\n\n##### C#:\n\n<!-- request C# -->\nCODE_BLOCK_10\n\n<!-- intro -->\n\n##### Rust:\n\n<!-- request Rust -->\nCODE_BLOCK_11\n\n<!-- intro -->\n\n##### Typescript:\n\n<!-- request typescript -->\nCODE_BLOCK_12\n\n<!-- intro -->\n\n##### Go:\n\n<!-- request go -->\nCODE_BLOCK_13\n\n<!-- end -->\n\n<!-- example sorting 2 -->\nYou can also specify the sort order explicitly:\n\n* `asc`: sort in ascending order\n* `desc`: sort in descending order\n\n\n<!-- intro -->\n\n<!-- request JSON -->\n\nCODE_BLOCK_14\n\n<!-- response JSON -->\n\nCODE_BLOCK_15\n\n<!-- intro -->\n##### PHP:\n\n<!-- request PHP -->\n\nCODE_BLOCK_16\n\n<!-- intro -->\n\n##### Python:\n\n<!-- request Python -->\nCODE_BLOCK_17\n\n<!-- intro -->\n\n##### Python-asyncio:\n\n<!-- request Python-asyncio -->\nCODE_BLOCK_18\n\n<!-- intro -->\n\n##### Javascript:\n\n<!-- request javascript -->\nCODE_BLOCK_19\n\n<!-- intro -->\n\n##### java:\n\n<!-- request Java -->\nCODE_BLOCK_20\n\n<!-- intro -->\n\n##### C#:\n\n<!-- request C# -->\nCODE_BLOCK_21\n\n<!-- intro -->\n\n##### Rust:\n\n<!-- request Rust -->\nCODE_BLOCK_22\n\n<!-- intro -->\n\n##### Typescript:\n\n<!-- request typescript -->\nCODE_BLOCK_23\n\n<!-- intro -->\n\n##### Go:\n\n<!-- request go -->\nCODE_BLOCK_24\n\n<!-- end -->\n\n<!-- example sorting 3 -->\nYou can also use another syntax and specify the sort order via the `order` property:\n\n\n<!-- intro -->\n\n<!-- request JSON -->\n\nCODE_BLOCK_25\n\n<!-- response JSON -->\n\nCODE_BLOCK_26\n\n<!-- intro -->\n##### PHP:\n\n<!-- request PHP -->\n\nCODE_BLOCK_27\n\n<!-- intro -->\n\n##### Python:\n\n<!-- request Python -->\nCODE_BLOCK_28\n\n<!-- intro -->\n\n##### Python-asyncio:\n\n<!-- request Python-asyncio -->\nCODE_BLOCK_29\n\n<!-- intro -->\n\n##### Javascript:\n\n<!-- request javascript -->\nCODE_BLOCK_30\n\n<!-- intro -->\n\n##### java:\n\n<!-- request Java -->\nCODE_BLOCK_31\n\n<!-- intro -->\n\n##### C#:\n\n<!-- request C# -->\nCODE_BLOCK_32\n\n<!-- intro -->\n\n##### Rust:\n\n<!-- request Rust -->\nCODE_BLOCK_33\n\n<!-- intro -->\n\n##### Typescript:\n\n<!-- request typescript -->\nCODE_BLOCK_34\n\n<!-- intro -->\n\n##### Go:\n\n<!-- request go -->\nCODE_BLOCK_35\n\n<!-- end -->\n\n<!-- example sorting 4 -->\nSorting by MVA attributes is also supported in JSON queries. Sorting mode can be set via the `mode` property. The following modes are supported:\n\n* `min`: sort by minimum value\n* `max`: sort by maximum value\n\n<!-- intro -->\n\n<!-- request JSON -->\n\nCODE_BLOCK_36\n\n<!-- response JSON -->\n\nCODE_BLOCK_37\n\n<!-- intro -->\n##### PHP:\n\n<!-- request PHP -->\n\nCODE_BLOCK_38\n\n<!-- intro -->\n\n##### Python:\n\n<!-- request Python -->\nCODE_BLOCK_39\n\n<!-- intro -->\n\n##### Python-asyncio:\n\n<!-- request Python-asyncio -->\nCODE_BLOCK_40\n\n<!-- intro -->\n\n##### Javascript:\n\n<!-- request javascript -->\nCODE_BLOCK_41\n\n<!-- intro -->\n\n##### java:\n\n<!-- request Java -->\nCODE_BLOCK_42\n\n<!-- intro -->\n\n##### C#:\n\n<!-- request C# -->\nCODE_BLOCK_43\n\n<!-- intro -->\n\n##### Rust:\n\n<!-- request Rust -->\nCODE_BLOCK_44\n\n<!-- intro -->\n\n##### Typescript:\n\n<!-- request typescript -->\nCODE_BLOCK_45\n\n<!-- intro -->\n\n##### Go:\n\n<!-- request go -->\nCODE_BLOCK_46\n\n<!-- end -->\n\n<!-- example sorting 5 -->\nWhen sorting on an attribute, match weight (score) calculation is disabled by default (no ranker is used). You can enable weight calculation by setting the `track_scores` property to `true`:\n\n<!-- intro -->\n\n<!-- request JSON -->\n\nCODE_BLOCK_47\n\n<!-- response JSON -->\n\nCODE_BLOCK_48\n\n<!-- intro -->\n##### PHP:\n\n<!-- request PHP -->\n\nCODE_BLOCK_49\n\n<!-- intro -->\n\n##### Python:\n\n<!-- request Python -->\nCODE_BLOCK_50\n\n<!-- intro -->\n\n##### Python-asyncio:\n\n<!-- request Python-asyncio -->\nCODE_BLOCK_51\n\n<!-- intro -->\n\n##### Javascript:\n\n<!-- request javascript -->\nCODE_BLOCK_52\n\n<!-- intro -->\n\n##### java:\n\n<!-- request Java -->\nCODE_BLOCK_53\n\n<!-- intro -->\n\n##### C#:\n\n<!-- request C# -->\nCODE_BLOCK_54\n\n<!-- intro -->\n\n##### Rust:\n\n<!-- request Rust -->\nCODE_BLOCK_55\n\n<!-- intro -->\n\n##### Typescript:\n\n<!-- request typescript -->\nCODE_BLOCK_56\n\n<!-- intro -->\n\n##### Go:\n\n<!-- request go -->\nCODE_BLOCK_57\n\n<!-- end -->\n\n\n## Ranking overview",
        "translations": {
            "chinese": "# \u6392\u5e8f\u4e0e\u6392\u540d\n\n\u67e5\u8be2\u7ed3\u679c\u53ef\u4ee5\u6309\u5168\u6587\u6392\u540d\u6743\u91cd\u3001\u4e00\u4e2a\u6216\u591a\u4e2a\u5c5e\u6027\u6216\u8868\u8fbe\u5f0f\u8fdb\u884c\u6392\u5e8f\u3002\n\n**\u5168\u6587** \u67e5\u8be2\u8fd4\u56de\u7684\u5339\u914d\u9879\u9ed8\u8ba4\u5df2\u6392\u5e8f\u3002\u5982\u679c\u672a\u6307\u5b9a\u4efb\u4f55\u6392\u5e8f\u65b9\u5f0f\uff0c\u5219\u6309\u76f8\u5173\u6027\u6392\u5e8f\uff0c\u8fd9\u76f8\u5f53\u4e8e SQL \u683c\u5f0f\u4e2d\u7684 `ORDER BY weight() DESC`\u3002\n\n**\u975e\u5168\u6587** \u67e5\u8be2\u9ed8\u8ba4\u4e0d\u8fdb\u884c\u4efb\u4f55\u6392\u5e8f\u3002\n\n## \u9ad8\u7ea7\u6392\u5e8f\n\n\u5f53\u60a8\u901a\u8fc7 SQL \u683c\u5f0f\u6dfb\u52a0 `ORDER BY` \u5b50\u53e5\u6216\u901a\u8fc7 HTTP JSON \u4f7f\u7528 `sort` \u9009\u9879\u660e\u786e\u63d0\u4f9b\u6392\u5e8f\u89c4\u5219\u65f6\uff0c\u6269\u5c55\u6a21\u5f0f\u5c06\u81ea\u52a8\u542f\u7528\u3002\n\n### \u901a\u8fc7 SQL \u6392\u5e8f\n\n\u901a\u7528\u8bed\u6cd5\uff1a\nCODE_BLOCK_0\n\n<!-- example alias -->\n\n\u5728\u6392\u5e8f\u5b50\u53e5\u4e2d\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u6700\u591a 5 \u5217\u7684\u4efb\u610f\u7ec4\u5408\uff0c\u6bcf\u4e2a\u5217\u4e4b\u540e\u8ddf\u968f `asc` \u6216 `desc`\u3002\u4e0d\u5141\u8bb8\u4f7f\u7528\u51fd\u6570\u548c\u8868\u8fbe\u5f0f\u4f5c\u4e3a\u6392\u5e8f\u5b50\u53e5\u7684\u53c2\u6570\uff0c\u9664\u975e\u662f `weight()` \u548c `random()` \u51fd\u6570\uff08\u540e\u8005\u53ea\u80fd\u4ee5 `ORDER BY random()` \u5f62\u5f0f\u901a\u8fc7 SQL \u4f7f\u7528\uff09\u3002\u4e0d\u8fc7\uff0c\u60a8\u53ef\u4ee5\u5728 SELECT \u5217\u8868\u4e2d\u4f7f\u7528\u4efb\u4f55\u8868\u8fbe\u5f0f\uff0c\u5e76\u6309\u5176\u522b\u540d\u8fdb\u884c\u6392\u5e8f\u3002\n\n<!-- request SQL -->\nCODE_BLOCK_1\n\n<!-- response SQL -->\nCODE_BLOCK_2\n\n<!-- end -->\n\n## \u901a\u8fc7 JSON \u6392\u5e8f\n\n<!-- example sorting 1 -->\n`\"sort\"` \u6307\u5b9a\u4e00\u4e2a\u6570\u7ec4\uff0c\u5176\u4e2d\u6bcf\u4e2a\u5143\u7d20\u53ef\u4ee5\u662f\u5c5e\u6027\u540d\uff0c\u6216\u8005\u5982\u679c\u60a8\u60f3\u6309\u5339\u914d\u6743\u91cd\u6392\u5e8f\u5219\u4e3a `_score`\uff0c\u5982\u679c\u60a8\u60f3\u8981\u968f\u673a\u5339\u914d\u987a\u5e8f\u5219\u4e3a `_random`\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5c5e\u6027\u7684\u6392\u5e8f\u987a\u5e8f\u9ed8\u8ba4\u4e3a\u5347\u5e8f\uff0c`_score` \u9ed8\u8ba4\u4e3a\u964d\u5e8f\u3002\n\n<!-- intro -->\n\n<!-- request JSON -->\n\nCODE_BLOCK_3\n\n<!-- response JSON -->\n\nCODE_BLOCK_4\n\n<!-- intro -->\n##### PHP:\n\n<!-- request PHP -->\n\nCODE_BLOCK_5\n\n<!-- intro -->\n\n##### Python:\n\n<!-- request Python -->\nCODE_BLOCK_6\n\n<!-- intro -->\n\n##### Python-asyncio:\n\n<!-- request Python-asyncio -->\nCODE_BLOCK_7\n\n<!-- intro -->\n\n##### Javascript:\n\n<!-- request javascript -->\nCODE_BLOCK_8\n\n<!-- intro -->\n\n##### java:\n\n<!-- request Java -->\nCODE_BLOCK_9\n\n<!-- intro -->\n\n##### C#:\n\n<!-- request C# -->\nCODE_BLOCK_10\n\n<!-- intro -->\n\n##### Rust:\n\n<!-- request Rust -->\nCODE_BLOCK_11\n\n<!-- intro -->\n\n##### Typescript:\n\n<!-- request typescript -->\nCODE_BLOCK_12\n\n<!-- intro -->\n\n##### Go:\n\n<!-- request go -->\nCODE_BLOCK_13\n\n<!-- end -->\n\n<!-- example sorting 2 -->\n\u60a8\u4e5f\u53ef\u4ee5\u663e\u5f0f\u6307\u5b9a\u6392\u5e8f\u987a\u5e8f\uff1a\n\n* `asc`\uff1a\u5347\u5e8f\u6392\u5e8f\n* `desc`\uff1a\u964d\u5e8f\u6392\u5e8f\n\n\n<!-- intro -->\n\n<!-- request JSON -->\n\nCODE_BLOCK_14\n\n<!-- response JSON -->\n\nCODE_BLOCK_15\n\n<!-- intro -->\n##### PHP:\n\n<!-- request PHP -->\n\nCODE_BLOCK_16\n\n<!-- intro -->\n\n##### Python:\n\n<!-- request Python -->\nCODE_BLOCK_17\n\n<!-- intro -->\n\n##### Python-asyncio:\n\n<!-- request Python-asyncio -->\nCODE_BLOCK_18\n\n<!-- intro -->\n\n##### Javascript:\n\n<!-- request javascript -->\nCODE_BLOCK_19\n\n<!-- intro -->\n\n##### java:\n\n<!-- request Java -->\nCODE_BLOCK_20\n\n<!-- intro -->\n\n##### C#:\n\n<!-- request C# -->\nCODE_BLOCK_21\n\n<!-- intro -->\n\n##### Rust:\n\n<!-- request Rust -->\nCODE_BLOCK_22\n\n<!-- intro -->\n\n##### Typescript:\n\n<!-- request typescript -->\nCODE_BLOCK_23\n\n<!-- intro -->\n\n##### Go:\n\n<!-- request go -->\nCODE_BLOCK_24\n\n<!-- end -->\n\n<!-- example sorting 3 -->\n\u60a8\u4e5f\u53ef\u4ee5\u4f7f\u7528\u53e6\u4e00\u79cd\u8bed\u6cd5\uff0c\u501f\u52a9 `order` \u5c5e\u6027\u6307\u5b9a\u6392\u5e8f\u987a\u5e8f\uff1a\n\n\n<!-- intro -->\n\n<!-- request JSON -->\n\nCODE_BLOCK_25\n\n<!-- response JSON -->\n\nCODE_BLOCK_26\n\n<!-- intro -->\n##### PHP:\n\n<!-- request PHP -->\n\nCODE_BLOCK_27\n\n<!-- intro -->\n\n##### Python:\n\n<!-- request Python -->\nCODE_BLOCK_28\n\n<!-- intro -->\n\n##### Python-asyncio:\n\n<!-- request Python-asyncio -->\nCODE_BLOCK_29\n\n<!-- intro -->\n\n##### Javascript:\n\n<!-- request javascript -->\nCODE_BLOCK_30\n\n<!-- intro -->\n\n##### java:\n\n<!-- request Java -->\nCODE_BLOCK_31\n\n<!-- intro -->\n\n##### C#:\n\n<!-- request C# -->\nCODE_BLOCK_32\n\n<!-- intro -->\n\n##### Rust:\n\n<!-- request Rust -->\nCODE_BLOCK_33\n\n<!-- intro -->\n\n##### Typescript:\n\n<!-- request typescript -->\nCODE_BLOCK_34\n\n<!-- intro -->\n\n##### Go:\n\n<!-- request go -->\nCODE_BLOCK_35\n\n<!-- end -->\n\n<!-- example sorting 4 -->\nJSON \u67e5\u8be2\u4e5f\u652f\u6301\u6309 MVA\uff08\u591a\u503c\u5c5e\u6027\uff09\u5c5e\u6027\u6392\u5e8f\u3002\u6392\u5e8f\u6a21\u5f0f\u53ef\u4ee5\u901a\u8fc7 `mode` \u5c5e\u6027\u8bbe\u7f6e\u3002\u652f\u6301\u4ee5\u4e0b\u6a21\u5f0f\uff1a\n\n* `min`\uff1a\u6309\u6700\u5c0f\u503c\u6392\u5e8f\n* `max`\uff1a\u6309\u6700\u5927\u503c\u6392\u5e8f\n\n<!-- intro -->\n\n<!-- request JSON -->\n\nCODE_BLOCK_36\n\n<!-- response JSON -->\n\nCODE_BLOCK_37\n\n<!-- intro -->\n##### PHP:\n\n<!-- request PHP -->\n\nCODE_BLOCK_38\n\n<!-- intro -->\n\n##### Python:\n\n<!-- request Python -->\nCODE_BLOCK_39\n\n<!-- intro -->\n\n##### Python-asyncio:\n\n<!-- request Python-asyncio -->\nCODE_BLOCK_40\n\n<!-- intro -->\n\n##### Javascript:\n\n<!-- request javascript -->\nCODE_BLOCK_41\n\n<!-- intro -->\n\n##### java:\n\n<!-- request Java -->\nCODE_BLOCK_42\n\n<!-- intro -->\n\n##### C#:\n\n<!-- request C# -->\nCODE_BLOCK_43\n\n<!-- intro -->\n\n##### Rust:\n\n<!-- request Rust -->\nCODE_BLOCK_44\n\n<!-- intro -->\n\n##### Typescript:\n\n<!-- request typescript -->\nCODE_BLOCK_45\n\n<!-- intro -->\n\n##### Go:\n\n<!-- request go -->\nCODE_BLOCK_46\n\n<!-- end -->\n\n<!-- example sorting 5 -->\n\u5f53\u6309\u5c5e\u6027\u6392\u5e8f\u65f6\uff0c\u9ed8\u8ba4\u7981\u7528\u5339\u914d\u6743\u91cd\uff08score\uff09\u8ba1\u7b97\uff08\u4e0d\u4f7f\u7528\u6392\u540d\u5668\uff09\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e `track_scores` \u5c5e\u6027\u4e3a `true` \u6765\u542f\u7528\u6743\u91cd\u8ba1\u7b97\uff1a\n\n<!-- intro -->\n\n<!-- request JSON -->\n\nCODE_BLOCK_47\n\n<!-- response JSON -->\n\nCODE_BLOCK_48\n\n<!-- intro -->\n##### PHP:\n\n<!-- request PHP -->\n\nCODE_BLOCK_49\n\n<!-- intro -->\n\n##### Python:\n\n<!-- request Python -->\nCODE_BLOCK_50\n\n<!-- intro -->\n\n##### Python-asyncio:\n\n<!-- request Python-asyncio -->\nCODE_BLOCK_51\n\n<!-- intro -->\n\n##### Javascript:\n\n<!-- request javascript -->\nCODE_BLOCK_52\n\n<!-- intro -->\n\n##### java:\n\n<!-- request Java -->\nCODE_BLOCK_53\n\n<!-- intro -->\n\n##### C#:\n\n<!-- request C# -->\nCODE_BLOCK_54\n\n<!-- intro -->\n\n##### Rust:\n\n<!-- request Rust -->\nCODE_BLOCK_55\n\n<!-- intro -->\n\n##### Typescript:\n\n<!-- request typescript -->\nCODE_BLOCK_56\n\n<!-- intro -->\n\n##### Go:\n\n<!-- request go -->\nCODE_BLOCK_57\n\n<!-- end -->\n\n\n## \u6392\u540d\u6982\u8ff0",
            "russian": "# \u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430 \u0438 \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\n\n\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u043e\u0442\u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u044b \u043f\u043e \u0432\u0435\u0441\u0443 \u043f\u043e\u043b\u043d\u043e\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u0433\u043e \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f, \u043e\u0434\u043d\u043e\u043c\u0443 \u0438\u043b\u0438 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u043c \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u0430\u043c \u0438\u043b\u0438 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f\u043c.\n\n**\u041f\u043e\u043b\u043d\u043e\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0435** \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u044e\u0442 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b, \u043e\u0442\u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043f\u043e \u0440\u0435\u043b\u0435\u0432\u0430\u043d\u0442\u043d\u043e\u0441\u0442\u0438, \u0447\u0442\u043e \u044d\u043a\u0432\u0438\u0432\u0430\u043b\u0435\u043d\u0442\u043d\u043e `ORDER BY weight() DESC` \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 SQL.\n\n**\u041d\u0435\u043f\u043e\u043b\u043d\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0435** \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u043d\u0438\u043a\u0430\u043a \u043d\u0435 \u0441\u043e\u0440\u0442\u0438\u0440\u0443\u044e\u0442\u0441\u044f.\n\n## \u0420\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u043d\u0430\u044f \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430\n\n\u0420\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f, \u043a\u043e\u0433\u0434\u0430 \u0432\u044b \u044f\u0432\u043d\u043e \u0437\u0430\u0434\u0430\u0435\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u0430 \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0438 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043a\u043b\u0430\u0443\u0437\u044b `ORDER BY` \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 SQL \u0438\u043b\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \u043e\u043f\u0446\u0438\u044e `sort` \u0447\u0435\u0440\u0435\u0437 HTTP JSON.\n\n### \u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430 \u0447\u0435\u0440\u0435\u0437 SQL\n\n\u041e\u0431\u0449\u0438\u0439 \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441:\nCODE_BLOCK_0\n\n<!-- example alias -->\n\n\u0412 \u043a\u043b\u0430\u0443\u0437\u0435 \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0438 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043b\u044e\u0431\u0443\u044e \u043a\u043e\u043c\u0431\u0438\u043d\u0430\u0446\u0438\u044e \u0434\u043e 5 \u0441\u0442\u043e\u043b\u0431\u0446\u043e\u0432, \u0437\u0430 \u043a\u0430\u0436\u0434\u044b\u043c \u0438\u0437 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0441\u043b\u0435\u0434\u0443\u0435\u0442 `asc` \u0438\u043b\u0438 `desc`. \u0424\u0443\u043d\u043a\u0446\u0438\u0438 \u0438 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u043d\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u044b \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u043e\u0432 \u0434\u043b\u044f \u043a\u043b\u0430\u0443\u0437\u044b \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0438, \u0437\u0430 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435\u043c \u0444\u0443\u043d\u043a\u0446\u0438\u0439 `weight()` \u0438 `random()` (\u043f\u043e\u0441\u043b\u0435\u0434\u043d\u044f\u044f \u043c\u043e\u0436\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u0447\u0435\u0440\u0435\u0437 SQL \u0432 \u0432\u0438\u0434\u0435 `ORDER BY random()`). \u041e\u0434\u043d\u0430\u043a\u043e \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043b\u044e\u0431\u043e\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0432 \u0441\u043f\u0438\u0441\u043a\u0435 SELECT \u0438 \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e \u0435\u0433\u043e \u043f\u0441\u0435\u0432\u0434\u043e\u043d\u0438\u043c\u0443.\n\n<!-- request SQL -->\nCODE_BLOCK_1\n\n<!-- response SQL -->\nCODE_BLOCK_2\n\n<!-- end -->\n\n## \u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430 \u0447\u0435\u0440\u0435\u0437 JSON\n\n<!-- example sorting 1 -->\n`\"sort\"` \u0437\u0430\u0434\u0430\u0451\u0442 \u043c\u0430\u0441\u0441\u0438\u0432, \u0433\u0434\u0435 \u043a\u0430\u0436\u0434\u044b\u0439 \u044d\u043b\u0435\u043c\u0435\u043d\u0442 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0438\u043c\u0435\u043d\u0435\u043c \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u0430 \u0438\u043b\u0438 `_score`, \u0435\u0441\u043b\u0438 \u043d\u0443\u0436\u043d\u043e \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e \u0432\u0435\u0441\u0430\u043c \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439, \u0438\u043b\u0438 `_random`, \u0435\u0441\u043b\u0438 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u044b\u0439 \u043f\u043e\u0440\u044f\u0434\u043e\u043a \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439. \u0412 \u044d\u0442\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043f\u043e\u0440\u044f\u0434\u043e\u043a \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0438 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0432\u043e\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0439 \u0434\u043b\u044f \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u043e\u0432 \u0438 \u043d\u0438\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0439 \u0434\u043b\u044f `_score`.\n\n<!-- intro -->\n\n<!-- request JSON -->\n\nCODE_BLOCK_3\n\n<!-- response JSON -->\n\nCODE_BLOCK_4\n\n<!-- intro -->\n##### PHP:\n\n<!-- request PHP -->\n\nCODE_BLOCK_5\n\n<!-- intro -->\n\n##### Python:\n\n<!-- request Python -->\nCODE_BLOCK_6\n\n<!-- intro -->\n\n##### Python-asyncio:\n\n<!-- request Python-asyncio -->\nCODE_BLOCK_7\n\n<!-- intro -->\n\n##### Javascript:\n\n<!-- request javascript -->\nCODE_BLOCK_8\n\n<!-- intro -->\n\n##### java:\n\n<!-- request Java -->\nCODE_BLOCK_9\n\n<!-- intro -->\n\n##### C#:\n\n<!-- request C# -->\nCODE_BLOCK_10\n\n<!-- intro -->\n\n##### Rust:\n\n<!-- request Rust -->\nCODE_BLOCK_11\n\n<!-- intro -->\n\n##### Typescript:\n\n<!-- request typescript -->\nCODE_BLOCK_12\n\n<!-- intro -->\n\n##### Go:\n\n<!-- request go -->\nCODE_BLOCK_13\n\n<!-- end -->\n\n<!-- example sorting 2 -->\n\u0412\u044b \u0442\u0430\u043a\u0436\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u044f\u0432\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u043e\u0440\u044f\u0434\u043e\u043a \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0438:\n\n* `asc`: \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430 \u043f\u043e \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0430\u043d\u0438\u044e\n* `desc`: \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430 \u043f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e\n\n\n<!-- intro -->\n\n<!-- request JSON -->\n\nCODE_BLOCK_14\n\n<!-- response JSON -->\n\nCODE_BLOCK_15\n\n<!-- intro -->\n##### PHP:\n\n<!-- request PHP -->\n\nCODE_BLOCK_16\n\n<!-- intro -->\n\n##### Python:\n\n<!-- request Python -->\nCODE_BLOCK_17\n\n<!-- intro -->\n\n##### Python-asyncio:\n\n<!-- request Python-asyncio -->\nCODE_BLOCK_18\n\n<!-- intro -->\n\n##### Javascript:\n\n<!-- request javascript -->\nCODE_BLOCK_19\n\n<!-- intro -->\n\n##### java:\n\n<!-- request Java -->\nCODE_BLOCK_20\n\n<!-- intro -->\n\n##### C#:\n\n<!-- request C# -->\nCODE_BLOCK_21\n\n<!-- intro -->\n\n##### Rust:\n\n<!-- request Rust -->\nCODE_BLOCK_22\n\n<!-- intro -->\n\n##### Typescript:\n\n<!-- request typescript -->\nCODE_BLOCK_23\n\n<!-- intro -->\n\n##### Go:\n\n<!-- request go -->\nCODE_BLOCK_24\n\n<!-- end -->\n\n<!-- example sorting 3 -->\n\u0412\u044b \u0442\u0430\u043a\u0436\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0434\u0440\u0443\u0433\u043e\u0439 \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441 \u0438 \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u043e\u0440\u044f\u0434\u043e\u043a \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0438 \u0447\u0435\u0440\u0435\u0437 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u043e `order`:\n\n\n<!-- intro -->\n\n<!-- request JSON -->\n\nCODE_BLOCK_25\n\n<!-- response JSON -->\n\nCODE_BLOCK_26\n\n<!-- intro -->\n##### PHP:\n\n<!-- request PHP -->\n\nCODE_BLOCK_27\n\n<!-- intro -->\n\n##### Python:\n\n<!-- request Python -->\nCODE_BLOCK_28\n\n<!-- intro -->\n\n##### Python-asyncio:\n\n<!-- request Python-asyncio -->\nCODE_BLOCK_29\n\n<!-- intro -->\n\n##### Javascript:\n\n<!-- request javascript -->\nCODE_BLOCK_30\n\n<!-- intro -->\n\n##### java:\n\n<!-- request Java -->\nCODE_BLOCK_31\n\n<!-- intro -->\n\n##### C#:\n\n<!-- request C# -->\nCODE_BLOCK_32\n\n<!-- intro -->\n\n##### Rust:\n\n<!-- request Rust -->\nCODE_BLOCK_33\n\n<!-- intro -->\n\n##### Typescript:\n\n<!-- request typescript -->\nCODE_BLOCK_34\n\n<!-- intro -->\n\n##### Go:\n\n<!-- request go -->\nCODE_BLOCK_35\n\n<!-- end -->\n\n<!-- example sorting 4 -->\n\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430 \u043f\u043e MVA-\u0430\u0442\u0440\u0438\u0431\u0443\u0442\u0430\u043c \u0442\u0430\u043a\u0436\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0432 JSON-\u0437\u0430\u043f\u0440\u043e\u0441\u0430\u0445. \u0420\u0435\u0436\u0438\u043c \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0438 \u043c\u043e\u0436\u043d\u043e \u0437\u0430\u0434\u0430\u0442\u044c \u0447\u0435\u0440\u0435\u0437 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u043e `mode`. \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0440\u0435\u0436\u0438\u043c\u044b:\n\n* `min`: \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430 \u043f\u043e \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u043c\u0443 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044e\n* `max`: \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430 \u043f\u043e \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u043c\u0443 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044e\n\n<!-- intro -->\n\n<!-- request JSON -->\n\nCODE_BLOCK_36\n\n<!-- response JSON -->\n\nCODE_BLOCK_37\n\n<!-- intro -->\n##### PHP:\n\n<!-- request PHP -->\n\nCODE_BLOCK_38\n\n<!-- intro -->\n\n##### Python:\n\n<!-- request Python -->\nCODE_BLOCK_39\n\n<!-- intro -->\n\n##### Python-asyncio:\n\n<!-- request Python-asyncio -->\nCODE_BLOCK_40\n\n<!-- intro -->\n\n##### Javascript:\n\n<!-- request javascript -->\nCODE_BLOCK_41\n\n<!-- intro -->\n\n##### java:\n\n<!-- request Java -->\nCODE_BLOCK_42\n\n<!-- intro -->\n\n##### C#:\n\n<!-- request C# -->\nCODE_BLOCK_43\n\n<!-- intro -->\n\n##### Rust:\n\n<!-- request Rust -->\nCODE_BLOCK_44\n\n<!-- intro -->\n\n##### Typescript:\n\n<!-- request typescript -->\nCODE_BLOCK_45\n\n<!-- intro -->\n\n##### Go:\n\n<!-- request go -->\nCODE_BLOCK_46\n\n<!-- end -->\n\n<!-- example sorting 5 -->\n\u041f\u0440\u0438 \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0435 \u043f\u043e \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u0443 \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0435 \u0432\u0435\u0441\u0430 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u044f (score) \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u043e (\u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0449\u0438\u043a \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f). \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0435 \u0432\u0435\u0441\u0430, \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0432 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u043e `track_scores` \u0432 `true`:\n\n<!-- intro -->\n\n<!-- request JSON -->\n\nCODE_BLOCK_47\n\n<!-- response JSON -->\n\nCODE_BLOCK_48\n\n<!-- intro -->\n##### PHP:\n\n<!-- request PHP -->\n\nCODE_BLOCK_49\n\n<!-- intro -->\n\n##### Python:\n\n<!-- request Python -->\nCODE_BLOCK_50\n\n<!-- intro -->\n\n##### Python-asyncio:\n\n<!-- request Python-asyncio -->\nCODE_BLOCK_51\n\n<!-- intro -->\n\n##### Javascript:\n\n<!-- request javascript -->\nCODE_BLOCK_52\n\n<!-- intro -->\n\n##### java:\n\n<!-- request Java -->\nCODE_BLOCK_53\n\n<!-- intro -->\n\n##### C#:\n\n<!-- request C# -->\nCODE_BLOCK_54\n\n<!-- intro -->\n\n##### Rust:\n\n<!-- request Rust -->\nCODE_BLOCK_55\n\n<!-- intro -->\n\n##### Typescript:\n\n<!-- request typescript -->\nCODE_BLOCK_56\n\n<!-- intro -->\n\n##### Go:\n\n<!-- request go -->\nCODE_BLOCK_57\n\n<!-- end -->\n\n\n## \u041e\u0431\u0437\u043e\u0440 \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f"
        },
        "is_code_or_comment": false,
        "model": "openai:gpt-4.1-mini",
        "updated_at": 1766339807
    },
    "4173d81c2f972c656ba976fa89ae72344ca5011913e025302a381b5cfde27e9f": {
        "original": "    ATC essentially operates as follows. For each keyword *occurrence* in the document, we compute the so-called *term closeness*. To do this, we examine all the other closest occurrences of all the query keywords (including the keyword itself) to the left and right of the subject occurrence, calculate a distance dampening coefficient as k = pow(distance, -1.75) for these occurrences, and sum the dampened IDFs. As a result, for every occurrence of each keyword, we obtain a \"closeness\" value that describes the \"neighbors\" of that occurrence. We then multiply these per-occurrence closenesses by their respective subject keyword IDF, sum them all, and finally compute a logarithm of that sum.\n\nIn other words, we process the best (closest) matched keyword pairs in the document, and compute pairwise \"closenesses\" as the product of their IDFs scaled by the distance coefficient:\n\nCODE_BLOCK_59\n\nWe then sum such closenesses, and compute the final, log-dampened ATC value:\n\nCODE_BLOCK_60\n\nNote that this final dampening logarithm is precisely the reason you should use OPTION idf=plain because, without it, the expression inside the log() could be negative.\n\nHaving closer keyword occurrences contributes *much* more to ATC than having more frequent keywords. Indeed, when the keywords are right next to each other, distance=1 and k=1; when there's just one word in between them, distance=2 and k=0.297, with two words between, distance=3 and k=0.146, and so on. At the same time, IDF attenuates somewhat slower. For example, in a 1 million document collection, the IDF values for keywords that match in 10, 100, and 1000 documents would be respectively 0.833, 0.667, and 0.500. So a keyword pair with two rather rare keywords that occur in just 10 documents each but with 2 other words in between would yield pair_tc = 0.101 and thus barely outweigh a pair with a 100-doc and a 1000-doc keyword with 1 other word between them and pair_tc = 0.099. Moreover, a pair of two *unique*, 1-doc keywords with 3 words between them would get a pair_tc = 0.088 and lose to a pair of two 1000-doc keywords located right next to each other and yielding a pair_tc = 0.25. So, basically, while ATC does combine both keyword frequency and proximity, it still somewhat favors proximity.\n\n### Ranking factor aggregation functions\n\nA **field aggregation function** is a single-argument function that accepts an expression with field-level factors, iterates over all matched fields, and computes the final results. The currently implemented field aggregation functions include:\n\n* `sum`, which adds the argument expression over all matched fields. For example `sum(1)` should return the number of matched fields.\n* `top`, which returns the highest value of the argument across all matched fields.\n* `max_window_hits`, manages a sliding window of hit positions to track the maximum number of hits within a specified window size. It removes outdated hits that fall outside the window and adds the latest hit, updating the maximum number of hits found within that window.\n\n### Formula expressions for all the built-in rankers\n\nMost other rankers can actually be emulated using the expression-based ranker. You just need to provide an appropriate expression. While this emulation will likely be slower than using the built-in, compiled ranker, it may still be interesting if you want to fine-tune your ranking formula starting with one of the existing ones. Additionally, the formulas describe the ranker details in a clear, readable manner.\n\n* proximity_bm25 (default ranker) = `sum(lcs*user_weight)*1000+bm25`\n* bm25 = `sum(user_weight)*1000+bm25`\n* none = `1`\n* wordcount = `sum(hit_count*user_weight)`\n* proximity = `sum(lcs*user_weight)`\n* matchany = `sum((word_count+(lcs-1)*max_lcs)*user_weight)`\n* fieldmask = `field_mask`\n* sph04 = `sum((4*lcs+2*(min_hit_pos==1)+exact_hit)*user_weight)*1000+bm25`\n\n\n### Configuration of IDF formula\n\nThe historically default IDF (Inverse Document Frequency) in Manticore is equivalent to `OPTION idf='normalized,tfidf_normalized'`, and those normalizations may cause several undesired effects.\n\nFirst, `idf=normalized` causes keyword penalization. For instance, if you search for `the | something` and `the` occurs in more than 50% of the documents, then documents with both keywords `the` and`[something` will get less weight than documents with just one keyword  `something`. Using `OPTION idf=plain` avoids this.\n\nPlain IDF varies in `[0, log(N)]` range, and keywords are never penalized; while the normalized IDF varies in `[-log(N), log(N)]` range, and too frequent keywords are penalized.\n\nSecond, `idf=tfidf_normalized` causes IDF drift over queries. Historically, we additionally divided IDF by query keyword count, so that the entire `sum(tf*idf)` over all keywords would still fit into `[0,1]` range. However, that means that queries `word1` and `word1 | nonmatchingword2` would assign different weights to the exactly same result set, because the IDFs for both `word1` and `nonmatchingword2` would be divided by 2. `OPTION idf='tfidf_unnormalized'` fixes that. Note that BM25, BM25A, BM25F() ranking factors will be scale accordingly  once you disable this normalization.\n\nIDF flags can be mixed; `plain` and `normalized` are mutually exclusive;`tfidf_unnormalized` and `tfidf_normalized` are mutually exclusive; and unspecified flags in such a mutually exclusive group take their defaults. That means that `OPTION idf=plain` is equivalent to a complete `OPTION idf='plain,tfidf_normalized'` specification.\n\n<!-- proofread -->\n\n",
        "translations": {
            "chinese": "    ATC \u672c\u8d28\u4e0a\u6309\u4ee5\u4e0b\u65b9\u5f0f\u8fd0\u4f5c\u3002\u5bf9\u4e8e\u6587\u6863\u4e2d\u6bcf\u4e2a\u5173\u952e\u8bcd\u7684*\u51fa\u73b0*\uff0c\u6211\u4eec\u8ba1\u7b97\u6240\u8c13\u7684*\u8bcd\u9879\u63a5\u8fd1\u5ea6*\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u68c0\u67e5\u8be5\u51fa\u73b0\u4f4d\u7f6e\u5de6\u53f3\u6240\u6709\u67e5\u8be2\u5173\u952e\u8bcd\uff08\u5305\u62ec\u8be5\u5173\u952e\u8bcd\u81ea\u8eab\uff09\u6700\u63a5\u8fd1\u7684\u5176\u4ed6\u51fa\u73b0\uff0c\u8ba1\u7b97\u8fd9\u4e9b\u51fa\u73b0\u7684\u4f4d\u7f6e\u8ddd\u79bb\u8870\u51cf\u7cfb\u6570 k = pow(distance, -1.75)\uff0c\u5e76\u5c06\u8870\u51cf\u540e\u7684 IDF \u6c42\u548c\u3002\u7ed3\u679c\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u5173\u952e\u8bcd\u7684\u6bcf\u4e2a\u51fa\u73b0\uff0c\u6211\u4eec\u83b7\u5f97\u4e00\u4e2a\u201c\u63a5\u8fd1\u5ea6\u201d\u503c\uff0c\u7528\u6765\u63cf\u8ff0\u8be5\u51fa\u73b0\u4f4d\u7f6e\u7684\u201c\u90bb\u5c45\u201d\u3002\u7136\u540e\uff0c\u6211\u4eec\u5c06\u8fd9\u4e9b\u6309\u51fa\u73b0\u8ba1\u7b97\u7684\u63a5\u8fd1\u5ea6\u4e58\u4ee5\u5404\u81ea\u7684\u4e3b\u9898\u5173\u952e\u8bcd IDF\uff0c\u5168\u90e8\u76f8\u52a0\uff0c\u6700\u540e\u5bf9\u8be5\u548c\u53d6\u5bf9\u6570\u3002\n\n\u6362\u53e5\u8bdd\u8bf4\uff0c\u6211\u4eec\u5904\u7406\u6587\u6863\u4e2d\u6700\u4f18\uff08\u6700\u8fd1\uff09\u7684\u5339\u914d\u5173\u952e\u8bcd\u5bf9\uff0c\u8ba1\u7b97\u6210\u5bf9\u7684\u201c\u63a5\u8fd1\u5ea6\u201d\uff0c\u4f5c\u4e3a\u5b83\u4eec IDF \u4e58\u4ee5\u8ddd\u79bb\u7cfb\u6570\u7684\u4e58\u79ef\uff1a\n\nCODE_BLOCK_59\n\n\u63a5\u7740\u6211\u4eec\u5c06\u8fd9\u4e9b\u63a5\u8fd1\u5ea6\u6c42\u548c\uff0c\u5e76\u8ba1\u7b97\u6700\u7ec8\u7684\u5e26\u5bf9\u6570\u8870\u51cf\u7684 ATC \u503c\uff1a\n\nCODE_BLOCK_60\n\n\u8bf7\u6ce8\u610f\uff0c\u8fd9\u4e2a\u6700\u7ec8\u7684\u8870\u51cf\u5bf9\u6570\u6b63\u662f\u4f60\u5e94\u4f7f\u7528 OPTION idf=plain \u7684\u539f\u56e0\uff0c\u56e0\u4e3a\u5982\u679c\u4e0d\u7528\u5b83\uff0clog() \u5185\u7684\u8868\u8fbe\u5f0f\u53ef\u80fd\u4e3a\u8d1f\u503c\u3002\n\n\u66f4\u9760\u8fd1\u7684\u5173\u952e\u8bcd\u51fa\u73b0\u5bf9 ATC \u7684\u8d21\u732e\u8fdc\u5927\u4e8e\u66f4\u9891\u7e41\u7684\u5173\u952e\u8bcd\u3002\u5b9e\u9645\u4e0a\uff0c\u5f53\u5173\u952e\u8bcd\u5f7c\u6b64\u7d27\u90bb\u65f6\uff0cdistance=1 \u4e14 k=1\uff1b\u5f53\u4e8c\u8005\u4e4b\u95f4\u9694\u4e00\u4e2a\u8bcd\u65f6\uff0cdistance=2 \u4e14 k=0.297\uff1b\u4e24\u4e2a\u8bcd\u95f4\u9694\u65f6\uff0cdistance=3 \u4e14 k=0.146\uff0c\u4f9d\u6b64\u7c7b\u63a8\u3002\u4e0e\u6b64\u540c\u65f6\uff0cIDF \u8870\u51cf\u5f97\u7a0d\u6162\u4e00\u4e9b\u3002\u4f8b\u5982\uff0c\u5728\u4e00\u767e\u4e07\u6587\u6863\u96c6\u5408\u4e2d\uff0c\u5206\u522b\u5339\u914d 10\u3001100 \u548c 1000 \u4e2a\u6587\u6863\u7684\u5173\u952e\u8bcd IDF \u503c\u5206\u522b\u4e3a 0.833\u30010.667 \u548c 0.500\u3002\u56e0\u6b64\uff0c\u4e00\u4e2a\u5305\u542b\u4e24\u4e2a\u76f8\u5f53\u7f55\u89c1\u5173\u952e\u8bcd\uff08\u5404\u81ea\u53ea\u5728 10 \u4e2a\u6587\u6863\u4e2d\u51fa\u73b0\uff09\u4e14\u95f4\u9694 2 \u4e2a\u8bcd\u7684\u5173\u952e\u8bcd\u5bf9\uff0c\u5b83\u7684 pair_tc = 0.101\uff0c\u7565\u9ad8\u4e8e\u4e00\u4e2a\u5305\u542b 100 \u4e2a\u6587\u6863\u548c 1000 \u4e2a\u6587\u6863\u5173\u952e\u8bcd\u4e14\u95f4\u9694 1 \u4e2a\u8bcd\u7684\u5173\u952e\u8bcd\u5bf9\uff0cpair_tc=0.099\u3002\u6b64\u5916\uff0c\u4e24\u4e2a*\u552f\u4e00\u7684*\u53ea\u5728\u4e00\u4e2a\u6587\u6863\u4e2d\u51fa\u73b0\u7684\u5173\u952e\u8bcd\u5e76\u4e14\u95f4\u9694 3 \u4e2a\u8bcd\u7684\u5bf9 pair_tc=0.088\uff0c\u5c06\u4e0d\u53ca\u4e24\u4e2a\u7d27\u90bb\u7684 1000-doc \u5173\u952e\u8bcd\u5bf9\uff0c\u540e\u8005 pair_tc=0.25\u3002\u6240\u4ee5\uff0c\u57fa\u672c\u4e0a\u867d\u7136 ATC \u7ed3\u5408\u4e86\u5173\u952e\u8bcd\u9891\u7387\u548c\u63a5\u8fd1\u5ea6\uff0c\u4f46\u5b83\u4f9d\u7136\u504f\u5411\u63a5\u8fd1\u5ea6\u3002\n\n### \u6392\u540d\u56e0\u5b50\u805a\u5408\u51fd\u6570\n\n**\u5b57\u6bb5\u805a\u5408\u51fd\u6570**\u662f\u4e00\u4e2a\u5355\u53c2\u6570\u51fd\u6570\uff0c\u63a5\u53d7\u5e26\u6709\u5b57\u6bb5\u7ea7\u56e0\u5b50\u7684\u8868\u8fbe\u5f0f\uff0c\u904d\u5386\u6240\u6709\u5339\u914d\u5b57\u6bb5\uff0c\u5e76\u8ba1\u7b97\u6700\u7ec8\u7ed3\u679c\u3002\u76ee\u524d\u5b9e\u73b0\u7684\u5b57\u6bb5\u805a\u5408\u51fd\u6570\u5305\u62ec\uff1a\n\n* `sum`\uff0c\u5bf9\u6240\u6709\u5339\u914d\u5b57\u6bb5\u7684\u53c2\u6570\u8868\u8fbe\u5f0f\u6c42\u548c\u3002\u4f8b\u5982 `sum(1)` \u5e94\u8be5\u8fd4\u56de\u5339\u914d\u5b57\u6bb5\u7684\u6570\u91cf\u3002\n* `top`\uff0c\u8fd4\u56de\u6240\u6709\u5339\u914d\u5b57\u6bb5\u4e2d\u53c2\u6570\u7684\u6700\u9ad8\u503c\u3002\n* `max_window_hits`\uff0c\u7ba1\u7406\u4e00\u4e2a\u6ed1\u52a8\u7a97\u53e3\u7684\u547d\u4e2d\u4f4d\u7f6e\uff0c\u8ddf\u8e2a\u6307\u5b9a\u7a97\u53e3\u5927\u5c0f\u5185\u7684\u6700\u5927\u547d\u4e2d\u6570\u3002\u5b83\u4f1a\u79fb\u9664\u7a97\u53e3\u5916\u7684\u8fc7\u671f\u547d\u4e2d\u5e76\u6dfb\u52a0\u6700\u65b0\u547d\u4e2d\uff0c\u66f4\u65b0\u8be5\u7a97\u53e3\u5185\u7684\u6700\u5927\u547d\u4e2d\u6570\u3002\n\n### \u6240\u6709\u5185\u7f6e\u6392\u5e8f\u5668\u7684\u516c\u5f0f\u8868\u8fbe\u5f0f\n\n\u5927\u591a\u6570\u5176\u4ed6\u6392\u5e8f\u5668\u5b9e\u9645\u4e0a\u53ef\u4ee5\u7528\u57fa\u4e8e\u8868\u8fbe\u5f0f\u7684\u6392\u5e8f\u5668\u6765\u6a21\u62df\u3002\u4f60\u53ea\u9700\u63d0\u4f9b\u9002\u5f53\u7684\u8868\u8fbe\u5f0f\u3002\u867d\u7136\u8be5\u6a21\u62df\u65b9\u6cd5\u53ef\u80fd\u6bd4\u4f7f\u7528\u5185\u7f6e\u7684\u7f16\u8bd1\u6392\u5e8f\u5668\u6162\uff0c\u4f46\u5982\u679c\u4f60\u60f3\u57fa\u4e8e\u73b0\u6709\u6392\u5e8f\u5668\u5fae\u8c03\u6392\u884c\u516c\u5f0f\uff0c\u8fd9\u4ecd\u53ef\u80fd\u5f88\u6709\u610f\u4e49\u3002\u6b64\u5916\uff0c\u8fd9\u4e9b\u516c\u5f0f\u4ee5\u6e05\u6670\u3001\u6613\u8bfb\u7684\u65b9\u5f0f\u63cf\u8ff0\u6392\u5e8f\u5668\u7684\u7ec6\u8282\u3002\n\n* proximity_bm25\uff08\u9ed8\u8ba4\u6392\u5e8f\u5668\uff09= `sum(lcs*user_weight)*1000+bm25`\n* bm25 = `sum(user_weight)*1000+bm25`\n* none = `1`\n* wordcount = `sum(hit_count*user_weight)`\n* proximity = `sum(lcs*user_weight)`\n* matchany = `sum((word_count+(lcs-1)*max_lcs)*user_weight)`\n* fieldmask = `field_mask`\n* sph04 = `sum((4*lcs+2*(min_hit_pos==1)+exact_hit)*user_weight)*1000+bm25`\n\n\n### IDF \u516c\u5f0f\u914d\u7f6e\n\nManticore \u5386\u53f2\u4e0a\u7684\u9ed8\u8ba4 IDF\uff08\u9006\u6587\u6863\u9891\u7387\uff09\u7b49\u4ef7\u4e8e `OPTION idf='normalized,tfidf_normalized'`\uff0c\u800c\u8fd9\u4e9b\u5f52\u4e00\u5316\u53ef\u80fd\u5bfc\u81f4\u82e5\u5e72\u4e0d\u826f\u5f71\u54cd\u3002\n\n\u9996\u5148\uff0c`idf=normalized` \u4f1a\u5bfc\u81f4\u5173\u952e\u8bcd\u60e9\u7f5a\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4f60\u641c\u7d22 `the | something`\uff0c\u4e14 `the` \u51fa\u73b0\u5728\u8d85\u8fc7 50% \u7684\u6587\u6863\u4e2d\uff0c\u90a3\u4e48\u540c\u65f6\u5305\u542b\u5173\u952e\u8bcd `the` \u548c `something` \u7684\u6587\u6863\u6743\u91cd\u4f1a\u4f4e\u4e8e\u53ea\u542b\u4e00\u4e2a\u5173\u952e\u8bcd `something` \u7684\u6587\u6863\u3002\u4f7f\u7528 `OPTION idf=plain` \u53ef\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\u3002\n\nPlain IDF \u53d8\u5316\u8303\u56f4\u5728 `[0, log(N)]`\uff0c\u5173\u952e\u8bcd\u6c38\u4e0d\u88ab\u60e9\u7f5a\uff1b\u800c normalized IDF \u53d8\u5316\u8303\u56f4\u5728 `[-log(N), log(N)]`\uff0c\u8fc7\u4e8e\u9891\u7e41\u7684\u5173\u952e\u8bcd\u4f1a\u88ab\u60e9\u7f5a\u3002\n\n\u5176\u6b21\uff0c`idf=tfidf_normalized` \u4f1a\u5bfc\u81f4 IDF \u968f\u67e5\u8be2\u6f02\u79fb\u3002\u5386\u53f2\u4e0a\uff0c\u6211\u4eec\u8fd8\u5c06 IDF \u9664\u4ee5\u67e5\u8be2\u5173\u952e\u8bcd\u6570\uff0c\u4f7f\u5f97\u6240\u6709\u5173\u952e\u8bcd\u7684 `sum(tf*idf)` \u4ecd\u5904\u4e8e `[0,1]` \u8303\u56f4\u5185\u3002\u4f46\u8fd9\u610f\u5473\u7740\u67e5\u8be2 `word1` \u548c `word1 | nonmatchingword2` \u4f1a\u5bf9\u5b8c\u5168\u76f8\u540c\u7684\u7ed3\u679c\u96c6\u8d4b\u4e88\u4e0d\u540c\u6743\u91cd\uff0c\u56e0\u4e3a `word1` \u548c `nonmatchingword2` \u7684 IDF \u90fd\u4f1a\u9664\u4ee5 2\u3002`OPTION idf='tfidf_unnormalized'` \u89e3\u51b3\u4e86\u8be5\u95ee\u9898\u3002\u8bf7\u6ce8\u610f\uff0c\u4e00\u65e6\u7981\u7528\u6b64\u5f52\u4e00\u5316\uff0cBM25\u3001BM25A\u3001BM25F() \u6392\u540d\u56e0\u5b50\u4e5f\u4f1a\u76f8\u5e94\u7f29\u653e\u3002\n\nIDF \u6807\u8bb0\u53ef\u6df7\u5408\u4f7f\u7528\uff1b`plain` \u4e0e `normalized` \u4e92\u65a5\uff1b`tfidf_unnormalized` \u4e0e `tfidf_normalized` \u4e92\u65a5\uff1b\u5728\u6b64\u7c7b\u4e92\u65a5\u7ec4\u672a\u6307\u5b9a\u6807\u8bb0\u65f6\u53d6\u9ed8\u8ba4\u503c\u3002\u8fd9\u610f\u5473\u7740 `OPTION idf=plain` \u7b49\u4ef7\u4e8e\u5b8c\u6574\u7684 `OPTION idf='plain,tfidf_normalized'` \u89c4\u683c\u3002\n\n<!-- proofread -->",
            "russian": "    ATC \u043f\u043e \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c. \u0414\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e *\u0432\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f* \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u0433\u043e \u0441\u043b\u043e\u0432\u0430 \u0432 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0435 \u043c\u044b \u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0435\u043c \u0442\u0430\u043a \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u043c\u0443\u044e *\u0431\u043b\u0438\u0437\u043e\u0441\u0442\u044c \u0442\u0435\u0440\u043c\u0438\u043d\u0430*. \u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u043c\u044b \u0440\u0430\u0441\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0435\u043c \u0432\u0441\u0435 \u0431\u043b\u0438\u0436\u0430\u0439\u0448\u0438\u0435 \u0432\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f \u0432\u0441\u0435\u0445 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 (\u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0441\u0430\u043c\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u0435 \u0441\u043b\u043e\u0432\u043e) \u0441\u043b\u0435\u0432\u0430 \u0438 \u0441\u043f\u0440\u0430\u0432\u0430 \u043e\u0442 \u0440\u0430\u0441\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0435\u043c\u043e\u0433\u043e \u0432\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f, \u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0435\u043c \u043a\u043e\u044d\u0444\u0444\u0438\u0446\u0438\u0435\u043d\u0442 \u0437\u0430\u0442\u0443\u0445\u0430\u043d\u0438\u044f \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u043a\u0430\u043a k = pow(distance, -1.75) \u0434\u043b\u044f \u044d\u0442\u0438\u0445 \u0432\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u0439 \u0438 \u0441\u0443\u043c\u043c\u0438\u0440\u0443\u0435\u043c \u0437\u0430\u0442\u0443\u0445\u0430\u044e\u0449\u0438\u0435 IDF. \u0412 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0435 \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u0433\u043e \u0441\u043b\u043e\u0432\u0430 \u043c\u044b \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \"\u0431\u043b\u0438\u0437\u043e\u0441\u0442\u0438\", \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u043e\u043f\u0438\u0441\u044b\u0432\u0430\u0435\u0442 \"\u0441\u043e\u0441\u0435\u0434\u0435\u0439\" \u044d\u0442\u043e\u0433\u043e \u0432\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f. \u0417\u0430\u0442\u0435\u043c \u043c\u044b \u0443\u043c\u043d\u043e\u0436\u0430\u0435\u043c \u044d\u0442\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0431\u043b\u0438\u0437\u043e\u0441\u0442\u0438 \u043f\u043e \u0432\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f\u043c \u043d\u0430 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0439 IDF \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u0433\u043e \u0441\u043b\u043e\u0432\u0430, \u0441\u0443\u043c\u043c\u0438\u0440\u0443\u0435\u043c \u0438\u0445 \u0432\u0441\u0435 \u0438, \u043d\u0430\u043a\u043e\u043d\u0435\u0446, \u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0435\u043c \u043b\u043e\u0433\u0430\u0440\u0438\u0444\u043c \u044d\u0442\u043e\u0439 \u0441\u0443\u043c\u043c\u044b.\n\n\u0414\u0440\u0443\u0433\u0438\u043c\u0438 \u0441\u043b\u043e\u0432\u0430\u043c\u0438, \u043c\u044b \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u043c \u043b\u0443\u0447\u0448\u0438\u0435 (\u0431\u043b\u0438\u0436\u0430\u0439\u0448\u0438\u0435) \u0441\u043e\u0432\u043f\u0430\u0432\u0448\u0438\u0435 \u043f\u0430\u0440\u044b \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432 \u0432 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0435 \u0438 \u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0435\u043c \u043f\u043e\u043f\u0430\u0440\u043d\u044b\u0435 \"\u0431\u043b\u0438\u0437\u043e\u0441\u0442\u0438\" \u043a\u0430\u043a \u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u0438\u0445 IDF, \u043c\u0430\u0441\u0448\u0442\u0430\u0431\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0435 \u043a\u043e\u044d\u0444\u0444\u0438\u0446\u0438\u0435\u043d\u0442\u043e\u043c \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u044f:\n\nCODE_BLOCK_59\n\n\u0417\u0430\u0442\u0435\u043c \u043c\u044b \u0441\u0443\u043c\u043c\u0438\u0440\u0443\u0435\u043c \u0442\u0430\u043a\u0438\u0435 \u0431\u043b\u0438\u0437\u043e\u0441\u0442\u0438 \u0438 \u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0435\u043c \u043a\u043e\u043d\u0435\u0447\u043d\u043e\u0435, \u043b\u043e\u0433\u0430\u0440\u0438\u0444\u043c\u0438\u0447\u0435\u0441\u043a\u0438 \u0437\u0430\u0442\u0443\u0445\u0430\u044e\u0449\u0435\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 ATC:\n\nCODE_BLOCK_60\n\n\u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435, \u0447\u0442\u043e \u0438\u043c\u0435\u043d\u043d\u043e \u044d\u0442\u043e\u0442 \u043a\u043e\u043d\u0435\u0447\u043d\u044b\u0439 \u043b\u043e\u0433\u0430\u0440\u0438\u0444\u043c \u0437\u0430\u0442\u0443\u0445\u0430\u043d\u0438\u044f \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043f\u0440\u0438\u0447\u0438\u043d\u043e\u0439, \u043f\u043e \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c OPTION idf=plain, \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u0431\u0435\u0437 \u043d\u0435\u0433\u043e \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0432\u043d\u0443\u0442\u0440\u0438 log() \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u043c.\n\n\u0411\u043e\u043b\u0435\u0435 \u0431\u043b\u0438\u0437\u043a\u0438\u0435 \u0432\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432 \u0432\u043d\u043e\u0441\u044f\u0442 *\u043d\u0430\u043c\u043d\u043e\u0433\u043e* \u0431\u043e\u043b\u044c\u0448\u0438\u0439 \u0432\u043a\u043b\u0430\u0434 \u0432 ATC, \u0447\u0435\u043c \u0431\u043e\u043b\u0435\u0435 \u0447\u0430\u0441\u0442\u043e\u0435 \u043f\u043e\u044f\u0432\u043b\u0435\u043d\u0438\u0435 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432. \u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e, \u043a\u043e\u0433\u0434\u0430 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0441\u043b\u043e\u0432\u0430 \u043d\u0430\u0445\u043e\u0434\u044f\u0442\u0441\u044f \u043f\u0440\u044f\u043c\u043e \u0440\u044f\u0434\u043e\u043c \u0434\u0440\u0443\u0433 \u0441 \u0434\u0440\u0443\u0433\u043e\u043c, distance=1 \u0438 k=1; \u043a\u043e\u0433\u0434\u0430 \u043c\u0435\u0436\u0434\u0443 \u043d\u0438\u043c\u0438 \u043e\u0434\u043d\u043e \u0441\u043b\u043e\u0432\u043e, distance=2 \u0438 k=0.297, \u0441 \u0434\u0432\u0443\u043c\u044f \u0441\u043b\u043e\u0432\u0430\u043c\u0438 \u043c\u0435\u0436\u0434\u0443 \u043d\u0438\u043c\u0438 distance=3 \u0438 k=0.146, \u0438 \u0442\u0430\u043a \u0434\u0430\u043b\u0435\u0435. \u041f\u0440\u0438 \u044d\u0442\u043e\u043c IDF \u043e\u0441\u043b\u0430\u0431\u043b\u044f\u0435\u0442\u0441\u044f \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043c\u0435\u0434\u043b\u0435\u043d\u043d\u0435\u0435. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0432 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438 \u0438\u0437 1 \u043c\u0438\u043b\u043b\u0438\u043e\u043d\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f IDF \u0434\u043b\u044f \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432, \u0432\u0441\u0442\u0440\u0435\u0447\u0430\u044e\u0449\u0438\u0445\u0441\u044f \u0432 10, 100 \u0438 1000 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0445, \u0431\u0443\u0434\u0443\u0442 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e 0.833, 0.667 \u0438 0.500. \u0422\u0430\u043a\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c, \u043f\u0430\u0440\u0430 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432 \u0441 \u0434\u0432\u0443\u043c\u044f \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u0440\u0435\u0434\u043a\u0438\u043c\u0438 \u0441\u043b\u043e\u0432\u0430\u043c\u0438, \u043f\u043e\u044f\u0432\u043b\u044f\u044e\u0449\u0438\u043c\u0438\u0441\u044f \u0432 10 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0445 \u043a\u0430\u0436\u0434\u043e\u0435, \u043d\u043e \u0441 \u0434\u0432\u0443\u043c\u044f \u0434\u0440\u0443\u0433\u0438\u043c\u0438 \u0441\u043b\u043e\u0432\u0430\u043c\u0438 \u043c\u0435\u0436\u0434\u0443 \u043d\u0438\u043c\u0438 \u0434\u0430\u0441\u0442 pair_tc = 0.101 \u0438 \u0435\u0434\u0432\u0430 \u043f\u0440\u0435\u0432\u0437\u043e\u0439\u0434\u0435\u0442 \u043f\u0430\u0440\u0443 \u0441 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u043c\u0438 \u0441\u043b\u043e\u0432\u0430\u043c\u0438 \u0438\u0437 100 \u0438 1000 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432 \u0441 \u043e\u0434\u043d\u0438\u043c \u0441\u043b\u043e\u0432\u043e\u043c \u043c\u0435\u0436\u0434\u0443 \u043d\u0438\u043c\u0438 \u0438 pair_tc = 0.099. \u0411\u043e\u043b\u0435\u0435 \u0442\u043e\u0433\u043e, \u043f\u0430\u0440\u0430 \u0434\u0432\u0443\u0445 *\u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0445*, \u043e\u0434\u043d\u043e-\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043d\u044b\u0445 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432 \u0441 \u0442\u0440\u0435\u043c\u044f \u0441\u043b\u043e\u0432\u0430\u043c\u0438 \u043c\u0435\u0436\u0434\u0443 \u043d\u0438\u043c\u0438 \u043f\u043e\u043b\u0443\u0447\u0438\u0442 pair_tc = 0.088 \u0438 \u0443\u0441\u0442\u0443\u043f\u0438\u0442 \u043f\u0430\u0440\u0435 \u0438\u0437 \u0434\u0432\u0443\u0445 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432, \u0432\u0441\u0442\u0440\u0435\u0447\u0430\u044e\u0449\u0438\u0445\u0441\u044f \u0432 1000 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432, \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0445 \u0440\u044f\u0434\u043e\u043c \u0438 \u0434\u0430\u044e\u0449\u0438\u0445 pair_tc = 0.25. \u0422\u0430\u043a\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c, \u0432 \u043e\u0431\u0449\u0435\u043c, \u0445\u043e\u0442\u044f ATC \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0441\u043e\u0447\u0435\u0442\u0430\u0435\u0442 \u0447\u0430\u0441\u0442\u043e\u0442\u0443 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432 \u0438 \u0431\u043b\u0438\u0437\u043e\u0441\u0442\u044c, \u0432\u0441\u0451 \u0436\u0435 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0442\u0435\u043d\u0438\u0435 \u043e\u0442\u0434\u0430\u0435\u0442\u0441\u044f \u0431\u043b\u0438\u0437\u043e\u0441\u0442\u0438.\n\n### \u0424\u0443\u043d\u043a\u0446\u0438\u0438 \u0430\u0433\u0440\u0435\u0433\u0430\u0446\u0438\u0438 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432 \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f\n\n**\u0424\u0443\u043d\u043a\u0446\u0438\u044f \u0430\u0433\u0440\u0435\u0433\u0430\u0446\u0438\u0438 \u043f\u043e \u043f\u043e\u043b\u044e** \u2014 \u044d\u0442\u043e \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0441 \u043e\u0434\u043d\u0438\u043c \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u043e\u043c, \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u044e\u0449\u0430\u044f \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0441 \u0444\u0430\u043a\u0442\u043e\u0440\u0430\u043c\u0438 \u043d\u0430 \u0443\u0440\u043e\u0432\u043d\u0435 \u043f\u043e\u043b\u044f, \u043f\u0435\u0440\u0435\u0431\u0438\u0440\u0430\u044e\u0449\u0430\u044f \u0432\u0441\u0435 \u0441\u043e\u0432\u043f\u0430\u0432\u0448\u0438\u0435 \u043f\u043e\u043b\u044f \u0438 \u0432\u044b\u0447\u0438\u0441\u043b\u044f\u044e\u0449\u0430\u044f \u043a\u043e\u043d\u0435\u0447\u043d\u044b\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442. \u0412 \u043d\u0430\u0441\u0442\u043e\u044f\u0449\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u044b \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0430\u0433\u0440\u0435\u0433\u0430\u0446\u0438\u0438 \u043f\u043e \u043f\u043e\u043b\u044f\u043c:\n\n* `sum`, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0441\u043a\u043b\u0430\u0434\u044b\u0432\u0430\u0435\u0442 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442 \u043f\u043e \u0432\u0441\u0435\u043c \u0441\u043e\u0432\u043f\u0430\u0432\u0448\u0438\u043c \u043f\u043e\u043b\u044f\u043c. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, `sum(1)` \u0434\u043e\u043b\u0436\u0435\u043d \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0442\u044c \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u043e\u0432\u043f\u0430\u0432\u0448\u0438\u0445 \u043f\u043e\u043b\u0435\u0439.\n* `top`, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u043d\u0430\u0438\u0431\u043e\u043b\u044c\u0448\u0435\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u0430 \u043f\u043e \u0432\u0441\u0435\u043c \u0441\u043e\u0432\u043f\u0430\u0432\u0448\u0438\u043c \u043f\u043e\u043b\u044f\u043c.\n* `max_window_hits`, \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u0441\u043a\u043e\u043b\u044c\u0437\u044f\u0449\u0438\u043c \u043e\u043a\u043d\u043e\u043c \u043f\u043e\u0437\u0438\u0446\u0438\u0439 \u0445\u0438\u0442\u043e\u0432, \u0447\u0442\u043e\u0431\u044b \u043e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u0442\u044c \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0445\u0438\u0442\u043e\u0432 \u0432 \u043f\u0440\u0435\u0434\u0435\u043b\u0430\u0445 \u0437\u0430\u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0440\u0430\u0437\u043c\u0435\u0440\u0430 \u043e\u043a\u043d\u0430. \u0423\u0434\u0430\u043b\u044f\u0435\u0442 \u0443\u0441\u0442\u0430\u0440\u0435\u0432\u0448\u0438\u0435 \u0445\u0438\u0442\u044b, \u0432\u044b\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0437\u0430 \u043f\u0440\u0435\u0434\u0435\u043b\u044b \u043e\u043a\u043d\u0430, \u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u0445\u0438\u0442, \u043e\u0431\u043d\u043e\u0432\u043b\u044f\u044f \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0445\u0438\u0442\u043e\u0432 \u0432 \u044d\u0442\u043e\u043c \u043e\u043a\u043d\u0435.\n\n### \u0424\u043e\u0440\u043c\u0443\u043b\u044b \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0439 \u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u0432\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u0445 \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0449\u0438\u043a\u043e\u0432\n\n\u0411\u043e\u043b\u044c\u0448\u0438\u043d\u0441\u0442\u0432\u043e \u0434\u0440\u0443\u0433\u0438\u0445 \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0449\u0438\u043a\u043e\u0432 \u043d\u0430 \u0441\u0430\u043c\u043e\u043c \u0434\u0435\u043b\u0435 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u0441\u043c\u043e\u0434\u0435\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u044b \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0449\u0438\u043a\u0430 \u043d\u0430 \u0431\u0430\u0437\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0439. \u0412\u0430\u043c \u043f\u0440\u043e\u0441\u0442\u043e \u043d\u0443\u0436\u043d\u043e \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435. \u0425\u043e\u0442\u044f \u0442\u0430\u043a\u0430\u044f \u0438\u043c\u0438\u0442\u0430\u0446\u0438\u044f, \u0432\u0435\u0440\u043e\u044f\u0442\u043d\u043e, \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u043c\u0435\u0434\u043b\u0435\u043d\u043d\u0435\u0435, \u0447\u0435\u043c \u0432\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u0439 \u043a\u043e\u043c\u043f\u0438\u043b\u0438\u0440\u0443\u0435\u043c\u044b\u0439 \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0449\u0438\u043a, \u043e\u043d\u0430 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u0430, \u0435\u0441\u043b\u0438 \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u0442\u043e\u043d\u043a\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0444\u043e\u0440\u043c\u0443\u043b\u0443 \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f, \u043d\u0430\u0447\u0438\u043d\u0430\u044f \u0441 \u043e\u0434\u043d\u043e\u0439 \u0438\u0437 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0445. \u041a\u0440\u043e\u043c\u0435 \u0442\u043e\u0433\u043e, \u0444\u043e\u0440\u043c\u0443\u043b\u044b \u043e\u043f\u0438\u0441\u044b\u0432\u0430\u044e\u0442 \u0434\u0435\u0442\u0430\u043b\u0438 \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0449\u0438\u043a\u0430 \u0432 \u044f\u0441\u043d\u043e\u0439, \u0443\u0434\u043e\u0431\u043e\u0447\u0438\u0442\u0430\u0435\u043c\u043e\u0439 \u0444\u043e\u0440\u043c\u0435.\n\n* proximity_bm25 (\u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0449\u0438\u043a \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e) = `sum(lcs*user_weight)*1000+bm25`\n* bm25 = `sum(user_weight)*1000+bm25`\n* none = `1`\n* wordcount = `sum(hit_count*user_weight)`\n* proximity = `sum(lcs*user_weight)`\n* matchany = `sum((word_count+(lcs-1)*max_lcs)*user_weight)`\n* fieldmask = `field_mask`\n* sph04 = `sum((4*lcs+2*(min_hit_pos==1)+exact_hit)*user_weight)*1000+bm25`\n\n\n### \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0444\u043e\u0440\u043c\u0443\u043b\u044b IDF\n\n\u0418\u0441\u0442\u043e\u0440\u0438\u0447\u0435\u0441\u043a\u0438 \u0434\u0435\u0444\u043e\u043b\u0442\u043d\u044b\u0439 IDF (\u043e\u0431\u0440\u0430\u0442\u043d\u0430\u044f \u0447\u0430\u0441\u0442\u043e\u0442\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430) \u0432 Manticore \u044d\u043a\u0432\u0438\u0432\u0430\u043b\u0435\u043d\u0442\u0435\u043d `OPTION idf='normalized,tfidf_normalized'`, \u0438 \u044d\u0442\u0438 \u043d\u043e\u0440\u043c\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u043c\u043e\u0433\u0443\u0442 \u0432\u044b\u0437\u044b\u0432\u0430\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043d\u0435\u0436\u0435\u043b\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u044d\u0444\u0444\u0435\u043a\u0442\u043e\u0432.\n\n\u0412\u043e-\u043f\u0435\u0440\u0432\u044b\u0445, `idf=normalized` \u0432\u044b\u0437\u044b\u0432\u0430\u0435\u0442 \u0448\u0442\u0440\u0430\u0444\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0435\u0441\u043b\u0438 \u0432\u044b \u0438\u0449\u0435\u0442\u0435 `the | something` \u0438 `the` \u0432\u0441\u0442\u0440\u0435\u0447\u0430\u0435\u0442\u0441\u044f \u0431\u043e\u043b\u0435\u0435 \u0447\u0435\u043c \u0432 50% \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432, \u0442\u043e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b \u0441 \u043e\u0431\u043e\u0438\u043c\u0438 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u043c\u0438 \u0441\u043b\u043e\u0432\u0430\u043c\u0438 `the` \u0438 `something` \u043f\u043e\u043b\u0443\u0447\u0430\u0442 \u043c\u0435\u043d\u044c\u0448\u0438\u0439 \u0432\u0435\u0441, \u0447\u0435\u043c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b \u0442\u043e\u043b\u044c\u043a\u043e \u0441 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u043c \u0441\u043b\u043e\u0432\u043e\u043c `something`. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 `OPTION idf=plain` \u0438\u0437\u0431\u0435\u0433\u0430\u0435\u0442 \u044d\u0442\u043e\u0433\u043e.\n\n\u041f\u0440\u043e\u0441\u0442\u043e\u0439 IDF \u0432\u0430\u0440\u044c\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u0432 \u0434\u0438\u0430\u043f\u0430\u0437\u043e\u043d\u0435 `[0, log(N)]`, \u0438 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0441\u043b\u043e\u0432\u0430 \u043d\u0438\u043a\u043e\u0433\u0434\u0430 \u043d\u0435 \u0448\u0442\u0440\u0430\u0444\u0443\u044e\u0442\u0441\u044f; \u0432 \u0442\u043e \u0432\u0440\u0435\u043c\u044f \u043a\u0430\u043a \u043d\u043e\u0440\u043c\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u044b\u0439 IDF \u0432\u0430\u0440\u044c\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u0432 \u0434\u0438\u0430\u043f\u0430\u0437\u043e\u043d\u0435 `[-log(N), log(N)]`, \u0438 \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0447\u0430\u0441\u0442\u044b\u0435 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0441\u043b\u043e\u0432\u0430 \u0448\u0442\u0440\u0430\u0444\u0443\u044e\u0442\u0441\u044f.\n\n\u0412\u043e-\u0432\u0442\u043e\u0440\u044b\u0445, `idf=tfidf_normalized` \u0432\u044b\u0437\u044b\u0432\u0430\u0435\u0442 \u0434\u0440\u0435\u0439\u0444 IDF \u043f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0430\u043c. \u0418\u0441\u0442\u043e\u0440\u0438\u0447\u0435\u0441\u043a\u0438 \u043c\u044b \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u0435\u043b\u0438\u043b\u0438 IDF \u043d\u0430 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432 \u0437\u0430\u043f\u0440\u043e\u0441\u0430, \u0447\u0442\u043e\u0431\u044b \u0441\u0443\u043c\u043c\u0430 `sum(tf*idf)` \u043f\u043e \u0432\u0441\u0435\u043c \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u043c \u0441\u043b\u043e\u0432\u0430\u043c \u0432\u0441\u0451 \u0435\u0449\u0451 \u0443\u043a\u043b\u0430\u0434\u044b\u0432\u0430\u043b\u0430\u0441\u044c \u0432 \u0434\u0438\u0430\u043f\u0430\u0437\u043e\u043d `[0,1]`. \u041e\u0434\u043d\u0430\u043a\u043e \u044d\u0442\u043e \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442, \u0447\u0442\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u044b `word1` \u0438  `word1 | nonmatchingword2` \u043f\u0440\u0438\u0441\u0432\u0430\u0438\u0432\u0430\u044e\u0442 \u0440\u0430\u0437\u043d\u044b\u0435 \u0432\u0435\u0441\u0430 \u0430\u0431\u0441\u043e\u043b\u044e\u0442\u043d\u043e \u043e\u0434\u043d\u043e\u043c\u0443 \u0438 \u0442\u043e\u043c\u0443 \u0436\u0435 \u043d\u0430\u0431\u043e\u0440\u0443 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432, \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e IDF \u0438 \u0434\u043b\u044f `word1`, \u0438 \u0434\u043b\u044f `nonmatchingword2` \u0434\u0435\u043b\u0438\u0442\u0441\u044f \u043d\u0430 2. `OPTION idf='tfidf_unnormalized'` \u0438\u0441\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u044d\u0442\u043e. \u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435, \u0447\u0442\u043e \u0444\u0430\u043a\u0442\u043e\u0440\u044b \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f BM25, BM25A, BM25F() \u0431\u0443\u0434\u0443\u0442 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e \u043c\u0430\u0441\u0448\u0442\u0430\u0431\u0438\u0440\u043e\u0432\u0430\u043d\u044b \u043f\u043e\u0441\u043b\u0435 \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u044d\u0442\u043e\u0439 \u043d\u043e\u0440\u043c\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438.\n\n\u0424\u043b\u0430\u0433\u0438 IDF \u043c\u043e\u0436\u043d\u043e \u043a\u043e\u043c\u0431\u0438\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c; `plain` \u0438 `normalized` \u0432\u0437\u0430\u0438\u043c\u043d\u043e \u0438\u0441\u043a\u043b\u044e\u0447\u0430\u044e\u0442 \u0434\u0440\u0443\u0433 \u0434\u0440\u0443\u0433\u0430; `tfidf_unnormalized` \u0438 `tfidf_normalized` \u0432\u0437\u0430\u0438\u043c\u043d\u043e \u0438\u0441\u043a\u043b\u044e\u0447\u0430\u044e\u0442 \u0434\u0440\u0443\u0433 \u0434\u0440\u0443\u0433\u0430; \u0438 \u043d\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u044b\u0435 \u0444\u043b\u0430\u0433\u0438 \u0432 \u0442\u0430\u043a\u043e\u0439 \u0432\u0437\u0430\u0438\u043c\u043d\u043e \u0438\u0441\u043a\u043b\u044e\u0447\u0430\u044e\u0449\u0435\u0439 \u0433\u0440\u0443\u043f\u043f\u0435 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u044e\u0442 \u0441\u0432\u043e\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e. \u042d\u0442\u043e \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442, \u0447\u0442\u043e `OPTION idf=plain` \u044d\u043a\u0432\u0438\u0432\u0430\u043b\u0435\u043d\u0442\u0435\u043d \u043f\u043e\u043b\u043d\u043e\u0439 \u0441\u043f\u0435\u0446\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438 `OPTION idf='plain,tfidf_normalized'`.\n\n<!-- proofread -->"
        },
        "is_code_or_comment": false,
        "model": "openai:gpt-4.1-mini",
        "updated_at": 1766339808
    },
    "b7dbc78b5a41e135ed705bfe4e8bd5b8016a9af81ce7880cdf20fe5749a1aac4": {
        "original": "A **field-level factor** is a numeric value computed by the ranking engine for every matched in-document text field regards to the current query. As more than one field can be matched by a query, but the final weight needs to be a single integer value, these values need to be folded into a single one. To achieve that, field-level factors can only be used within a field aggregation function, they can **not** be used anywhere in the expression. For example, you cannot use `(lcs+bm25)` as your ranking expression, as `lcs` takes multiple values (one in every matched field). You should use `(sum(lcs)+bm25)` instead, that expression sums `lcs` over all matching fields, and then adds `bm25` to that per-field sum. Currently implemented field-level factors are:\n\n* `lcs` (integer), the length of a maximum verbatim match between the document and the query, counted in words. LCS stands for Longest Common Subsequence (or Subset). Takes a minimum value of 1 when only stray keywords were matched in a field, and a maximum value of query keywords count when the entire query was matched in a field verbatim (in the exact query keywords order). For example, if the query is 'hello world' and the field contains these two words quoted from the query (that is, adjacent to each other, and exactly in the query order), `lcs` will be 2. For example, if the query is 'hello world program' and the field contains 'hello world', `lcs` will be 2. Note that any subset of the query keyword works, not just a subset of adjacent keywords. For example, if the query is 'hello world program' and the field contains 'hello (test program)', `lcs` will be 2 just as well, because both 'hello' and 'program' matched in the same respective positions as they were in the query. Finally, if the query is 'hello world program' and the field contains 'hello world program', `lcs` will be 3. (Hopefully that is unsurprising at this point.)\n* `user_weight` (integer), the user specified per-field weight (refer to [OPTION field_weights](../Searching/Options.md#field_weights) in SQL). The weights default to 1 if not specified explicitly.\n* `hit_count` (integer), the number of keyword occurrences that matched in the field. Note that a single keyword may occur multiple times. For example, if 'hello' occurs 3 times in a field and 'world' occurs 5 times, `hit_count` will be 8.\n* `word_count` (integer), the number of unique keywords matched in the field. For example, if 'hello' and 'world' occur anywhere in a field, `word_count` will be 2, regardless of how many times both keywords occur.\n* `tf_idf` (float), the sum of TF/IDF over all the keywords matched in the field. IDF is the Inverse Document Frequency, a floating point value between 0 and 1 that describes how frequent the keyword is (basically, 0 for a keyword that occurs in every document indexed, and 1 for a unique keyword that occurs in just a single document). TF is the Term Frequency, the number of matched keyword occurrences in the field. As a side note, `tf_idf` is actually computed by summing IDF over all matched occurrences. That's by construction equivalent to summing TF*IDF over all matched keywords.\n* `min_hit_pos` (integer), the position of the first matched keyword occurrence, counted in words\n\n   Therefore, this is a relatively low-level, \"raw\" factor that you'll likely want to *adjust* before using it for ranking. The specific adjustments depend heavily on your data and the resulting formula, but here are a few ideas to start with: (a) any min_gaps-based boosts could be simply ignored when word_count<2;\n\n    (b) non-trivial min_gaps values (i.e., when word_count>=2) could be clamped with a certain \"worst-case\" constant, while trivial values (i.e., when min_gaps=0 and word_count<2) could be replaced by that constant;\n\n    (c) a transfer function like 1/(1+min_gaps) could be applied (so that better, smaller min_gaps values would maximize it, and worse, larger min_gaps values would fall off slowly); and so on.\n* `lccs` (integer). Longest Common Contiguous Subsequence. The length of the longest subphrase common between the query and the document, computed in keywords.\n\n    The LCCS factor is somewhat similar to LCS but more restrictive. While LCS can be greater than 1 even if no two query words are matched next to each other, LCCS will only be greater than 1 if there are *exact*, contiguous query subphrases in the document. For example, (one two three four five) query vs (one hundred three hundred five hundred) document would yield lcs=3, but lccs=1, because although the mutual dispositions of 3 keywords (one, three, five) match between the query and the document, no 2 matching positions are actually adjacent.\n\n    Note that LCCS still doesn't differentiate between frequent and rare keywords; for that, see WLCCS.\n* `wlccs` (float). Weighted Longest Common Contiguous Subsequence. The sum of IDFs of the keywords of the longest subphrase common between the query and the document.\n\n    WLCCS is calculated similarly to LCCS, but every \"suitable\" keyword occurrence increases it by the keyword IDF instead of just by 1 (as with LCS and LCCS). This allows ranking sequences of rarer and more important keywords higher than sequences of frequent keywords, even if the latter are longer. For example, a query `(Zanzibar bed and breakfast)` would yield lccs=1 for a `(hotels of Zanzibar)` document, but lccs=3 against `(London bed and breakfast)`, even though \"Zanzibar\" is actually somewhat rarer than the entire \"bed and breakfast\" phrase. The WLCCS factor addresses this issue by using keyword frequencies.\n* `atc` (float). Aggregate Term Closeness. A proximity-based measure that increases when the document contains more groups of more closely located and more important (rare) query keywords.\n\n    **WARNING:** you should use ATC with OPTION idf='plain,tfidf_unnormalized' (see [below](../Searching/Sorting_and_ranking.md#Configuration-of-IDF-formula)); otherwise, you may get unexpected results.",
        "translations": {
            "chinese": "\u4e00\u4e2a**\u5b57\u6bb5\u7ea7\u56e0\u5b50**\u662f\u6392\u540d\u5f15\u64ce\u9488\u5bf9\u5f53\u524d\u67e5\u8be2\u8ba1\u7b97\u7684\u6bcf\u4e2a\u5339\u914d\u6587\u6863\u5185\u6587\u672c\u5b57\u6bb5\u7684\u6570\u503c\u3002\u7531\u4e8e\u4e00\u4e2a\u67e5\u8be2\u53ef\u4ee5\u5339\u914d\u4e0d\u6b62\u4e00\u4e2a\u5b57\u6bb5\uff0c\u4f46\u6700\u7ec8\u6743\u91cd\u9700\u8981\u662f\u4e00\u4e2a\u5355\u4e00\u7684\u6574\u6570\u503c\uff0c\u8fd9\u4e9b\u503c\u9700\u8981\u88ab\u5408\u5e76\u6210\u4e00\u4e2a\u3002\u4e3a\u6b64\uff0c\u5b57\u6bb5\u7ea7\u56e0\u5b50\u53ea\u80fd\u5728\u5b57\u6bb5\u805a\u5408\u51fd\u6570\u4e2d\u4f7f\u7528\uff0c**\u4e0d\u80fd**\u5728\u8868\u8fbe\u5f0f\u7684\u5176\u4ed6\u4efb\u4f55\u5730\u65b9\u4f7f\u7528\u3002\u4f8b\u5982\uff0c\u4f60\u4e0d\u80fd\u4f7f\u7528 `(lcs+bm25)` \u4f5c\u4e3a\u4f60\u7684\u6392\u540d\u8868\u8fbe\u5f0f\uff0c\u56e0\u4e3a `lcs` \u5bf9\u6bcf\u4e2a\u5339\u914d\u5b57\u6bb5\u4f1a\u6709\u591a\u4e2a\u503c\u3002\u4f60\u5e94\u8be5\u4f7f\u7528 `(sum(lcs)+bm25)`\uff0c\u8be5\u8868\u8fbe\u5f0f\u4f1a\u5bf9\u6240\u6709\u5339\u914d\u5b57\u6bb5\u4e2d\u7684 `lcs` \u6c42\u548c\uff0c\u7136\u540e\u52a0\u4e0a `bm25`\u3002\u5f53\u524d\u5b9e\u73b0\u7684\u5b57\u6bb5\u7ea7\u56e0\u5b50\u6709\uff1a\n\n* `lcs` (\u6574\u6570)\uff0c\u6587\u6863\u548c\u67e5\u8be2\u4e4b\u95f4\u6700\u957f\u7cbe\u786e\u5339\u914d\u7684\u957f\u5ea6\uff0c\u6309\u5355\u8bcd\u8ba1\u6570\u3002LCS \u4ee3\u8868\u6700\u957f\u516c\u5171\u5b50\u5e8f\u5217\uff08\u6216\u5b50\u96c6\uff09\u3002\u5f53\u5b57\u6bb5\u4e2d\u53ea\u5339\u914d\u4e86\u96f6\u6563\u5173\u952e\u8bcd\u65f6\u53d6\u6700\u5c0f\u503c 1\uff0c\u5f53\u5b57\u6bb5\u5b8c\u5168\u9010\u5b57\u5339\u914d\u6574\u4e2a\u67e5\u8be2\u65f6\u53d6\u6700\u5927\u503c\uff0c\u5373\u67e5\u8be2\u5173\u952e\u8bcd\u6570\u91cf\uff08\u4e14\u8bcd\u5e8f\u5b8c\u5168\u76f8\u540c\uff09\u3002\u4f8b\u5982\uff0c\u82e5\u67e5\u8be2\u662f 'hello world' \u4e14\u5b57\u6bb5\u5305\u542b\u8fd9\u4e24\u4e2a\u8bcd\u6309\u67e5\u8be2\u987a\u5e8f\u76f8\u90bb\u51fa\u73b0\uff0c\u5219 `lcs` \u4e3a 2\u3002\u518d\u5982\uff0c\u67e5\u8be2\u4e3a 'hello world program'\uff0c\u5b57\u6bb5\u5305\u542b 'hello world'\uff0c\u5219 `lcs` \u4e3a 2\u3002\u6ce8\u610f\uff0c\u5339\u914d\u7684\u5173\u952e\u8bcd\u53ef\u4ee5\u662f\u67e5\u8be2\u5173\u952e\u8bcd\u7684\u4efb\u610f\u5b50\u96c6\uff0c\u800c\u4e0d\u5fc5\u662f\u76f8\u90bb\u5173\u952e\u8bcd\u7684\u5b50\u96c6\u3002\u4f8b\u5982\uff0c\u82e5\u67e5\u8be2\u4e3a 'hello world program'\uff0c\u5b57\u6bb5\u5305\u542b 'hello (test program)'\uff0c`lcs` \u4e5f\u4e3a 2\uff0c\u56e0\u4e3a 'hello' \u548c 'program' \u5206\u522b\u5728\u5b57\u6bb5\u4e2d\u4e0e\u67e5\u8be2\u4f4d\u7f6e\u5bf9\u5e94\u5339\u914d\u3002\u6700\u540e\uff0c\u82e5\u67e5\u8be2\u4e3a 'hello world program'\uff0c\u5b57\u6bb5\u5305\u542b 'hello world program'\uff0c\u5219 `lcs` \u4e3a 3\u3002\uff08\u6b64\u65f6\u5e94\u8be5\u4e0d\u610f\u5916\u4e86\u3002\uff09\n* `user_weight` (\u6574\u6570)\uff0c\u7528\u6237\u6307\u5b9a\u7684\u6bcf\u5b57\u6bb5\u6743\u91cd\uff08\u53c2\u8003 SQL \u4e2d\u7684 [OPTION field_weights](../Searching/Options.md#field_weights)\uff09\u3002\u82e5\u672a\u663e\u5f0f\u6307\u5b9a\uff0c\u6743\u91cd\u9ed8\u8ba4\u4e3a 1\u3002\n* `hit_count` (\u6574\u6570)\uff0c\u5b57\u6bb5\u4e2d\u5339\u914d\u5230\u7684\u5173\u952e\u8bcd\u51fa\u73b0\u6b21\u6570\u3002\u6ce8\u610f\uff0c\u5355\u4e2a\u5173\u952e\u8bcd\u53ef\u51fa\u73b0\u591a\u6b21\u3002\u4f8b\u5982\uff0c\u82e5\u5b57\u6bb5\u4e2d 'hello' \u51fa\u73b0\u4e86 3 \u6b21\uff0c'world' \u51fa\u73b0\u4e86 5 \u6b21\uff0c`hit_count` \u4e3a 8\u3002\n* `word_count` (\u6574\u6570)\uff0c\u5b57\u6bb5\u4e2d\u5339\u914d\u5230\u7684\u4e0d\u540c\u5173\u952e\u8bcd\u6570\u91cf\u3002\u4f8b\u5982\uff0c\u82e5\u5b57\u6bb5\u4e2d\u51fa\u73b0 'hello' \u548c 'world'\uff0c`word_count` \u4e3a 2\uff0c\u4e0d\u8bba\u5b83\u4eec\u51fa\u73b0\u6b21\u6570\u591a\u5c11\u3002\n* `tf_idf` (\u6d6e\u70b9\u6570)\uff0c\u5b57\u6bb5\u4e2d\u6240\u6709\u5339\u914d\u5173\u952e\u8bcd\u7684 TF/IDF \u4e4b\u548c\u3002IDF \u8868\u793a\u9006\u6587\u6863\u9891\u7387\uff0c\u662f 0 \u5230 1 \u4e4b\u95f4\u7684\u6d6e\u70b9\u503c\uff0c\u63cf\u8ff0\u5173\u952e\u8bcd\u7684\u9891\u7387\uff08\u57fa\u672c\u4e0a\uff0c\u51fa\u73b0\u4e8e\u6bcf\u4e2a\u7d22\u5f15\u6587\u6863\u7684\u5173\u952e\u8bcd IDF \u4e3a 0\uff0c\u800c\u53ea\u51fa\u73b0\u4e8e\u5355\u4e00\u6587\u6863\u7684\u5173\u952e\u8bcd IDF \u4e3a 1\uff09\u3002TF \u662f\u672f\u8bed\u9891\u7387\uff0c\u5b57\u6bb5\u4e2d\u5339\u914d\u5173\u952e\u8bcd\u51fa\u73b0\u6b21\u6570\u3002\u987a\u5e26\u4e00\u63d0\uff0c`tf_idf` \u5b9e\u9645\u662f\u901a\u8fc7\u5bf9\u6240\u6709\u5339\u914d\u51fa\u73b0\u7d2f\u52a0 IDF \u8ba1\u7b97\u7684\u3002\u6309\u7167\u6784\u9020\u65b9\u6cd5\uff0c\u8fd9\u7b49\u4ef7\u4e8e\u5bf9\u6240\u6709\u5339\u914d\u5173\u952e\u8bcd\u7d2f\u52a0 TF*IDF\u3002\n* `min_hit_pos` (\u6574\u6570)\uff0c\u7b2c\u4e00\u4e2a\u5339\u914d\u5173\u952e\u8bcd\u51fa\u73b0\u7684\u4f4d\u7f6e\uff0c\u6309\u5355\u8bcd\u8ba1\u6570\u3002\n\n   \u56e0\u6b64\uff0c\u8fd9\u662f\u4e00\u4e2a\u76f8\u5bf9\u4f4e\u5c42\u6b21\u7684\u201c\u539f\u59cb\u201d\u56e0\u5b50\uff0c\u901a\u5e38\u4f60\u4f1a\u60f3\u5728\u4f7f\u7528\u5b83\u8fdb\u884c\u6392\u540d\u4e4b\u524d\u5bf9\u5b83\u8fdb\u884c*\u8c03\u6574*\u3002\u5177\u4f53\u8c03\u6574\u9ad8\u5ea6\u4f9d\u8d56\u4f60\u7684\u6570\u636e\u548c\u6700\u7ec8\u516c\u5f0f\uff0c\u4f46\u8fd9\u91cc\u5148\u7ed9\u51e0\u4e2a\u601d\u8def\uff1a\uff08a\uff09\u5f53 `word_count<2` \u65f6\uff0c\u53ef\u4ee5\u7b80\u5355\u5ffd\u7565\u4efb\u4f55\u57fa\u4e8e `min_gaps` \u7684\u63d0\u5347\uff1b\n\n    \uff08b\uff09\u5f53 `word_count>=2` \u4e14 `min_gaps` \u975e\u5e73\u51e1\u65f6\uff0c\u53ef\u4ee5\u7528\u67d0\u4e2a\u201c\u6700\u574f\u60c5\u51b5\u201d\u7684\u5e38\u91cf\u9650\u5236\u5b83\uff0c\u800c\u5e73\u51e1\u503c\uff08\u5373 `min_gaps=0` \u4e14 `word_count<2`\uff09\u53ef\u4ee5\u88ab\u8be5\u5e38\u91cf\u66ff\u4ee3\uff1b\n\n    \uff08c\uff09\u53ef\u4ee5\u5e94\u7528\u8bf8\u5982 `1/(1+min_gaps)` \u7684\u4f20\u9012\u51fd\u6570\uff08\u4f7f\u5f97\u8d8a\u597d\u3001\u8d8a\u5c0f\u7684 `min_gaps` \u53d6\u503c\u8be5\u51fd\u6570\u503c\u8d8a\u5927\uff0c\u800c\u66f4\u5dee\u3001\u8d8a\u5927\u7684 `min_gaps` \u4f1a\u7f13\u6162\u4e0b\u964d\uff09\uff1b\u7b49\u7b49\u3002\n* `lccs` (\u6574\u6570)\uff0c\u6700\u957f\u516c\u5171\u8fde\u7eed\u5b50\u5e8f\u5217\u3002\u67e5\u8be2\u548c\u6587\u6863\u4e4b\u95f4\u6700\u957f\u516c\u5171\u5b50\u77ed\u8bed\u7684\u957f\u5ea6\uff0c\u6309\u5173\u952e\u8bcd\u8ba1\u6570\u3002\n\n    LCCS \u56e0\u5b50\u4e0e LCS \u6709\u4e9b\u76f8\u4f3c\uff0c\u4f46\u9650\u5236\u66f4\u4e25\u683c\u3002\u867d\u7136 LCS \u53ef\u4ee5\u5927\u4e8e 1\uff0c\u5373\u4f7f\u6ca1\u6709\u4e24\u4e2a\u67e5\u8be2\u8bcd\u662f\u76f8\u90bb\u5339\u914d\uff0cLCCS \u53ea\u6709\u5f53\u6587\u6863\u4e2d\u5b58\u5728*\u7cbe\u786e*\u3001\u8fde\u7eed\u7684\u67e5\u8be2\u5b50\u77ed\u8bed\u65f6\u624d\u4f1a\u5927\u4e8e 1\u3002\u4f8b\u5982\uff0c\u67e5\u8be2\u4e3a\uff08one two three four five\uff09\uff0c\u6587\u6863\u4e3a\uff08one hundred three hundred five hundred\uff09\u65f6\uff0c`lcs=3`\uff0c\u4f46 `lccs=1`\uff0c\u56e0\u4e3a\u867d\u7136 3 \u4e2a\u5173\u952e\u8bcd\uff08one, three, five\uff09\u7684\u6392\u5217\u5bf9\u5e94\u67e5\u8be2\u4e2d\u4e00\u81f4\uff0c\u4f46\u6ca1\u6709\u4e24\u4e2a\u5339\u914d\u8bcd\u4f4d\u7f6e\u662f\u76f8\u90bb\u7684\u3002\n\n    \u6ce8\u610f\uff0cLCCS \u4ecd\u7136\u4e0d\u533a\u5206\u9891\u7e41\u548c\u7a00\u6709\u5173\u952e\u8bcd\uff1b\u76f8\u5173\u5185\u5bb9\u53c2\u89c1 WLCCS\u3002\n* `wlccs` (\u6d6e\u70b9\u6570)\uff0c\u52a0\u6743\u6700\u957f\u516c\u5171\u8fde\u7eed\u5b50\u5e8f\u5217\u3002\u67e5\u8be2\u548c\u6587\u6863\u4e4b\u95f4\u6700\u957f\u516c\u5171\u5b50\u77ed\u8bed\u7684\u5173\u952e\u8bcd IDF \u4e4b\u548c\u3002\n\n    WLCCS \u7684\u8ba1\u7b97\u7c7b\u4f3c\u4e8e LCCS\uff0c\u4f46\u6bcf\u4e2a\u201c\u5408\u9002\u201d\u7684\u5173\u952e\u8bcd\u5339\u914d\u4f1a\u589e\u52a0\u8be5\u5173\u952e\u8bcd\u7684 IDF\uff0c\u800c\u4e0d\u662f\u50cf LCS \u548c LCCS \u90a3\u6837\u4ec5\u52a0 1\u3002\u8fd9\u5141\u8bb8\u6392\u540d\u7cfb\u7edf\u5c06\u66f4\u7a00\u6709\u4e14\u91cd\u8981\u7684\u5173\u952e\u8bcd\u5e8f\u5217\u6392\u540d\u9ad8\u4e8e\u66f4\u9891\u7e41\u7684\u5173\u952e\u8bcd\u5e8f\u5217\uff0c\u5373\u4f7f\u540e\u8005\u8f83\u957f\u3002\u4f8b\u5982\uff0c\u67e5\u8be2 `(Zanzibar bed and breakfast)` \u5bf9\u6587\u6863 `(hotels of Zanzibar)` \u4ea7\u751f `lccs=1`\uff0c\u4f46\u5bf9 `(London bed and breakfast)` \u4ea7\u751f `lccs=3`\uff0c\u5c3d\u7ba1 \u201cZanzibar\u201d \u5b9e\u9645\u4e0a\u6bd4\u6574\u4e2a \u201cbed and breakfast\u201d \u77ed\u8bed\u66f4\u7a00\u6709\u3002WLCCS \u56e0\u5b50\u901a\u8fc7\u4f7f\u7528\u5173\u952e\u8bcd\u9891\u7387\u89e3\u51b3\u4e86\u6b64\u95ee\u9898\u3002\n* `atc` (\u6d6e\u70b9\u6570)\uff0c\u805a\u5408\u672f\u8bed\u63a5\u8fd1\u5ea6\uff08Aggregate Term Closeness\uff09\u3002\u4e00\u79cd\u57fa\u4e8e\u90bb\u8fd1\u7684\u5ea6\u91cf\uff0c\u5f53\u6587\u6863\u5305\u542b\u66f4\u591a\u4e14\u66f4\u7d27\u5bc6\u4e14\u66f4\u91cd\u8981\uff08\u7a00\u6709\uff09\u7684\u67e5\u8be2\u5173\u952e\u8bcd\u7ec4\u5408\u65f6\uff0c\u8be5\u503c\u589e\u52a0\u3002\n\n    **\u8b66\u544a\uff1a** \u4f60\u5e94\u8be5\u5728 OPTION `idf='plain,tfidf_unnormalized'` \u4e0b\u4f7f\u7528 ATC\uff08\u53c2\u89c1[\u4e0b\u6587](../Searching/Sorting_and_ranking.md#Configuration-of-IDF-formula)\uff09\uff1b\u5426\u5219\u53ef\u80fd\u5f97\u5230\u610f\u5916\u7684\u7ed3\u679c\u3002",
            "russian": "**\u0424\u0430\u043a\u0442\u043e\u0440 \u0443\u0440\u043e\u0432\u043d\u044f \u043f\u043e\u043b\u044f** \u2014 \u044d\u0442\u043e \u0447\u0438\u0441\u043b\u043e\u0432\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435, \u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0435\u043c\u043e\u0435 \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u043e\u0447\u043d\u044b\u043c \u0434\u0432\u0438\u0436\u043a\u043e\u043c \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0441\u043e\u0432\u043f\u0430\u0432\u0448\u0435\u0433\u043e \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u043b\u044f \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430 \u043e\u0442\u043d\u043e\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0430. \u0422\u0430\u043a \u043a\u0430\u043a \u0437\u0430\u043f\u0440\u043e\u0441 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0442\u044c \u0431\u043e\u043b\u0435\u0435 \u0447\u0435\u043c \u0441 \u043e\u0434\u043d\u0438\u043c \u043f\u043e\u043b\u0435\u043c, \u043d\u043e \u0438\u0442\u043e\u0433\u043e\u0432\u044b\u0439 \u0432\u0435\u0441 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043e\u0434\u043d\u0438\u043c \u0446\u0435\u043b\u044b\u043c \u0447\u0438\u0441\u043b\u043e\u043c, \u044d\u0442\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0441\u0432\u0435\u0441\u0442\u0438 \u043a \u043e\u0434\u043d\u043e\u043c\u0443. \u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0444\u0430\u043a\u0442\u043e\u0440\u044b \u0443\u0440\u043e\u0432\u043d\u044f \u043f\u043e\u043b\u044f \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0432\u043d\u0443\u0442\u0440\u0438 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0430\u0433\u0440\u0435\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043f\u043e \u043f\u043e\u043b\u044f\u043c, \u0438\u0445 **\u043d\u0435\u043b\u044c\u0437\u044f** \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0432 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0438 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043d\u0435\u043b\u044c\u0437\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c `(lcs+bm25)` \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f, \u0442\u0430\u043a \u043a\u0430\u043a `lcs` \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439 (\u043f\u043e \u043e\u0434\u043d\u043e\u043c\u0443 \u0432 \u043a\u0430\u0436\u0434\u043e\u043c \u0441\u043e\u0432\u043f\u0430\u0432\u0448\u0435\u043c \u043f\u043e\u043b\u0435). \u0412\u043c\u0435\u0441\u0442\u043e \u044d\u0442\u043e\u0433\u043e \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c `(sum(lcs)+bm25)`, \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0441\u0443\u043c\u043c\u0438\u0440\u0443\u0435\u0442 `lcs` \u043f\u043e \u0432\u0441\u0435\u043c \u0441\u043e\u0432\u043f\u0430\u0432\u0448\u0438\u043c \u043f\u043e\u043b\u044f\u043c, \u0430 \u0437\u0430\u0442\u0435\u043c \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442 `bm25` \u043a \u044d\u0442\u043e\u0439 \u0441\u0443\u043c\u043c\u0435 \u043f\u043e \u043f\u043e\u043b\u044f\u043c. \u0412 \u043d\u0430\u0441\u0442\u043e\u044f\u0449\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u044b \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0444\u0430\u043a\u0442\u043e\u0440\u044b \u0443\u0440\u043e\u0432\u043d\u044f \u043f\u043e\u043b\u044f:\n\n* `lcs` (\u0446\u0435\u043b\u043e\u0435 \u0447\u0438\u0441\u043b\u043e), \u0434\u043b\u0438\u043d\u0430 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0442\u043e\u0447\u043d\u043e\u0433\u043e \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u044f \u043c\u0435\u0436\u0434\u0443 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u043c \u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u043c, \u0441\u0447\u0438\u0442\u0430\u0435\u043c\u0430\u044f \u0432 \u0441\u043b\u043e\u0432\u0430\u0445. LCS \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442 Longest Common Subsequence (\u0438\u043b\u0438 \u041f\u043e\u0434\u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c). \u041f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u0442 \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 1, \u0435\u0441\u043b\u0438 \u0432 \u043f\u043e\u043b\u0435 \u0431\u044b\u043b\u0438 \u043d\u0430\u0439\u0434\u0435\u043d\u044b \u0442\u043e\u043b\u044c\u043a\u043e \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0435 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0441\u043b\u043e\u0432\u0430, \u0438 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u2014 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432 \u0437\u0430\u043f\u0440\u043e\u0441\u0430, \u0435\u0441\u043b\u0438 \u0432 \u043f\u043e\u043b\u0435 \u0431\u044b\u043b\u043e \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0442\u043e\u0447\u043d\u043e\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0435 \u0432\u0441\u0435\u0433\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0430 (\u0432 \u0442\u043e\u0447\u043d\u043e\u043c \u043f\u043e\u0440\u044f\u0434\u043a\u0435 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432). \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0435\u0441\u043b\u0438 \u0437\u0430\u043f\u0440\u043e\u0441 'hello world', \u0438 \u043f\u043e\u043b\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u044d\u0442\u0438 \u0434\u0432\u0430 \u0441\u043b\u043e\u0432\u0430 \u0438\u0437 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 (\u0442\u043e \u0435\u0441\u0442\u044c, \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u044b \u043f\u043e\u0434\u0440\u044f\u0434 \u0438 \u0432 \u0442\u043e\u0447\u043d\u043e\u043c \u043f\u043e\u0440\u044f\u0434\u043a\u0435 \u0438\u0437 \u0437\u0430\u043f\u0440\u043e\u0441\u0430), `lcs` \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0432\u0435\u043d 2. \u0415\u0441\u043b\u0438 \u0437\u0430\u043f\u0440\u043e\u0441 'hello world program', \u0430 \u043f\u043e\u043b\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 'hello world', `lcs` \u0431\u0443\u0434\u0435\u0442 2. \u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435, \u0447\u0442\u043e \u0440\u0430\u0431\u043e\u0447\u0438\u043c\u0438 \u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u043b\u044e\u0431\u044b\u0435 \u043f\u043e\u0434\u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u0430 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432 \u0438\u0437 \u0437\u0430\u043f\u0440\u043e\u0441\u0430, \u0430 \u043d\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u0441\u043c\u0435\u0436\u043d\u044b\u0435. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0435\u0441\u043b\u0438 \u0437\u0430\u043f\u0440\u043e\u0441 'hello world program', \u0430 \u043f\u043e\u043b\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 'hello (test program)', `lcs` \u0442\u0430\u043a\u0436\u0435 \u0431\u0443\u0434\u0435\u0442 2, \u0442\u0430\u043a \u043a\u0430\u043a \u0438 'hello', \u0438 'program' \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442 \u0432 \u0442\u0435\u0445 \u0436\u0435 \u043f\u043e\u0437\u0438\u0446\u0438\u044f\u0445, \u0447\u0442\u043e \u0438 \u0432 \u0437\u0430\u043f\u0440\u043e\u0441\u0435. \u041d\u0430\u043a\u043e\u043d\u0435\u0446, \u0435\u0441\u043b\u0438 \u0437\u0430\u043f\u0440\u043e\u0441 'hello world program', \u0430 \u043f\u043e\u043b\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 'hello world program', `lcs` \u0431\u0443\u0434\u0435\u0442 3. (\u042d\u0442\u043e, \u043d\u0430\u0434\u0435\u044e\u0441\u044c, \u0443\u0436\u0435 \u043d\u0435 \u0443\u0434\u0438\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e.)\n* `user_weight` (\u0446\u0435\u043b\u043e\u0435 \u0447\u0438\u0441\u043b\u043e), \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u0432\u0435\u0441 \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u043f\u043e\u043b\u044f (\u0441\u043c. [OPTION field_weights](../Searching/Options.md#field_weights) \u0432 SQL). \u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0432\u0435\u0441\u0430 \u0440\u0430\u0432\u043d\u044b 1, \u0435\u0441\u043b\u0438 \u044f\u0432\u043d\u043e \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u044b.\n* `hit_count` (\u0446\u0435\u043b\u043e\u0435 \u0447\u0438\u0441\u043b\u043e), \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u043e\u0432\u043f\u0430\u0432\u0448\u0438\u0445 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432 \u0432 \u043f\u043e\u043b\u0435. \u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435, \u0447\u0442\u043e \u043e\u0434\u043d\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u0435 \u0441\u043b\u043e\u0432\u043e \u043c\u043e\u0436\u0435\u0442 \u0432\u0441\u0442\u0440\u0435\u0442\u0438\u0442\u044c\u0441\u044f \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0440\u0430\u0437. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0435\u0441\u043b\u0438 'hello' \u0432\u0441\u0442\u0440\u0435\u0447\u0430\u0435\u0442\u0441\u044f 3 \u0440\u0430\u0437\u0430 \u0432 \u043f\u043e\u043b\u0435, \u0430 'world' \u2013 5 \u0440\u0430\u0437, `hit_count` \u0431\u0443\u0434\u0435\u0442 8.\n* `word_count` (\u0446\u0435\u043b\u043e\u0435 \u0447\u0438\u0441\u043b\u043e), \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0445 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432, \u0441\u043e\u0432\u043f\u0430\u0432\u0448\u0438\u0445 \u0432 \u043f\u043e\u043b\u0435. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0435\u0441\u043b\u0438 'hello' \u0438 'world' \u0432\u0441\u0442\u0440\u0435\u0447\u0430\u044e\u0442\u0441\u044f \u0432 \u043f\u043e\u043b\u0435, `word_count` \u0431\u0443\u0434\u0435\u0442 2, \u043d\u0435\u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e \u043e\u0442 \u0447\u0438\u0441\u043b\u0430 \u043f\u043e\u0432\u0442\u043e\u0440\u0435\u043d\u0438\u0439 \u044d\u0442\u0438\u0445 \u0441\u043b\u043e\u0432.\n* `tf_idf` (\u0447\u0438\u0441\u043b\u043e \u0441 \u043f\u043b\u0430\u0432\u0430\u044e\u0449\u0435\u0439 \u0442\u043e\u0447\u043a\u043e\u0439), \u0441\u0443\u043c\u043c\u0430 TF/IDF \u043f\u043e \u0432\u0441\u0435\u043c \u0441\u043e\u0432\u043f\u0430\u0432\u0448\u0438\u043c \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u043c \u0441\u043b\u043e\u0432\u0430\u043c \u0432 \u043f\u043e\u043b\u0435. IDF \u2014 \u043e\u0431\u0440\u0430\u0442\u043d\u0430\u044f \u0447\u0430\u0441\u0442\u043e\u0442\u043d\u043e\u0441\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430, \u043f\u043b\u0430\u0432\u0430\u044e\u0449\u0435\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043e\u0442 0 \u0434\u043e 1, \u043e\u043f\u0438\u0441\u044b\u0432\u0430\u044e\u0449\u0435\u0435 \u0447\u0430\u0441\u0442\u043e\u0442\u0443 \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u0433\u043e \u0441\u043b\u043e\u0432\u0430 (\u0432 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u043c, 0 \u0434\u043b\u044f \u0441\u043b\u043e\u0432\u0430, \u0432\u0441\u0442\u0440\u0435\u0447\u0430\u044e\u0449\u0435\u0433\u043e\u0441\u044f \u0432\u043e \u0432\u0441\u0435\u0445 \u0438\u043d\u0434\u0435\u043a\u0441\u0438\u0440\u0443\u0435\u043c\u044b\u0445 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0445, \u0438 1 \u0434\u043b\u044f \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0441\u043b\u043e\u0432\u0430, \u0432\u0441\u0442\u0440\u0435\u0447\u0430\u044e\u0449\u0435\u0433\u043e\u0441\u044f \u0432 \u043e\u0434\u043d\u043e\u043c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0435). TF \u2014 \u0447\u0430\u0441\u0442\u043e\u0442\u0430 \u0442\u0435\u0440\u043c\u0438\u043d\u0430, \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439 \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u0433\u043e \u0441\u043b\u043e\u0432\u0430 \u0432 \u043f\u043e\u043b\u0435. \u041a\u0441\u0442\u0430\u0442\u0438, `tf_idf` \u0444\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0435\u0442\u0441\u044f \u043a\u0430\u043a \u0441\u0443\u043c\u043c\u0430 IDF \u043f\u043e \u0432\u0441\u0435\u043c \u0441\u043e\u0432\u043f\u0430\u0432\u0448\u0438\u043c \u0432\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f\u043c, \u0447\u0442\u043e \u043f\u043e \u043f\u043e\u0441\u0442\u0440\u043e\u0435\u043d\u0438\u044e \u044d\u043a\u0432\u0438\u0432\u0430\u043b\u0435\u043d\u0442\u043d\u043e \u0441\u0443\u043c\u043c\u0435 TF*IDF \u043f\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u043c \u0441\u043b\u043e\u0432\u0430\u043c.\n* `min_hit_pos` (\u0446\u0435\u043b\u043e\u0435 \u0447\u0438\u0441\u043b\u043e), \u043f\u043e\u0437\u0438\u0446\u0438\u044f \u043f\u0435\u0440\u0432\u043e\u0433\u043e \u0441\u043e\u0432\u043f\u0430\u0432\u0448\u0435\u0433\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u0433\u043e \u0441\u043b\u043e\u0432\u0430, \u0441\u0447\u0438\u0442\u0430\u0435\u043c\u0430\u044f \u0432 \u0441\u043b\u043e\u0432\u0430\u0445\n\n   \u0421\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e, \u044d\u0442\u043e \u043e\u0442\u043d\u043e\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u043d\u0438\u0437\u043a\u043e\u0443\u0440\u043e\u0432\u043d\u0435\u0432\u044b\u0439, \u00ab\u0441\u044b\u0440\u043e\u0439\u00bb \u0444\u0430\u043a\u0442\u043e\u0440, \u043a\u043e\u0442\u043e\u0440\u044b\u0439, \u0441\u043a\u043e\u0440\u0435\u0435 \u0432\u0441\u0435\u0433\u043e, \u043f\u043e\u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f *\u043f\u043e\u0434\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c* \u043f\u0435\u0440\u0435\u0434 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0432 \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438. \u041a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u043a\u0438 \u0441\u0438\u043b\u044c\u043d\u043e \u0437\u0430\u0432\u0438\u0441\u044f\u0442 \u043e\u0442 \u0432\u0430\u0448\u0438\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u0438 \u0438\u0442\u043e\u0433\u043e\u0432\u043e\u0439 \u0444\u043e\u0440\u043c\u0443\u043b\u044b, \u043d\u043e \u0432\u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0438\u0434\u0435\u0439 \u0434\u043b\u044f \u043d\u0430\u0447\u0430\u043b\u0430: (\u0430) \u043b\u044e\u0431\u044b\u0435 \u0431\u0443\u0441\u0442\u044b \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 min_gaps \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u043e\u0441\u0442\u043e \u0438\u0433\u043d\u043e\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c, \u0435\u0441\u043b\u0438 word_count<2;\n\n    (b) \u043d\u0435 \u0442\u0440\u0438\u0432\u0438\u0430\u043b\u044c\u043d\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f min_gaps (\u0442.\u0435. \u043a\u043e\u0433\u0434\u0430 word_count>=2) \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u043e\u0439 \u043a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u043e\u0439 \"\u0445\u0443\u0434\u0448\u0435\u0433\u043e \u0441\u043b\u0443\u0447\u0430\u044f\", \u0430 \u0442\u0440\u0438\u0432\u0438\u0430\u043b\u044c\u043d\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f (\u0442.\u0435. \u043a\u043e\u0433\u0434\u0430 min_gaps=0 \u0438 word_count<2) \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u0437\u0430\u043c\u0435\u043d\u0435\u043d\u044b \u044d\u0442\u043e\u0439 \u043a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u043e\u0439;\n\n    (c) \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0442\u0438\u043f\u0430 1/(1+min_gaps) (\u0442\u0430\u043a, \u0447\u0442\u043e\u0431\u044b \u043b\u0443\u0447\u0448\u0438\u0435, \u043c\u0435\u043d\u044c\u0448\u0438\u0435 min_gaps \u043c\u0430\u043a\u0441\u0438\u043c\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043b\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435, \u0430 \u0445\u0443\u0434\u0448\u0438\u0435, \u0431\u043e\u043b\u044c\u0448\u0438\u0435 min_gaps \u043c\u0435\u0434\u043b\u0435\u043d\u043d\u043e \u0443\u043c\u0435\u043d\u044c\u0448\u0430\u043b\u0438 \u0435\u0433\u043e); \u0438 \u0442\u0430\u043a \u0434\u0430\u043b\u0435\u0435.\n* `lccs` (\u0446\u0435\u043b\u043e\u0435 \u0447\u0438\u0441\u043b\u043e). Longest Common Contiguous Subsequence \u2014 \u0414\u043b\u0438\u043d\u0430 \u0441\u0430\u043c\u043e\u0439 \u0434\u043b\u0438\u043d\u043d\u043e\u0439 \u043e\u0431\u0449\u0435\u0439 \u043d\u0435\u043f\u0440\u0435\u0440\u044b\u0432\u043d\u043e\u0439 \u043f\u043e\u0434\u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u043c\u0435\u0436\u0434\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u043c \u0438 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u043c, \u0438\u0437\u043c\u0435\u0440\u044f\u0435\u043c\u043e\u0439 \u043f\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u043c \u0441\u043b\u043e\u0432\u0430\u043c.\n\n    \u0424\u0430\u043a\u0442\u043e\u0440 LCCS \u043e\u0442\u0447\u0430\u0441\u0442\u0438 \u043f\u043e\u0445\u043e\u0436 \u043d\u0430 LCS, \u043d\u043e \u0431\u043e\u043b\u0435\u0435 \u0441\u0442\u0440\u043e\u0433\u0438\u0439. \u0412 \u0442\u043e \u0432\u0440\u0435\u043c\u044f \u043a\u0430\u043a LCS \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 1, \u0434\u0430\u0436\u0435 \u0435\u0441\u043b\u0438 \u043d\u0438\u043a\u0430\u043a\u0438\u0435 \u0434\u0432\u0430 \u0441\u043b\u043e\u0432\u0430 \u0438\u0437 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043d\u0435 \u0441\u0442\u043e\u044f\u0442 \u0440\u044f\u0434\u043e\u043c, LCCS \u0431\u0443\u0434\u0435\u0442 \u0431\u043e\u043b\u044c\u0448\u0435 1 \u0442\u043e\u043b\u044c\u043a\u043e \u0435\u0441\u043b\u0438 \u0432 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0435 \u0435\u0441\u0442\u044c *\u0442\u043e\u0447\u043d\u044b\u0435*, \u043d\u0435\u043f\u0440\u0435\u0440\u044b\u0432\u043d\u044b\u0435 \u043f\u043e\u0434\u0444\u0440\u0430\u0437\u044b \u0438\u0437 \u0437\u0430\u043f\u0440\u043e\u0441\u0430. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0437\u0430\u043f\u0440\u043e\u0441 (one two three four five) \u0438 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 (one hundred three hundred five hundred) \u0434\u0430\u0434\u0443\u0442 lcs=3, \u043d\u043e lccs=1, \u043f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442 \u043f\u043e\u0437\u0438\u0446\u0438\u0438 \u0442\u0440\u0451\u0445 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432 (one, three, five), \u043d\u043e \u043d\u0438\u043a\u0430\u043a\u0438\u0435 2 \u0441\u043e\u0441\u0435\u0434\u043d\u0438\u0445 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u044f \u043d\u0435 \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u044b \u043f\u043e\u0434\u0440\u044f\u0434.\n\n    \u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435, \u0447\u0442\u043e LCCS \u043f\u043e-\u043f\u0440\u0435\u0436\u043d\u0435\u043c\u0443 \u043d\u0435 \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0435\u0442 \u0447\u0430\u0441\u0442\u043e\u0442\u0443 \u0441\u043b\u043e\u0432; \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0441\u043c\u043e\u0442\u0440\u0438\u0442\u0435 WLCCS.\n* `wlccs` (\u0447\u0438\u0441\u043b\u043e \u0441 \u043f\u043b\u0430\u0432\u0430\u044e\u0449\u0435\u0439 \u0442\u043e\u0447\u043a\u043e\u0439). Weighted Longest Common Contiguous Subsequence \u2014 \u0412\u0437\u0432\u0435\u0448\u0435\u043d\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 \u0441\u0430\u043c\u043e\u0439 \u0434\u043b\u0438\u043d\u043d\u043e\u0439 \u043e\u0431\u0449\u0435\u0439 \u043d\u0435\u043f\u0440\u0435\u0440\u044b\u0432\u043d\u043e\u0439 \u043f\u043e\u0434\u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438, \u0441\u0443\u043c\u043c\u0430 IDF \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432 \u0441\u0430\u043c\u043e\u0439 \u0434\u043b\u0438\u043d\u043d\u043e\u0439 \u043e\u0431\u0449\u0435\u0439 \u043f\u043e\u0434\u0444\u0440\u0430\u0437\u044b \u043c\u0435\u0436\u0434\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u043c \u0438 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u043c.\n\n    WLCCS \u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0435\u0442\u0441\u044f \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u043e LCCS, \u043d\u043e \u043a\u0430\u0436\u0434\u043e\u0435 \u00ab\u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0435\u0435\u00bb \u0441\u043e\u0432\u043f\u0430\u0432\u0448\u0435\u0435 \u0441\u043b\u043e\u0432\u043e \u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0432\u0430\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043d\u0430 IDF \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0441\u043b\u043e\u0432\u0430, \u0430 \u043d\u0435 \u043f\u0440\u043e\u0441\u0442\u043e \u043d\u0430 1 (\u043a\u0430\u043a \u0432 LCS \u0438 LCCS). \u042d\u0442\u043e \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u0438\u0437 \u0431\u043e\u043b\u0435\u0435 \u0440\u0435\u0434\u043a\u0438\u0445 \u0438 \u0432\u0430\u0436\u043d\u044b\u0445 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432 \u0432\u044b\u0448\u0435, \u0447\u0435\u043c \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u0447\u0430\u0441\u0442\u044b\u0445 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432, \u0434\u0430\u0436\u0435 \u0435\u0441\u043b\u0438 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0434\u043b\u0438\u043d\u043d\u0435\u0435. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0437\u0430\u043f\u0440\u043e\u0441 `(Zanzibar bed and breakfast)` \u0434\u0430\u0451\u0442 lccs=1 \u0434\u043b\u044f \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430 `(hotels of Zanzibar)`, \u043d\u043e lccs=3 \u0434\u043b\u044f `(London bed and breakfast)`, \u0445\u043e\u0442\u044f \u00abZanzibar\u00bb \u043d\u0430 \u0441\u0430\u043c\u043e\u043c \u0434\u0435\u043b\u0435 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0440\u0435\u0436\u0435, \u0447\u0435\u043c \u0432\u0441\u044f \u0444\u0440\u0430\u0437\u0430 \u00abbed and breakfast\u00bb. \u0424\u0430\u043a\u0442\u043e\u0440 WLCCS \u0440\u0435\u0448\u0430\u0435\u0442 \u044d\u0442\u0443 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0443, \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u044f \u0447\u0430\u0441\u0442\u043e\u0442\u044b \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432.\n* `atc` (\u0447\u0438\u0441\u043b\u043e \u0441 \u043f\u043b\u0430\u0432\u0430\u044e\u0449\u0435\u0439 \u0442\u043e\u0447\u043a\u043e\u0439). Aggregate Term Closeness \u2014 \u0430\u0433\u0440\u0435\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u0431\u043b\u0438\u0437\u043e\u0441\u0442\u044c \u0442\u0435\u0440\u043c\u0438\u043d\u043e\u0432. \u041c\u0435\u0440\u0430 \u0431\u043b\u0438\u0437\u043e\u0441\u0442\u0438, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0440\u0430\u0441\u0442\u0451\u0442, \u0435\u0441\u043b\u0438 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u0431\u043e\u043b\u044c\u0448\u0435 \u0433\u0440\u0443\u043f\u043f \u0431\u043e\u043b\u0435\u0435 \u0442\u0435\u0441\u043d\u043e \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0445 \u0438 \u0431\u043e\u043b\u0435\u0435 \u0432\u0430\u0436\u043d\u044b\u0445 (\u0440\u0435\u0434\u043a\u0438\u0445) \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432 \u0438\u0437 \u0437\u0430\u043f\u0440\u043e\u0441\u0430.\n\n    **\u0412\u041d\u0418\u041c\u0410\u041d\u0418\u0415:** \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c ATC \u0441 OPTION idf='plain,tfidf_unnormalized' (\u0441\u043c. [\u043d\u0438\u0436\u0435](../Searching/Sorting_and_ranking.md#Configuration-of-IDF-formula)); \u0438\u043d\u0430\u0447\u0435 \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043d\u0435\u043e\u0436\u0438\u0434\u0430\u043d\u043d\u044b\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b."
        },
        "is_code_or_comment": false,
        "model": "openai:gpt-4.1-mini",
        "updated_at": 1766339818
    },
    "41277a56c6443326c4fff9aa1f7889095a72dbd27d956fad428118ab5379a5f6": {
        "original": "    ATC essentially operates as follows. For each keyword *occurrence* in the document, we compute the so-called *term closeness*. To do this, we examine all the other closest occurrences of all the query keywords (including the keyword itself) to the left and right of the subject occurrence, calculate a distance dampening coefficient as k = pow(distance, -1.75) for these occurrences, and sum the dampened IDFs. As a result, for every occurrence of each keyword, we obtain a \"closeness\" value that describes the \"neighbors\" of that occurrence. We then multiply these per-occurrence closenesses by their respective subject keyword IDF, sum them all, and finally compute a logarithm of that sum.\n\nIn other words, we process the best (closest) matched keyword pairs in the document, and compute pairwise \"closenesses\" as the product of their IDFs scaled by the distance coefficient:\n\nCODE_BLOCK_59\n\nWe then sum such closenesses, and compute the final, log-dampened ATC value:\n\nCODE_BLOCK_60\n\nNote that this final dampening logarithm is precisely the reason you should use OPTION idf=plain because, without it, the expression inside the log() could be negative.\n\nHaving closer keyword occurrences contributes *much* more to ATC than having more frequent keywords. Indeed, when the keywords are right next to each other, distance=1 and k=1; when there's just one word in between them, distance=2 and k=0.297, with two words between, distance=3 and k=0.146, and so on. At the same time, IDF attenuates somewhat slower. For example, in a 1 million document collection, the IDF values for keywords that match in 10, 100, and 1000 documents would be respectively 0.833, 0.667, and 0.500. So a keyword pair with two rather rare keywords that occur in just 10 documents each but with 2 other words in between would yield pair_tc = 0.101 and thus barely outweigh a pair with a 100-doc and a 1000-doc keyword with 1 other word between them and pair_tc = 0.099. Moreover, a pair of two *unique*, 1-doc keywords with 3 words between them would get a pair_tc = 0.088 and lose to a pair of two 1000-doc keywords located right next to each other and yielding a pair_tc = 0.25. So, basically, while ATC does combine both keyword frequency and proximity, it still somewhat favors proximity.\n\n### Ranking factor aggregation functions\n\nA **field aggregation function** is a single-argument function that accepts an expression with field-level factors, iterates over all matched fields, and computes the final results. The currently implemented field aggregation functions include:\n\n* `sum`, which adds the argument expression over all matched fields. For example `sum(1)` should return the number of matched fields.\n* `top`, which returns the highest value of the argument across all matched fields.\n* `max_window_hits`, manages a sliding window of hit positions to track the maximum number of hits within a specified window size. It removes outdated hits that fall outside the window and adds the latest hit, updating the maximum number of hits found within that window.\n\n### Formula expressions for all the built-in rankers\n\nMost other rankers can actually be emulated using the expression-based ranker. You just need to provide an appropriate expression. While this emulation will likely be slower than using the built-in, compiled ranker, it may still be interesting if you want to fine-tune your ranking formula starting with one of the existing ones. Additionally, the formulas describe the ranker details in a clear, readable manner.\n\n* proximity_bm25 (default ranker) = `sum(lcs*user_weight)*1000+bm25`\n* bm25 = `sum(user_weight)*1000+bm25`\n* none = `1`\n* wordcount = `sum(hit_count*user_weight)`\n* proximity = `sum(lcs*user_weight)`\n* matchany = `sum((word_count+(lcs-1)*max_lcs)*user_weight)`\n* fieldmask = `field_mask`\n* sph04 = `sum((4*lcs+2*(min_hit_pos==1)+exact_hit)*user_weight)*1000+bm25`\n\n### Configuration of IDF formula\n\nThe historically default IDF (Inverse Document Frequency) in Manticore is equivalent to `OPTION idf='normalized,tfidf_normalized'`, and those normalizations may cause several undesired effects.\n\nFirst, `idf=normalized` causes keyword penalization. For instance, if you search for `the | something` and `the` occurs in more than 50% of the documents, then documents with both keywords `the` and`[something` will get less weight than documents with just one keyword  `something`. Using `OPTION idf=plain` avoids this.\n\nPlain IDF varies in `[0, log(N)]` range, and keywords are never penalized; while the normalized IDF varies in `[-log(N), log(N)]` range, and too frequent keywords are penalized.\n\nSecond, `idf=tfidf_normalized` causes IDF drift over queries. Historically, we additionally divided IDF by query keyword count, so that the entire `sum(tf*idf)` over all keywords would still fit into `[0,1]` range. However, that means that queries `word1` and `word1 | nonmatchingword2` would assign different weights to the exactly same result set, because the IDFs for both `word1` and `nonmatchingword2` would be divided by 2. `OPTION idf='tfidf_unnormalized'` fixes that. Note that BM25, BM25A, BM25F() ranking factors will be scale accordingly  once you disable this normalization.\n\nIDF flags can be mixed; `plain` and `normalized` are mutually exclusive;`tfidf_unnormalized` and `tfidf_normalized` are mutually exclusive; and unspecified flags in such a mutually exclusive group take their defaults. That means that `OPTION idf=plain` is equivalent to a complete `OPTION idf='plain,tfidf_normalized'` specification.\n\n<!-- proofread -->\n\n",
        "translations": {
            "chinese": "    ATC \u7684\u57fa\u672c\u64cd\u4f5c\u5982\u4e0b\u3002\u5bf9\u4e8e\u6587\u6863\u4e2d\u7684\u6bcf\u4e2a\u5173\u952e\u8bcd *\u51fa\u73b0*\uff0c\u6211\u4eec\u8ba1\u7b97\u6240\u8c13\u7684 *\u9879\u63a5\u8fd1\u5ea6*\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u68c0\u67e5\u6240\u6709\u67e5\u8be2\u5173\u952e\u8bcd\uff08\u5305\u62ec\u5173\u952e\u8bcd\u672c\u8eab\uff09\u5728\u4e3b\u9898\u51fa\u73b0\u5de6\u4fa7\u548c\u53f3\u4fa7\u7684\u6240\u6709\u6700\u8fd1\u7684\u5176\u4ed6\u51fa\u73b0\uff0c\u8ba1\u7b97\u8fd9\u4e9b\u51fa\u73b0\u7684\u8ddd\u79bb\u8870\u51cf\u7cfb\u6570 k = pow(distance, -1.75)\uff0c\u7136\u540e\u5bf9\u8fd9\u4e9b\u8870\u51cf\u7684\u9006\u6587\u6863\u9891\u7387\uff08IDF\uff09\u6c42\u548c\u3002\u7ed3\u679c\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u5173\u952e\u8bcd\u7684\u6bcf\u4e2a\u51fa\u73b0\uff0c\u6211\u4eec\u83b7\u5f97\u4e00\u4e2a\u201c\u63a5\u8fd1\u5ea6\u201d\u503c\uff0c\u63cf\u8ff0\u8be5\u51fa\u73b0\u7684\u201c\u90bb\u5c45\u201d\u3002\u7136\u540e\uff0c\u6211\u4eec\u5c06\u8fd9\u4e9b\u6bcf\u4e2a\u51fa\u73b0\u7684\u63a5\u8fd1\u5ea6\u4e58\u4ee5\u5176\u76f8\u5e94\u7684\u4e3b\u9898\u5173\u952e\u8bcdIDF\uff0c\u5c06\u5b83\u4eec\u5168\u90e8\u76f8\u52a0\uff0c\u6700\u540e\u8ba1\u7b97\u8be5\u548c\u7684\u5bf9\u6570\u3002\n\n\u6362\u53e5\u8bdd\u8bf4\uff0c\u6211\u4eec\u5904\u7406\u6587\u6863\u4e2d\u6700\u4f73\uff08\u6700\u8fd1\uff09\u5339\u914d\u7684\u5173\u952e\u8bcd\u5bf9\uff0c\u5e76\u8ba1\u7b97\u5b83\u4eec\u7684\u201c\u63a5\u8fd1\u5ea6\u201d\u4f5c\u4e3a\u5b83\u4eec\u7684IDF\u6309\u8ddd\u79bb\u7cfb\u6570\u7f29\u653e\u7684\u4e58\u79ef\uff1a\n\nCODE_BLOCK_59\n\n\u7136\u540e\uff0c\u6211\u4eec\u5bf9\u8fd9\u4e9b\u63a5\u8fd1\u5ea6\u6c42\u548c\uff0c\u5e76\u8ba1\u7b97\u6700\u7ec8\u7684\u5bf9\u6570\u8870\u51cfATC\u503c\uff1a\n\nCODE_BLOCK_60\n\n\u8bf7\u6ce8\u610f\uff0c\u8fd9\u4e2a\u6700\u7ec8\u7684\u5bf9\u6570\u8870\u51cf\u6b63\u662f\u4f60\u5e94\u8be5\u4f7f\u7528 OPTION idf=plain \u7684\u539f\u56e0\uff0c\u56e0\u4e3a\u5982\u679c\u6ca1\u6709\u5b83\uff0c\u5bf9\u6570\u5185\u90e8\u7684\u8868\u8fbe\u5f0f\u53ef\u80fd\u662f\u8d1f\u6570\u3002\n\n\u66f4\u63a5\u8fd1\u7684\u5173\u952e\u8bcd\u51fa\u73b0\u5bf9ATC\u7684\u8d21\u732e *\u8fdc\u591a* \u4e8e\u66f4\u9891\u7e41\u7684\u5173\u952e\u8bcd\u3002\u4e8b\u5b9e\u4e0a\uff0c\u5f53\u5173\u952e\u8bcd\u7d27\u6328\u7740\u65f6\uff0c\u8ddd\u79bb=1\u4e14k=1\uff1b\u5f53\u5b83\u4eec\u4e4b\u95f4\u53ea\u6709\u4e00\u4e2a\u8bcd\u65f6\uff0c\u8ddd\u79bb=2\u4e14k=0.297\uff0c\u4e24\u4e2a\u8bcd\u4e4b\u95f4\u65f6\uff0c\u8ddd\u79bb=3\u4e14k=0.146\uff0c\u4f9d\u6b64\u7c7b\u63a8\u3002\u540c\u65f6\uff0cIDF\u7684\u8870\u51cf\u901f\u5ea6\u8f83\u6162\u3002\u4f8b\u5982\uff0c\u5728\u4e00\u4e2a100\u4e07\u6587\u6863\u96c6\u5408\u4e2d\uff0c\u5339\u914d10\u3001100\u548c1000\u4e2a\u6587\u6863\u7684\u5173\u952e\u8bcd\u7684IDF\u503c\u5206\u522b\u4e3a0.833\u30010.667\u548c0.500\u3002\u56e0\u6b64\uff0c\u4e00\u5bf9\u4e24\u4e2a\u76f8\u5bf9\u7f55\u89c1\u7684\u5173\u952e\u8bcd\uff0c\u6bcf\u4e2a\u51fa\u73b010\u6b21\uff0c\u4f46\u4e2d\u95f4\u67092\u4e2a\u8bcd\uff0c\u5176pair_tc = 0.101\uff0c\u51e0\u4e4e\u65e0\u6cd5\u8d85\u8fc7\u4e00\u5bf9\u4e00\u4e2a\u51fa\u73b0100\u6b21\u548c\u4e00\u4e2a\u51fa\u73b01000\u6b21\u7684\u5173\u952e\u8bcd\uff0c\u4e2d\u95f4\u53ea\u6709\u4e00\u4e2a\u8bcd\uff0c\u5176pair_tc = 0.099\u3002\u6b64\u5916\uff0c\u4e00\u5bf9\u4e24\u4e2a *\u552f\u4e00* \u76841\u6b21\u6587\u6863\u5173\u952e\u8bcd\uff0c\u4e2d\u95f4\u67093\u4e2a\u8bcd\uff0c\u5176pair_tc = 0.088\uff0c\u4f1a\u8f93\u7ed9\u4e00\u5bf9\u4e24\u4e2a1000\u6b21\u6587\u6863\u5173\u952e\u8bcd\u7d27\u6328\u7740\u51fa\u73b0\uff0c\u5176pair_tc = 0.25\u3002\u56e0\u6b64\uff0c\u867d\u7136ATC\u786e\u5b9e\u7ed3\u5408\u4e86\u5173\u952e\u8bcd\u9891\u7387\u548c\u63a5\u8fd1\u5ea6\uff0c\u4f46\u5b83\u4ecd\u7136\u66f4\u503e\u5411\u4e8e\u63a5\u8fd1\u5ea6\u3002\n\n### \u6392\u5e8f\u56e0\u5b50\u805a\u5408\u51fd\u6570\n\n**\u5b57\u6bb5\u805a\u5408\u51fd\u6570**\u662f\u4e00\u4e2a\u5355\u53c2\u6570\u51fd\u6570\uff0c\u63a5\u53d7\u5b57\u6bb5\u7ea7\u56e0\u5b50\u7684\u8868\u8fbe\u5f0f\uff0c\u904d\u5386\u6240\u6709\u5339\u914d\u7684\u5b57\u6bb5\uff0c\u5e76\u8ba1\u7b97\u6700\u7ec8\u7ed3\u679c\u3002\u76ee\u524d\u5b9e\u73b0\u7684\u5b57\u6bb5\u805a\u5408\u51fd\u6570\u5305\u62ec\uff1a\n\n* `sum`\uff0c\u5c06\u53c2\u6570\u8868\u8fbe\u5f0f\u5728\u6240\u6709\u5339\u914d\u7684\u5b57\u6bb5\u4e0a\u76f8\u52a0\u3002\u4f8b\u5982 `sum(1)` \u5e94\u8be5\u8fd4\u56de\u5339\u914d\u5b57\u6bb5\u7684\u6570\u91cf\u3002\n* `top`\uff0c\u8fd4\u56de\u53c2\u6570\u5728\u6240\u6709\u5339\u914d\u5b57\u6bb5\u4e2d\u7684\u6700\u9ad8\u503c\u3002\n* `max_window_hits`\uff0c\u7ba1\u7406\u4e00\u4e2a\u6ed1\u52a8\u7a97\u53e3\u7684\u547d\u4e2d\u4f4d\u7f6e\uff0c\u8ddf\u8e2a\u6307\u5b9a\u7a97\u53e3\u5927\u5c0f\u5185\u7684\u6700\u5927\u547d\u4e2d\u6570\u3002\u5b83\u4f1a\u79fb\u9664\u7a97\u53e3\u5916\u7684\u8fc7\u65f6\u547d\u4e2d\uff0c\u5e76\u6dfb\u52a0\u6700\u65b0\u7684\u547d\u4e2d\uff0c\u66f4\u65b0\u7a97\u53e3\u5185\u627e\u5230\u7684\u6700\u5927\u547d\u4e2d\u6570\u3002\n\n### \u6240\u6709\u5185\u7f6e\u6392\u5e8f\u5668\u7684\u516c\u5f0f\u8868\u8fbe\u5f0f\n\n\u5927\u591a\u6570\u5176\u4ed6\u6392\u5e8f\u5668\u5b9e\u9645\u4e0a\u53ef\u4ee5\u901a\u8fc7\u57fa\u4e8e\u8868\u8fbe\u5f0f\u7684\u6392\u5e8f\u5668\u6765\u6a21\u62df\u3002\u4f60\u53ea\u9700\u8981\u63d0\u4f9b\u4e00\u4e2a\u9002\u5f53\u7684\u8868\u8fbe\u5f0f\u5373\u53ef\u3002\u867d\u7136\u8fd9\u79cd\u6a21\u62df\u53ef\u80fd\u6bd4\u4f7f\u7528\u5185\u7f6e\u7f16\u8bd1\u6392\u5e8f\u5668\u6162\uff0c\u4f46\u5982\u679c\u4f60\u5e0c\u671b\u4ece\u73b0\u6709\u7684\u6392\u5e8f\u5668\u4e4b\u4e00\u5f00\u59cb\u5fae\u8c03\u4f60\u7684\u6392\u5e8f\u516c\u5f0f\uff0c\u8fd9\u4ecd\u7136\u53ef\u80fd\u5f88\u6709\u8da3\u3002\u6b64\u5916\uff0c\u516c\u5f0f\u4ee5\u6e05\u6670\u53ef\u8bfb\u7684\u65b9\u5f0f\u63cf\u8ff0\u4e86\u6392\u5e8f\u5668\u7684\u7ec6\u8282\u3002\n\n* proximity_bm25\uff08\u9ed8\u8ba4\u6392\u5e8f\u5668\uff09= `sum(lcs*user_weight)*1000+bm25`\n* bm25 = `sum(user_weight)*1000+bm25`\n* none = `1`\n* wordcount = `sum(hit_count*user_weight)`\n* proximity = `sum(lcs*user_weight)`\n* matchany = `sum((word_count+(lcs-1)*max_lcs)*user_weight)`\n* fieldmask = `field_mask`\n* sph04 = `sum((4*lcs+2*(min_hit_pos==1)+exact_hit)*user_weight)*1000+bm25`\n\n### IDF\u516c\u5f0f\u7684\u914d\u7f6e\n\nManticore\u5386\u53f2\u4e0a\u9ed8\u8ba4\u7684IDF\uff08\u9006\u6587\u6863\u9891\u7387\uff09\u7b49\u540c\u4e8e OPTION idf='normalized,tfidf_normalized'\uff0c\u800c\u8fd9\u4e9b\u89c4\u8303\u5316\u53ef\u80fd\u4f1a\u5bfc\u81f4\u4e00\u4e9b\u4e0d\u5e0c\u671b\u7684\u6548\u679c\u3002\n\n\u9996\u5148\uff0c`idf=normalized`\u4f1a\u5bfc\u81f4\u5173\u952e\u8bcd\u60e9\u7f5a\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4f60\u641c\u7d22 `the | something`\uff0c\u800c `the` \u51fa\u73b0\u5728\u8d85\u8fc750%\u7684\u6587\u6863\u4e2d\uff0c\u90a3\u4e48\u5305\u542b\u4e24\u4e2a\u5173\u952e\u8bcd `the` \u548c `[something` \u7684\u6587\u6863\u5c06\u6bd4\u53ea\u5305\u542b\u4e00\u4e2a\u5173\u952e\u8bcd `something` \u7684\u6587\u6863\u6743\u91cd\u66f4\u4f4e\u3002\u4f7f\u7528 OPTION idf=plain \u53ef\u4ee5\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\u3002\n\nPlain IDF\u5728 `[0, log(N)]` \u8303\u56f4\u5185\u53d8\u5316\uff0c\u5173\u952e\u8bcd\u6c38\u8fdc\u4e0d\u4f1a\u88ab\u60e9\u7f5a\uff1b\u800cnormalized IDF\u5728 `[-log(N), log(N)]` \u8303\u56f4\u5185\u53d8\u5316\uff0c\u8fc7\u4e8e\u9891\u7e41\u7684\u5173\u952e\u8bcd\u4f1a\u88ab\u60e9\u7f5a\u3002\n\n\u5176\u6b21\uff0c`idf=tfidf_normalized`\u4f1a\u5bfc\u81f4IDF\u5728\u67e5\u8be2\u4e4b\u95f4\u6f02\u79fb\u3002\u5386\u53f2\u4e0a\uff0c\u6211\u4eec\u8fd8\u989d\u5916\u5c06IDF\u9664\u4ee5\u67e5\u8be2\u5173\u952e\u8bcd\u6570\u91cf\uff0c\u4f7f\u5f97\u6240\u6709\u5173\u952e\u8bcd\u7684 `sum(tf*idf)` \u4ecd\u7136\u9002\u5408 `[0,1]` \u8303\u56f4\u3002\u7136\u800c\uff0c\u8fd9\u610f\u5473\u7740\u67e5\u8be2 `word1` \u548c `word1 | nonmatchingword2` \u4f1a\u5bf9\u5b8c\u5168\u76f8\u540c\u7684\u8fd4\u56de\u96c6\u5206\u914d\u4e0d\u540c\u7684\u6743\u91cd\uff0c\u56e0\u4e3a `word1` \u548c `nonmatchingword2` \u7684IDF\u90fd\u4f1a\u88ab\u9664\u4ee52\u3002`OPTION idf='tfidf_unnormalized'`\u53ef\u4ee5\u4fee\u590d\u8fd9\u4e2a\u95ee\u9898\u3002\u8bf7\u6ce8\u610f\uff0c\u4e00\u65e6\u7981\u7528\u8fd9\u79cd\u89c4\u8303\u5316\uff0cBM25\u3001BM25A\u3001BM25F() \u6392\u5e8f\u56e0\u5b50\u5c06\u76f8\u5e94\u5730\u8fdb\u884c\u7f29\u653e\u3002\n\nIDF\u6807\u5fd7\u53ef\u4ee5\u6df7\u5408\uff1b`plain` \u548c `normalized` \u662f\u4e92\u65a5\u7684\uff1b`tfidf_unnormalized` \u548c `tfidf_normalized` \u4e5f\u662f\u4e92\u65a5\u7684\uff1b\u5728\u8fd9\u6837\u7684\u4e92\u65a5\u7ec4\u4e2d\u672a\u6307\u5b9a\u7684\u6807\u5fd7\u5c06\u91c7\u7528\u9ed8\u8ba4\u503c\u3002\u8fd9\u610f\u5473\u7740 OPTION idf=plain \u7b49\u540c\u4e8e\u5b8c\u6574\u7684 OPTION idf='plain,tfidf_normalized' \u6307\u5b9a\u3002\n\n<!-- proofread -->",
            "russian": "ATC \u043f\u043e \u0441\u0443\u0442\u0438 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c. \u0414\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e *\u0432\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f* \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u0433\u043e \u0441\u043b\u043e\u0432\u0430 \u0432 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0435 \u043c\u044b \u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0435\u043c \u0442\u0430\u043a \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u043c\u0443\u044e *\u0431\u043b\u0438\u0437\u043e\u0441\u0442\u044c \u0442\u0435\u0440\u043c\u0438\u043d\u043e\u0432*. \u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u043c\u044b \u0440\u0430\u0441\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0435\u043c \u0432\u0441\u0435 \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0435 \u0431\u043b\u0438\u0436\u0430\u0439\u0448\u0438\u0435 \u0432\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f \u0432\u0441\u0435\u0445 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 (\u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0441\u0430\u043c\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u0435 \u0441\u043b\u043e\u0432\u043e) \u0441\u043b\u0435\u0432\u0430 \u0438 \u0441\u043f\u0440\u0430\u0432\u0430 \u043e\u0442 \u0440\u0430\u0441\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0435\u043c\u043e\u0433\u043e \u0432\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f, \u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0435\u043c \u043a\u043e\u044d\u0444\u0444\u0438\u0446\u0438\u0435\u043d\u0442 \u0437\u0430\u0442\u0443\u0445\u0430\u043d\u0438\u044f \u043f\u043e \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u044e \u043a\u0430\u043a k = pow(distance, -1.75) \u0434\u043b\u044f \u044d\u0442\u0438\u0445 \u0432\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u0439 \u0438 \u0441\u0443\u043c\u043c\u0438\u0440\u0443\u0435\u043c \u0437\u0430\u0442\u0443\u0445\u0430\u044e\u0449\u0438\u0435 IDF. \u0412 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0435 \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u0433\u043e \u0441\u043b\u043e\u0432\u0430 \u043c\u044b \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \"\u0431\u043b\u0438\u0437\u043e\u0441\u0442\u0438\", \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u043e\u043f\u0438\u0441\u044b\u0432\u0430\u0435\u0442 \"\u0441\u043e\u0441\u0435\u0434\u0435\u0439\" \u044d\u0442\u043e\u0433\u043e \u0432\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f. \u0417\u0430\u0442\u0435\u043c \u043c\u044b \u0443\u043c\u043d\u043e\u0436\u0430\u0435\u043c \u044d\u0442\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0431\u043b\u0438\u0437\u043e\u0441\u0442\u0438 \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f \u043d\u0430 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0439 IDF \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u0433\u043e \u0441\u043b\u043e\u0432\u0430-\u0441\u0443\u0431\u044a\u0435\u043a\u0442\u0430, \u0441\u0443\u043c\u043c\u0438\u0440\u0443\u0435\u043c \u0438\u0445 \u0432\u0441\u0435 \u0438, \u043d\u0430\u043a\u043e\u043d\u0435\u0446, \u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0435\u043c \u043b\u043e\u0433\u0430\u0440\u0438\u0444\u043c \u044d\u0442\u043e\u0439 \u0441\u0443\u043c\u043c\u044b.\n\n\u0414\u0440\u0443\u0433\u0438\u043c\u0438 \u0441\u043b\u043e\u0432\u0430\u043c\u0438, \u043c\u044b \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u043c \u043d\u0430\u0438\u043b\u0443\u0447\u0448\u0438\u0435 (\u0431\u043b\u0438\u0436\u0430\u0439\u0448\u0438\u0435) \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0449\u0438\u0435 \u043f\u0430\u0440\u044b \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432 \u0432 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0435 \u0438 \u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0435\u043c \u043f\u043e\u043f\u0430\u0440\u043d\u044b\u0435 \"\u0431\u043b\u0438\u0437\u043e\u0441\u0442\u0438\" \u043a\u0430\u043a \u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u0438\u0445 IDF, \u043c\u0430\u0441\u0448\u0442\u0430\u0431\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0435 \u043a\u043e\u044d\u0444\u0444\u0438\u0446\u0438\u0435\u043d\u0442\u043e\u043c \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u044f:\n\nCODE_BLOCK_59\n\n\u0417\u0430\u0442\u0435\u043c \u043c\u044b \u0441\u0443\u043c\u043c\u0438\u0440\u0443\u0435\u043c \u0442\u0430\u043a\u0438\u0435 \u0431\u043b\u0438\u0437\u043e\u0441\u0442\u0438 \u0438 \u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0435\u043c \u043e\u043a\u043e\u043d\u0447\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435, \u043b\u043e\u0433\u0430\u0440\u0438\u0444\u043c\u0438\u0447\u0435\u0441\u043a\u0438 \u0437\u0430\u0442\u0443\u0445\u0430\u044e\u0449\u0435\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 ATC:\n\nCODE_BLOCK_60\n\n\u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435, \u0447\u0442\u043e \u044d\u0442\u043e\u0442 \u0444\u0438\u043d\u0430\u043b\u044c\u043d\u044b\u0439 \u0437\u0430\u0442\u0443\u0445\u0430\u044e\u0449\u0438\u0439 \u043b\u043e\u0433\u0430\u0440\u0438\u0444\u043c \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0438\u043c\u0435\u043d\u043d\u043e \u0442\u043e\u0439 \u043f\u0440\u0438\u0447\u0438\u043d\u043e\u0439, \u043f\u043e \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c OPTION idf=plain, \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u0431\u0435\u0437 \u043d\u0435\u0433\u043e \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0432\u043d\u0443\u0442\u0440\u0438 log() \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u043c.\n\n\u0411\u043e\u043b\u0435\u0435 \u0431\u043b\u0438\u0437\u043a\u0438\u0435 \u0432\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432 \u0432\u043d\u043e\u0441\u044f\u0442 *\u0433\u043e\u0440\u0430\u0437\u0434\u043e* \u0431\u043e\u043b\u044c\u0448\u0438\u0439 \u0432\u043a\u043b\u0430\u0434 \u0432 ATC, \u0447\u0435\u043c \u0431\u043e\u043b\u0435\u0435 \u0447\u0430\u0441\u0442\u044b\u0435 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0441\u043b\u043e\u0432\u0430. \u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e, \u043a\u043e\u0433\u0434\u0430 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0441\u043b\u043e\u0432\u0430 \u043d\u0430\u0445\u043e\u0434\u044f\u0442\u0441\u044f \u043f\u0440\u044f\u043c\u043e \u0440\u044f\u0434\u043e\u043c \u0434\u0440\u0443\u0433 \u0441 \u0434\u0440\u0443\u0433\u043e\u043c, distance=1 \u0438 k=1; \u043a\u043e\u0433\u0434\u0430 \u043c\u0435\u0436\u0434\u0443 \u043d\u0438\u043c\u0438 \u0432\u0441\u0435\u0433\u043e \u043e\u0434\u043d\u043e \u0441\u043b\u043e\u0432\u043e, distance=2 \u0438 k=0.297, \u0441 \u0434\u0432\u0443\u043c\u044f \u0441\u043b\u043e\u0432\u0430\u043c\u0438 \u043c\u0435\u0436\u0434\u0443 \u043d\u0438\u043c\u0438, distance=3 \u0438 k=0.146, \u0438 \u0442\u0430\u043a \u0434\u0430\u043b\u0435\u0435. \u0412 \u0442\u043e \u0436\u0435 \u0432\u0440\u0435\u043c\u044f IDF \u0437\u0430\u0442\u0443\u0445\u0430\u0435\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043c\u0435\u0434\u043b\u0435\u043d\u043d\u0435\u0435. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0432 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438 \u0438\u0437 1 \u043c\u0438\u043b\u043b\u0438\u043e\u043d\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f IDF \u0434\u043b\u044f \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0432\u0441\u0442\u0440\u0435\u0447\u0430\u044e\u0442\u0441\u044f \u0432 10, 100 \u0438 1000 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0445, \u0431\u0443\u0434\u0443\u0442 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e 0.833, 0.667 \u0438 0.500. \u0422\u0430\u043a\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c, \u043f\u0430\u0440\u0430 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432 \u0441 \u0434\u0432\u0443\u043c\u044f \u0434\u043e\u0432\u043e\u043b\u044c\u043d\u043e \u0440\u0435\u0434\u043a\u0438\u043c\u0438 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u043c\u0438 \u0441\u043b\u043e\u0432\u0430\u043c\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0432\u0441\u0442\u0440\u0435\u0447\u0430\u044e\u0442\u0441\u044f \u0432\u0441\u0435\u0433\u043e \u0432 10 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0445 \u043a\u0430\u0436\u0434\u044b\u0439, \u043d\u043e \u0441 2 \u0434\u0440\u0443\u0433\u0438\u043c\u0438 \u0441\u043b\u043e\u0432\u0430\u043c\u0438 \u043c\u0435\u0436\u0434\u0443 \u043d\u0438\u043c\u0438, \u0434\u0430\u0441\u0442 pair_tc = 0.101 \u0438, \u0442\u0430\u043a\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c, \u0435\u0434\u0432\u0430 \u043f\u0435\u0440\u0435\u0432\u0435\u0441\u0438\u0442 \u043f\u0430\u0440\u0443 \u0441 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u043c\u0438 \u0441\u043b\u043e\u0432\u0430\u043c\u0438 \u0438\u0437 100 \u0438 1000 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432 \u0441 1 \u0434\u0440\u0443\u0433\u0438\u043c \u0441\u043b\u043e\u0432\u043e\u043c \u043c\u0435\u0436\u0434\u0443 \u043d\u0438\u043c\u0438 \u0438 pair_tc = 0.099. \u0411\u043e\u043b\u0435\u0435 \u0442\u043e\u0433\u043e, \u043f\u0430\u0440\u0430 \u0434\u0432\u0443\u0445 *\u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0445*, 1-\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043d\u044b\u0445 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432 \u0441 3 \u0441\u043b\u043e\u0432\u0430\u043c\u0438 \u043c\u0435\u0436\u0434\u0443 \u043d\u0438\u043c\u0438 \u043f\u043e\u043b\u0443\u0447\u0438\u0442 pair_tc = 0.088 \u0438 \u043f\u0440\u043e\u0438\u0433\u0440\u0430\u0435\u0442 \u043f\u0430\u0440\u0435 \u0438\u0437 \u0434\u0432\u0443\u0445 1000-\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043d\u044b\u0445 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432, \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0445 \u043f\u0440\u044f\u043c\u043e \u0440\u044f\u0434\u043e\u043c \u0434\u0440\u0443\u0433 \u0441 \u0434\u0440\u0443\u0433\u043e\u043c \u0438 \u0434\u0430\u044e\u0449\u0438\u0445 pair_tc = 0.25. \u0418\u0442\u0430\u043a, \u0432 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u043c, \u0445\u043e\u0442\u044f ATC \u0438 \u0441\u043e\u0447\u0435\u0442\u0430\u0435\u0442 \u0432 \u0441\u0435\u0431\u0435 \u043a\u0430\u043a \u0447\u0430\u0441\u0442\u043e\u0442\u0443 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432, \u0442\u0430\u043a \u0438 \u0431\u043b\u0438\u0437\u043e\u0441\u0442\u044c, \u043e\u043d \u0432\u0441\u0435 \u0436\u0435 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043e\u0442\u0434\u0430\u0435\u0442 \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0442\u0435\u043d\u0438\u0435 \u0431\u043b\u0438\u0437\u043e\u0441\u0442\u0438.\n\n### \u0424\u0443\u043d\u043a\u0446\u0438\u0438 \u0430\u0433\u0440\u0435\u0433\u0430\u0446\u0438\u0438 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432 \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f\n\n**\u0424\u0443\u043d\u043a\u0446\u0438\u044f \u0430\u0433\u0440\u0435\u0433\u0430\u0446\u0438\u0438 \u043f\u043e\u043b\u0435\u0439** \u2014 \u044d\u0442\u043e \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0441 \u043e\u0434\u043d\u0438\u043c \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u043e\u043c, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u0442 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0441 \u0444\u0430\u043a\u0442\u043e\u0440\u0430\u043c\u0438 \u043d\u0430 \u0443\u0440\u043e\u0432\u043d\u0435 \u043f\u043e\u043b\u0435\u0439, \u043f\u0435\u0440\u0435\u0431\u0438\u0440\u0430\u0435\u0442 \u0432\u0441\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0449\u0438\u0435 \u043f\u043e\u043b\u044f \u0438 \u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0435\u0442 \u043e\u043a\u043e\u043d\u0447\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b. \u0412 \u043d\u0430\u0441\u0442\u043e\u044f\u0449\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0430\u0433\u0440\u0435\u0433\u0430\u0446\u0438\u0438 \u043f\u043e\u043b\u0435\u0439 \u0432\u043a\u043b\u044e\u0447\u0430\u044e\u0442:\n\n* `sum`, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0441\u0443\u043c\u043c\u0438\u0440\u0443\u0435\u0442 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435-\u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442 \u043f\u043e \u0432\u0441\u0435\u043c \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0449\u0438\u043c \u043f\u043e\u043b\u044f\u043c. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, `sum(1)` \u0434\u043e\u043b\u0436\u043d\u0430 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0442\u044c \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0449\u0438\u0445 \u043f\u043e\u043b\u0435\u0439.\n* `top`, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u043d\u0430\u0438\u0431\u043e\u043b\u044c\u0448\u0435\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u0430 \u0441\u0440\u0435\u0434\u0438 \u0432\u0441\u0435\u0445 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0449\u0438\u0445 \u043f\u043e\u043b\u0435\u0439.\n* `max_window_hits`, \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u0441\u043a\u043e\u043b\u044c\u0437\u044f\u0449\u0438\u043c \u043e\u043a\u043d\u043e\u043c \u043f\u043e\u0437\u0438\u0446\u0438\u0439 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439 \u0434\u043b\u044f \u043e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u043d\u0438\u044f \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439 \u0432 \u043f\u0440\u0435\u0434\u0435\u043b\u0430\u0445 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0433\u043e \u0440\u0430\u0437\u043c\u0435\u0440\u0430 \u043e\u043a\u043d\u0430. \u041e\u043d\u0430 \u0443\u0434\u0430\u043b\u044f\u0435\u0442 \u0443\u0441\u0442\u0430\u0440\u0435\u0432\u0448\u0438\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u044f, \u0432\u044b\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0437\u0430 \u043f\u0440\u0435\u0434\u0435\u043b\u044b \u043e\u043a\u043d\u0430, \u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0435, \u043e\u0431\u043d\u043e\u0432\u043b\u044f\u044f \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439, \u043d\u0430\u0439\u0434\u0435\u043d\u043d\u044b\u0445 \u0432 \u044d\u0442\u043e\u043c \u043e\u043a\u043d\u0435.\n\n### \u0412\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0444\u043e\u0440\u043c\u0443\u043b \u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u0432\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u0445 \u0440\u0430\u043d\u043a\u0435\u0440\u043e\u0432\n\n\u0411\u043e\u043b\u044c\u0448\u0438\u043d\u0441\u0442\u0432\u043e \u0434\u0440\u0443\u0433\u0438\u0445 \u0440\u0430\u043d\u043a\u0435\u0440\u043e\u0432 \u0444\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043c\u043e\u0436\u043d\u043e \u044d\u043c\u0443\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u0440\u0430\u043d\u043a\u0435\u0440\u0430 \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0439. \u0412\u0430\u043c \u043f\u0440\u043e\u0441\u0442\u043e \u043d\u0443\u0436\u043d\u043e \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435. \u0425\u043e\u0442\u044f \u044d\u0442\u0430 \u044d\u043c\u0443\u043b\u044f\u0446\u0438\u044f, \u0432\u0435\u0440\u043e\u044f\u0442\u043d\u043e, \u0431\u0443\u0434\u0435\u0442 \u043c\u0435\u0434\u043b\u0435\u043d\u043d\u0435\u0435, \u0447\u0435\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0432\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u043e\u0433\u043e \u0441\u043a\u043e\u043c\u043f\u0438\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0433\u043e \u0440\u0430\u043d\u043a\u0435\u0440\u0430, \u043e\u043d\u0430 \u0432\u0441\u0435 \u0436\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u0430, \u0435\u0441\u043b\u0438 \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u0442\u043e\u0447\u043d\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0441\u0432\u043e\u044e \u0444\u043e\u0440\u043c\u0443\u043b\u0443 \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f, \u043d\u0430\u0447\u0438\u043d\u0430\u044f \u0441 \u043e\u0434\u043d\u043e\u0439 \u0438\u0437 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0445. \u041a\u0440\u043e\u043c\u0435 \u0442\u043e\u0433\u043e, \u0444\u043e\u0440\u043c\u0443\u043b\u044b \u043e\u043f\u0438\u0441\u044b\u0432\u0430\u044e\u0442 \u0434\u0435\u0442\u0430\u043b\u0438 \u0440\u0430\u043d\u043a\u0435\u0440\u0430 \u0432 \u043f\u043e\u043d\u044f\u0442\u043d\u043e\u0439, \u0447\u0438\u0442\u0430\u0435\u043c\u043e\u0439 \u0444\u043e\u0440\u043c\u0435.\n\n* proximity_bm25 (\u0440\u0430\u043d\u043a\u0435\u0440 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e) = `sum(lcs*user_weight)*1000+bm25`\n* bm25 = `sum(user_weight)*1000+bm25`\n* none = `1`\n* wordcount = `sum(hit_count*user_weight)`\n* proximity = `sum(lcs*user_weight)`\n* matchany = `sum((word_count+(lcs-1)*max_lcs)*user_weight)`\n* fieldmask = `field_mask`\n* sph04 = `sum((4*lcs+2*(min_hit_pos==1)+exact_hit)*user_weight)*1000+bm25`\n\n### \u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u0444\u043e\u0440\u043c\u0443\u043b\u044b IDF\n\n\u0418\u0441\u0442\u043e\u0440\u0438\u0447\u0435\u0441\u043a\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0439 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e IDF (\u043e\u0431\u0440\u0430\u0442\u043d\u0430\u044f \u0447\u0430\u0441\u0442\u043e\u0442\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430) \u0432 Manticore \u044d\u043a\u0432\u0438\u0432\u0430\u043b\u0435\u043d\u0442\u0435\u043d `OPTION idf='normalized,tfidf_normalized'`, \u0438 \u044d\u0442\u0438 \u043d\u043e\u0440\u043c\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u043c\u043e\u0433\u0443\u0442 \u0432\u044b\u0437\u044b\u0432\u0430\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043d\u0435\u0436\u0435\u043b\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u044d\u0444\u0444\u0435\u043a\u0442\u043e\u0432.\n\n\u0412\u043e-\u043f\u0435\u0440\u0432\u044b\u0445, `idf=normalized` \u0432\u044b\u0437\u044b\u0432\u0430\u0435\u0442 \u0448\u0442\u0440\u0430\u0444 \u0437\u0430 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0441\u043b\u043e\u0432\u0430. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0435\u0441\u043b\u0438 \u0432\u044b \u0438\u0449\u0435\u0442\u0435 `the | something` \u0438 `the` \u0432\u0441\u0442\u0440\u0435\u0447\u0430\u0435\u0442\u0441\u044f \u0431\u043e\u043b\u0435\u0435 \u0447\u0435\u043c \u0432 50% \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432, \u0442\u043e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b \u0441 \u043e\u0431\u043e\u0438\u043c\u0438 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u043c\u0438 \u0441\u043b\u043e\u0432\u0430\u043c\u0438 `the` \u0438`[something` \u043f\u043e\u043b\u0443\u0447\u0430\u0442 \u043c\u0435\u043d\u044c\u0448\u0438\u0439 \u0432\u0435\u0441, \u0447\u0435\u043c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b \u0442\u043e\u043b\u044c\u043a\u043e \u0441 \u043e\u0434\u043d\u0438\u043c \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u043c \u0441\u043b\u043e\u0432\u043e\u043c  `something`. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 `OPTION idf=plain` \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0438\u0437\u0431\u0435\u0436\u0430\u0442\u044c \u044d\u0442\u043e\u0433\u043e.\n\n\u041f\u0440\u043e\u0441\u0442\u043e\u0439 IDF \u0432\u0430\u0440\u044c\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u0432 \u0434\u0438\u0430\u043f\u0430\u0437\u043e\u043d\u0435 `[0, log(N)]`, \u0438 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0441\u043b\u043e\u0432\u0430 \u043d\u0438\u043a\u043e\u0433\u0434\u0430 \u043d\u0435 \u0448\u0442\u0440\u0430\u0444\u0443\u044e\u0442\u0441\u044f; \u0432 \u0442\u043e \u0432\u0440\u0435\u043c\u044f \u043a\u0430\u043a \u043d\u043e\u0440\u043c\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u044b\u0439 IDF \u0432\u0430\u0440\u044c\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u0432 \u0434\u0438\u0430\u043f\u0430\u0437\u043e\u043d\u0435 `[-log(N), log(N)]`, \u0438 \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0447\u0430\u0441\u0442\u044b\u0435 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0441\u043b\u043e\u0432\u0430 \u0448\u0442\u0440\u0430\u0444\u0443\u044e\u0442\u0441\u044f.\n\n\u0412\u043e-\u0432\u0442\u043e\u0440\u044b\u0445, `idf=tfidf_normalized` \u0432\u044b\u0437\u044b\u0432\u0430\u0435\u0442 \u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435 IDF \u043c\u0435\u0436\u0434\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0430\u043c\u0438. \u0418\u0441\u0442\u043e\u0440\u0438\u0447\u0435\u0441\u043a\u0438 \u043c\u044b \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u0435\u043b\u0438\u043b\u0438 IDF \u043d\u0430 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432 \u0432 \u0437\u0430\u043f\u0440\u043e\u0441\u0435, \u0447\u0442\u043e\u0431\u044b \u0432\u0441\u044f `sum(tf*idf)` \u043f\u043e \u0432\u0441\u0435\u043c \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u043c \u0441\u043b\u043e\u0432\u0430\u043c \u0432\u0441\u0435 \u0435\u0449\u0435 \u0443\u043a\u043b\u0430\u0434\u044b\u0432\u0430\u043b\u0430\u0441\u044c \u0432 \u0434\u0438\u0430\u043f\u0430\u0437\u043e\u043d `[0,1]`. \u041e\u0434\u043d\u0430\u043a\u043e \u044d\u0442\u043e \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442, \u0447\u0442\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u044b `word1` \u0438 `word1 | nonmatchingword2` \u0431\u0443\u0434\u0443\u0442 \u043f\u0440\u0438\u0441\u0432\u0430\u0438\u0432\u0430\u0442\u044c \u0440\u0430\u0437\u043d\u044b\u0439 \u0432\u0435\u0441 \u0442\u043e\u0447\u043d\u043e \u0442\u0430\u043a\u043e\u043c\u0443 \u0436\u0435 \u043d\u0430\u0431\u043e\u0440\u0443 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432, \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e IDF \u043a\u0430\u043a \u0434\u043b\u044f `word1`, \u0442\u0430\u043a \u0438 \u0434\u043b\u044f `nonmatchingword2` \u0431\u0443\u0434\u0443\u0442 \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u044b \u043d\u0430 2. `OPTION idf='tfidf_unnormalized'` \u0438\u0441\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u044d\u0442\u043e. \u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435, \u0447\u0442\u043e \u0444\u0430\u043a\u0442\u043e\u0440\u044b \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f BM25, BM25A, BM25F() \u0431\u0443\u0434\u0443\u0442 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c \u043c\u0430\u0441\u0448\u0442\u0430\u0431\u0438\u0440\u043e\u0432\u0430\u043d\u044b, \u043a\u0430\u043a \u0442\u043e\u043b\u044c\u043a\u043e \u0432\u044b \u043e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u0435 \u044d\u0442\u0443 \u043d\u043e\u0440\u043c\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e.\n\n\u0424\u043b\u0430\u0433\u0438 IDF \u043c\u043e\u0436\u043d\u043e \u043a\u043e\u043c\u0431\u0438\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c; `plain` \u0438 `normalized` \u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0432\u0437\u0430\u0438\u043c\u043e\u0438\u0441\u043a\u043b\u044e\u0447\u0430\u044e\u0449\u0438\u043c\u0438; `tfidf_unnormalized` \u0438 `tfidf_normalized` \u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0432\u0437\u0430\u0438\u043c\u043e\u0438\u0441\u043a\u043b\u044e\u0447\u0430\u044e\u0449\u0438\u043c\u0438; \u0438 \u043d\u0435\u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0435 \u0444\u043b\u0430\u0433\u0438 \u0432 \u0442\u0430\u043a\u043e\u0439 \u0432\u0437\u0430\u0438\u043c\u043e\u0438\u0441\u043a\u043b\u044e\u0447\u0430\u044e\u0449\u0435\u0439 \u0433\u0440\u0443\u043f\u043f\u0435 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u044e\u0442 \u0441\u0432\u043e\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e. \u042d\u0442\u043e \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442, \u0447\u0442\u043e `OPTION idf=plain` \u044d\u043a\u0432\u0438\u0432\u0430\u043b\u0435\u043d\u0442\u043d\u043e \u043f\u043e\u043b\u043d\u043e\u0439 \u0441\u043f\u0435\u0446\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438 `OPTION idf='plain,tfidf_normalized'`.\n\n<!-- proofread -->"
        },
        "is_code_or_comment": false,
        "model": "deepseek/deepseek-v3.2",
        "updated_at": 1766374339
    },
    "64327fafab8714af384275a12d17cdc2a1778754d4e7d0809704c9cb652291bf": {
        "original": "# Sorting and ranking\n\nQuery results can be sorted by full-text ranking weight, one or more attributes or expressions.\n\n**Full-text** queries return matches sorted by default. If nothing is specified, they are sorted by relevance, which is equivalent to `ORDER BY weight() DESC` in SQL format.\n\n**Non-full-text** queries do not perform any sorting by default.\n\n## Advanced sorting\n\nExtended mode is automatically enabled when you explicitly provide sorting rules by adding the `ORDER BY` clause in SQL format or using the `sort` option via HTTP JSON.\n\n### Sorting via SQL\n\nGeneral syntax:\nCODE_BLOCK_0\n\n<!-- example alias -->\n\nIn the sort clause, you can use any combination of up to 5 columns, each followed by `asc` or `desc`. Functions and expressions are not allowed as arguments for the sort clause, except for the `weight()` and `random()` functions (the latter can only be used via SQL in the form of `ORDER BY random()`). However, you can use any expression in the SELECT list and sort by its alias.\n\n<!-- request SQL -->\nCODE_BLOCK_1\n\n<!-- response SQL -->\nCODE_BLOCK_2\n\n<!-- end -->\n\n## Sorting via JSON\n\n<!-- example sorting 1 -->\n`\"sort\"` specifies an array where each element can be an attribute name or `_score` if you want to sort by match weights or `_random` if you want radnom match order. In that case, the sort order defaults to ascending for attributes and descending for `_score`.\n\n<!-- intro -->\n\n<!-- request JSON -->\n\nCODE_BLOCK_3\n\n<!-- response JSON -->\n\nCODE_BLOCK_4\n\n<!-- intro -->\n##### PHP:\n\n<!-- request PHP -->\n\nCODE_BLOCK_5\n\n<!-- intro -->\n\n##### Python:\n\n<!-- request Python -->\nCODE_BLOCK_6\n\n<!-- intro -->\n\n##### Python-asyncio:\n\n<!-- request Python-asyncio -->\nCODE_BLOCK_7\n\n<!-- intro -->\n\n##### Javascript:\n\n<!-- request javascript -->\nCODE_BLOCK_8\n\n<!-- intro -->\n\n##### java:\n\n<!-- request Java -->\nCODE_BLOCK_9\n\n<!-- intro -->\n\n##### C#:\n\n<!-- request C# -->\nCODE_BLOCK_10\n\n<!-- intro -->\n\n##### Rust:\n\n<!-- request Rust -->\nCODE_BLOCK_11\n\n<!-- intro -->\n\n##### Typescript:\n\n<!-- request typescript -->\nCODE_BLOCK_12\n\n<!-- intro -->\n\n##### Go:\n\n<!-- request go -->\nCODE_BLOCK_13\n\n<!-- end -->\n\n<!-- example sorting 2 -->\nYou can also specify the sort order explicitly:\n\n* `asc`: sort in ascending order\n* `desc`: sort in descending order\n\n<!-- intro -->\n\n<!-- request JSON -->\n\nCODE_BLOCK_14\n\n<!-- response JSON -->\n\nCODE_BLOCK_15\n\n<!-- intro -->\n##### PHP:\n\n<!-- request PHP -->\n\nCODE_BLOCK_16\n\n<!-- intro -->\n\n##### Python:\n\n<!-- request Python -->\nCODE_BLOCK_17\n\n<!-- intro -->\n\n##### Python-asyncio:\n\n<!-- request Python-asyncio -->\nCODE_BLOCK_18\n\n<!-- intro -->\n\n##### Javascript:\n\n<!-- request javascript -->\nCODE_BLOCK_19\n\n<!-- intro -->\n\n##### java:\n\n<!-- request Java -->\nCODE_BLOCK_20\n\n<!-- intro -->\n\n##### C#:\n\n<!-- request C# -->\nCODE_BLOCK_21\n\n<!-- intro -->\n\n##### Rust:\n\n<!-- request Rust -->\nCODE_BLOCK_22\n\n<!-- intro -->\n\n##### Typescript:\n\n<!-- request typescript -->\nCODE_BLOCK_23\n\n<!-- intro -->\n\n##### Go:\n\n<!-- request go -->\nCODE_BLOCK_24\n\n<!-- end -->\n\n<!-- example sorting 3 -->\nYou can also use another syntax and specify the sort order via the `order` property:\n\n<!-- intro -->\n\n<!-- request JSON -->\n\nCODE_BLOCK_25\n\n<!-- response JSON -->\n\nCODE_BLOCK_26\n\n<!-- intro -->\n##### PHP:\n\n<!-- request PHP -->\n\nCODE_BLOCK_27\n\n<!-- intro -->\n\n##### Python:\n\n<!-- request Python -->\nCODE_BLOCK_28\n\n<!-- intro -->\n\n##### Python-asyncio:\n\n<!-- request Python-asyncio -->\nCODE_BLOCK_29\n\n<!-- intro -->\n\n##### Javascript:\n\n<!-- request javascript -->\nCODE_BLOCK_30\n\n<!-- intro -->\n\n##### java:\n\n<!-- request Java -->\nCODE_BLOCK_31\n\n<!-- intro -->\n\n##### C#:\n\n<!-- request C# -->\nCODE_BLOCK_32\n\n<!-- intro -->\n\n##### Rust:\n\n<!-- request Rust -->\nCODE_BLOCK_33\n\n<!-- intro -->\n\n##### Typescript:\n\n<!-- request typescript -->\nCODE_BLOCK_34\n\n<!-- intro -->\n\n##### Go:\n\n<!-- request go -->\nCODE_BLOCK_35\n\n<!-- end -->\n\n<!-- example sorting 4 -->\nSorting by MVA attributes is also supported in JSON queries. Sorting mode can be set via the `mode` property. The following modes are supported:\n\n* `min`: sort by minimum value\n* `max`: sort by maximum value\n\n<!-- intro -->\n\n<!-- request JSON -->\n\nCODE_BLOCK_36\n\n<!-- response JSON -->\n\nCODE_BLOCK_37\n\n<!-- intro -->\n##### PHP:\n\n<!-- request PHP -->\n\nCODE_BLOCK_38\n\n<!-- intro -->\n\n##### Python:\n\n<!-- request Python -->\nCODE_BLOCK_39\n\n<!-- intro -->\n\n##### Python-asyncio:\n\n<!-- request Python-asyncio -->\nCODE_BLOCK_40\n\n<!-- intro -->\n\n##### Javascript:\n\n<!-- request javascript -->\nCODE_BLOCK_41\n\n<!-- intro -->\n\n##### java:\n\n<!-- request Java -->\nCODE_BLOCK_42\n\n<!-- intro -->\n\n##### C#:\n\n<!-- request C# -->\nCODE_BLOCK_43\n\n<!-- intro -->\n\n##### Rust:\n\n<!-- request Rust -->\nCODE_BLOCK_44\n\n<!-- intro -->\n\n##### Typescript:\n\n<!-- request typescript -->\nCODE_BLOCK_45\n\n<!-- intro -->\n\n##### Go:\n\n<!-- request go -->\nCODE_BLOCK_46\n\n<!-- end -->\n\n<!-- example sorting 5 -->\nWhen sorting on an attribute, match weight (score) calculation is disabled by default (no ranker is used). You can enable weight calculation by setting the `track_scores` property to `true`:\n\n<!-- intro -->\n\n<!-- request JSON -->\n\nCODE_BLOCK_47\n\n<!-- response JSON -->\n\nCODE_BLOCK_48\n\n<!-- intro -->\n##### PHP:\n\n<!-- request PHP -->\n\nCODE_BLOCK_49\n\n<!-- intro -->\n\n##### Python:\n\n<!-- request Python -->\nCODE_BLOCK_50\n\n<!-- intro -->\n\n##### Python-asyncio:\n\n<!-- request Python-asyncio -->\nCODE_BLOCK_51\n\n<!-- intro -->\n\n##### Javascript:\n\n<!-- request javascript -->\nCODE_BLOCK_52\n\n<!-- intro -->\n\n##### java:\n\n<!-- request Java -->\nCODE_BLOCK_53\n\n<!-- intro -->\n\n##### C#:\n\n<!-- request C# -->\nCODE_BLOCK_54\n\n<!-- intro -->\n\n##### Rust:\n\n<!-- request Rust -->\nCODE_BLOCK_55\n\n<!-- intro -->\n\n##### Typescript:\n\n<!-- request typescript -->\nCODE_BLOCK_56\n\n<!-- intro -->\n\n##### Go:\n\n<!-- request go -->\nCODE_BLOCK_57\n\n<!-- end -->\n\n## Ranking overview",
        "translations": {
            "chinese": "# \u6392\u5e8f\u548c\u6392\u540d\n\n\u67e5\u8be2\u7ed3\u679c\u53ef\u4ee5\u6309\u7167\u5168\u6587\u6392\u540d\u6743\u91cd\u3001\u4e00\u4e2a\u6216\u591a\u4e2a\u5c5e\u6027\u6216\u8868\u8fbe\u5f0f\u8fdb\u884c\u6392\u5e8f\u3002\n\n**\u5168\u6587**\u67e5\u8be2\u8fd4\u56de\u5339\u914d\u9879\u9ed8\u8ba4\u6309\u987a\u5e8f\u6392\u5e8f\u3002\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u6392\u5e8f\u65b9\u5f0f\uff0c\u5219\u9ed8\u8ba4\u6309\u76f8\u5173\u6027\u6392\u5e8f\uff0c\u8fd9\u7b49\u540c\u4e8eSQL\u683c\u5f0f\u4e2d\u7684`ORDER BY weight() DESC`\u3002\n\n**\u975e\u5168\u6587**\u67e5\u8be2\u9ed8\u8ba4\u4e0d\u8fdb\u884c\u4efb\u4f55\u6392\u5e8f\u3002\n\n## \u9ad8\u7ea7\u6392\u5e8f\n\n\u5f53\u60a8\u663e\u5f0f\u63d0\u4f9b\u6392\u5e8f\u89c4\u5219\u65f6\uff0c\u6269\u5c55\u6a21\u5f0f\u4f1a\u81ea\u52a8\u542f\u7528\u3002\u8fd9\u53ef\u4ee5\u901a\u8fc7\u5728SQL\u683c\u5f0f\u4e2d\u6dfb\u52a0`ORDER BY`\u5b50\u53e5\u6216\u901a\u8fc7HTTP JSON\u4f7f\u7528`sort`\u9009\u9879\u6765\u5b9e\u73b0\u3002\n\n### \u901a\u8fc7SQL\u6392\u5e8f\n\n\u901a\u7528\u8bed\u6cd5\uff1a\nCODE_BLOCK_0\n\n<!-- \u793a\u4f8b\u522b\u540d -->\n\n\u5728\u6392\u5e8f\u5b50\u53e5\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528\u6700\u591a5\u5217\u7684\u4efb\u610f\u7ec4\u5408\uff0c\u6bcf\u5217\u540e\u8ddf`asc`\u6216`desc`\u3002\u6392\u5e8f\u5b50\u53e5\u4e0d\u5141\u8bb8\u4f7f\u7528\u51fd\u6570\u548c\u8868\u8fbe\u5f0f\u4f5c\u4e3a\u53c2\u6570\uff0c\u9664\u975e\u662f`weight()`\u548c`random()`\u51fd\u6570\uff08\u540e\u8005\u53ea\u80fd\u901a\u8fc7SQL\u4ee5`ORDER BY random()`\u7684\u5f62\u5f0f\u4f7f\u7528\uff09\u3002\u4f46\u662f\uff0c\u53ef\u4ee5\u5728SELECT\u5217\u8868\u4e2d\u4f7f\u7528\u4efb\u4f55\u8868\u8fbe\u5f0f\u5e76\u6309\u5176\u522b\u540d\u6392\u5e8f\u3002\n\n<!-- \u8bf7\u6c42SQL -->\nCODE_BLOCK_1\n\n<!-- \u54cd\u5e94SQL -->\nCODE_BLOCK_2\n\n<!-- \u7ed3\u675f -->\n\n## \u901a\u8fc7JSON\u6392\u5e8f\n\n<!-- \u6392\u5e8f\u793a\u4f8b1 -->\n`\"sort\"`\u6307\u5b9a\u4e00\u4e2a\u6570\u7ec4\uff0c\u5176\u4e2d\u6bcf\u4e2a\u5143\u7d20\u53ef\u4ee5\u662f\u5c5e\u6027\u540d\u79f0\u6216`_score`\uff08\u5982\u679c\u60a8\u60f3\u6309\u5339\u914d\u6743\u91cd\u6392\u5e8f\uff09\u6216`_random`\uff08\u5982\u679c\u60a8\u60f3\u6309\u968f\u673a\u5339\u914d\u987a\u5e8f\u6392\u5e8f\uff09\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5c5e\u6027\u7684\u6392\u5e8f\u987a\u5e8f\u4e3a\u5347\u5e8f\uff0c\u800c`_score`\u7684\u6392\u5e8f\u987a\u5e8f\u4e3a\u964d\u5e8f\u3002\n\n<!-- \u5f15\u5165 -->\n\n<!-- \u8bf7\u6c42JSON -->\n\nCODE_BLOCK_3\n\n<!-- \u54cd\u5e94JSON -->\n\nCODE_BLOCK_4\n\n<!-- \u5f15\u5165 -->\n##### PHP\uff1a\n\n<!-- \u8bf7\u6c42PHP -->\n\nCODE_BLOCK_5\n\n<!-- \u5f15\u5165 -->\n\n##### Python\uff1a\n\n<!-- \u8bf7\u6c42Python -->\nCODE_BLOCK_6\n\n<!-- \u5f15\u5165 -->\n\n##### Python-asyncio\uff1a\n\n<!-- \u8bf7\u6c42Python-asyncio -->\nCODE_BLOCK_7\n\n<!-- \u5f15\u5165 -->\n\n##### Javascript\uff1a\n\n<!-- \u8bf7\u6c42javascript -->\nCODE_BLOCK_8\n\n<!-- \u5f15\u5165 -->\n\n##### java\uff1a\n\n<!-- \u8bf7\u6c42Java -->\nCODE_BLOCK_9\n\n<!-- \u5f15\u5165 -->\n\n##### C#\uff1a\n\n<!-- \u8bf7\u6c42C# -->\nCODE_BLOCK_10\n\n<!-- \u5f15\u5165 -->\n\n##### Rust\uff1a\n\n<!-- \u8bf7\u6c42Rust -->\nCODE_BLOCK_11\n\n<!-- \u5f15\u5165 -->\n\n##### Typescript\uff1a\n\n<!-- \u8bf7\u6c42typescript -->\nCODE_BLOCK_12\n\n<!-- \u5f15\u5165 -->\n\n##### Go\uff1a\n\n<!-- \u8bf7\u6c42go -->\nCODE_BLOCK_13\n\n<!-- \u7ed3\u675f -->\n\n<!-- \u6392\u5e8f\u793a\u4f8b2 -->\n\u60a8\u4e5f\u53ef\u4ee5\u663e\u5f0f\u6307\u5b9a\u6392\u5e8f\u987a\u5e8f\uff1a\n\n* `asc`\uff1a\u6309\u5347\u5e8f\u6392\u5e8f\n* `desc`\uff1a\u6309\u964d\u5e8f\u6392\u5e8f\n\n<!-- \u5f15\u5165 -->\n\n<!-- \u8bf7\u6c42JSON -->\n\nCODE_BLOCK_14\n\n<!-- \u54cd\u5e94JSON -->\n\nCODE_BLOCK_15\n\n<!-- \u5f15\u5165 -->\n##### PHP\uff1a\n\n<!-- \u8bf7\u6c42PHP -->\n\nCODE_BLOCK_16\n\n<!-- \u5f15\u5165 -->\n\n##### Python\uff1a\n\n<!-- \u8bf7\u6c42Python -->\nCODE_BLOCK_17\n\n<!-- \u5f15\u5165 -->\n\n##### Python-asyncio\uff1a\n\n<!-- \u8bf7\u6c42Python-asyncio -->\nCODE_BLOCK_18\n\n<!-- \u5f15\u5165 -->\n\n##### Javascript\uff1a\n\n<!-- \u8bf7\u6c42javascript -->\nCODE_BLOCK_19\n\n<!-- \u5f15\u5165 -->\n\n##### java\uff1a\n\n<!-- \u8bf7\u6c42Java -->\nCODE_BLOCK_20\n\n<!-- \u5f15\u5165 -->\n\n##### C#\uff1a\n\n<!-- \u8bf7\u6c42C# -->\nCODE_BLOCK_21\n\n<!-- \u5f15\u5165 -->\n\n##### Rust\uff1a\n\n<!-- \u8bf7\u6c42Rust -->\nCODE_BLOCK_22\n\n<!-- \u5f15\u5165 -->\n\n##### Typescript\uff1a\n\n<!-- \u8bf7\u6c42typescript -->\nCODE_BLOCK_23\n\n<!-- \u5f15\u5165 -->\n\n##### Go\uff1a\n\n<!-- \u8bf7\u6c42go -->\nCODE_BLOCK_24\n\n<!-- \u7ed3\u675f -->\n\n<!-- \u6392\u5e8f\u793a\u4f8b3 -->\n\u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528\u53e6\u4e00\u79cd\u8bed\u6cd5\u5e76\u901a\u8fc7`order`\u5c5e\u6027\u6307\u5b9a\u6392\u5e8f\u987a\u5e8f\uff1a\n\n<!-- \u5f15\u5165 -->\n\n<!-- \u8bf7\u6c42JSON -->\n\nCODE_BLOCK_25\n\n<!-- \u54cd\u5e94JSON -->\n\nCODE_BLOCK_26\n\n<!-- \u5f15\u5165 -->\n##### PHP\uff1a\n\n<!-- \u8bf7\u6c42PHP -->\n\nCODE_BLOCK_27\n\n<!-- \u5f15\u5165 -->\n\n##### Python\uff1a\n\n<!-- \u8bf7\u6c42Python -->\nCODE_BLOCK_28\n\n<!-- \u5f15\u5165 -->\n\n##### Python-asyncio\uff1a\n\n<!-- \u8bf7\u6c42Python-asyncio -->\nCODE_BLOCK_29\n\n<!-- \u5f15\u5165 -->\n\n##### Javascript\uff1a\n\n<!-- \u8bf7\u6c42javascript -->\nCODE_BLOCK_30\n\n<!-- \u5f15\u5165 -->\n\n##### java\uff1a\n\n<!-- \u8bf7\u6c42Java -->\nCODE_BLOCK_31\n\n<!-- \u5f15\u5165 -->\n\n##### C#\uff1a\n\n<!-- \u8bf7\u6c42C# -->\nCODE_BLOCK_32\n\n<!-- \u5f15\u5165 -->\n\n##### Rust\uff1a\n\n<!-- \u8bf7\u6c42Rust -->\nCODE_BLOCK_33\n\n<!-- \u5f15\u5165 -->\n\n##### Typescript\uff1a\n\n<!-- \u8bf7\u6c42typescript -->\nCODE_BLOCK_34\n\n<!-- \u5f15\u5165 -->\n\n##### Go\uff1a\n\n<!-- \u8bf7\u6c42go -->\nCODE_BLOCK_35\n\n<!-- \u7ed3\u675f -->\n\n<!-- \u6392\u5e8f\u793a\u4f8b4 -->\nJSON\u67e5\u8be2\u4e2d\u4e5f\u652f\u6301\u6309MVA\u5c5e\u6027\u6392\u5e8f\u3002\u6392\u5e8f\u6a21\u5f0f\u53ef\u4ee5\u901a\u8fc7`mode`\u5c5e\u6027\u8bbe\u7f6e\u3002\u652f\u6301\u4ee5\u4e0b\u6a21\u5f0f\uff1a\n\n* `min`\uff1a\u6309\u6700\u5c0f\u503c\u6392\u5e8f\n* `max`\uff1a\u6309\u6700\u5927\u503c\u6392\u5e8f\n\n<!-- \u5f15\u5165 -->\n\n<!-- \u8bf7\u6c42JSON -->\n\nCODE_BLOCK_36\n\n<!-- \u54cd\u5e94JSON -->\n\nCODE_BLOCK_37\n\n<!-- \u5f15\u5165 -->\n##### PHP\uff1a\n\n<!-- \u8bf7\u6c42PHP -->\n\nCODE_BLOCK_38\n\n<!-- \u5f15\u5165 -->\n\n##### Python\uff1a\n\n<!-- \u8bf7\u6c42Python -->\nCODE_BLOCK_39\n\n<!-- \u5f15\u5165 -->\n\n##### Python-asyncio\uff1a\n\n<!-- \u8bf7\u6c42Python-asyncio -->\nCODE_BLOCK_40\n\n<!-- \u5f15\u5165 -->\n\n##### Javascript\uff1a\n\n<!-- \u8bf7\u6c42javascript -->\nCODE_BLOCK_41\n\n<!-- \u5f15\u5165 -->\n\n##### java\uff1a\n\n<!-- \u8bf7\u6c42Java -->\nCODE_BLOCK_42\n\n<!-- \u5f15\u5165 -->\n\n##### C#\uff1a\n\n<!-- \u8bf7\u6c42C# -->\nCODE_BLOCK_43\n\n<!-- \u5f15\u5165 -->\n\n##### Rust\uff1a\n\n<!-- \u8bf7\u6c42Rust -->\nCODE_BLOCK_44\n\n<!-- \u5f15\u5165 -->\n\n##### Typescript\uff1a\n\n<!-- \u8bf7\u6c42typescript -->\nCODE_BLOCK_45\n\n<!-- \u5f15\u5165 -->\n\n##### Go\uff1a\n\n<!-- \u8bf7\u6c42go -->\nCODE_BLOCK_46\n\n<!-- \u7ed3\u675f -->\n\n<!-- \u6392\u5e8f\u793a\u4f8b5 -->\n\u5728\u6309\u5c5e\u6027\u6392\u5e8f\u65f6\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5339\u914d\u6743\u91cd\uff08\u5f97\u5206\uff09\u8ba1\u7b97\u88ab\u7981\u7528\uff08\u4e0d\u4f7f\u7528\u6392\u540d\u5668\uff09\u3002\u53ef\u4ee5\u901a\u8fc7\u5c06`track_scores`\u5c5e\u6027\u8bbe\u7f6e\u4e3a`true`\u6765\u542f\u7528\u6743\u91cd\u8ba1\u7b97\uff1a\n\n<!-- \u5f15\u5165 -->\n\n<!-- \u8bf7\u6c42JSON -->\n\nCODE_BLOCK_47\n\n<!-- \u54cd\u5e94JSON -->\n\nCODE_BLOCK_48\n\n<!-- \u5f15\u5165 -->\n##### PHP\uff1a\n\n<!-- \u8bf7\u6c42PHP -->\n\nCODE_BLOCK_49\n\n<!-- \u5f15\u5165 -->\n\n##### Python\uff1a\n\n<!-- \u8bf7\u6c42Python -->\nCODE_BLOCK_50\n\n<!-- \u5f15\u5165 -->\n\n##### Python-asyncio\uff1a\n\n<!-- \u8bf7\u6c42Python-asyncio -->\nCODE_BLOCK_51\n\n<!-- \u5f15\u5165 -->\n\n##### Javascript\uff1a\n\n<!-- \u8bf7\u6c42javascript -->\nCODE_BLOCK_52\n\n<!-- \u5f15\u5165 -->\n\n##### java\uff1a\n\n<!-- \u8bf7\u6c42Java -->\nCODE_BLOCK_53\n\n<!-- \u5f15\u5165 -->\n\n##### C#\uff1a\n\n<!-- \u8bf7\u6c42C# -->\nCODE_BLOCK_54\n\n<!-- \u5f15\u5165 -->\n\n##### Rust\uff1a\n\n<!-- \u8bf7\u6c42Rust -->\nCODE_BLOCK_55\n\n<!-- \u5f15\u5165 -->\n\n##### Typescript\uff1a\n\n<!-- \u8bf7\u6c42typescript -->\nCODE_BLOCK_56\n\n<!-- \u5f15\u5165 -->\n\n##### Go\uff1a\n\n<!-- \u8bf7\u6c42go -->\nCODE_BLOCK_57\n\n<!-- \u7ed3\u675f -->\n\n## \u6392\u540d\u6982\u8ff0",
            "russian": "# \u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430 \u0438 \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\n\n\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u043e\u0442\u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u044b \u043f\u043e \u0432\u0435\u0441\u0443 \u043f\u043e\u043b\u043d\u043e\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u0433\u043e \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f, \u043e\u0434\u043d\u043e\u043c\u0443 \u0438\u043b\u0438 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u043c \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u0430\u043c \u0438\u043b\u0438 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f\u043c.\n\n**\u041f\u043e\u043b\u043d\u043e\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0435** \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u044e\u0442 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u044f \u043e\u0442\u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u043c\u0438 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e. \u0415\u0441\u043b\u0438 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e, \u043e\u043d\u0438 \u0441\u043e\u0440\u0442\u0438\u0440\u0443\u044e\u0442\u0441\u044f \u043f\u043e \u0440\u0435\u043b\u0435\u0432\u0430\u043d\u0442\u043d\u043e\u0441\u0442\u0438, \u0447\u0442\u043e \u044d\u043a\u0432\u0438\u0432\u0430\u043b\u0435\u043d\u0442\u043d\u043e `ORDER BY weight() DESC` \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 SQL.\n\n**\u041d\u0435 \u043f\u043e\u043b\u043d\u043e\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0435** \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u044e\u0442 \u043d\u0438\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0438.\n\n## \u0420\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u043d\u0430\u044f \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430\n\n\u0420\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f, \u043a\u043e\u0433\u0434\u0430 \u0432\u044b \u044f\u0432\u043d\u043e \u0437\u0430\u0434\u0430\u0435\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u0430 \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0438, \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u044f \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0435 `ORDER BY` \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 SQL \u0438\u043b\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \u043e\u043f\u0446\u0438\u044e `sort` \u0447\u0435\u0440\u0435\u0437 HTTP JSON.\n\n### \u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430 \u0447\u0435\u0440\u0435\u0437 SQL\n\n\u041e\u0431\u0449\u0438\u0439 \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441:\nCODE_BLOCK_0\n\n<!-- example alias -->\n\n\u0412 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0438 \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0438 \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043b\u044e\u0431\u0443\u044e \u043a\u043e\u043c\u0431\u0438\u043d\u0430\u0446\u0438\u044e \u0434\u043e 5 \u0441\u0442\u043e\u043b\u0431\u0446\u043e\u0432, \u043a\u0430\u0436\u0434\u044b\u0439 \u0438\u0437 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u043f\u0440\u043e\u0432\u043e\u0436\u0434\u0430\u0442\u044c\u0441\u044f `asc` \u0438\u043b\u0438 `desc`. \u0424\u0443\u043d\u043a\u0446\u0438\u0438 \u0438 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u043d\u0435 \u0434\u043e\u043f\u0443\u0441\u043a\u0430\u044e\u0442\u0441\u044f \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u043e\u0432 \u0434\u043b\u044f \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0438, \u0437\u0430 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435\u043c \u0444\u0443\u043d\u043a\u0446\u0438\u0439 `weight()` \u0438 `random()` (\u043f\u043e\u0441\u043b\u0435\u0434\u043d\u044f\u044f \u043c\u043e\u0436\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u0447\u0435\u0440\u0435\u0437 SQL \u0432 \u0432\u0438\u0434\u0435 `ORDER BY random()`). \u041e\u0434\u043d\u0430\u043a\u043e \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043b\u044e\u0431\u043e\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0432 \u0441\u043f\u0438\u0441\u043a\u0435 SELECT \u0438 \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e \u0435\u0433\u043e \u043f\u0441\u0435\u0432\u0434\u043e\u043d\u0438\u043c\u0443.\n\n<!-- request SQL -->\nCODE_BLOCK_1\n\n<!-- response SQL -->\nCODE_BLOCK_2\n\n<!-- end -->\n\n## \u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430 \u0447\u0435\u0440\u0435\u0437 JSON\n\n<!-- example sorting 1 -->\n`\"sort\"` \u0437\u0430\u0434\u0430\u0435\u0442 \u043c\u0430\u0441\u0441\u0438\u0432, \u0433\u0434\u0435 \u043a\u0430\u0436\u0434\u044b\u0439 \u044d\u043b\u0435\u043c\u0435\u043d\u0442 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0438\u043c\u0435\u043d\u0435\u043c \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u0430, `_score`, \u0435\u0441\u043b\u0438 \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e \u0432\u0435\u0441\u0430\u043c \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439, \u0438\u043b\u0438 `_random`, \u0435\u0441\u043b\u0438 \u043d\u0443\u0436\u0435\u043d \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u044b\u0439 \u043f\u043e\u0440\u044f\u0434\u043e\u043a \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439. \u0412 \u044d\u0442\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043f\u043e\u0440\u044f\u0434\u043e\u043a \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0438 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u2014 \u043f\u043e \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0430\u043d\u0438\u044e \u0434\u043b\u044f \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u043e\u0432 \u0438 \u043f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e \u0434\u043b\u044f `_score`.\n\n<!-- intro -->\n\n<!-- request JSON -->\n\nCODE_BLOCK_3\n\n<!-- response JSON -->\n\nCODE_BLOCK_4\n\n<!-- intro -->\n##### PHP:\n\n<!-- request PHP -->\n\nCODE_BLOCK_5\n\n<!-- intro -->\n\n##### Python:\n\n<!-- request Python -->\nCODE_BLOCK_6\n\n<!-- intro -->\n\n##### Python-asyncio:\n\n<!-- request Python-asyncio -->\nCODE_BLOCK_7\n\n<!-- intro -->\n\n##### Javascript:\n\n<!-- request javascript -->\nCODE_BLOCK_8\n\n<!-- intro -->\n\n##### java:\n\n<!-- request Java -->\nCODE_BLOCK_9\n\n<!-- intro -->\n\n##### C#:\n\n<!-- request C# -->\nCODE_BLOCK_10\n\n<!-- intro -->\n\n##### Rust:\n\n<!-- request Rust -->\nCODE_BLOCK_11\n\n<!-- intro -->\n\n##### Typescript:\n\n<!-- request typescript -->\nCODE_BLOCK_12\n\n<!-- intro -->\n\n##### Go:\n\n<!-- request go -->\nCODE_BLOCK_13\n\n<!-- end -->\n\n<!-- example sorting 2 -->\n\u0412\u044b \u0442\u0430\u043a\u0436\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u044f\u0432\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u043e\u0440\u044f\u0434\u043e\u043a \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0438:\n\n* `asc`: \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0430\u043d\u0438\u044e\n* `desc`: \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e\n\n<!-- intro -->\n\n<!-- request JSON -->\n\nCODE_BLOCK_14\n\n<!-- response JSON -->\n\nCODE_BLOCK_15\n\n<!-- intro -->\n##### PHP:\n\n<!-- request PHP -->\n\nCODE_BLOCK_16\n\n<!-- intro -->\n\n##### Python:\n\n<!-- request Python -->\nCODE_BLOCK_17\n\n<!-- intro -->\n\n##### Python-asyncio:\n\n<!-- request Python-asyncio -->\nCODE_BLOCK_18\n\n<!-- intro -->\n\n##### Javascript:\n\n<!-- request javascript -->\nCODE_BLOCK_19\n\n<!-- intro -->\n\n##### java:\n\n<!-- request Java -->\nCODE_BLOCK_20\n\n<!-- intro -->\n\n##### C#:\n\n<!-- request C# -->\nCODE_BLOCK_21\n\n<!-- intro -->\n\n##### Rust:\n\n<!-- request Rust -->\nCODE_BLOCK_22\n\n<!-- intro -->\n\n##### Typescript:\n\n<!-- request typescript -->\nCODE_BLOCK_23\n\n<!-- intro -->\n\n##### Go:\n\n<!-- request go -->\nCODE_BLOCK_24\n\n<!-- end -->\n\n<!-- example sorting 3 -->\n\u0412\u044b \u0442\u0430\u043a\u0436\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0434\u0440\u0443\u0433\u043e\u0439 \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441 \u0438 \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u043e\u0440\u044f\u0434\u043e\u043a \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0438 \u0447\u0435\u0440\u0435\u0437 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u043e `order`:\n\n<!-- intro -->\n\n<!-- request JSON -->\n\nCODE_BLOCK_25\n\n<!-- response JSON -->\n\nCODE_BLOCK_26\n\n<!-- intro -->\n##### PHP:\n\n<!-- request PHP -->\n\nCODE_BLOCK_27\n\n<!-- intro -->\n\n##### Python:\n\n<!-- request Python -->\nCODE_BLOCK_28\n\n<!-- intro -->\n\n##### Python-asyncio:\n\n<!-- request Python-asyncio -->\nCODE_BLOCK_29\n\n<!-- intro -->\n\n##### Javascript:\n\n<!-- request javascript -->\nCODE_BLOCK_30\n\n<!-- intro -->\n\n##### java:\n\n<!-- request Java -->\nCODE_BLOCK_31\n\n<!-- intro -->\n\n##### C#:\n\n<!-- request C# -->\nCODE_BLOCK_32\n\n<!-- intro -->\n\n##### Rust:\n\n<!-- request Rust -->\nCODE_BLOCK_33\n\n<!-- intro -->\n\n##### Typescript:\n\n<!-- request typescript -->\nCODE_BLOCK_34\n\n<!-- intro -->\n\n##### Go:\n\n<!-- request go -->\nCODE_BLOCK_35\n\n<!-- end -->\n\n<!-- example sorting 4 -->\n\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430 \u043f\u043e MVA-\u0430\u0442\u0440\u0438\u0431\u0443\u0442\u0430\u043c \u0442\u0430\u043a\u0436\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0432 JSON-\u0437\u0430\u043f\u0440\u043e\u0441\u0430\u0445. \u0420\u0435\u0436\u0438\u043c \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0438 \u043c\u043e\u0436\u043d\u043e \u0437\u0430\u0434\u0430\u0442\u044c \u0447\u0435\u0440\u0435\u0437 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u043e `mode`. \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0440\u0435\u0436\u0438\u043c\u044b:\n\n* `min`: \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u043c\u0443 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044e\n* `max`: \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u043c\u0443 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044e\n\n<!-- intro -->\n\n<!-- request JSON -->\n\nCODE_BLOCK_36\n\n<!-- response JSON -->\n\nCODE_BLOCK_37\n\n<!-- intro -->\n##### PHP:\n\n<!-- request PHP -->\n\nCODE_BLOCK_38\n\n<!-- intro -->\n\n##### Python:\n\n<!-- request Python -->\nCODE_BLOCK_39\n\n<!-- intro -->\n\n##### Python-asyncio:\n\n<!-- request Python-asyncio -->\nCODE_BLOCK_40\n\n<!-- intro -->\n\n##### Javascript:\n\n<!-- request javascript -->\nCODE_BLOCK_41\n\n<!-- intro -->\n\n##### java:\n\n<!-- request Java -->\nCODE_BLOCK_42\n\n<!-- intro -->\n\n##### C#:\n\n<!-- request C# -->\nCODE_BLOCK_43\n\n<!-- intro -->\n\n##### Rust:\n\n<!-- request Rust -->\nCODE_BLOCK_44\n\n<!-- intro -->\n\n##### Typescript:\n\n<!-- request typescript -->\nCODE_BLOCK_45\n\n<!-- intro -->\n\n##### Go:\n\n<!-- request go -->\nCODE_BLOCK_46\n\n<!-- end -->\n\n<!-- example sorting 5 -->\n\u041f\u0440\u0438 \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0435 \u043f\u043e \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u0443 \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0435 \u0432\u0435\u0441\u0430 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u044f (\u043e\u0446\u0435\u043d\u043a\u0438) \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u043e (\u0440\u0430\u043d\u043a\u0435\u0440 \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f). \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0435 \u0432\u0435\u0441\u0430, \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0432 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u043e `track_scores` \u0432 `true`:\n\n<!-- intro -->\n\n<!-- request JSON -->\n\nCODE_BLOCK_47\n\n<!-- response JSON -->\n\nCODE_BLOCK_48\n\n<!-- intro -->\n##### PHP:\n\n<!-- request PHP -->\n\nCODE_BLOCK_49\n\n<!-- intro -->\n\n##### Python:\n\n<!-- request Python -->\nCODE_BLOCK_50\n\n<!-- intro -->\n\n##### Python-asyncio:\n\n<!-- request Python-asyncio -->\nCODE_BLOCK_51\n\n<!-- intro -->\n\n##### Javascript:\n\n<!-- request javascript -->\nCODE_BLOCK_52\n\n<!-- intro -->\n\n##### java:\n\n<!-- request Java -->\nCODE_BLOCK_53\n\n<!-- intro -->\n\n##### C#:\n\n<!-- request C# -->\nCODE_BLOCK_54\n\n<!-- intro -->\n\n##### Rust:\n\n<!-- request Rust -->\nCODE_BLOCK_55\n\n<!-- intro -->\n\n##### Typescript:\n\n<!-- request typescript -->\nCODE_BLOCK_56\n\n<!-- intro -->\n\n##### Go:\n\n<!-- request go -->\nCODE_BLOCK_57\n\n<!-- end -->\n\n## \u041e\u0431\u0437\u043e\u0440 \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f"
        },
        "is_code_or_comment": false,
        "model": "deepseek/deepseek-v3.2",
        "updated_at": 1766374212
    },
    "__meta": {
        "source_text": "# Sorting and ranking\n\nQuery results can be sorted by full-text ranking weight, one or more attributes or expressions.\n\n**Full-text** queries return matches sorted by default. If nothing is specified, they are sorted by relevance, which is equivalent to `ORDER BY weight() DESC` in SQL format.\n\n**Non-full-text** queries do not perform any sorting by default.\n\n## Advanced sorting\n\nExtended mode is automatically enabled when you explicitly provide sorting rules by adding the `ORDER BY` clause in SQL format or using the `sort` option via HTTP JSON.\n\n### Sorting via SQL\n\nGeneral syntax:\n```sql\nSELECT ... ORDER BY\n{attribute_name | expr_alias | weight() | random() } [ASC | DESC],\n...\n{attribute_name | expr_alias | weight() | random() } [ASC | DESC]\n```\n\n<!-- example alias -->\n\nIn the sort clause, you can use any combination of up to 5 columns, each followed by `asc` or `desc`. Functions and expressions are not allowed as arguments for the sort clause, except for the `weight()` and `random()` functions (the latter can only be used via SQL in the form of `ORDER BY random()`). However, you can use any expression in the SELECT list and sort by its alias.\n\n<!-- request SQL -->\n```sql\nselect *, a + b alias from test order by alias desc;\n```\n\n<!-- response SQL -->\n```\n+------+------+------+----------+-------+\n| id   | a    | b    | f        | alias |\n+------+------+------+----------+-------+\n|    1 |    2 |    3 | document |     5 |\n+------+------+------+----------+-------+\n```\n\n<!-- end -->\n\n## Sorting via JSON\n\n<!-- example sorting 1 -->\n`\"sort\"` specifies an array where each element can be an attribute name or `_score` if you want to sort by match weights or `_random` if you want radnom match order. In that case, the sort order defaults to ascending for attributes and descending for `_score`.\n\n<!-- intro -->\n\n<!-- request JSON -->\n\n```json\n{\n  \"table\":\"test\",\n  \"query\":\n  {\n    \"match\": { \"title\": \"Test document\" }\n  },\n  \"sort\": [ \"_score\", \"id\" ],\n  \"_source\": \"title\",\n  \"limit\": 3\n}\n```\n\n<!-- response JSON -->\n\n``` json\n    {\n\t  \"took\": 0,\n\t  \"timed_out\": false,\n\t  \"hits\": {\n\t    \"total\": 5,\n\t    \"total_relation\": \"eq\",\n\t    \"hits\": [\n\t      {\n\t        \"_id\": 5406864699109146628,\n\t        \"_score\": 2319,\n\t        \"_source\": {\n\t          \"title\": \"Test document 1\"\n\t        }\n\t      },\n\t      {\n\t        \"_id\": 5406864699109146629,\n\t        \"_score\": 2319,\n\t        \"_source\": {\n\t          \"title\": \"Test document 2\"\n\t        }\n\t      },\n\t      {\n\t        \"_id\": 5406864699109146630,\n\t        \"_score\": 2319,\n\t        \"_source\": {\n\t          \"title\": \"Test document 3\"\n\t        }\n\t      }\n\t    ]\n\t  }\n\t}\n```\n\n<!-- intro -->\n##### PHP:\n\n<!-- request PHP -->\n\n```php\n$search->setIndex(\"test\")->match('Test document')->sort('_score')->sort('id');\n```\n\n<!-- intro -->\n\n##### Python:\n\n<!-- request Python -->\n``` python\nsearch_request.index = 'test'\nsearch_request.fulltext_filter = manticoresearch.model.QueryFilter('Test document')\nsearch_request.sort = ['_score', 'id']\n```\n\n<!-- intro -->\n\n##### Python-asyncio:\n\n<!-- request Python-asyncio -->\n``` python\nsearch_request.index = 'test'\nsearch_request.fulltext_filter = manticoresearch.model.QueryFilter('Test document')\nsearch_request.sort = ['_score', 'id']\n```\n\n<!-- intro -->\n\n##### Javascript:\n\n<!-- request javascript -->\n``` javascript\nsearchRequest.index = \"test\";\nsearchRequest.fulltext_filter = new Manticoresearch.QueryFilter('Test document');\nsearchRequest.sort = ['_score', 'id'];\n```\n\n<!-- intro -->\n\n##### java:\n\n<!-- request Java -->\n``` java\nsearchRequest.setIndex(\"test\");\nQueryFilter queryFilter = new QueryFilter();\nqueryFilter.setQueryString(\"Test document\");\nsearchRequest.setFulltextFilter(queryFilter);\nList<Object> sort = new ArrayList<Object>( Arrays.asList(\"_score\", \"id\") );\nsearchRequest.setSort(sort);\n\n```\n\n<!-- intro -->\n\n##### C#:\n\n<!-- request C# -->\n``` clike\nvar searchRequest = new SearchRequest(\"test\");\nsearchRequest.FulltextFilter = new QueryFilter(\"Test document\");\nsearchRequest.Sort = new List<Object> {\"_score\", \"id\"};\n\n```\n\n<!-- intro -->\n\n##### Rust:\n\n<!-- request Rust -->\n``` rust\nlet query = SearchQuery {\n    query_string: Some(serde_json::json!(\"Test document\").into()),\n    ..Default::default(),\n};\nlet sort: [String; 2] = [\"_score\".to_string(), \"id\".to_string()];\nlet search_req = SearchRequest {\n    table: \"test\".to_string(),\n    query: Some(Box::new(query)),\n    sort: Some(serde_json::json!(sort)),\n    ..Default::default(),\n};\n```\n\n<!-- intro -->\n\n##### Typescript:\n\n<!-- request typescript -->\n``` typescript\nsearchRequest = {\n  index: 'test',\n  query: {\n    query_string: {'Test document'},\n  },\n  sort: ['_score', 'id'],\n}\n```\n\n<!-- intro -->\n\n##### Go:\n\n<!-- request go -->\n```go\nsearchRequest.SetIndex(\"test\")\nquery := map[string]interface{} {\"query_string\": \"Test document\"}\nsearchRequest.SetQuery(query)\nsort := map[string]interface{} {\"_score\": \"asc\", \"id\": \"asc\"}\nsearchRequest.SetSort(sort)\n```\n\n<!-- end -->\n\n<!-- example sorting 2 -->\nYou can also specify the sort order explicitly:\n\n* `asc`: sort in ascending order\n* `desc`: sort in descending order\n\n\n<!-- intro -->\n\n<!-- request JSON -->\n\n```json\n{\n  \"table\":\"test\",\n  \"query\":\n  {\n    \"match\": { \"title\": \"Test document\" }\n  },\n  \"sort\":\n  [\n    { \"id\": \"desc\" },\n    \"_score\"\n  ],\n  \"_source\": \"title\",\n  \"limit\": 3\n}\n```\n\n<!-- response JSON -->\n\n``` json\n\t{\n\t  \"took\": 0,\n\t  \"timed_out\": false,\n\t  \"hits\": {\n\t    \"total\": 5,\n\t    \"total_relation\": \"eq\",\n\t    \"hits\": [\n\t      {\n\t        \"_id\": 5406864699109146632,\n\t        \"_score\": 2319,\n\t        \"_source\": {\n\t          \"title\": \"Test document 5\"\n\t        }\n\t      },\n\t      {\n\t        \"_id\": 5406864699109146631,\n\t        \"_score\": 2319,\n\t        \"_source\": {\n\t          \"title\": \"Test document 4\"\n\t        }\n\t      },\n\t      {\n\t        \"_id\": 5406864699109146630,\n\t        \"_score\": 2319,\n\t        \"_source\": {\n\t          \"title\": \"Test document 3\"\n\t        }\n\t      }\n\t    ]\n\t  }\n\t}\n```\n\n<!-- intro -->\n##### PHP:\n\n<!-- request PHP -->\n\n```php\n$search->setIndex(\"test\")->match('Test document')->sort('id', 'desc')->sort('_score');\n```\n\n<!-- intro -->\n\n##### Python:\n\n<!-- request Python -->\n``` python\nsearch_request.index = 'test'\nsearch_request.fulltext_filter = manticoresearch.model.QueryFilter('Test document')\nsort_by_id = manticoresearch.model.SortOrder('id', 'desc')\nsearch_request.sort = [sort_by_id, '_score']\n```\n\n<!-- intro -->\n\n##### Python-asyncio:\n\n<!-- request Python-asyncio -->\n``` python\nsearch_request.index = 'test'\nsearch_request.fulltext_filter = manticoresearch.model.QueryFilter('Test document')\nsort_by_id = manticoresearch.model.SortOrder('id', 'desc')\nsearch_request.sort = [sort_by_id, '_score']\n```\n\n<!-- intro -->\n\n##### Javascript:\n\n<!-- request javascript -->\n``` javascript\nsearchRequest.index = \"test\";\nsearchRequest.fulltext_filter = new Manticoresearch.QueryFilter('Test document');\nsortById = new Manticoresearch.SortOrder('id', 'desc');\nsearchRequest.sort = [sortById, 'id'];\n```\n\n<!-- intro -->\n\n##### java:\n\n<!-- request Java -->\n``` java\nsearchRequest.setIndex(\"test\");\nQueryFilter queryFilter = new QueryFilter();\nqueryFilter.setQueryString(\"Test document\");\nsearchRequest.setFulltextFilter(queryFilter);\nList<Object> sort = new ArrayList<Object>();\nSortOrder sortById = new SortOrder();\nsortById.setAttr(\"id\");\nsortById.setOrder(SortOrder.OrderEnum.DESC);\nsort.add(sortById);\nsort.add(\"_score\");\nsearchRequest.setSort(sort);\n\n```\n\n<!-- intro -->\n\n##### C#:\n\n<!-- request C# -->\n``` clike\nvar searchRequest = new SearchRequest(\"test\");\nsearchRequest.FulltextFilter = new QueryFilter(\"Test document\");\nsearchRequest.Sort = new List<Object>();\nvar sortById = new SortOrder(\"id\", SortOrder.OrderEnum.Desc);\nsearchRequest.Sort.Add(sortById);\nsearchRequest.Sort.Add(\"_score\");\n```\n\n<!-- intro -->\n\n##### Rust:\n\n<!-- request Rust -->\n``` rust\nlet query = SearchQuery {\n    query_string: Some(serde_json::json!(\"Test document\").into()),\n    ..Default::default(),\n};\nlet sort_by_id = HashMap::new();\nsort_by_id.insert(\"id\".to_string(), \"desc\".to_string());\nlet mut sort = Vec::new();\nsort.push(sort_by_id);\nsort.push(\"_score\".to_string());\nlet search_req = SearchRequest {\n    table: \"test\".to_string(),\n    query: Some(Box::new(query)),\n    sort: Some(serde_json::json!(sort)),\n    ..Default::default(),\n};\n```\n\n<!-- intro -->\n\n##### Typescript:\n\n<!-- request typescript -->\n``` typescript\nsearchRequest = {\n  index: 'test',\n  query: {\n    query_string: {'Test document'},\n  },\n  sort: [{'id': 'desc'}, '_score'],\n}\n```\n\n<!-- intro -->\n\n##### Go:\n\n<!-- request go -->\n```go\nsearchRequest.SetIndex(\"test\")\nquery := map[string]interface{} {\"query_string\": \"Test document\"}\nsearchRequest.SetQuery(query)\nsortById := map[string]interface{} {\"id\": \"desc\"}\nsort := map[string]interface{} {\"id\": \"desc\", \"_score\": \"asc\"}\nsearchRequest.SetSort(sort)\n```\n\n<!-- end -->\n\n<!-- example sorting 3 -->\nYou can also use another syntax and specify the sort order via the `order` property:\n\n\n<!-- intro -->\n\n<!-- request JSON -->\n\n```json\n{\n  \"table\":\"test\",\n  \"query\":\n  {\n    \"match\": { \"title\": \"Test document\" }\n  },\n  \"sort\":\n  [\n    { \"id\": { \"order\":\"desc\" } }\n  ],\n  \"_source\": \"title\",\n  \"limit\": 3\n}\n```\n\n<!-- response JSON -->\n\n``` json\n\t{\n\t  \"took\": 0,\n\t  \"timed_out\": false,\n\t  \"hits\": {\n\t    \"total\": 5,\n\t    \"total_relation\": \"eq\",\n\t    \"hits\": [\n\t      {\n\t        \"_id\": 5406864699109146632,\n\t        \"_score\": 2319,\n\t        \"_source\": {\n\t          \"title\": \"Test document 5\"\n\t        }\n\t      },\n\t      {\n\t        \"_id\": 5406864699109146631,\n\t        \"_score\": 2319,\n\t        \"_source\": {\n\t          \"title\": \"Test document 4\"\n\t        }\n\t      },\n\t      {\n\t        \"_id\": 5406864699109146630,\n\t        \"_score\": 2319,\n\t        \"_source\": {\n\t          \"title\": \"Test document 3\"\n\t        }\n\t      }\n\t    ]\n\t  }\n\t}\n```\n\n<!-- intro -->\n##### PHP:\n\n<!-- request PHP -->\n\n```php\n$search->setIndex(\"test\")->match('Test document')->sort('id', 'desc');\n```\n\n<!-- intro -->\n\n##### Python:\n\n<!-- request Python -->\n``` python\nsearch_request.index = 'test'\nsearch_request.fulltext_filter = manticoresearch.model.QueryFilter('Test document')\nsort_by_id = manticoresearch.model.SortOrder('id', 'desc')\nsearch_request.sort = [sort_by_id]\n```\n\n<!-- intro -->\n\n##### Python-asyncio:\n\n<!-- request Python-asyncio -->\n``` python\nsearch_request.index = 'test'\nsearch_request.fulltext_filter = manticoresearch.model.QueryFilter('Test document')\nsort_by_id = manticoresearch.model.SortOrder('id', 'desc')\nsearch_request.sort = [sort_by_id]\n```\n\n<!-- intro -->\n\n##### Javascript:\n\n<!-- request javascript -->\n``` javascript\nsearchRequest.index = \"test\";\nsearchRequest.fulltext_filter = new Manticoresearch.QueryFilter('Test document');\nsortById = new Manticoresearch.SortOrder('id', 'desc');\nsearchRequest.sort = [sortById];\n```\n\n<!-- intro -->\n\n##### java:\n\n<!-- request Java -->\n``` java\nsearchRequest.setIndex(\"test\");\nQueryFilter queryFilter = new QueryFilter();\nqueryFilter.setQueryString(\"Test document\");\nsearchRequest.setFulltextFilter(queryFilter);\nList<Object> sort = new ArrayList<Object>();\nSortOrder sortById = new SortOrder();\nsortById.setAttr(\"id\");\nsortById.setOrder(SortOrder.OrderEnum.DESC);\nsort.add(sortById);\nsearchRequest.setSort(sort);\n\n```\n\n<!-- intro -->\n\n##### C#:\n\n<!-- request C# -->\n``` clike\nvar searchRequest = new SearchRequest(\"test\");\nsearchRequest.FulltextFilter = new QueryFilter(\"Test document\");\nsearchRequest.Sort = new List<Object>();\nvar sortById = new SortOrder(\"id\", SortOrder.OrderEnum.Desc);\nsearchRequest.Sort.Add(sortById);\n```\n\n<!-- intro -->\n\n##### Rust:\n\n<!-- request Rust -->\n``` rust\nlet query = SearchQuery {\n    query_string: Some(serde_json::json!(\"Test document\").into()),\n    ..Default::default(),\n};\nlet mut sort_by_id = HashMap::new();\nsort_by_id.insert(\"id\".to_string(), \"desc\".to_string());\nlet sort = [HashMap; 1] = [sort_by_id];\nlet search_req = SearchRequest {\n    table: \"test\".to_string(),\n    query: Some(Box::new(query)),\n    sort: Some(serde_json::json!(sort)),\n    ..Default::default(),\n};\n```\n\n<!-- intro -->\n\n##### Typescript:\n\n<!-- request typescript -->\n``` typescript\nsearchRequest = {\n  index: 'test',\n  query: {\n    query_string: {'Test document'},\n  },\n  sort: { {'id': {'order':'desc'} },\n}\n```\n\n<!-- intro -->\n\n##### Go:\n\n<!-- request go -->\n```go\nsearchRequest.SetIndex(\"test\")\nquery := map[string]interface{} {\"query_string\": \"Test document\"}\nsearchRequest.SetQuery(query)\nsort := map[string]interface{} { \"id\": {\"order\":\"desc\"} }\nsearchRequest.SetSort(sort)\n```\n\n<!-- end -->\n\n<!-- example sorting 4 -->\nSorting by MVA attributes is also supported in JSON queries. Sorting mode can be set via the `mode` property. The following modes are supported:\n\n* `min`: sort by minimum value\n* `max`: sort by maximum value\n\n<!-- intro -->\n\n<!-- request JSON -->\n\n```json\n{\n  \"table\":\"test\",\n  \"query\":\n  {\n    \"match\": { \"title\": \"Test document\" }\n  },\n  \"sort\":\n  [\n    { \"attr_mva\": { \"order\":\"desc\", \"mode\":\"max\" } }\n  ],\n  \"_source\": \"title\",\n  \"limit\": 3\n}\n```\n\n<!-- response JSON -->\n\n``` json\n\t{\n\t  \"took\": 0,\n\t  \"timed_out\": false,\n\t  \"hits\": {\n\t    \"total\": 5,\n\t    \"total_relation\": \"eq\",\n\t    \"hits\": [\n\t      {\n\t        \"_id\": 5406864699109146631,\n\t        \"_score\": 2319,\n\t        \"_source\": {\n\t          \"title\": \"Test document 4\"\n\t        }\n\t      },\n\t      {\n\t        \"_id\": 5406864699109146629,\n\t        \"_score\": 2319,\n\t        \"_source\": {\n\t          \"title\": \"Test document 2\"\n\t        }\n\t      },\n\t      {\n\t        \"_id\": 5406864699109146628,\n\t        \"_score\": 2319,\n\t        \"_source\": {\n\t          \"title\": \"Test document 1\"\n\t        }\n\t      }\n\t    ]\n\t  }\n\t}\n```\n\n<!-- intro -->\n##### PHP:\n\n<!-- request PHP -->\n\n```php\n$search->setIndex(\"test\")->match('Test document')->sort('id','desc','max');\n```\n\n<!-- intro -->\n\n##### Python:\n\n<!-- request Python -->\n``` python\nsearch_request.index = 'test'\nsearch_request.fulltext_filter = manticoresearch.model.QueryFilter('Test document')\nsort = manticoresearch.model.SortMVA('attr_mva', 'desc', 'max')\nsearch_request.sort = [sort]\n```\n\n<!-- intro -->\n\n##### Python-asyncio:\n\n<!-- request Python-asyncio -->\n``` python\nsearch_request.index = 'test'\nsearch_request.fulltext_filter = manticoresearch.model.QueryFilter('Test document')\nsort = manticoresearch.model.SortMVA('attr_mva', 'desc', 'max')\nsearch_request.sort = [sort]\n```\n\n<!-- intro -->\n\n##### Javascript:\n\n<!-- request javascript -->\n``` javascript\nsearchRequest.index = \"test\";\nsearchRequest.fulltext_filter = new Manticoresearch.QueryFilter('Test document');\nsort = new Manticoresearch.SortMVA('attr_mva', 'desc', 'max');\nsearchRequest.sort = [sort];\n```\n\n<!-- intro -->\n\n##### java:\n\n<!-- request Java -->\n``` java\nsearchRequest.setIndex(\"test\");\nQueryFilter queryFilter = new QueryFilter();\nqueryFilter.setQueryString(\"Test document\");\nsearchRequest.setFulltextFilter(queryFilter);\nSortMVA sort = new SortMVA();\nsort.setAttr(\"attr_mva\");\nsort.setOrder(SortMVA.OrderEnum.DESC);\nsort.setMode(SortMVA.ModeEnum.MAX);\nsearchRequest.setSort(sort);\n\n```\n\n<!-- intro -->\n\n##### C#:\n\n<!-- request C# -->\n``` clike\nvar searchRequest = new SearchRequest(\"test\");\nsearchRequest.FulltextFilter = new QueryFilter(\"Test document\");\nvar sort = new SortMVA(\"attr_mva\", SortMVA.OrderEnum.Desc, SortMVA.ModeEnum.Max);\nsearchRequest.Sort.Add(sort);\n```\n\n<!-- intro -->\n\n##### Rust:\n\n<!-- request Rust -->\n``` rust\nlet query = SearchQuery {\n    query_string: Some(serde_json::json!(\"Test document\").into()),\n    ..Default::default(),\n};\nlet mut sort_mva_opts = HashMap::new();\nsort_mva_opts.insert(\"order\".to_string(), \"desc\".to_string());\nsort_mva_opts.insert(\"mode\".to_string(), \"max\".to_string());\nlet mut sort_mva = HashMap::new();\nsort_mva.insert(\"attr_mva\".to_string(), sort_mva_opts);\n\nlet search_req = SearchRequest {\n    table: \"test\".to_string(),\n    query: Some(Box::new(query)),\n    sort: Some(serde_json::json!(sort_mva)),\n    ..Default::default(),\n};\n```\n\n<!-- intro -->\n\n##### Typescript:\n\n<!-- request typescript -->\n``` typescript\nsearchRequest = {\n  index: 'test',\n  query: {\n    query_string: {'Test document'},\n  },\n  sort: { \"attr_mva\": { \"order\":\"desc\", \"mode\":\"max\" } },\n}\n```\n\n<!-- intro -->\n\n##### Go:\n\n<!-- request go -->\n```go\nsearchRequest.SetIndex(\"test\")\nquery := map[string]interface{} {\"query_string\": \"Test document\"}\nsearchRequest.SetQuery(query)\nsort := map[string]interface{} { \"attr_mva\": { \"order\":\"desc\", \"mode\":\"max\" } }\nsearchRequest.SetSort(sort)\n```\n\n<!-- end -->\n\n<!-- example sorting 5 -->\nWhen sorting on an attribute, match weight (score) calculation is disabled by default (no ranker is used). You can enable weight calculation by setting the `track_scores` property to `true`:\n\n<!-- intro -->\n\n<!-- request JSON -->\n\n```json\n{\n  \"table\":\"test\",\n  \"track_scores\": true,\n  \"query\":\n  {\n    \"match\": { \"title\": \"Test document\" }\n  },\n  \"sort\":\n  [\n    { \"attr_mva\": { \"order\":\"desc\", \"mode\":\"max\" } }\n  ],\n  \"_source\": \"title\",\n  \"limit\": 3\n}\n```\n\n<!-- response JSON -->\n\n``` json\n\t{\n\t  \"took\": 0,\n\t  \"timed_out\": false,\n\t  \"hits\": {\n\t    \"total\": 5,\n\t    \"total_relation\": \"eq\",\n\t    \"hits\": [\n\t      {\n\t        \"_id\": 5406864699109146631,\n\t        \"_score\": 2319,\n\t        \"_source\": {\n\t          \"title\": \"Test document 4\"\n\t        }\n\t      },\n\t      {\n\t        \"_id\": 5406864699109146629,\n\t        \"_score\": 2319,\n\t        \"_source\": {\n\t          \"title\": \"Test document 2\"\n\t        }\n\t      },\n\t      {\n\t        \"_id\": 5406864699109146628,\n\t        \"_score\": 2319,\n\t        \"_source\": {\n\t          \"title\": \"Test document 1\"\n\t        }\n\t      }\n\t    ]\n\t  }\n\t}\n```\n\n<!-- intro -->\n##### PHP:\n\n<!-- request PHP -->\n\n```php\n$search->setIndex(\"test\")->match('Test document')->sort('id','desc','max')->trackScores(true);\n```\n\n<!-- intro -->\n\n##### Python:\n\n<!-- request Python -->\n``` python\nsearch_request.index = 'test'\nsearch_request.track_scores = true\nsearch_request.fulltext_filter = manticoresearch.model.QueryFilter('Test document')\nsort = manticoresearch.model.SortMVA('attr_mva', 'desc', 'max')\nsearch_request.sort = [sort]\n```\n\n<!-- intro -->\n\n##### Python-asyncio:\n\n<!-- request Python-asyncio -->\n``` python\nsearch_request.index = 'test'\nsearch_request.track_scores = true\nsearch_request.fulltext_filter = manticoresearch.model.QueryFilter('Test document')\nsort = manticoresearch.model.SortMVA('attr_mva', 'desc', 'max')\nsearch_request.sort = [sort]\n```\n\n<!-- intro -->\n\n##### Javascript:\n\n<!-- request javascript -->\n``` javascript\nsearchRequest.index = \"test\";\nsearchRequest.trackScores = true;\nsearchRequest.fulltext_filter = new Manticoresearch.QueryFilter('Test document');\nsort = new Manticoresearch.SortMVA('attr_mva', 'desc', 'max');\nsearchRequest.sort = [sort];\n```\n\n<!-- intro -->\n\n##### java:\n\n<!-- request Java -->\n``` java\nsearchRequest.setIndex(\"test\");\nsearchRequest.setTrackScores(true);\nQueryFilter queryFilter = new QueryFilter();\nqueryFilter.setQueryString(\"Test document\");\nsearchRequest.setFulltextFilter(queryFilter);\nSortMVA sort = new SortMVA();\nsort.setAttr(\"attr_mva\");\nsort.setOrder(SortMVA.OrderEnum.DESC);\nsort.setMode(SortMVA.ModeEnum.MAX);\nsearchRequest.setSort(sort);\n\n```\n\n<!-- intro -->\n\n##### C#:\n\n<!-- request C# -->\n``` clike\nvar searchRequest = new SearchRequest(\"test\");\nsearchRequest.SetTrackScores(true);\nsearchRequest.FulltextFilter = new QueryFilter(\"Test document\");\nvar sort = new SortMVA(\"attr_mva\", SortMVA.OrderEnum.Desc, SortMVA.ModeEnum.Max);\nsearchRequest.Sort.Add(sort);\n```\n\n<!-- intro -->\n\n##### Rust:\n\n<!-- request Rust -->\n``` rust\nlet query = SearchQuery {\n    query_string: Some(serde_json::json!(\"Test document\").into()),\n    ..Default::default(),\n};\nlet mut sort_mva_opts = HashMap::new();\nsort_mva_opts.insert(\"order\".to_string(), \"desc\".to_string());\nsort_mva_opts.insert(\"mode\".to_string(), \"max\".to_string());\nlet mut sort_mva = HashMap::new();\nsort_mva.insert(\"attr_mva\".to_string(), sort_mva_opts);\n\nlet search_req = SearchRequest {\n    table: \"test\".to_string(),\n    query: Some(Box::new(query)),\n    sort: Some(serde_json::json!(sort_mva)),\n    track_scores: Some(serde_json::json!(true)),\n    ..Default::default(),\n};\n```\n\n<!-- intro -->\n\n##### Typescript:\n\n<!-- request typescript -->\n``` typescript\nsearchRequest = {\n  index: 'test',\n  track_scores: true,\n  query: {\n    query_string: {'Test document'},\n  },\n  sort: { \"attr_mva\": { \"order\":\"desc\", \"mode\":\"max\" } },\n}\n```\n\n<!-- intro -->\n\n##### Go:\n\n<!-- request go -->\n```go\nsearchRequest.SetIndex(\"test\")\nsearchRequest.SetTrackScores(true)\nquery := map[string]interface{} {\"query_string\": \"Test document\"}\nsearchRequest.SetQuery(query)\nsort := map[string]interface{} { \"attr_mva\": { \"order\":\"desc\", \"mode\":\"max\" } }\nsearchRequest.SetSort(sort)\n```\n\n<!-- end -->\n\n\n## Ranking overview\n\nRanking (also known as weighting) of search results can be defined as a process of computing a so-called relevance (weight) for every given matched document regards to a given query that matched it. So relevance is, in the end, just a number attached to every document that estimates how relevant the document is to the query. Search results can then be sorted based on this number and/or some additional parameters, so that the most sought-after results would appear higher on the results page.\n\nThere is no single standard one-size-fits-all way to rank any document in any scenario. Moreover, there can never be such a way, because relevance is *subjective*. As in, what seems relevant to you might not seem relevant to me. Hence, in general cases, it's not just hard to compute; it's theoretically impossible.\n\nSo ranking in Manticore is configurable. It has a notion of a so-called **ranker**. A ranker can formally be defined as a function that takes a document and a query as its input and produces a relevance value as output. In layman's terms, a ranker controls exactly how (using which specific algorithm) Manticore will assign weights to the documents.\n\n## Available built-in rankers\n\nManticore ships with several built-in rankers suited for different purposes. Many of them use two factors: phrase proximity (also known as LCS) and BM25. Phrase proximity works on keyword positions, while BM25 works on keyword frequencies. Essentially, the better the degree of phrase match between the document body and the query, the higher the phrase proximity (it maxes out when the document contains the entire query as a verbatim quote). And BM25 is higher when the document contains more rare words. We'll save the detailed discussion for later.\n\nThe currently implemented rankers are:\n\n* `proximity_bm25`, the default ranking mode that uses and combines both phrase proximity and BM25 ranking.\n* `bm25`, a statistical ranking mode that uses BM25 ranking only (similar to most other full-text engines). This mode is faster but may result in worse quality for queries containing more than one keyword.\n* `none`, a no-ranking mode. This mode is obviously the fastest. A weight of 1 is assigned to all matches. This is sometimes called boolean searching, which just matches the documents but does not rank them.\n* `wordcount`, ranking by the keyword occurrences count. This ranker computes the per-field keyword occurrence counts, then multiplies them by field weights, and sums the resulting values.\n* `proximity` returns the raw phrase proximity value as a result. This mode is internally used to emulate `SPH_MATCH_ALL` queries.\n* `matchany` returns rank as it was computed in `SPH_MATCH_ANY` mode earlier and is internally used to emulate `SPH_MATCH_ANY` queries.\n* `fieldmask` returns a 32-bit mask with the N-th bit corresponding to the N-th full-text field, numbering from 0. The bit will only be set when the respective field has any keyword occurrences satisfying the query.\n* `sph04` is generally based on the default 'proximity_bm25' ranker, but additionally boosts matches when they occur at the very beginning or the very end of a text field. Thus, if a field equals the exact query, `sph04` should rank it higher than a field that contains the exact query but is not equal to it. (For instance, when the query is \"Hyde Park\", a document titled \"Hyde Park\" should be ranked higher than one titled \"Hyde Park, London\" or \"The Hyde Park Cafe\".)\n* `expr` allows you to specify the ranking formula at runtime. It exposes several internal text factors and lets you define how the final weight should be computed from those factors. You can find more details about its syntax and a reference of available factors in a [subsection below](../Searching/Sorting_and_ranking.md#Quick-summary-of-the-ranking-factors).\n\nThe ranker name is case-insensitive. Example:\n\n```sql\nSELECT ... OPTION ranker=sph04;\n```\n\n## Quick summary of the ranking factors\n\n| Name                    | Level     | Type  | Summary                                                                                                            |\n| ----------------------- | --------- | ----- | ------------------------------------------------------------------------------------------------------------------ |\n| max_lcs                 | query     | int   | maximum possible LCS value for the current query                                                                   |\n| bm25                    | document  | int   | quick estimate of BM25(1.2, 0)                                                                                     |\n| bm25a(k1, b)            | document  | int   | precise BM25() value with configurable K1, B constants and syntax support                                         |\n| bm25f(k1, b, {field=weight, ...}) | document | int   | precise BM25F() value with extra configurable field weights                                                       |\n| field_mask              | document  | int   | bit mask of matched fields                                                                                         |\n| query_word_count        | document  | int   | number of unique inclusive keywords in a query                                                                     |\n| doc_word_count          | document  | int   | number of unique keywords matched in the document                                                                  |\n| lcs                     | field     | int   | Longest Common Subsequence between query and document, in words                                                    |\n| user_weight             | field     | int   | user field weight                                                                                                  |\n| hit_count               | field     | int   | total number of keyword occurrences                                                                                |\n| word_count              | field     | int   | number of unique matched keywords                                                                                  |\n| tf_idf                  | field     | float | sum(tf*idf) over matched keywords == sum(idf) over occurrences                                                     |\n| min_hit_pos             | field     | int   | first matched occurrence position, in words, 1-based                                                               |\n| min_best_span_pos       | field     | int   | first maximum LCS span position, in words, 1-based                                                                 |\n| exact_hit               | field     | bool  | whether query == field                                                                                             |\n| min_idf                 | field     | float | min(idf) over matched keywords                                                                                     |\n| max_idf                 | field     | float | max(idf) over matched keywords                                                                                     |\n| sum_idf                 | field     | float | sum(idf) over matched keywords                                                                                     |\n| exact_order             | field     | bool  | whether all query keywords were a) matched and b) in query order                                                   |\n| min_gaps                | field     | int   | minimum number of gaps between the matched keywords over the matching spans                                        |\n| lccs                    | field     | int   | Longest Common Contiguous Subsequence between query and document, in words                                         |\n| wlccs                   | field     | float | Weighted Longest Common Contiguous Subsequence, sum(idf) over contiguous keyword spans                            |\n| atc                     | field     | float | Aggregate Term Closeness, log(1+sum(idf1*idf2*pow(distance, -1.75)) over the best pairs of keywords               |\n\nNote: For queries using **Phrase**, **Proximity**, or **NEAR** operators with more than 31 keywords, ranking factors that rely on term frequency (like `tf`, `idf`, `bm25`, `hit_count`, `word_count`) may be under-counted for keywords at position 31 and above. This is due to an internal 32-bit mask used to track term occurrences in these complex operators.\n\n### Document-level Ranking Factors\n\nA **document-level factor** is a numeric value computed by the ranking engine for every matched document with regards to the current query. So it differs from a plain document attribute in that the attribute does not depend on the full text query, while factors might. These factors can be used anywhere in the ranking expression. Currently implemented document-level factors are:\n\n* `bm25` (integer), a document-level BM25 estimate (computed without keyword occurrence filtering).\n* `max_lcs` (integer), a query-level maximum possible value that the `sum(lcs*user_weight)` expression can ever take. This can be useful for weight boost scaling. For instance, `MATCHANY` ranker formula uses this to guarantee that a full phrase match in any field ranks higher than any combination of partial matches in all fields.\n* `field_mask` (integer), a document-level 32-bit mask of matched fields.\n* `query_word_count` (integer), the number of unique keywords in a query, adjusted for the number of excluded keywords. For instance, both `(one one one one)` and `(one !two)` queries should assign a value of 1 to this factor, because there is just one unique non-excluded keyword.\n* `doc_word_count` (integer), the number of unique keywords matched in the entire document.\n\n### Field-level Ranking Factors\n\nA **field-level factor** is a numeric value computed by the ranking engine for every matched in-document text field regards to the current query. As more than one field can be matched by a query, but the final weight needs to be a single integer value, these values need to be folded into a single one. To achieve that, field-level factors can only be used within a field aggregation function, they can **not** be used anywhere in the expression. For example, you cannot use `(lcs+bm25)` as your ranking expression, as `lcs` takes multiple values (one in every matched field). You should use `(sum(lcs)+bm25)` instead, that expression sums `lcs` over all matching fields, and then adds `bm25` to that per-field sum. Currently implemented field-level factors are:\n\n* `lcs` (integer), the length of a maximum verbatim match between the document and the query, counted in words. LCS stands for Longest Common Subsequence (or Subset). Takes a minimum value of 1 when only stray keywords were matched in a field, and a maximum value of query keywords count when the entire query was matched in a field verbatim (in the exact query keywords order). For example, if the query is 'hello world' and the field contains these two words quoted from the query (that is, adjacent to each other, and exactly in the query order), `lcs` will be 2. For example, if the query is 'hello world program' and the field contains 'hello world', `lcs` will be 2. Note that any subset of the query keyword works, not just a subset of adjacent keywords. For example, if the query is 'hello world program' and the field contains 'hello (test program)', `lcs` will be 2 just as well, because both 'hello' and 'program' matched in the same respective positions as they were in the query. Finally, if the query is 'hello world program' and the field contains 'hello world program', `lcs` will be 3. (Hopefully that is unsurprising at this point.)\n* `user_weight` (integer), the user specified per-field weight (refer to [OPTION field_weights](../Searching/Options.md#field_weights) in SQL). The weights default to 1 if not specified explicitly.\n* `hit_count` (integer), the number of keyword occurrences that matched in the field. Note that a single keyword may occur multiple times. For example, if 'hello' occurs 3 times in a field and 'world' occurs 5 times, `hit_count` will be 8.\n* `word_count` (integer), the number of unique keywords matched in the field. For example, if 'hello' and 'world' occur anywhere in a field, `word_count` will be 2, regardless of how many times both keywords occur.\n* `tf_idf` (float), the sum of TF/IDF over all the keywords matched in the field. IDF is the Inverse Document Frequency, a floating point value between 0 and 1 that describes how frequent the keyword is (basically, 0 for a keyword that occurs in every document indexed, and 1 for a unique keyword that occurs in just a single document). TF is the Term Frequency, the number of matched keyword occurrences in the field. As a side note, `tf_idf` is actually computed by summing IDF over all matched occurrences. That's by construction equivalent to summing TF*IDF over all matched keywords.\n* `min_hit_pos` (integer), the position of the first matched keyword occurrence, counted in words\n\n   Therefore, this is a relatively low-level, \"raw\" factor that you'll likely want to *adjust* before using it for ranking. The specific adjustments depend heavily on your data and the resulting formula, but here are a few ideas to start with: (a) any min_gaps-based boosts could be simply ignored when word_count<2;\n\n    (b) non-trivial min_gaps values (i.e., when word_count>=2) could be clamped with a certain \"worst-case\" constant, while trivial values (i.e., when min_gaps=0 and word_count<2) could be replaced by that constant;\n\n    (c) a transfer function like 1/(1+min_gaps) could be applied (so that better, smaller min_gaps values would maximize it, and worse, larger min_gaps values would fall off slowly); and so on.\n* `lccs` (integer). Longest Common Contiguous Subsequence. The length of the longest subphrase common between the query and the document, computed in keywords.\n\n    The LCCS factor is somewhat similar to LCS but more restrictive. While LCS can be greater than 1 even if no two query words are matched next to each other, LCCS will only be greater than 1 if there are *exact*, contiguous query subphrases in the document. For example, (one two three four five) query vs (one hundred three hundred five hundred) document would yield lcs=3, but lccs=1, because although the mutual dispositions of 3 keywords (one, three, five) match between the query and the document, no 2 matching positions are actually adjacent.\n\n    Note that LCCS still doesn't differentiate between frequent and rare keywords; for that, see WLCCS.\n* `wlccs` (float). Weighted Longest Common Contiguous Subsequence. The sum of IDFs of the keywords of the longest subphrase common between the query and the document.\n\n    WLCCS is calculated similarly to LCCS, but every \"suitable\" keyword occurrence increases it by the keyword IDF instead of just by 1 (as with LCS and LCCS). This allows ranking sequences of rarer and more important keywords higher than sequences of frequent keywords, even if the latter are longer. For example, a query `(Zanzibar bed and breakfast)` would yield lccs=1 for a `(hotels of Zanzibar)` document, but lccs=3 against `(London bed and breakfast)`, even though \"Zanzibar\" is actually somewhat rarer than the entire \"bed and breakfast\" phrase. The WLCCS factor addresses this issue by using keyword frequencies.\n* `atc` (float). Aggregate Term Closeness. A proximity-based measure that increases when the document contains more groups of more closely located and more important (rare) query keywords.\n\n    **WARNING:** you should use ATC with OPTION idf='plain,tfidf_unnormalized' (see [below](../Searching/Sorting_and_ranking.md#Configuration-of-IDF-formula)); otherwise, you may get unexpected results.\n\n    ATC essentially operates as follows. For each keyword *occurrence* in the document, we compute the so-called *term closeness*. To do this, we examine all the other closest occurrences of all the query keywords (including the keyword itself) to the left and right of the subject occurrence, calculate a distance dampening coefficient as k = pow(distance, -1.75) for these occurrences, and sum the dampened IDFs. As a result, for every occurrence of each keyword, we obtain a \"closeness\" value that describes the \"neighbors\" of that occurrence. We then multiply these per-occurrence closenesses by their respective subject keyword IDF, sum them all, and finally compute a logarithm of that sum.\n\nIn other words, we process the best (closest) matched keyword pairs in the document, and compute pairwise \"closenesses\" as the product of their IDFs scaled by the distance coefficient:\n\n```\npair_tc = idf(pair_word1) * idf(pair_word2) * pow(pair_distance, -1.75)\n```\n\nWe then sum such closenesses, and compute the final, log-dampened ATC value:\n\n```\natc = log(1+sum(pair_tc))\n```\n\nNote that this final dampening logarithm is precisely the reason you should use OPTION idf=plain because, without it, the expression inside the log() could be negative.\n\nHaving closer keyword occurrences contributes *much* more to ATC than having more frequent keywords. Indeed, when the keywords are right next to each other, distance=1 and k=1; when there's just one word in between them, distance=2 and k=0.297, with two words between, distance=3 and k=0.146, and so on. At the same time, IDF attenuates somewhat slower. For example, in a 1 million document collection, the IDF values for keywords that match in 10, 100, and 1000 documents would be respectively 0.833, 0.667, and 0.500. So a keyword pair with two rather rare keywords that occur in just 10 documents each but with 2 other words in between would yield pair_tc = 0.101 and thus barely outweigh a pair with a 100-doc and a 1000-doc keyword with 1 other word between them and pair_tc = 0.099. Moreover, a pair of two *unique*, 1-doc keywords with 3 words between them would get a pair_tc = 0.088 and lose to a pair of two 1000-doc keywords located right next to each other and yielding a pair_tc = 0.25. So, basically, while ATC does combine both keyword frequency and proximity, it still somewhat favors proximity.\n\n### Ranking factor aggregation functions\n\nA **field aggregation function** is a single-argument function that accepts an expression with field-level factors, iterates over all matched fields, and computes the final results. The currently implemented field aggregation functions include:\n\n* `sum`, which adds the argument expression over all matched fields. For example `sum(1)` should return the number of matched fields.\n* `top`, which returns the highest value of the argument across all matched fields.\n* `max_window_hits`, manages a sliding window of hit positions to track the maximum number of hits within a specified window size. It removes outdated hits that fall outside the window and adds the latest hit, updating the maximum number of hits found within that window.\n\n### Formula expressions for all the built-in rankers\n\nMost other rankers can actually be emulated using the expression-based ranker. You just need to provide an appropriate expression. While this emulation will likely be slower than using the built-in, compiled ranker, it may still be interesting if you want to fine-tune your ranking formula starting with one of the existing ones. Additionally, the formulas describe the ranker details in a clear, readable manner.\n\n* proximity_bm25 (default ranker) = `sum(lcs*user_weight)*1000+bm25`\n* bm25 = `sum(user_weight)*1000+bm25`\n* none = `1`\n* wordcount = `sum(hit_count*user_weight)`\n* proximity = `sum(lcs*user_weight)`\n* matchany = `sum((word_count+(lcs-1)*max_lcs)*user_weight)`\n* fieldmask = `field_mask`\n* sph04 = `sum((4*lcs+2*(min_hit_pos==1)+exact_hit)*user_weight)*1000+bm25`\n\n\n### Configuration of IDF formula\n\nThe historically default IDF (Inverse Document Frequency) in Manticore is equivalent to `OPTION idf='normalized,tfidf_normalized'`, and those normalizations may cause several undesired effects.\n\nFirst, `idf=normalized` causes keyword penalization. For instance, if you search for `the | something` and `the` occurs in more than 50% of the documents, then documents with both keywords `the` and`[something` will get less weight than documents with just one keyword  `something`. Using `OPTION idf=plain` avoids this.\n\nPlain IDF varies in `[0, log(N)]` range, and keywords are never penalized; while the normalized IDF varies in `[-log(N), log(N)]` range, and too frequent keywords are penalized.\n\nSecond, `idf=tfidf_normalized` causes IDF drift over queries. Historically, we additionally divided IDF by query keyword count, so that the entire `sum(tf*idf)` over all keywords would still fit into `[0,1]` range. However, that means that queries `word1` and `word1 | nonmatchingword2` would assign different weights to the exactly same result set, because the IDFs for both `word1` and `nonmatchingword2` would be divided by 2. `OPTION idf='tfidf_unnormalized'` fixes that. Note that BM25, BM25A, BM25F() ranking factors will be scale accordingly  once you disable this normalization.\n\nIDF flags can be mixed; `plain` and `normalized` are mutually exclusive;`tfidf_unnormalized` and `tfidf_normalized` are mutually exclusive; and unspecified flags in such a mutually exclusive group take their defaults. That means that `OPTION idf=plain` is equivalent to a complete `OPTION idf='plain,tfidf_normalized'` specification.\n\n<!-- proofread -->\n\n",
        "updated_at": 1768530797,
        "source_md5": "c9e25b23d3f3acd2fb2d9d383568a97e"
    }
}