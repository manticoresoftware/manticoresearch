{
    "4ddb6ab23dc922ad2dea2927cd0618fcfe4df2f13d8052ef0790404fa164bd94": {
        "original": "# Compacting a Table\n\nOver time, RT tables may become fragmented into numerous disk chunks and/or contaminated with deleted, yet unpurged data, affecting search performance. In these cases, optimization is necessary. Essentially, the optimization process combines disk chunks (N-way merge), removing documents that were previously deleted using DELETE statements.\n\nBeginning with Manticore 4, this process occurs [automatically by default](../Server_settings/Searchd.md#auto_optimize). However, you can also use the following commands to manually initiate table compaction.\n\n## OPTIMIZE TABLE\n\n<!-- example optimize -->\nCODE_BLOCK_0\n\n`OPTIMIZE` statement adds an RT table to the optimization queue, which will be processed in a background thread.\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_1\n<!-- end -->\n\n### Number of optimized disk chunks\n\n<!-- example optimize_cutoff -->\n\nBy default, OPTIMIZE merges the RT table's disk chunks down to a number less than or equal to the number of logical CPU cores multiplied by 2.\n\nHowever, if the table has attributes with KNN indexes, this threshold is different. In this case, it is set to the number of physical CPU cores divided by 2 to improve KNN search performance.\n\nYou can also control the number of optimized disk chunks manually using the `cutoff` option.\n\nAdditional options include:\n* Server setting [optimize_cutoff](../Server_settings/Searchd.md#optimize_cutoff) for overriding the default threshold\n* Per-table setting [optimize_cutoff](../Creating_a_table/Local_tables/Plain_and_real-time_table_settings.md#optimize_cutoff)\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_2\n<!-- end -->\n\n### Running in foreground\n\n<!-- example optimize_sync -->\n\nWhen using `OPTION sync=1` (0 by default), the command will wait for the optimization process to complete before returning. If the connection is interrupted, the optimization will continue running on the server.\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_3\n<!-- end -->\n\n### Throttling the IO impact\n\nOptimization can be a lengthy and I/O-intensive process. The `OPTIMIZE` statement adds a job to a background worker pool. You can control how many jobs run in parallel with [parallel_chunk_merges](../Server_settings/Searchd.md#parallel_chunk_merges) and how many chunks each job merges with [merge_chunks_per_job](../Server_settings/Searchd.md#merge_chunks_per_job). The optimization workers can be I/O-throttled, and you can control the maximum number of I/Os per second and the maximum I/O size with the [rt_merge_iops](../Server_settings/Searchd.md#rt_merge_iops) and [rt_merge_maxiosize](../Server_settings/Searchd.md#rt_merge_maxiosize) directives, respectively.\n\nDuring optimization, the RT table being optimized remains online and available for both searching and updates nearly all the time. It is locked for a very brief period when a pair of disk chunks is successfully merged, allowing for the renaming of old and new files and updating the table header.\n\n### Optimizing clustered tables\n\nAs long as [auto_optimize](../Server_settings/Searchd.md#auto_optimize) is not disabled, tables are optimized automatically.\n\nIf you are experiencing unexpected SSTs or want tables across all nodes of the cluster to be binary identical, you need to:\n1. Disable [auto_optimize](../Server_settings/Searchd.md#auto_optimize).\n2. Manually optimize tables:\n<!-- example cluster_manual_drop -->\nOn one of the nodes, drop the table from the cluster:\n<!-- request SQL -->\nCODE_BLOCK_4\n<!-- end -->\n<!-- example cluster_manual_optimize -->\nOptimize the table:\n<!-- request SQL -->\nCODE_BLOCK_5\n<!-- end -->\n<!-- example cluster_manual_add -->\nAdd back the table to the cluster:\n<!-- request SQL -->\nCODE_BLOCK_6\n<!-- end -->\nWhen the table is added back, the new files created by the optimization process will be replicated to the other nodes in the cluster.\nAny local changes made to the table on other nodes will be lost.\n\nTable data modifications (inserts, replaces, deletes, updates) should either:\n\n1. Be postponed, or\n2. Be directed to the node where the optimization process is running.\n\nNote that while the table is out of the cluster, insert/replace/delete/update commands should refer to it without the cluster name prefix (for SQL statements or the cluster property in case of an HTTP JSON request), otherwise they will fail.\nOnce the table is added back to the cluster, you must resume write operations on the table and include the cluster name prefix again, or they will fail.\n\nSearch operations are available as usual during the process on any of the nodes.\n\n<!-- proofread -->\n",
        "translations": {
            "chinese": "# \u7d27\u51d1\u8868\n\n\u968f\u7740\u65f6\u95f4\u7684\u63a8\u79fb\uff0cRT \u8868\u53ef\u80fd\u4f1a\u5206\u6563\u6210\u591a\u4e2a\u78c1\u76d8\u5757\u548c/\u6216\u88ab\u5df2\u5220\u9664\u4f46\u672a\u6e05\u7406\u7684\u6570\u636e\u6c61\u67d3\uff0c\u5f71\u54cd\u641c\u7d22\u6027\u80fd\u3002\u5728\u8fd9\u4e9b\u60c5\u51b5\u4e0b\uff0c\u9700\u8981\u8fdb\u884c\u4f18\u5316\u3002\u57fa\u672c\u4e0a\uff0c\u4f18\u5316\u8fc7\u7a0b\u4f1a\u5408\u5e76\u78c1\u76d8\u5757\uff08N \u8def\u5408\u5e76\uff09\uff0c\u79fb\u9664\u4e4b\u524d\u4f7f\u7528 DELETE \u8bed\u53e5\u5220\u9664\u7684\u6587\u6863\u3002\n\n\u4ece Manticore 4 \u5f00\u59cb\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u9ed8\u8ba4[\u81ea\u52a8\u6267\u884c](../Server_settings/Searchd.md#auto_optimize)\u3002\u4f46\u662f\uff0c\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u624b\u52a8\u542f\u52a8\u8868\u7d27\u51d1\u64cd\u4f5c\u3002\n\n## OPTIMIZE TABLE\n\n<!-- example optimize -->\nCODE_BLOCK_0\n\n`OPTIMIZE` \u8bed\u53e5\u5c06 RT \u8868\u6dfb\u52a0\u5230\u4f18\u5316\u961f\u5217\uff0c\u961f\u5217\u5c06\u5728\u540e\u53f0\u7ebf\u7a0b\u4e2d\u5904\u7406\u3002\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_1\n<!-- end -->\n\n### \u4f18\u5316\u540e\u7684\u78c1\u76d8\u5757\u6570\u91cf\n\n<!-- example optimize_cutoff -->\n\n\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cOPTIMIZE \u4f1a\u5c06 RT \u8868\u7684\u78c1\u76d8\u5757\u5408\u5e76\u5230\u4e0d\u8d85\u8fc7\u903b\u8f91 CPU \u6838\u5fc3\u6570\u91cf\u4e58\u4ee5 2 \u7684\u6570\u91cf\u3002\n\n\u4f46\u662f\uff0c\u5982\u679c\u8868\u5305\u542b\u5e26\u6709 KNN \u7d22\u5f15\u7684\u5c5e\u6027\uff0c\u8fd9\u4e2a\u9608\u503c\u4e0d\u540c\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5b83\u88ab\u8bbe\u7f6e\u4e3a\u7269\u7406 CPU \u6838\u5fc3\u6570\u91cf\u9664\u4ee5 2\uff0c\u4ee5\u63d0\u5347 KNN \u641c\u7d22\u6027\u80fd\u3002\n\n\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528 `cutoff` \u9009\u9879\u624b\u52a8\u63a7\u5236\u4f18\u5316\u540e\u7684\u78c1\u76d8\u5757\u6570\u91cf\u3002\n\n\u9644\u52a0\u9009\u9879\u5305\u62ec\uff1a\n* \u670d\u52a1\u5668\u8bbe\u7f6e [optimize_cutoff](../Server_settings/Searchd.md#optimize_cutoff) \u6765\u8986\u76d6\u9ed8\u8ba4\u9608\u503c\n* \u6bcf\u8868\u8bbe\u7f6e [optimize_cutoff](../Creating_a_table/Local_tables/Plain_and_real-time_table_settings.md#optimize_cutoff)\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_2\n<!-- end -->\n\n### \u524d\u53f0\u8fd0\u884c\n\n<!-- example optimize_sync -->\n\n\u5f53\u4f7f\u7528 `OPTION sync=1`\uff08\u9ed8\u8ba4\u662f 0\uff09\u65f6\uff0c\u547d\u4ee4\u4f1a\u7b49\u5f85\u4f18\u5316\u8fc7\u7a0b\u5b8c\u6210\u540e\u624d\u8fd4\u56de\u3002\u5982\u679c\u8fde\u63a5\u4e2d\u65ad\uff0c\u4f18\u5316\u4ecd\u5c06\u5728\u670d\u52a1\u5668\u4e0a\u7ee7\u7eed\u8fd0\u884c\u3002\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_3\n<!-- end -->\n\n### \u9650\u5236 IO \u5f71\u54cd\n\n\u4f18\u5316\u53ef\u80fd\u662f\u4e00\u4e2a\u8017\u65f6\u4e14 IO \u5bc6\u96c6\u7684\u8fc7\u7a0b\u3002`OPTIMIZE` \u8bed\u53e5\u4f1a\u5c06\u4f18\u5316\u4efb\u52a1\u6dfb\u52a0\u5230\u540e\u53f0\u5de5\u4f5c\u6c60\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7 [parallel_chunk_merges](../Server_settings/Searchd.md#parallel_chunk_merges) \u8bbe\u7f6e\u5e76\u884c\u8fd0\u884c\u7684\u4efb\u52a1\u6570\u91cf\uff0c\u901a\u8fc7 [merge_chunks_per_job](../Server_settings/Searchd.md#merge_chunks_per_job) \u8bbe\u7f6e\u6bcf\u4e2a\u4efb\u52a1\u5408\u5e76\u7684\u78c1\u76d8\u5757\u6570\u91cf\u3002\u4f18\u5316\u5de5\u4f5c\u7ebf\u7a0b\u53ef\u4ee5\u8fdb\u884c IO \u9650\u901f\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7 [rt_merge_iops](../Server_settings/Searchd.md#rt_merge_iops) \u548c [rt_merge_maxiosize](../Server_settings/Searchd.md#rt_merge_maxiosize) \u6307\u4ee4\u5206\u522b\u63a7\u5236\u6700\u5927\u6bcf\u79d2 IO \u6b21\u6570\u548c\u6700\u5927 IO \u5927\u5c0f\u3002\n\n\u5728\u4f18\u5316\u671f\u95f4\uff0c\u88ab\u4f18\u5316\u7684 RT \u8868\u51e0\u4e4e\u59cb\u7ec8\u4fdd\u6301\u5728\u7ebf\uff0c\u65e2\u53ef\u7528\u4e8e\u641c\u7d22\u4e5f\u53ef\u7528\u4e8e\u66f4\u65b0\u3002\u53ea\u6709\u5728\u6210\u529f\u5408\u5e76\u4e00\u5bf9\u78c1\u76d8\u5757\u65f6\u8868\u624d\u4f1a\u88ab\u77ed\u6682\u9501\u5b9a\uff0c\u7528\u4e8e\u91cd\u547d\u540d\u65e7\u6587\u4ef6\u548c\u65b0\u6587\u4ef6\u4ee5\u53ca\u66f4\u65b0\u8868\u5934\u3002\n\n### \u4f18\u5316\u96c6\u7fa4\u8868\n\n\u53ea\u8981\u672a\u7981\u7528 [auto_optimize](../Server_settings/Searchd.md#auto_optimize)\uff0c\u8868\u5c31\u4f1a\u81ea\u52a8\u4f18\u5316\u3002\n\n\u5982\u679c\u9047\u5230\u610f\u5916\u7684 SST \u6216\u5e0c\u671b\u96c6\u7fa4\u4e2d\u6240\u6709\u8282\u70b9\u7684\u8868\u6587\u4ef6\u4e8c\u8fdb\u5236\u5b8c\u5168\u4e00\u81f4\uff0c\u9700\u8981\uff1a\n1. \u7981\u7528 [auto_optimize](../Server_settings/Searchd.md#auto_optimize)\u3002\n2. \u624b\u52a8\u4f18\u5316\u8868\uff1a\n<!-- example cluster_manual_drop -->\n\u5728\u67d0\u4e2a\u8282\u70b9\u4ece\u96c6\u7fa4\u4e2d\u5220\u9664\u8be5\u8868\uff1a\n<!-- request SQL -->\nCODE_BLOCK_4\n<!-- end -->\n<!-- example cluster_manual_optimize -->\n\u4f18\u5316\u8be5\u8868\uff1a\n<!-- request SQL -->\nCODE_BLOCK_5\n<!-- end -->\n<!-- example cluster_manual_add -->\n\u5c06\u8868\u91cd\u65b0\u6dfb\u52a0\u56de\u96c6\u7fa4\uff1a\n<!-- request SQL -->\nCODE_BLOCK_6\n<!-- end -->\n\u5f53\u8868\u88ab\u91cd\u65b0\u6dfb\u52a0\u65f6\uff0c\u7531\u4f18\u5316\u8fc7\u7a0b\u4ea7\u751f\u7684\u65b0\u6587\u4ef6\u5c06\u88ab\u590d\u5236\u5230\u96c6\u7fa4\u7684\u5176\u4ed6\u8282\u70b9\u3002\n\u5176\u4ed6\u8282\u70b9\u4e0a\u5bf9\u8be5\u8868\u6240\u505a\u7684\u4efb\u4f55\u672c\u5730\u66f4\u6539\u5c06\u4f1a\u4e22\u5931\u3002\n\n\u5bf9\u8868\u6570\u636e\u7684\u4fee\u6539\uff08\u63d2\u5165\u3001\u66ff\u6362\u3001\u5220\u9664\u3001\u66f4\u65b0\uff09\u5e94\u5f53\uff1a\n\n1. \u5ef6\u540e\u6267\u884c\uff0c\u6216\u8005\n2. \u5b9a\u5411\u5230\u6b63\u5728\u8fd0\u884c\u4f18\u5316\u8fc7\u7a0b\u7684\u8282\u70b9\u3002\n\n\u8bf7\u6ce8\u610f\uff0c\u8868\u5904\u4e8e\u96c6\u7fa4\u4e4b\u5916\u65f6\uff0c\u63d2\u5165/\u66ff\u6362/\u5220\u9664/\u66f4\u65b0\u547d\u4ee4\u5e94\u7701\u7565\u96c6\u7fa4\u540d\u79f0\u524d\u7f00\uff08\u5bf9\u4e8e SQL \u8bed\u53e5\u6216 HTTP JSON \u8bf7\u6c42\u4e2d\u7684 cluster \u5c5e\u6027\uff09\uff0c\u5426\u5219\u4f1a\u6267\u884c\u5931\u8d25\u3002\n\u4e00\u65e6\u8868\u88ab\u91cd\u65b0\u52a0\u5165\u96c6\u7fa4\uff0c\u5fc5\u987b\u6062\u590d\u5199\u64cd\u4f5c\u5e76\u91cd\u65b0\u5305\u542b\u96c6\u7fa4\u540d\u79f0\u524d\u7f00\uff0c\u5426\u5219\u5c06\u6267\u884c\u5931\u8d25\u3002\n\n\u5728\u6574\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u4efb\u4f55\u8282\u70b9\u5747\u53ef\u7167\u5e38\u8fdb\u884c\u641c\u7d22\u64cd\u4f5c\u3002\n\n<!-- proofread -->\n",
            "russian": "# \u041a\u043e\u043c\u043f\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b\n\n\u0421\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0435\u043c RT-\u0442\u0430\u0431\u043b\u0438\u0446\u044b \u043c\u043e\u0433\u0443\u0442 \u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u043e \u0434\u0438\u0441\u043a\u043e\u0432\u044b\u0445 \u0447\u0430\u043d\u043a\u043e\u0432 \u0438/\u0438\u043b\u0438 \u0437\u0430\u0433\u0440\u044f\u0437\u043d\u044f\u0442\u044c\u0441\u044f \u0443\u0434\u0430\u043b\u0451\u043d\u043d\u044b\u043c\u0438, \u043d\u043e \u043d\u0435 \u043e\u0447\u0438\u0449\u0435\u043d\u043d\u044b\u043c\u0438 \u0434\u0430\u043d\u043d\u044b\u043c\u0438, \u0447\u0442\u043e \u0432\u043b\u0438\u044f\u0435\u0442 \u043d\u0430 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u043f\u043e\u0438\u0441\u043a\u0430. \u0412 \u0442\u0430\u043a\u0438\u0445 \u0441\u043b\u0443\u0447\u0430\u044f\u0445 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u0430 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u044f. \u041f\u043e \u0441\u0443\u0442\u0438, \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u044f\u0435\u0442 \u0434\u0438\u0441\u043a\u043e\u0432\u044b\u0435 \u0447\u0430\u043d\u043a\u0438 (\u0441\u043b\u0438\u044f\u043d\u0438\u0435 N-\u043d\u0430-1), \u0443\u0434\u0430\u043b\u044f\u044f \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0440\u0430\u043d\u0435\u0435 \u0431\u044b\u043b\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u044b \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u043e\u0432 DELETE.\n\n\u041d\u0430\u0447\u0438\u043d\u0430\u044f \u0441 Manticore 4, \u044d\u0442\u043e\u0442 \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 [\u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e](../Server_settings/Searchd.md#auto_optimize). \u041e\u0434\u043d\u0430\u043a\u043e \u0432\u044b \u0442\u0430\u043a\u0436\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u0434\u043b\u044f \u0440\u0443\u0447\u043d\u043e\u0433\u043e \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u043a\u043e\u043c\u043f\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u044b.\n\n## OPTIMIZE TABLE\n\n<!-- example optimize -->\nCODE_BLOCK_0\n\n\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 `OPTIMIZE` \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442 RT-\u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u0432 \u043e\u0447\u0435\u0440\u0435\u0434\u044c \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0431\u0443\u0434\u0435\u0442 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u0430 \u0432 \u0444\u043e\u043d\u043e\u0432\u043e\u043c \u043f\u043e\u0442\u043e\u043a\u0435.\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_1\n<!-- end -->\n\n### \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0438\u0440\u0443\u0435\u043c\u044b\u0445 \u0434\u0438\u0441\u043a\u043e\u0432\u044b\u0445 \u0447\u0430\u043d\u043a\u043e\u0432\n\n<!-- example optimize_cutoff -->\n\n\u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e OPTIMIZE \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u044f\u0435\u0442 \u0434\u0438\u0441\u043a\u043e\u0432\u044b\u0435 \u0447\u0430\u043d\u043a\u0438 RT-\u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0434\u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0430, \u043c\u0435\u043d\u044c\u0448\u0435\u0433\u043e \u0438\u043b\u0438 \u0440\u0430\u0432\u043d\u043e\u0433\u043e \u0447\u0438\u0441\u043b\u0443 \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u044f\u0434\u0435\u0440 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440\u0430, \u0443\u043c\u043d\u043e\u0436\u0435\u043d\u043d\u043e\u043c\u0443 \u043d\u0430 2.\n\n\u041e\u0434\u043d\u0430\u043a\u043e, \u0435\u0441\u043b\u0438 \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 \u0435\u0441\u0442\u044c \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u044b \u0441 KNN-\u0438\u043d\u0434\u0435\u043a\u0441\u0430\u043c\u0438, \u044d\u0442\u043e\u0442 \u043f\u043e\u0440\u043e\u0433 \u0438\u043d\u043e\u0439. \u0412 \u044d\u0442\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043e\u043d \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u043a\u0430\u043a \u0447\u0438\u0441\u043b\u043e \u0444\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u044f\u0434\u0435\u0440 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440\u0430, \u0434\u0435\u043b\u0451\u043d\u043d\u043e\u0435 \u043d\u0430 2, \u0447\u0442\u043e\u0431\u044b \u0443\u043b\u0443\u0447\u0448\u0438\u0442\u044c \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c KNN-\u043f\u043e\u0438\u0441\u043a\u0430.\n\n\u0412\u044b \u0442\u0430\u043a\u0436\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u0440\u0443\u0447\u043d\u0443\u044e \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0438\u0440\u0443\u0435\u043c\u044b\u0445 \u0434\u0438\u0441\u043a\u043e\u0432\u044b\u0445 \u0447\u0430\u043d\u043a\u043e\u0432 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430 `cutoff`.\n\n\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b:\n* \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 [optimize_cutoff](../Server_settings/Searchd.md#optimize_cutoff) \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043f\u043e\u0440\u043e\u0433\u043e\u0432\u043e\u0433\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e\n* \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0434\u043b\u044f \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b [optimize_cutoff](../Creating_a_table/Local_tables/Plain_and_real-time_table_settings.md#optimize_cutoff)\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_2\n<!-- end -->\n\n### \u0417\u0430\u043f\u0443\u0441\u043a \u0432 \u0444\u043e\u043d\u043e\u0432\u043e\u043c \u0440\u0435\u0436\u0438\u043c\u0435\n\n<!-- example optimize_sync -->\n\n\u041f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 `OPTION sync=1` (\u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e 0) \u043a\u043e\u043c\u0430\u043d\u0434\u0430 \u0431\u0443\u0434\u0435\u0442 \u043e\u0436\u0438\u0434\u0430\u0442\u044c \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0430 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u0435\u0440\u0435\u0434 \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u043e\u043c \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f. \u0415\u0441\u043b\u0438 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u043f\u0440\u0435\u0440\u0432\u0451\u0442\u0441\u044f, \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c\u0441\u044f \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435.\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_3\n<!-- end -->\n\n### \u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u0432\u043b\u0438\u044f\u043d\u0438\u044f \u043d\u0430 \u0432\u0432\u043e\u0434-\u0432\u044b\u0432\u043e\u0434\n\n\u041e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u044f \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0434\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c \u0438 \u0438\u043d\u0442\u0435\u043d\u0441\u0438\u0432\u043d\u044b\u043c \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u043c \u0441 \u0442\u043e\u0447\u043a\u0438 \u0437\u0440\u0435\u043d\u0438\u044f \u0432\u0432\u043e\u0434\u0430-\u0432\u044b\u0432\u043e\u0434\u0430. \u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 `OPTIMIZE` \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442 \u0437\u0430\u0434\u0430\u043d\u0438\u0435 \u0432 \u043f\u0443\u043b \u0444\u043e\u043d\u043e\u0432\u044b\u0445 \u0440\u0430\u0431\u043e\u0447\u0438\u0445. \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c, \u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0437\u0430\u0434\u0430\u043d\u0438\u0439 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u043f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u044c\u043d\u043e \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e [parallel_chunk_merges](../Server_settings/Searchd.md#parallel_chunk_merges) \u0438 \u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0447\u0430\u043d\u043a\u043e\u0432 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u044f\u0435\u0442 \u043a\u0430\u0436\u0434\u043e\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e [merge_chunks_per_job](../Server_settings/Searchd.md#merge_chunks_per_job). \u0420\u0430\u0431\u043e\u0447\u0438\u0435 \u043f\u043e \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438 \u043c\u043e\u0433\u0443\u0442 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0438\u0432\u0430\u0442\u044c\u0441\u044f \u043f\u043e \u0432\u0432\u043e\u0434\u0443-\u0432\u044b\u0432\u043e\u0434\u0443, \u0430 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0447\u0438\u0441\u043b\u043e I/O \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439 \u0432 \u0441\u0435\u043a\u0443\u043d\u0434\u0443 \u0438 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 I/O \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u0434\u0438\u0440\u0435\u043a\u0442\u0438\u0432 [rt_merge_iops](../Server_settings/Searchd.md#rt_merge_iops) \u0438 [rt_merge_maxiosize](../Server_settings/Searchd.md#rt_merge_maxiosize) \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e.\n\n\u0412\u043e \u0432\u0440\u0435\u043c\u044f \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438 RT-\u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u043e\u0441\u0442\u0430\u0451\u0442\u0441\u044f \u0432 \u043e\u043d\u043b\u0430\u0439\u043d\u0435 \u0438 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430 \u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u043e\u0447\u0442\u0438 \u0432\u0441\u0451 \u0432\u0440\u0435\u043c\u044f. \u041e\u043d\u0430 \u0431\u043b\u043e\u043a\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u043d\u0430 \u043e\u0447\u0435\u043d\u044c \u043a\u043e\u0440\u043e\u0442\u043a\u0438\u0439 \u043f\u0435\u0440\u0438\u043e\u0434, \u043a\u043e\u0433\u0434\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043b\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u043f\u0430\u0440\u0430 \u0434\u0438\u0441\u043a\u043e\u0432\u044b\u0445 \u0447\u0430\u043d\u043a\u043e\u0432, \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u044f \u0441\u0442\u0430\u0440\u044b\u0445 \u0438 \u043d\u043e\u0432\u044b\u0445 \u0444\u0430\u0439\u043b\u043e\u0432 \u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u044b.\n\n### \u041e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u044f \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u043d\u044b\u0445 \u0442\u0430\u0431\u043b\u0438\u0446\n\n\u041f\u043e\u043a\u0430 [auto_optimize](../Server_settings/Searchd.md#auto_optimize) \u043d\u0435 \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u0430, \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0438\u0440\u0443\u044e\u0442\u0441\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438.\n\n\u0415\u0441\u043b\u0438 \u0432\u044b \u0441\u0442\u0430\u043b\u043a\u0438\u0432\u0430\u0435\u0442\u0435\u0441\u044c \u0441 \u043d\u0435\u043e\u0436\u0438\u0434\u0430\u043d\u043d\u044b\u043c\u0438 SST \u0438\u043b\u0438 \u0445\u043e\u0442\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u043d\u0430 \u0432\u0441\u0435\u0445 \u0443\u0437\u043b\u0430\u0445 \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0430 \u0431\u044b\u043b\u0438 \u0431\u0438\u043d\u0430\u0440\u043d\u043e \u0438\u0434\u0435\u043d\u0442\u0438\u0447\u043d\u044b\u043c\u0438, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e:\n1. \u041e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c [auto_optimize](../Server_settings/Searchd.md#auto_optimize).\n2. \u0420\u0443\u0447\u043d\u0430\u044f \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u044f \u0442\u0430\u0431\u043b\u0438\u0446:\n<!-- example cluster_manual_drop -->\n\u041d\u0430 \u043e\u0434\u043d\u043e\u043c \u0438\u0437 \u0443\u0437\u043b\u043e\u0432 \u0443\u0434\u0430\u043b\u0438\u0442\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u0438\u0437 \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0430:\n<!-- request SQL -->\nCODE_BLOCK_4\n<!-- end -->\n<!-- example cluster_manual_optimize -->\n\u041e\u043f\u0442\u0438\u043c\u0438\u0437\u0438\u0440\u0443\u0439\u0442\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u0443:\n<!-- request SQL -->\nCODE_BLOCK_5\n<!-- end -->\n<!-- example cluster_manual_add -->\n\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u043e\u0431\u0440\u0430\u0442\u043d\u043e \u0432 \u043a\u043b\u0430\u0441\u0442\u0435\u0440:\n<!-- request SQL -->\nCODE_BLOCK_6\n<!-- end -->\n\u041a\u043e\u0433\u0434\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043e\u0431\u0440\u0430\u0442\u043d\u043e, \u043d\u043e\u0432\u044b\u0435 \u0444\u0430\u0439\u043b\u044b, \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u043c \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438, \u0431\u0443\u0434\u0443\u0442 \u0440\u0435\u043f\u043b\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u043d\u044b \u043d\u0430 \u0434\u0440\u0443\u0433\u0438\u0435 \u0443\u0437\u043b\u044b \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0430.\n\u041b\u044e\u0431\u044b\u0435 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f, \u0441\u0434\u0435\u043b\u0430\u043d\u043d\u044b\u0435 \u0441 \u0442\u0430\u0431\u043b\u0438\u0446\u0435\u0439 \u043d\u0430 \u0434\u0440\u0443\u0433\u0438\u0445 \u0443\u0437\u043b\u0430\u0445, \u0431\u0443\u0434\u0443\u0442 \u0443\u0442\u0435\u0440\u044f\u043d\u044b.\n\n\u041c\u043e\u0434\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 \u0442\u0430\u0431\u043b\u0438\u0446\u044b (\u0432\u0441\u0442\u0430\u0432\u043a\u0438, \u0437\u0430\u043c\u0435\u043d\u044b, \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f, \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f) \u0434\u043e\u043b\u0436\u043d\u044b \u043b\u0438\u0431\u043e:\n\n1. \u0411\u044b\u0442\u044c \u043e\u0442\u043b\u043e\u0436\u0435\u043d\u044b, \u043b\u0438\u0431\u043e\n2. \u041d\u0430\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c\u0441\u044f \u043d\u0430 \u0443\u0437\u0435\u043b, \u0433\u0434\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438.\n\n\u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435, \u0447\u0442\u043e \u043f\u043e\u043a\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0432 \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0435, \u043a\u043e\u043c\u0430\u043d\u0434\u044b insert/replace/delete/update \u0434\u043e\u043b\u0436\u043d\u044b \u043e\u0431\u0440\u0430\u0449\u0430\u0442\u044c\u0441\u044f \u043a \u043d\u0435\u0439 \u0431\u0435\u0437 \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u0430 \u0438\u043c\u0435\u043d\u0438 \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0430 (\u0434\u043b\u044f SQL-\u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0438\u043b\u0438 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430 cluster \u0432 \u0441\u043b\u0443\u0447\u0430\u0435 HTTP JSON \u0437\u0430\u043f\u0440\u043e\u0441\u0430), \u0438\u043d\u0430\u0447\u0435 \u043e\u043d\u0438 \u0437\u0430\u0432\u0435\u0440\u0448\u0430\u0442\u0441\u044f \u043e\u0448\u0438\u0431\u043a\u043e\u0439.\n\u041f\u043e\u0441\u043b\u0435 \u0442\u043e\u0433\u043e \u043a\u0430\u043a \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u0431\u0443\u0434\u0435\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430 \u043e\u0431\u0440\u0430\u0442\u043d\u043e \u0432 \u043a\u043b\u0430\u0441\u0442\u0435\u0440, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u043e\u0437\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u0437\u0430\u043f\u0438\u0441\u0438 \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u0438 \u0441\u043d\u043e\u0432\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u043f\u0440\u0435\u0444\u0438\u043a\u0441 \u0438\u043c\u0435\u043d\u0438 \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0430, \u0438\u043d\u0430\u0447\u0435 \u043e\u043d\u0438 \u043d\u0435 \u0431\u0443\u0434\u0443\u0442 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c.\n\n\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043f\u043e\u0438\u0441\u043a\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u043a\u0430\u043a \u043e\u0431\u044b\u0447\u043d\u043e \u043d\u0430 \u043b\u044e\u0431\u043e\u043c \u0438\u0437 \u0443\u0437\u043b\u043e\u0432 \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435.\n\n<!-- proofread -->"
        },
        "is_code_or_comment": false,
        "model": "openai:gpt-4.1-mini",
        "updated_at": 1766339803
    },
    "7cbd5d9e33b09692b1f2cfca755acc0fb20be7e15fe3ec7d4c4da7167f82447f": {
        "original": "# Compacting a Table\n\nOver time, RT tables may become fragmented into numerous disk chunks and/or contaminated with deleted, yet unpurged data, affecting search performance. In these cases, optimization is necessary. Essentially, the optimization process combines pairs of disk chunks, removing documents that were previously deleted using DELETE statements.\n\nBeginning with Manticore 4, this process occurs [automatically by default](../Server_settings/Searchd.md#auto_optimize). However, you can also use the following commands to manually initiate table compaction.\n\n## OPTIMIZE TABLE\n\n<!-- example optimize -->\nCODE_BLOCK_0\n\n`OPTIMIZE` statement adds an RT table to the optimization queue, which will be processed in a background thread.\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_1\n<!-- end -->\n\n### Number of optimized disk chunks\n\n<!-- example optimize_cutoff -->\n\nBy default, OPTIMIZE merges the RT table's disk chunks down to a number less than or equal to the number of logical CPU cores multiplied by 2.\n\nHowever, if the table has attributes with KNN indexes, this threshold is different. In this case, it is set to the number of physical CPU cores divided by 2 to improve KNN search performance.\n\nYou can also control the number of optimized disk chunks manually using the `cutoff` option.\n\nAdditional options include:\n* Server setting [optimize_cutoff](../Server_settings/Searchd.md#optimize_cutoff) for overriding the default threshold\n* Per-table setting [optimize_cutoff](../Creating_a_table/Local_tables/Plain_and_real-time_table_settings.md#optimize_cutoff)\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_2\n<!-- end -->\n\n### Running in foreground\n\n<!-- example optimize_sync -->\n\nWhen using `OPTION sync=1` (0 by default), the command will wait for the optimization process to complete before returning. If the connection is interrupted, the optimization will continue running on the server.\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_3\n<!-- end -->\n\n### Throttling the IO impact\n\nOptimization can be a lengthy and I/O-intensive process. To minimize the impact, all actual merge work is executed serially in a special background thread, and the `OPTIMIZE` statement simply adds a job to its queue. The optimization thread can be I/O-throttled, and you can control the maximum number of I/Os per second and the maximum I/O size with the [rt_merge_iops](../Server_settings/Searchd.md#rt_merge_iops) and [rt_merge_maxiosize](../Server_settings/Searchd.md#rt_merge_maxiosize) directives, respectively.\n\nDuring optimization, the RT table being optimized remains online and available for both searching and updates nearly all the time. It is locked for a very brief period when a pair of disk chunks is successfully merged, allowing for the renaming of old and new files and updating the table header.\n\n### Optimizing clustered tables\n\nAs long as [auto_optimize](../Server_settings/Searchd.md#auto_optimize) is not disabled, tables are optimized automatically.\n\nIf you are experiencing unexpected SSTs or want tables across all nodes of the cluster to be binary identical, you need to:\n1. Disable [auto_optimize](../Server_settings/Searchd.md#auto_optimize).\n2. Manually optimize tables:\n<!-- example cluster_manual_drop -->\nOn one of the nodes, drop the table from the cluster:\n<!-- request SQL -->\nCODE_BLOCK_4\n<!-- end -->\n<!-- example cluster_manual_optimize -->\nOptimize the table:\n<!-- request SQL -->\nCODE_BLOCK_5\n<!-- end -->\n<!-- example cluster_manual_add -->\nAdd back the table to the cluster:\n<!-- request SQL -->\nCODE_BLOCK_6\n<!-- end -->\nWhen the table is added back, the new files created by the optimization process will be replicated to the other nodes in the cluster.\nAny local changes made to the table on other nodes will be lost.\n\nTable data modifications (inserts, replaces, deletes, updates) should either:\n\n1. Be postponed, or\n2. Be directed to the node where the optimization process is running.\n\nNote that while the table is out of the cluster, insert/replace/delete/update commands should refer to it without the cluster name prefix (for SQL statements or the cluster property in case of an HTTP JSON request), otherwise they will fail.\nOnce the table is added back to the cluster, you must resume write operations on the table and include the cluster name prefix again, or they will fail.\n\nSearch operations are available as usual during the process on any of the nodes.\n\n<!-- proofread -->\n\n",
        "translations": {
            "chinese": "# \u538b\u7f29\u8868\u683c\n\n\u968f\u7740\u65f6\u95f4\u7684\u63a8\u79fb\uff0cRT\u8868\u53ef\u80fd\u4f1a\u53d8\u5f97\u788e\u7247\u5316\uff0c\u5206\u6563\u5728\u591a\u4e2a\u78c1\u76d8\u5757\u4e2d\uff0c\u5e76\u4e14\u53ef\u80fd\u88ab\u5220\u9664\u4f46\u672a\u6e05\u9664\u7684\u6570\u636e\u6c61\u67d3\uff0c\u4ece\u800c\u5f71\u54cd\u641c\u7d22\u6027\u80fd\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u9700\u8981\u8fdb\u884c\u4f18\u5316\u3002\u672c\u8d28\u4e0a\uff0c\u4f18\u5316\u8fc7\u7a0b\u4f1a\u5408\u5e76\u78c1\u76d8\u5757\u5bf9\uff0c\u79fb\u9664\u4f7f\u7528DELETE\u8bed\u53e5\u4e4b\u524d\u5df2\u5220\u9664\u7684\u6587\u6863\u3002\n\n\u4eceManticore 4\u5f00\u59cb\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6b64\u8fc7\u7a0b\u4f1a\u81ea\u52a8\u53d1\u751f[\u53c2\u89c1\u670d\u52a1\u5668\u8bbe\u7f6e\u4e2d\u7684Searchd.md](../Server_settings/Searchd.md#auto_optimize)\u3002\u4f46\u662f\uff0c\u60a8\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u624b\u52a8\u542f\u52a8\u8868\u538b\u7f29\u3002\n\n## OPTIMIZE TABLE\n\n<!-- \u793a\u4f8b\u4f18\u5316 -->\nCODE_BLOCK_0\n\n`OPTIMIZE`\u8bed\u53e5\u5c06RT\u8868\u6dfb\u52a0\u5230\u4f18\u5316\u961f\u5217\u4e2d\uff0c\u8be5\u961f\u5217\u5c06\u5728\u540e\u53f0\u7ebf\u7a0b\u4e2d\u5904\u7406\u3002\n\n<!-- \u5165\u95e8 -->\n##### SQL\uff1a\n\n<!-- \u8bf7\u6c42SQL -->\n\nCODE_BLOCK_1\n<!-- \u7ed3\u675f -->\n\n### \u88ab\u4f18\u5316\u7684\u78c1\u76d8\u5757\u6570\u91cf\n\n<!-- \u793a\u4f8boptimize_cutoff-->\n\n\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c`OPTIMIZE`\u4f1a\u5c06RT\u8868\u7684\u78c1\u76d8\u5757\u5408\u5e76\u5230\u903b\u8f91CPU\u6838\u5fc3\u6570\u4e58\u4ee52\u7684\u6570\u91cf\u4ee5\u4e0b\u3002\n\n\u7136\u800c\uff0c\u5982\u679c\u8868\u5177\u6709KNN\u7d22\u5f15\u7684\u5c5e\u6027\uff0c\u8fd9\u4e2a\u9608\u503c\u4e0d\u540c\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5b83\u8bbe\u7f6e\u4e3a\u7269\u7406CPU\u6838\u5fc3\u6570\u9664\u4ee52\uff0c\u4ee5\u63d0\u9ad8KNN\u641c\u7d22\u6027\u80fd\u3002\n\n\u60a8\u8fd8\u53ef\u4ee5\u901a\u8fc7`cutoff`\u9009\u9879\u624b\u52a8\u63a7\u5236\u88ab\u4f18\u5316\u7684\u78c1\u76d8\u5757\u6570\u91cf\u3002\n\n\u5176\u4ed6\u9009\u9879\u5305\u62ec\uff1a\n* \u670d\u52a1\u5668\u8bbe\u7f6e[optimize_cutoff](../Server_settings/Searchd.md#optimize_cutoff)\u4ee5\u8986\u76d6\u9ed8\u8ba4\u9608\u503c\n* \u8868\u8bbe\u7f6e[optimize_cutoff](../Creating_a_table/Local_tables/Plain_and_real-time_table_settings.md#optimize_cutoff)\n\n<!-- \u5165\u95e8 -->\n##### SQL\uff1a\n\n<!-- \u8bf7\u6c42SQL -->\n\nCODE_BLOCK_2\n<!-- \u7ed3\u675f -->\n\n### \u5728\u524d\u53f0\u8fd0\u884c\n\n<!-- \u793a\u4f8boptimize_sync -->\n\n\u5f53\u4f7f\u7528`OPTION sync=1`\uff08\u9ed8\u8ba4\u4e3a0\uff09\u65f6\uff0c\u8be5\u547d\u4ee4\u4f1a\u5728\u4f18\u5316\u8fc7\u7a0b\u5b8c\u6210\u540e\u518d\u8fd4\u56de\u3002\u5982\u679c\u8fde\u63a5\u4e2d\u65ad\uff0c\u4f18\u5316\u5c06\u7ee7\u7eed\u5728\u670d\u52a1\u5668\u4e0a\u8fd0\u884c\u3002\n\n<!-- \u5165\u95e8 -->\n##### SQL\uff1a\n\n<!-- \u8bf7\u6c42SQL -->\n\nCODE_BLOCK_3\n<!-- \u7ed3\u675f -->\n\n### \u63a7\u5236IO\u5f71\u54cd\n\n\u4f18\u5316\u53ef\u80fd\u662f\u4e00\u4e2a\u8017\u65f6\u4e14I/O\u5bc6\u96c6\u578b\u7684\u8fc7\u7a0b\u3002\u4e3a\u4e86\u6700\u5c0f\u5316\u5176\u5f71\u54cd\uff0c\u5b9e\u9645\u5408\u5e76\u5de5\u4f5c\u662f\u5728\u4e00\u4e2a\u7279\u6b8a\u7684\u540e\u53f0\u7ebf\u7a0b\u4e2d\u4e32\u884c\u6267\u884c\u7684\uff0c\u800c`OPTIMIZE`\u8bed\u53e5\u53ea\u662f\u5c06\u5176\u6dfb\u52a0\u5230\u961f\u5217\u4e2d\u3002\u4f18\u5316\u7ebf\u7a0b\u53ef\u4ee5\u8fdb\u884cI/O\u9650\u5236\uff0c\u5e76\u53ef\u4ee5\u901a\u8fc7[rt_merge_iops](../Server_settings/Searchd.md#rt_merge_iops)\u548c[rt_merge_maxiosize](../Server_settings/Searchd.md#rt_merge_maxiosize)\u6307\u4ee4\u5206\u522b\u63a7\u5236\u6bcf\u79d2\u7684\u6700\u5927I/O\u6b21\u6570\u548c\u6700\u5927I/O\u5927\u5c0f\u3002\n\n\u5728\u4f18\u5316\u8fc7\u7a0b\u4e2d\uff0c\u6b63\u5728\u4f18\u5316\u7684RT\u8868\u51e0\u4e4e\u4e00\u76f4\u5728\u7ebf\u5e76\u53ef\u4f9b\u641c\u7d22\u548c\u66f4\u65b0\u4f7f\u7528\u3002\u5f53\u6210\u529f\u5408\u5e76\u4e00\u5bf9\u78c1\u76d8\u5757\u65f6\uff0c\u8868\u4f1a\u88ab\u9501\u5b9a\u4e00\u4e2a\u975e\u5e38\u77ed\u6682\u7684\u65f6\u95f4\uff0c\u4ee5\u4fbf\u91cd\u547d\u540d\u65e7\u6587\u4ef6\u548c\u65b0\u6587\u4ef6\uff0c\u5e76\u66f4\u65b0\u8868\u5934\u3002\n\n### \u538b\u7f29\u96c6\u7fa4\u8868\n\n\u53ea\u8981[auto_optimize](../Server_settings/Searchd.md#auto_optimize)\u6ca1\u6709\u7981\u7528\uff0c\u8868\u5c31\u4f1a\u81ea\u52a8\u4f18\u5316\u3002\n\n\u5982\u679c\u60a8\u9047\u5230\u610f\u5916\u7684SST\u6216\u5e0c\u671b\u96c6\u7fa4\u4e2d\u6240\u6709\u8282\u70b9\u4e0a\u7684\u8868\u4e8c\u8fdb\u5236\u76f8\u540c\uff0c\u5219\u9700\u8981\uff1a\n1. \u7981\u7528[auto_optimize](../Server_settings/Searchd.md#auto_optimize)\u3002\n2. \u624b\u52a8\u4f18\u5316\u8868\uff1a\n<!-- \u793a\u4f8b\u96c6\u7fa4\u624b\u52a8\u5220\u9664 -->\n\u5728\u4e00\u4e2a\u8282\u70b9\u4e0a\u4ece\u96c6\u7fa4\u4e2d\u5220\u9664\u8868\uff1a\n<!-- \u8bf7\u6c42SQL -->\nCODE_BLOCK_4\n<!-- \u7ed3\u675f -->\n<!-- \u793a\u4f8b\u96c6\u7fa4\u624b\u52a8\u4f18\u5316 -->\n\u4f18\u5316\u8868\uff1a\n<!-- \u8bf7\u6c42SQL -->\nCODE_BLOCK_5\n<!-- \u7ed3\u675f -->\n<!-- \u793a\u4f8b\u96c6\u7fa4\u624b\u52a8\u6dfb\u52a0 -->\n\u5c06\u8868\u91cd\u65b0\u6dfb\u52a0\u56de\u96c6\u7fa4\uff1a\n<!-- \u8bf7\u6c42SQL -->\nCODE_BLOCK_6\n<!-- \u7ed3\u675f -->\n\u5f53\u8868\u91cd\u65b0\u6dfb\u52a0\u56de\u96c6\u7fa4\u65f6\uff0c\u4f18\u5316\u8fc7\u7a0b\u4e2d\u521b\u5efa\u7684\u65b0\u6587\u4ef6\u5c06\u88ab\u590d\u5236\u5230\u96c6\u7fa4\u4e2d\u7684\u5176\u4ed6\u8282\u70b9\u3002\n\u5176\u4ed6\u8282\u70b9\u4e0a\u5bf9\u8be5\u8868\u6240\u505a\u7684\u4efb\u4f55\u672c\u5730\u66f4\u6539\u90fd\u5c06\u4e22\u5931\u3002\n\n\u5bf9\u8868\u6570\u636e\u7684\u4fee\u6539\uff08\u63d2\u5165\u3001\u66ff\u6362\u3001\u5220\u9664\u3001\u66f4\u65b0\uff09\u5e94\u9009\u62e9\u4ee5\u4e0b\u4e4b\u4e00\uff1a\n\n1. \u63a8\u8fdf\u8fd9\u4e9b\u64cd\u4f5c\uff0c\n2. \u5c06\u5b83\u4eec\u5b9a\u5411\u5230\u6b63\u5728\u8fd0\u884c\u4f18\u5316\u8fc7\u7a0b\u7684\u8282\u70b9\u3002\n\n\u8bf7\u6ce8\u610f\uff0c\u5728\u8868\u9000\u51fa\u96c6\u7fa4\u671f\u95f4\uff0c\u63d2\u5165/\u66ff\u6362/\u5220\u9664/\u66f4\u65b0\u547d\u4ee4\u5e94\u4e0d\u5e26\u96c6\u7fa4\u540d\u79f0\u524d\u7f00\uff08\u5bf9\u4e8eSQL\u8bed\u53e5\u6216HTTP JSON\u8bf7\u6c42\u4e2d\u7684\u96c6\u7fa4\u5c5e\u6027\uff09\uff0c\u5426\u5219\u5c06\u5931\u8d25\u3002\n\u4e00\u65e6\u8868\u91cd\u65b0\u6dfb\u52a0\u5230\u96c6\u7fa4\uff0c\u60a8\u5fc5\u987b\u6062\u590d\u5bf9\u8be5\u8868\u7684\u5199\u5165\u64cd\u4f5c\uff0c\u5e76\u518d\u6b21\u5305\u542b\u96c6\u7fa4\u540d\u79f0\u524d\u7f00\uff0c\u5426\u5219\u8fd9\u4e9b\u64cd\u4f5c\u5c06\u5931\u8d25\u3002\n\n\u5728\u4f18\u5316\u8fc7\u7a0b\u4e2d\uff0c\u53ef\u4ee5\u5728\u4efb\u4f55\u8282\u70b9\u4e0a\u6b63\u5e38\u4f7f\u7528\u641c\u7d22\u64cd\u4f5c\u3002\n\n<!-- \u6821\u5bf9 -->",
            "russian": "# \u041a\u043e\u043c\u043f\u0430\u043a\u0442\u0438\u0437\u0430\u0446\u0438\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u044b\n\n\u0421\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0435\u043c RT-\u0442\u0430\u0431\u043b\u0438\u0446\u044b \u043c\u043e\u0433\u0443\u0442 \u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u043e \u0434\u0438\u0441\u043a\u043e\u0432\u044b\u0445 \u0447\u0430\u043d\u043a\u043e\u0432 \u0438/\u0438\u043b\u0438 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435, \u043d\u043e \u043d\u0435 \u043e\u0447\u0438\u0449\u0435\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435, \u0447\u0442\u043e \u0432\u043b\u0438\u044f\u0435\u0442 \u043d\u0430 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u043f\u043e\u0438\u0441\u043a\u0430. \u0412 \u0442\u0430\u043a\u0438\u0445 \u0441\u043b\u0443\u0447\u0430\u044f\u0445 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u0430 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u044f. \u041f\u043e \u0441\u0443\u0442\u0438, \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u044f\u0435\u0442 \u043f\u0430\u0440\u044b \u0434\u0438\u0441\u043a\u043e\u0432\u044b\u0445 \u0447\u0430\u043d\u043a\u043e\u0432, \u0443\u0434\u0430\u043b\u044f\u044f \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0440\u0430\u043d\u0435\u0435 \u0431\u044b\u043b\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u044b \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u043e\u0432 DELETE.\n\n\u041d\u0430\u0447\u0438\u043d\u0430\u044f \u0441 Manticore 4, \u044d\u0442\u043e\u0442 \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 [\u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e](../Server_settings/Searchd.md#auto_optimize). \u041e\u0434\u043d\u0430\u043a\u043e \u0432\u044b \u0442\u0430\u043a\u0436\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u0434\u043b\u044f \u0440\u0443\u0447\u043d\u043e\u0433\u043e \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u043a\u043e\u043c\u043f\u0430\u043a\u0442\u0438\u0437\u0430\u0446\u0438\u0438 \u0442\u0430\u0431\u043b\u0438\u0446\u044b.\n\n## OPTIMIZE TABLE\n\n<!-- example optimize -->\nCODE_BLOCK_0\n\n\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 `OPTIMIZE` \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442 RT-\u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u0432 \u043e\u0447\u0435\u0440\u0435\u0434\u044c \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0431\u0443\u0434\u0435\u0442 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u0430 \u0432 \u0444\u043e\u043d\u043e\u0432\u043e\u043c \u043f\u043e\u0442\u043e\u043a\u0435.\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_1\n<!-- end -->\n\n### \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0445 \u0434\u0438\u0441\u043a\u043e\u0432\u044b\u0445 \u0447\u0430\u043d\u043a\u043e\u0432\n\n<!-- example optimize_cutoff -->\n\n\u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e OPTIMIZE \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u044f\u0435\u0442 \u0434\u0438\u0441\u043a\u043e\u0432\u044b\u0435 \u0447\u0430\u043d\u043a\u0438 RT-\u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0434\u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0430, \u043c\u0435\u043d\u044c\u0448\u0435\u0433\u043e \u0438\u043b\u0438 \u0440\u0430\u0432\u043d\u043e\u0433\u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0443 \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u044f\u0434\u0435\u0440 CPU, \u0443\u043c\u043d\u043e\u0436\u0435\u043d\u043d\u043e\u043c\u0443 \u043d\u0430 2.\n\n\u041e\u0434\u043d\u0430\u043a\u043e, \u0435\u0441\u043b\u0438 \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u0438\u043c\u0435\u0435\u0442 \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u044b \u0441 KNN-\u0438\u043d\u0434\u0435\u043a\u0441\u0430\u043c\u0438, \u044d\u0442\u043e\u0442 \u043f\u043e\u0440\u043e\u0433 \u043e\u0442\u043b\u0438\u0447\u0430\u0435\u0442\u0441\u044f. \u0412 \u044d\u0442\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043e\u043d \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0440\u0430\u0432\u043d\u044b\u043c \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0443 \u0444\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u044f\u0434\u0435\u0440 CPU, \u0434\u0435\u043b\u0435\u043d\u043d\u043e\u043c\u0443 \u043d\u0430 2, \u0434\u043b\u044f \u043f\u043e\u0432\u044b\u0448\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438 KNN-\u043f\u043e\u0438\u0441\u043a\u0430.\n\n\u0412\u044b \u0442\u0430\u043a\u0436\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u043c \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0445 \u0434\u0438\u0441\u043a\u043e\u0432\u044b\u0445 \u0447\u0430\u043d\u043a\u043e\u0432 \u0432\u0440\u0443\u0447\u043d\u0443\u044e \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043e\u043f\u0446\u0438\u0438 `cutoff`.\n\n\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043e\u043f\u0446\u0438\u0438 \u0432\u043a\u043b\u044e\u0447\u0430\u044e\u0442:\n* \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0443 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 [optimize_cutoff](../Server_settings/Searchd.md#optimize_cutoff) \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043f\u043e\u0440\u043e\u0433\u0430 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e\n* \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0443 \u0442\u0430\u0431\u043b\u0438\u0446\u044b [optimize_cutoff](../Creating_a_table/Local_tables/Plain_and_real-time_table_settings.md#optimize_cutoff)\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_2\n<!-- end -->\n\n### \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0432 foreground\n\n<!-- example optimize_sync -->\n\n\u041f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 `OPTION sync=1` (\u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e 0) \u043a\u043e\u043c\u0430\u043d\u0434\u0430 \u0431\u0443\u0434\u0435\u0442 \u0436\u0434\u0430\u0442\u044c \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0430 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u0435\u0440\u0435\u0434 \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u043e\u043c \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f. \u0415\u0441\u043b\u0438 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u043f\u0440\u0435\u0440\u0432\u0435\u0442\u0441\u044f, \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c\u0441\u044f \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435.\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\n\nCODE_BLOCK_3\n<!-- end -->\n\n### \u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u0432\u043b\u0438\u044f\u043d\u0438\u044f \u043d\u0430 \u0432\u0432\u043e\u0434-\u0432\u044b\u0432\u043e\u0434\n\n\u041e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u044f \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0434\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c \u0438 \u0440\u0435\u0441\u0443\u0440\u0441\u043e\u0435\u043c\u043a\u0438\u043c \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u043c \u0432\u0432\u043e\u0434\u0430-\u0432\u044b\u0432\u043e\u0434\u0430. \u0427\u0442\u043e\u0431\u044b \u043c\u0438\u043d\u0438\u043c\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432\u043b\u0438\u044f\u043d\u0438\u0435, \u0432\u0441\u044f \u0444\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 \u043f\u043e \u0441\u043b\u0438\u044f\u043d\u0438\u044e \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0432 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u043c \u0444\u043e\u043d\u043e\u0432\u043e\u043c \u043f\u043e\u0442\u043e\u043a\u0435, \u0430 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 `OPTIMIZE` \u043f\u0440\u043e\u0441\u0442\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442 \u0437\u0430\u0434\u0430\u043d\u0438\u0435 \u0432 \u0435\u0433\u043e \u043e\u0447\u0435\u0440\u0435\u0434\u044c. \u041f\u043e\u0442\u043e\u043a \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d \u043f\u043e \u0432\u0432\u043e\u0434\u0443-\u0432\u044b\u0432\u043e\u0434\u0443, \u0438 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u043c \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u043c \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439 \u0432\u0432\u043e\u0434\u0430-\u0432\u044b\u0432\u043e\u0434\u0430 \u0432 \u0441\u0435\u043a\u0443\u043d\u0434\u0443 \u0438 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u043c \u0440\u0430\u0437\u043c\u0435\u0440\u043e\u043c \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u0432\u0432\u043e\u0434\u0430-\u0432\u044b\u0432\u043e\u0434\u0430 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u0434\u0438\u0440\u0435\u043a\u0442\u0438\u0432 [rt_merge_iops](../Server_settings/Searchd.md#rt_merge_iops) \u0438 [rt_merge_maxiosize](../Server_settings/Searchd.md#rt_merge_maxiosize) \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e.\n\n\u0412\u043e \u0432\u0440\u0435\u043c\u044f \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0438\u0440\u0443\u0435\u043c\u0430\u044f RT-\u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u043e\u0441\u0442\u0430\u0435\u0442\u0441\u044f \u043e\u043d\u043b\u0430\u0439\u043d \u0438 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0439 \u043a\u0430\u043a \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430, \u0442\u0430\u043a \u0438 \u0434\u043b\u044f \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439 \u043f\u043e\u0447\u0442\u0438 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f. \u041e\u043d\u0430 \u0431\u043b\u043e\u043a\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u043d\u0430 \u043e\u0447\u0435\u043d\u044c \u043a\u043e\u0440\u043e\u0442\u043a\u0438\u0439 \u043f\u0435\u0440\u0438\u043e\u0434, \u043a\u043e\u0433\u0434\u0430 \u043f\u0430\u0440\u0430 \u0434\u0438\u0441\u043a\u043e\u0432\u044b\u0445 \u0447\u0430\u043d\u043a\u043e\u0432 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u044f\u0435\u0442\u0441\u044f, \u0447\u0442\u043e \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043f\u0435\u0440\u0435\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u0442\u044c \u0441\u0442\u0430\u0440\u044b\u0435 \u0438 \u043d\u043e\u0432\u044b\u0435 \u0444\u0430\u0439\u043b\u044b \u0438 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0442\u0430\u0431\u043b\u0438\u0446\u044b.\n\n### \u041e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u044f \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u043d\u044b\u0445 \u0442\u0430\u0431\u043b\u0438\u0446\n\n\u041f\u043e\u043a\u0430 [auto_optimize](../Server_settings/Searchd.md#auto_optimize) \u043d\u0435 \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d, \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0438\u0440\u0443\u044e\u0442\u0441\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438.\n\n\u0415\u0441\u043b\u0438 \u0432\u044b \u0441\u0442\u0430\u043b\u043a\u0438\u0432\u0430\u0435\u0442\u0435\u0441\u044c \u0441 \u043d\u0435\u043e\u0436\u0438\u0434\u0430\u043d\u043d\u044b\u043c\u0438 SST \u0438\u043b\u0438 \u0445\u043e\u0442\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u043d\u0430 \u0432\u0441\u0435\u0445 \u0443\u0437\u043b\u0430\u0445 \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0430 \u0431\u044b\u043b\u0438 \u0431\u0438\u043d\u0430\u0440\u043d\u043e \u0438\u0434\u0435\u043d\u0442\u0438\u0447\u043d\u044b\u043c\u0438, \u0432\u0430\u043c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e:\n1. \u041e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c [auto_optimize](../Server_settings/Searchd.md#auto_optimize).\n2. \u0412\u0440\u0443\u0447\u043d\u0443\u044e \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u044b:\n<!-- example cluster_manual_drop -->\n\u041d\u0430 \u043e\u0434\u043d\u043e\u043c \u0438\u0437 \u0443\u0437\u043b\u043e\u0432 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u0438\u0437 \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0430:\n<!-- request SQL -->\nCODE_BLOCK_4\n<!-- end -->\n<!-- example cluster_manual_optimize -->\n\u041e\u043f\u0442\u0438\u043c\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0443:\n<!-- request SQL -->\nCODE_BLOCK_5\n<!-- end -->\n<!-- example cluster_manual_add -->\n\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u043e\u0431\u0440\u0430\u0442\u043d\u043e \u0432 \u043a\u043b\u0430\u0441\u0442\u0435\u0440:\n<!-- request SQL -->\nCODE_BLOCK_6\n<!-- end -->\n\u041a\u043e\u0433\u0434\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043e\u0431\u0440\u0430\u0442\u043d\u043e, \u043d\u043e\u0432\u044b\u0435 \u0444\u0430\u0439\u043b\u044b, \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u043c \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438, \u0431\u0443\u0434\u0443\u0442 \u0440\u0435\u043f\u043b\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u043d\u044b \u043d\u0430 \u0434\u0440\u0443\u0433\u0438\u0435 \u0443\u0437\u043b\u044b \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0430.\n\u041b\u044e\u0431\u044b\u0435 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f, \u0432\u043d\u0435\u0441\u0435\u043d\u043d\u044b\u0435 \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u043d\u0430 \u0434\u0440\u0443\u0433\u0438\u0445 \u0443\u0437\u043b\u0430\u0445, \u0431\u0443\u0434\u0443\u0442 \u043f\u043e\u0442\u0435\u0440\u044f\u043d\u044b.\n\n\u041c\u043e\u0434\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 \u0442\u0430\u0431\u043b\u0438\u0446\u044b (\u0432\u0441\u0442\u0430\u0432\u043a\u0438, \u0437\u0430\u043c\u0435\u043d\u044b, \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f, \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f) \u0434\u043e\u043b\u0436\u043d\u044b \u043b\u0438\u0431\u043e:\n\n1. \u0411\u044b\u0442\u044c \u043e\u0442\u043b\u043e\u0436\u0435\u043d\u044b, \u043b\u0438\u0431\u043e\n2. \u041d\u0430\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c\u0441\u044f \u043d\u0430 \u0443\u0437\u0435\u043b, \u0433\u0434\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438.\n\n\u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435, \u0447\u0442\u043e \u043f\u043e\u043a\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u0432\u043d\u0435 \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0430, \u043a\u043e\u043c\u0430\u043d\u0434\u044b insert/replace/delete/update \u0434\u043e\u043b\u0436\u043d\u044b \u0441\u0441\u044b\u043b\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u043d\u0435\u0435 \u0431\u0435\u0437 \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u0430 \u0438\u043c\u0435\u043d\u0438 \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0430 (\u0434\u043b\u044f SQL-\u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0438\u043b\u0438 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430 cluster \u0432 \u0441\u043b\u0443\u0447\u0430\u0435 HTTP JSON-\u0437\u0430\u043f\u0440\u043e\u0441\u0430), \u0438\u043d\u0430\u0447\u0435 \u043e\u043d\u0438 \u0437\u0430\u0432\u0435\u0440\u0448\u0430\u0442\u0441\u044f \u043e\u0448\u0438\u0431\u043a\u043e\u0439.\n\u041f\u043e\u0441\u043b\u0435 \u0442\u043e\u0433\u043e \u043a\u0430\u043a \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u0431\u0443\u0434\u0435\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430 \u043e\u0431\u0440\u0430\u0442\u043d\u043e \u0432 \u043a\u043b\u0430\u0441\u0442\u0435\u0440, \u0432\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0432\u043e\u0437\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u0437\u0430\u043f\u0438\u0441\u0438 \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u0438 \u0441\u043d\u043e\u0432\u0430 \u0432\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u043f\u0440\u0435\u0444\u0438\u043a\u0441 \u0438\u043c\u0435\u043d\u0438 \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0430, \u0438\u043d\u0430\u0447\u0435 \u043e\u043d\u0438 \u0437\u0430\u0432\u0435\u0440\u0448\u0430\u0442\u0441\u044f \u043e\u0448\u0438\u0431\u043a\u043e\u0439.\n\n\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043f\u043e\u0438\u0441\u043a\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u043a\u0430\u043a \u043e\u0431\u044b\u0447\u043d\u043e \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435 \u043d\u0430 \u043b\u044e\u0431\u043e\u043c \u0438\u0437 \u0443\u0437\u043b\u043e\u0432.\n\n<!-- proofread -->"
        },
        "is_code_or_comment": false,
        "model": "deepseek/deepseek-v3.2",
        "updated_at": 1766382935
    },
    "__meta": {
        "source_text": "# Compacting a Table\n\nOver time, RT tables may become fragmented into numerous disk chunks and/or contaminated with deleted, yet unpurged data, affecting search performance. In these cases, optimization is necessary. Essentially, the optimization process combines pairs of disk chunks, removing documents that were previously deleted using DELETE statements.\n\nBeginning with Manticore 4, this process occurs [automatically by default](../Server_settings/Searchd.md#auto_optimize). However, you can also use the following commands to manually initiate table compaction.\n\n## OPTIMIZE TABLE\n\n<!-- example optimize -->\n```sql\nOPTIMIZE TABLE table_name [OPTION opt_name = opt_value [,...]]\n```\n\n`OPTIMIZE` statement adds an RT table to the optimization queue, which will be processed in a background thread.\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\n\n```sql\nOPTIMIZE TABLE rt;\n```\n<!-- end -->\n\n### Number of optimized disk chunks\n\n<!-- example optimize_cutoff -->\n\nBy default, OPTIMIZE merges the RT table's disk chunks down to a number less than or equal to the number of logical CPU cores multiplied by 2.\n\nHowever, if the table has attributes with KNN indexes, this threshold is different. In this case, it is set to the number of physical CPU cores divided by 2 to improve KNN search performance.\n\nYou can also control the number of optimized disk chunks manually using the `cutoff` option.\n\nAdditional options include:\n* Server setting [optimize_cutoff](../Server_settings/Searchd.md#optimize_cutoff) for overriding the default threshold\n* Per-table setting [optimize_cutoff](../Creating_a_table/Local_tables/Plain_and_real-time_table_settings.md#optimize_cutoff)\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\n\n```sql\nOPTIMIZE TABLE rt OPTION cutoff=4;\n```\n<!-- end -->\n\n### Running in foreground\n\n<!-- example optimize_sync -->\n\nWhen using `OPTION sync=1` (0 by default), the command will wait for the optimization process to complete before returning. If the connection is interrupted, the optimization will continue running on the server.\n\n<!-- intro -->\n##### SQL:\n\n<!-- request SQL -->\n\n```sql\nOPTIMIZE TABLE rt OPTION sync=1;\n```\n<!-- end -->\n\n### Throttling the IO impact\n\nOptimization can be a lengthy and I/O-intensive process. To minimize the impact, all actual merge work is executed serially in a special background thread, and the `OPTIMIZE` statement simply adds a job to its queue. The optimization thread can be I/O-throttled, and you can control the maximum number of I/Os per second and the maximum I/O size with the [rt_merge_iops](../Server_settings/Searchd.md#rt_merge_iops) and [rt_merge_maxiosize](../Server_settings/Searchd.md#rt_merge_maxiosize) directives, respectively.\n\nDuring optimization, the RT table being optimized remains online and available for both searching and updates nearly all the time. It is locked for a very brief period when a pair of disk chunks is successfully merged, allowing for the renaming of old and new files and updating the table header.\n\n### Optimizing clustered tables\n\nAs long as [auto_optimize](../Server_settings/Searchd.md#auto_optimize) is not disabled, tables are optimized automatically.\n\nIf you are experiencing unexpected SSTs or want tables across all nodes of the cluster to be binary identical, you need to:\n1. Disable [auto_optimize](../Server_settings/Searchd.md#auto_optimize).\n2. Manually optimize tables:\n<!-- example cluster_manual_drop -->\nOn one of the nodes, drop the table from the cluster:\n<!-- request SQL -->\n```sql\nALTER CLUSTER mycluster DROP myindex;\n```\n<!-- end -->\n<!-- example cluster_manual_optimize -->\nOptimize the table:\n<!-- request SQL -->\n```sql\nOPTIMIZE TABLE myindex;\n```\n<!-- end -->\n<!-- example cluster_manual_add -->\nAdd back the table to the cluster:\n<!-- request SQL -->\n```sql\nALTER CLUSTER mycluster ADD myindex;\n```\n<!-- end -->\nWhen the table is added back, the new files created by the optimization process will be replicated to the other nodes in the cluster.\nAny local changes made to the table on other nodes will be lost.\n\nTable data modifications (inserts, replaces, deletes, updates) should either:\n\n1. Be postponed, or\n2. Be directed to the node where the optimization process is running.\n\nNote that while the table is out of the cluster, insert/replace/delete/update commands should refer to it without the cluster name prefix (for SQL statements or the cluster property in case of an HTTP JSON request), otherwise they will fail.\nOnce the table is added back to the cluster, you must resume write operations on the table and include the cluster name prefix again, or they will fail.\n\nSearch operations are available as usual during the process on any of the nodes.\n\n<!-- proofread -->\n\n",
        "updated_at": 1768530797,
        "source_md5": "ede50ebe2a15fd8732402a1661840936"
    }
}