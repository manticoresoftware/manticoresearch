{
    "8f3f7bb49ce495b6eb4ed28cdee98c0c196c2be0e70c2856eaedb4f0a1f9db90": {
        "original": "#### Creating plain tables on startup\nTo build plain tables specified in your custom configuration file, you can use the `CREATE_PLAIN_TABLES=1` environment variable. It will execute `indexer --all` before Manticore starts. This is useful if you don't use volumes, and your tables are easy to recreate.\nCODE_BLOCK_21\n\n### Troubleshooting\n\n#### Permissions issue with a mounted volume\n\nIn case you are running Manticore Search docker under non-root (using `docker ... --user manticore` or `user: manticore` in docker compose yaml), you can face a permissions issue, for example:\nCODE_BLOCK_22\n\nThis can happen because the user which is used to run processes inside the container may have no permissions to modify the directory you have mounted to the container. To fix it you can `chown` or `chmod` the mounted directory. If you run the container under user `manticore` you need to do:\nCODE_BLOCK_23\n\nsince user `manticore` has ID 999 inside the container.\n\n<!-- proofread -->\n\n",
        "translations": {
            "chinese": "#### \u5728\u542f\u52a8\u65f6\u521b\u5efa\u666e\u901a\u8868\u683c\n\u8981\u6784\u5efa\u81ea\u5b9a\u4e49\u914d\u7f6e\u6587\u4ef6\u4e2d\u6307\u5b9a\u7684\u666e\u901a\u8868\u683c\uff0c\u53ef\u4ee5\u4f7f\u7528 `CREATE_PLAIN_TABLES=1` \u73af\u5883\u53d8\u91cf\u3002\u5b83\u5c06\u5728 Manticore \u542f\u52a8\u524d\u6267\u884c `indexer --all`\u3002\u5982\u679c\u60a8\u4e0d\u4f7f\u7528\u6570\u636e\u5377\uff0c\u5e76\u4e14\u8868\u683c\u5bb9\u6613\u91cd\u5efa\uff0c\u8fd9\u975e\u5e38\u6709\u7528\u3002\nCODE_BLOCK_21\n\n### \u6545\u969c\u6392\u9664\n\n#### \u6302\u8f7d\u5377\u7684\u6743\u9650\u95ee\u9898\n\n\u5982\u679c\u60a8\u4ee5\u975e root \u7528\u6237\u8fd0\u884c Manticore Search \u5bb9\u5668\uff08\u4f7f\u7528 `docker ... --user manticore` \u6216\u5728 docker compose yaml \u4e2d\u4f7f\u7528 `user: manticore`\uff09\uff0c\u53ef\u80fd\u4f1a\u9047\u5230\u6743\u9650\u95ee\u9898\uff0c\u4f8b\u5982\uff1a\nCODE_BLOCK_22\n\n\u8fd9\u53ef\u80fd\u662f\u56e0\u4e3a\u7528\u4e8e\u5728\u5bb9\u5668\u5185\u90e8\u8fd0\u884c\u8fdb\u7a0b\u7684\u7528\u6237\u6ca1\u6709\u6743\u9650\u4fee\u6539\u60a8\u6302\u8f7d\u5230\u5bb9\u5668\u7684\u76ee\u5f55\u3002\u8981\u89e3\u51b3\u6b64\u95ee\u9898\uff0c\u60a8\u53ef\u4ee5 `chown` \u6216 `chmod` \u6302\u8f7d\u76ee\u5f55\u3002\u5982\u679c\u5bb9\u5668\u662f\u4ee5 `manticore` \u7528\u6237\u8fd0\u884c\uff0c\u60a8\u9700\u8981\u6267\u884c\uff1a\nCODE_BLOCK_23\n\n\u56e0\u4e3a\u5bb9\u5668\u5185\u90e8 `manticore` \u7528\u6237\u7684 ID \u662f 999\u3002\n\n<!-- proofread -->",
            "russian": "#### \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043e\u0431\u044b\u0447\u043d\u044b\u0445 \u0442\u0430\u0431\u043b\u0438\u0446 \u043f\u0440\u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0435\n\u0414\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043e\u0431\u044b\u0447\u043d\u044b\u0445 \u0442\u0430\u0431\u043b\u0438\u0446, \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0445 \u0432 \u0432\u0430\u0448\u0435\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u043c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u043c \u0444\u0430\u0439\u043b\u0435, \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f `CREATE_PLAIN_TABLES=1`. \u042d\u0442\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442 `indexer --all` \u043f\u0435\u0440\u0435\u0434 \u0437\u0430\u043f\u0443\u0441\u043a\u043e\u043c Manticore. \u042d\u0442\u043e \u043f\u043e\u043b\u0435\u0437\u043d\u043e, \u0435\u0441\u043b\u0438 \u0432\u044b \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0435 \u0442\u043e\u043c\u0430, \u0438 \u0432\u0430\u0448\u0438 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u043b\u0435\u0433\u043a\u043e \u0432\u043e\u0441\u0441\u043e\u0437\u0434\u0430\u0442\u044c.\nCODE_BLOCK_21\n\n### \u0423\u0441\u0442\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u043d\u0435\u043f\u043e\u043b\u0430\u0434\u043e\u043a\n\n#### \u041f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u0441 \u043f\u0440\u0430\u0432\u0430\u043c\u0438 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u0441\u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u043c\u0443 \u0442\u043e\u043c\u0443\n\n\u0415\u0441\u043b\u0438 \u0432\u044b \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442\u0435 Manticore Search docker \u043e\u0442 \u0438\u043c\u0435\u043d\u0438 \u043d\u0435-root \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f (\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f `docker ... --user manticore` \u0438\u043b\u0438 `user: manticore` \u0432 docker compose yaml), \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0441\u0442\u043e\u043b\u043a\u043d\u0443\u0442\u044c\u0441\u044f \u0441 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430\u043c\u0438 \u043f\u0440\u0430\u0432 \u0434\u043e\u0441\u0442\u0443\u043f\u0430, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440:\nCODE_BLOCK_22\n\n\u042d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u043e\u0438\u0437\u043e\u0439\u0442\u0438 \u043f\u043e\u0442\u043e\u043c\u0443, \u0447\u0442\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0439 \u0434\u043b\u044f \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0432 \u0432\u043d\u0443\u0442\u0440\u0438 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430, \u043c\u043e\u0436\u0435\u0442 \u043d\u0435 \u0438\u043c\u0435\u0442\u044c \u043f\u0440\u0430\u0432 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0438, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0432\u044b \u0441\u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043b\u0438 \u0432 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440. \u0427\u0442\u043e\u0431\u044b \u0438\u0441\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u044d\u0442\u043e, \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c `chown` \u0438\u043b\u0438 `chmod` \u043a \u0441\u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0439 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0438. \u0415\u0441\u043b\u0438 \u0432\u044b \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442\u0435 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440 \u043e\u0442 \u0438\u043c\u0435\u043d\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f `manticore`, \u0432\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c:\nCODE_BLOCK_23\n\n\u0442\u0430\u043a \u043a\u0430\u043a \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c `manticore` \u0438\u043c\u0435\u0435\u0442 ID 999 \u0432\u043d\u0443\u0442\u0440\u0438 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430.\n\n<!-- proofread -->"
        },
        "is_code_or_comment": false,
        "model": "openai:gpt-4.1-mini",
        "updated_at": 1766339840
    },
    "50919bfdc4c91a93f7aef62701c471eb43c7ec28e2ac8b469c66acd1c653eb73": {
        "original": "# Starting and using Manticore in Docker\n\nThe image is based on [current release of Manticore package](https://manticoresearch.com/install/).\n\n[comment]: # (the below should be in sync with https://github.com/manticoresoftware/docker/blob/master/README.md)\n\nThe default configuration includes a sample Real-Time table and listens on the default ports:\n\n  * `9306` for connections from a MySQL client\n  * `9308` for connections via HTTP\n  * `9312` for connections via a binary protocol (e.g. in case you run a cluster)\n\nThe image comes with libraries for easy indexing data from MySQL, PostgreSQL, XML and CSV files.\n\n## How to run Manticore Search Docker image\n\n### Quick usage\n\nThe below is the simplest way to start Manticore in a container and log in to it via the mysql client:\n\nCODE_BLOCK_0\n\nNote that upon exiting the MySQL client, the Manticore container will be stopped and removed, resulting in no saved data. For information on using Manticore in a production environment, please see below.\n\nThe image comes with a sample table that can be loaded like this:\n\nCODE_BLOCK_1\n\nAlso, the mysql client has several sample queries in its history that you can run on the above table, just use Up/Down keys in the client to see and run them.\n\n### Production use\n\n\n#### Ports and mounting points\n\nFor data persistence the folder `/var/lib/manticore/` should be mounted to local storage or other desired storage engine.\n\nThe configuration file inside the instance is located at   `/etc/manticoresearch/manticore.conf`. For custom settings, this file should be mounted to your own configuration file.\n\nThe ports are 9306/9308/9312 for SQL/HTTP/Binary, expose them depending on how you are going to use Manticore. For example:\n\nCODE_BLOCK_2\n\nor\n\nCODE_BLOCK_3\n\nMake sure to remove `127.0.0.1:` if you want the ports to be available for external hosts.\n\n#### Manticore Columnar Library and Manticore Buddy\n\nThe Manticore Search Docker image comes with pre-installed [Manticore Columnar Library](https://github.com/manticoresoftware/columnar) and [Manticore Buddy](https://github.com/manticoresoftware/manticoresearch-buddy)\n\n#### Docker-compose\n\nIn many cases, you may want to use Manticore in conjunction with other images specified in a Docker Compose YAML file. Below is the minimal recommended configuration for Manticore Search in a docker-compose.yml file:\n\nCODE_BLOCK_4\n\nBesides using the exposed ports 9306 and 9308, you can log into the instance by running `docker-compose exec manticore mysql`.\n\n#### HTTP protocol\n\nHTTP protocol is exposed on port 9308. You can map the port locally and connect using curl.:\n\nCODE_BLOCK_5\n\n<!-- example create -->\nCreate a table:\n\n<!-- request JSON -->\nCODE_BLOCK_6\n<!-- end -->\n<!-- example insert -->\nInsert a document:\n\n<!-- request JSON -->\nCODE_BLOCK_7\n<!-- end -->\n<!-- example search -->\nPerform a simple search:\n\n<!-- request JSON -->\nCODE_BLOCK_8\n<!-- end -->\n\n### Logging\n\nBy default, the server is set to send its logging to `/dev/stdout`, which can be viewed from the host with:\n\n\nCODE_BLOCK_9\n\nThe query log can be diverted to Docker log by passing the variable `QUERY_LOG_TO_STDOUT=true`.\n\n\n#### Multi-node cluster with replication\n\nHere is a simple `docker-compose.yml` for defining a two node cluster:\n\nCODE_BLOCK_10\n* Start it: `docker-compose up`\n* Create a cluster:\nCODE_BLOCK_11\n* Join to the the cluster on the 2nd instance\nCODE_BLOCK_12\n* If you now go back to the first instance you'll see the new record:\nCODE_BLOCK_13\n\n### Memory locking and limits\n\nIt's recommended to overwrite the default ulimits of docker for the Manticore instance:\n\nCODE_BLOCK_14\n\nFor best performance, table components can be \"mlocked\" into memory. When Manticore is run under Docker, the instance requires additional privileges to allow memory locking. The following options must be added when running the instance:\n\nCODE_BLOCK_15\n\n### Configuring Manticore Search with Docker\n\nIf you want to run Manticore with a custom configuration that includes table definitions, you will need to mount the configuration to the instance:\n\nCODE_BLOCK_16\n\nTake into account that Manticore search inside the container is run under user `manticore`. Performing operations with table files (like creating or rotating plain tables) should be also done under `manticore`. Otherwise the files will be created under `root` and the search daemon won't have rights to open them. For example here is how you can rotate all tables:\n\nCODE_BLOCK_17\n\nYou can also set individual `searchd` and `common` configuration settings using Docker environment variables.\n\nThe settings must be prefixed with their section name, example for in case of `mysql_version_string` the variable must be named `searchd_mysql_version_string`:\n\n\nCODE_BLOCK_18\n\nIn case of the `listen` directive, new listening interfaces using the Docker variable `searchd_listen`  in addition to the default ones. Multiple interfaces can be declared, separated by a semi-colon (\"|\"). To listen only on a network address, the `$ip` (retrieved internally from `hostname -i`) can be used as address alias.\n\nFor example `-e searchd_listen='9316:http|9307:mysql|$ip:5443:mysql_vip'` will add an additional SQL interface on port 9307, an SQL VIP listener on port 5443 running only on the instance's IP, and an HTTP listener on port 9316, in addition to the defaults on 9306 and 9308, respectively.\n\nCODE_BLOCK_19\n\n#### Startup flags\n\nTo start Manticore with custom startup flags, specify them as arguments when using docker run. Ensure you do not include the `searchd` command and include the `--nodetach` flag. Here's an example:\nCODE_BLOCK_20\n\n#### Running under non-root\nBy default, the main Manticore process `searchd` is running under user `manticore` inside the container, but the script which runs on starting the container is run under your default docker user which in most cases is `root`. If that's not what you want you can use `docker ... --user manticore` or `user: manticore` in docker compose yaml to make everything run under `manticore`. Read below about possible volume permissions issue you can get and how to solve it.",
        "translations": {
            "chinese": "# \u5728 Docker \u4e2d\u542f\u52a8\u548c\u4f7f\u7528 Manticore\n\n\u955c\u50cf\u57fa\u4e8e [\u5f53\u524d\u7248\u672c\u7684 Manticore \u5305](https://manticoresearch.com/install/)\u3002\n\n[comment]: # (the below should be in sync with https://github.com/manticoresoftware/docker/blob/master/README.md)\n\n\u9ed8\u8ba4\u914d\u7f6e\u5305\u542b\u4e00\u4e2a\u793a\u4f8b\u5b9e\u65f6\u8868\uff0c\u5e76\u76d1\u542c\u4ee5\u4e0b\u9ed8\u8ba4\u7aef\u53e3\uff1a\n\n  * `9306` \u7528\u4e8e MySQL \u5ba2\u6237\u7aef\u8fde\u63a5\n  * `9308` \u7528\u4e8e\u901a\u8fc7 HTTP \u8fde\u63a5\n  * `9312` \u7528\u4e8e\u901a\u8fc7\u4e8c\u8fdb\u5236\u534f\u8bae\u8fde\u63a5\uff08\u4f8b\u5982\u5728\u8fd0\u884c\u96c6\u7fa4\u65f6\uff09\n\n\u8be5\u955c\u50cf\u9644\u5e26\u65b9\u4fbf\u4ece MySQL\u3001PostgreSQL\u3001XML \u548c CSV \u6587\u4ef6\u7d22\u5f15\u6570\u636e\u7684\u5e93\u3002\n\n## \u5982\u4f55\u8fd0\u884c Manticore Search Docker \u955c\u50cf\n\n### \u5feb\u901f\u4f7f\u7528\n\n\u4ee5\u4e0b\u662f\u5728\u5bb9\u5668\u4e2d\u542f\u52a8 Manticore \u5e76\u901a\u8fc7 mysql \u5ba2\u6237\u7aef\u767b\u5f55\u7684\u6700\u7b80\u5355\u65b9\u6cd5\uff1a\n\nCODE_BLOCK_0\n\n\u6ce8\u610f\uff0c\u9000\u51fa MySQL \u5ba2\u6237\u7aef\u65f6\uff0cManticore \u5bb9\u5668\u5c06\u88ab\u505c\u6b62\u548c\u5220\u9664\uff0c\u6570\u636e\u4e0d\u4f1a\u4fdd\u5b58\u3002\u5173\u4e8e\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528 Manticore \u7684\u8be6\u60c5\uff0c\u8bf7\u89c1\u4e0b\u6587\u3002\n\n\u955c\u50cf\u81ea\u5e26\u4e00\u4e2a\u793a\u4f8b\u8868\uff0c\u53ef\u4ee5\u8fd9\u6837\u52a0\u8f7d\uff1a\n\nCODE_BLOCK_1\n\n\u53e6\u5916\uff0cmysql \u5ba2\u6237\u7aef\u7684\u5386\u53f2\u8bb0\u5f55\u91cc\u6709\u51e0\u4e2a\u793a\u4f8b\u67e5\u8be2\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u5ba2\u6237\u7aef\u7684\u4e0a\u4e0b\u952e\u67e5\u770b\u5e76\u6267\u884c\u5b83\u4eec\u3002\n\n### \u751f\u4ea7\u4f7f\u7528\n\n\n#### \u7aef\u53e3\u548c\u6302\u8f7d\u70b9\n\n\u4e3a\u4e86\u6570\u636e\u6301\u4e45\u5316\uff0c\u76ee\u5f55 `/var/lib/manticore/` \u5e94\u6302\u8f7d\u5230\u672c\u5730\u5b58\u50a8\u6216\u5176\u4ed6\u76ee\u6807\u5b58\u50a8\u5f15\u64ce\u3002\n\n\u5b9e\u4f8b\u5185\u90e8\u7684\u914d\u7f6e\u6587\u4ef6\u4f4d\u4e8e `/etc/manticoresearch/manticore.conf`\u3002\u5982\u9700\u81ea\u5b9a\u4e49\u8bbe\u7f6e\uff0c\u5e94\u5c06\u6b64\u6587\u4ef6\u6302\u8f7d\u5230\u4f60\u81ea\u5df1\u7684\u914d\u7f6e\u6587\u4ef6\u3002\n\n\u7aef\u53e3\u5206\u522b\u662f 9306/9308/9312\uff0c\u5bf9\u5e94 SQL/HTTP/\u4e8c\u8fdb\u5236\uff0c\u6839\u636e\u4f60\u4f7f\u7528 Manticore \u7684\u65b9\u5f0f\u66b4\u9732\u5b83\u4eec\u3002\u4f8b\u5982\uff1a\n\nCODE_BLOCK_2\n\n\u6216\u8005\n\nCODE_BLOCK_3\n\n\u5982\u679c\u4f60\u5e0c\u671b\u7aef\u53e3\u5bf9\u5916\u90e8\u4e3b\u673a\u5f00\u653e\uff0c\u786e\u4fdd\u79fb\u9664 `127.0.0.1:`\u3002\n\n#### Manticore Columnar Library \u548c Manticore Buddy\n\nManticore Search Docker \u955c\u50cf\u9884\u88c5\u4e86 [Manticore Columnar Library](https://github.com/manticoresoftware/columnar) \u548c [Manticore Buddy](https://github.com/manticoresoftware/manticoresearch-buddy)\u3002\n\n#### Docker-compose\n\n\u5728\u8bb8\u591a\u60c5\u51b5\u4e0b\uff0c\u4f60\u53ef\u80fd\u5e0c\u671b\u5c06 Manticore \u4e0e Docker Compose YAML \u6587\u4ef6\u4e2d\u6307\u5b9a\u7684\u5176\u4ed6\u955c\u50cf\u4e00\u8d77\u4f7f\u7528\u3002\u4ee5\u4e0b\u662f docker-compose.yml \u6587\u4ef6\u4e2d Manticore Search \u7684\u6700\u5c0f\u63a8\u8350\u914d\u7f6e\uff1a\n\nCODE_BLOCK_4\n\n\u9664\u4e86\u4f7f\u7528\u66b4\u9732\u7684\u7aef\u53e3 9306 \u548c 9308\uff0c\u4f60\u8fd8\u53ef\u4ee5\u901a\u8fc7\u8fd0\u884c `docker-compose exec manticore mysql` \u767b\u5f55\u5b9e\u4f8b\u3002\n\n#### HTTP \u534f\u8bae\n\nHTTP \u534f\u8bae\u66b4\u9732\u5728 9308 \u7aef\u53e3\u3002\u4f60\u53ef\u4ee5\u5c06\u7aef\u53e3\u6620\u5c04\u5230\u672c\u5730\u5e76\u4f7f\u7528 curl \u8fde\u63a5\uff1a\n\nCODE_BLOCK_5\n\n<!-- example create -->\n\u521b\u5efa\u4e00\u4e2a\u8868\uff1a\n\n<!-- request JSON -->\nCODE_BLOCK_6\n<!-- end -->\n<!-- example insert -->\n\u63d2\u5165\u6587\u6863\uff1a\n\n<!-- request JSON -->\nCODE_BLOCK_7\n<!-- end -->\n<!-- example search -->\n\u6267\u884c\u7b80\u5355\u641c\u7d22\uff1a\n\n<!-- request JSON -->\nCODE_BLOCK_8\n<!-- end -->\n\n### \u65e5\u5fd7\u8bb0\u5f55\n\n\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u670d\u52a1\u5668\u8bbe\u7f6e\u4e3a\u5c06\u65e5\u5fd7\u53d1\u9001\u5230 `/dev/stdout`\uff0c\u53ef\u4ee5\u4ece\u4e3b\u673a\u7aef\u67e5\u770b\uff1a\n\nCODE_BLOCK_9\n\n\u901a\u8fc7\u4f20\u9012\u53d8\u91cf `QUERY_LOG_TO_STDOUT=true`\uff0c\u67e5\u8be2\u65e5\u5fd7\u53ef\u4ee5\u91cd\u5b9a\u5411\u5230 Docker \u65e5\u5fd7\u3002\n\n\n#### \u5e26\u590d\u5236\u7684\u591a\u8282\u70b9\u96c6\u7fa4\n\n\u4e0b\u9762\u662f\u7528\u4e8e\u5b9a\u4e49\u4e24\u8282\u70b9\u96c6\u7fa4\u7684\u7b80\u5355 `docker-compose.yml`\uff1a\n\nCODE_BLOCK_10\n* \u542f\u52a8\u5b83: `docker-compose up`\n* \u521b\u5efa\u96c6\u7fa4:\nCODE_BLOCK_11\n* \u5728\u7b2c\u4e8c\u4e2a\u5b9e\u4f8b\u4e0a\u52a0\u5165\u96c6\u7fa4\nCODE_BLOCK_12\n* \u73b0\u5728\u56de\u5230\u7b2c\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u4f60\u5c06\u770b\u5230\u65b0\u8bb0\u5f55\uff1a\nCODE_BLOCK_13\n\n### \u5185\u5b58\u9501\u5b9a\u548c\u9650\u5236\n\n\u5efa\u8bae\u8986\u76d6 docker \u5bf9 Manticore \u5b9e\u4f8b\u7684\u9ed8\u8ba4 ulimits\uff1a\n\nCODE_BLOCK_14\n\n\u4e3a\u4e86\u83b7\u5f97\u6700\u4f73\u6027\u80fd\uff0c\u8868\u7ec4\u4ef6\u53ef\u4ee5\u88ab\u201cmlocked\u201d\u5230\u5185\u5b58\u4e2d\u3002\u5f53 Manticore \u5728 Docker \u4e2d\u8fd0\u884c\u65f6\uff0c\u5b9e\u4f8b\u9700\u8981\u989d\u5916\u6743\u9650\u4ee5\u5141\u8bb8\u5185\u5b58\u9501\u5b9a\u3002\u8fd0\u884c\u5b9e\u4f8b\u65f6\u5fc5\u987b\u6dfb\u52a0\u4ee5\u4e0b\u9009\u9879\uff1a\n\nCODE_BLOCK_15\n\n### \u4f7f\u7528 Docker \u914d\u7f6e Manticore Search\n\n\u5982\u679c\u60f3\u4f7f\u7528\u5305\u542b\u8868\u5b9a\u4e49\u7684\u81ea\u5b9a\u4e49\u914d\u7f6e\u8fd0\u884c Manticore\uff0c\u9700\u8981\u5c06\u914d\u7f6e\u6302\u8f7d\u5230\u5b9e\u4f8b\uff1a\n\nCODE_BLOCK_16\n\n\u6ce8\u610f\uff0c\u5bb9\u5668\u5185\u7684 Manticore search \u662f\u4ee5\u7528\u6237 `manticore` \u8fd0\u884c\u7684\u3002\u5bf9\u8868\u6587\u4ef6\u7684\u64cd\u4f5c\uff08\u5982\u521b\u5efa\u6216\u8f6e\u8f6c\u666e\u901a\u8868\uff09\u4e5f\u5e94\u4ee5 `manticore` \u7528\u6237\u6267\u884c\u3002\u5426\u5219\u6587\u4ef6\u4f1a\u4ee5 `root` \u7528\u6237\u521b\u5efa\uff0c\u641c\u7d22\u5b88\u62a4\u8fdb\u7a0b\u5c06\u65e0\u6743\u9650\u6253\u5f00\u8fd9\u4e9b\u6587\u4ef6\u3002\u4f8b\u5982\uff0c\u8fd9\u91cc\u662f\u8f6e\u8f6c\u6240\u6709\u8868\u7684\u65b9\u5f0f\uff1a\n\nCODE_BLOCK_17\n\n\u4e5f\u53ef\u4ee5\u4f7f\u7528 Docker \u73af\u5883\u53d8\u91cf\u5206\u522b\u8bbe\u7f6e `searchd` \u548c `common` \u914d\u7f6e\u9879\u3002\n\n\u8bbe\u7f6e\u9879\u5fc5\u987b\u4ee5\u5b83\u4eec\u6240\u5728\u7684\u8282\u540d\u79f0\u4e3a\u524d\u7f00\uff0c\u4f8b\u5982 `mysql_version_string` \u7684\u53d8\u91cf\u540d\u5e94\u4e3a `searchd_mysql_version_string`\uff1a\n\nCODE_BLOCK_18\n\n\u5bf9\u4e8e `listen` \u6307\u4ee4\uff0c\u65b0\u7684\u76d1\u542c\u63a5\u53e3\u53ef\u901a\u8fc7 Docker \u53d8\u91cf `searchd_listen` \u6dfb\u52a0\u5230\u9ed8\u8ba4\u63a5\u53e3\u4e0a\u3002\u53ef\u58f0\u660e\u591a\u4e2a\u63a5\u53e3\uff0c\u4f7f\u7528\u5206\u53f7 (\"|\") \u5206\u9694\u3002\u4ec5\u76d1\u542c\u7f51\u7edc\u5730\u5740\u65f6\uff0c\u53ef\u7528 `$ip`\uff08\u5185\u90e8\u7531 `hostname -i` \u83b7\u53d6\uff09\u4f5c\u4e3a\u5730\u5740\u522b\u540d\u3002\n\n\u4f8b\u5982 `-e searchd_listen='9316:http|9307:mysql|$ip:5443:mysql_vip'` \u5c06\u5728\u7aef\u53e3 9307 \u6dfb\u52a0\u4e00\u4e2a\u989d\u5916\u7684 SQL \u63a5\u53e3\uff0c\u5728\u7aef\u53e3 5443 \u6dfb\u52a0\u4e00\u4e2a\u4ec5\u5728\u5b9e\u4f8b IP \u4e0a\u8fd0\u884c\u7684 SQL VIP \u76d1\u542c\u5668\uff0c\u5e76\u4e14\u5728 9316 \u7aef\u53e3\u6dfb\u52a0 HTTP \u76d1\u542c\u5668\uff0c\u6b64\u5916\u8fd8\u6709\u9ed8\u8ba4\u7684 9306 \u548c 9308 \u7aef\u53e3\u3002\n\nCODE_BLOCK_19\n\n#### \u542f\u52a8\u53c2\u6570\n\n\u82e5\u8981\u4f7f\u7528\u81ea\u5b9a\u4e49\u542f\u52a8\u53c2\u6570\u542f\u52a8 Manticore\uff0c\u8bf7\u5728\u4f7f\u7528 docker run \u65f6\u6307\u5b9a\u5b83\u4eec\u3002\u786e\u4fdd\u4e0d\u8981\u5305\u542b `searchd` \u547d\u4ee4\uff0c\u5e76\u5305\u542b `--nodetach` \u6807\u5fd7\u3002\u793a\u4f8b\u5982\u4e0b\uff1a\nCODE_BLOCK_20\n\n#### \u4ee5\u975e root \u7528\u6237\u8fd0\u884c\n\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4e3b Manticore \u8fdb\u7a0b `searchd` \u5728\u5bb9\u5668\u5185\u4ee5\u7528\u6237 `manticore` \u8fd0\u884c\uff0c\u4f46\u542f\u52a8\u5bb9\u5668\u7684\u811a\u672c\u4ee5\u9ed8\u8ba4 docker \u7528\u6237\u8fd0\u884c\uff0c\u591a\u6570\u60c5\u51b5\u4e0b\u4e3a `root`\u3002\u5982\u679c\u4e0d\u662f\u4f60\u60f3\u8981\u7684\uff0c\u53ef\u4ee5\u4f7f\u7528 `docker ... --user manticore` \u6216\u8005\u5728 docker compose yaml \u4e2d\u4f7f\u7528 `user: manticore`\uff0c\u4f7f\u6240\u6709\u5185\u5bb9\u90fd\u4ee5 `manticore` \u7528\u6237\u8fd0\u884c\u3002\u4e0b\u9762\u6709\u5173\u4e8e\u53ef\u80fd\u9047\u5230\u7684\u5377\u6743\u9650\u95ee\u9898\u53ca\u89e3\u51b3\u65b9\u6848\u7684\u8bf4\u660e\u3002",
            "russian": "# \u0417\u0430\u043f\u0443\u0441\u043a \u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 Manticore \u0432 Docker\n\n\u041e\u0431\u0440\u0430\u0437 \u043e\u0441\u043d\u043e\u0432\u0430\u043d \u043d\u0430 [\u0442\u0435\u043a\u0443\u0449\u0435\u043c \u0440\u0435\u043b\u0438\u0437\u0435 \u043f\u0430\u043a\u0435\u0442\u0430 Manticore](https://manticoresearch.com/install/).\n\n[comment]: # (the below should be in sync with https://github.com/manticoresoftware/docker/blob/master/README.md)\n\n\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u043f\u0440\u0438\u043c\u0435\u0440 \u0442\u0430\u0431\u043b\u0438\u0446\u044b Real-Time \u0438 \u043f\u0440\u043e\u0441\u043b\u0443\u0448\u0438\u0432\u0430\u0435\u0442 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043f\u043e\u0440\u0442\u044b:\n\n  * `9306` \u0434\u043b\u044f \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439 \u0441 MySQL \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u043c\n  * `9308` \u0434\u043b\u044f \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439 \u0447\u0435\u0440\u0435\u0437 HTTP\n  * `9312` \u0434\u043b\u044f \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439 \u0447\u0435\u0440\u0435\u0437 \u0431\u0438\u043d\u0430\u0440\u043d\u044b\u0439 \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043f\u0440\u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0435 \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0430)\n\n\u041e\u0431\u0440\u0430\u0437 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 \u0434\u043b\u044f \u0443\u0434\u043e\u0431\u043d\u043e\u0433\u043e \u0438\u043d\u0434\u0435\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u0438\u0437 MySQL, PostgreSQL, XML \u0438 CSV \u0444\u0430\u0439\u043b\u043e\u0432.\n\n## \u041a\u0430\u043a \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c Docker-\u043e\u0431\u0440\u0430\u0437 Manticore Search\n\n### \u0411\u044b\u0441\u0442\u0440\u044b\u0439 \u0441\u0442\u0430\u0440\u0442\n\n\u041d\u0438\u0436\u0435 \u043f\u0440\u0438\u0432\u0435\u0434\u0451\u043d \u0441\u0430\u043c\u044b\u0439 \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u0441\u043f\u043e\u0441\u043e\u0431 \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c Manticore \u0432 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0435 \u0438 \u0432\u043e\u0439\u0442\u0438 \u0432 \u043d\u0435\u0433\u043e \u0447\u0435\u0440\u0435\u0437 mysql \u043a\u043b\u0438\u0435\u043d\u0442:\n\nCODE_BLOCK_0\n\n\u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435, \u0447\u0442\u043e \u043f\u0440\u0438 \u0432\u044b\u0445\u043e\u0434\u0435 \u0438\u0437 MySQL \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440 Manticore \u0431\u0443\u0434\u0435\u0442 \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d \u0438 \u0443\u0434\u0430\u043b\u0451\u043d, \u0438 \u0434\u0430\u043d\u043d\u044b\u0435 \u043d\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0442\u0441\u044f. \u0414\u043b\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 Manticore \u0432 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0439 \u0441\u0440\u0435\u0434\u0435 \u0441\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043d\u0438\u0436\u0435.\n\n\u041e\u0431\u0440\u0430\u0437 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u043f\u0440\u0438\u043c\u0435\u0440 \u0442\u0430\u0431\u043b\u0438\u0446\u044b, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043c\u043e\u0436\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c:\n\nCODE_BLOCK_1\n\n\u041a\u0440\u043e\u043c\u0435 \u0442\u043e\u0433\u043e, mysql \u043a\u043b\u0438\u0435\u043d\u0442 \u0438\u043c\u0435\u0435\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043f\u0440\u0438\u043c\u0435\u0440\u043e\u0432 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0432 \u0438\u0441\u0442\u043e\u0440\u0438\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0434\u043b\u044f \u0432\u044b\u0448\u0435\u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b, \u043f\u0440\u043e\u0441\u0442\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043a\u043b\u0430\u0432\u0438\u0448\u0438 Up/Down \u0432 \u043a\u043b\u0438\u0435\u043d\u0442\u0435 \u0434\u043b\u044f \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430 \u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0430.\n\n### \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0432 \u043f\u0440\u043e\u0434\u0430\u043a\u0448\u0435\u043d\u0435\n\n\n#### \u041f\u043e\u0440\u0442\u044b \u0438 \u0442\u043e\u0447\u043a\u0438 \u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f\n\n\u0414\u043b\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u0430\u043f\u043a\u0430 `/var/lib/manticore/` \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0441\u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0430 \u0432 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e\u0435 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435 \u0438\u043b\u0438 \u0434\u0440\u0443\u0433\u043e\u0439 \u0436\u0435\u043b\u0430\u0435\u043c\u044b\u0439 \u0434\u0432\u0438\u0436\u043e\u043a \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f.\n\n\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b \u0432\u043d\u0443\u0442\u0440\u0438 \u0438\u043d\u0441\u0442\u0430\u043d\u0441\u0430 \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d \u043f\u043e \u043f\u0443\u0442\u0438 `/etc/manticoresearch/manticore.conf`. \u0414\u043b\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0445 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a \u044d\u0442\u043e\u0442 \u0444\u0430\u0439\u043b \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0441\u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d \u043d\u0430 \u0432\u0430\u0448 \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b.\n\n\u041f\u043e\u0440\u0442\u044b 9306/9308/9312 \u0434\u043b\u044f SQL/HTTP/Binary, \u043e\u0442\u043a\u0440\u043e\u0439\u0442\u0435 \u0438\u0445 \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0442\u043e\u0433\u043e, \u043a\u0430\u043a \u0432\u044b \u0441\u043e\u0431\u0438\u0440\u0430\u0435\u0442\u0435\u0441\u044c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c Manticore. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440:\n\nCODE_BLOCK_2\n\n\u0438\u043b\u0438\n\nCODE_BLOCK_3\n\n\u0423\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044c, \u0447\u0442\u043e \u0443\u0434\u0430\u043b\u0438\u043b\u0438 `127.0.0.1:`, \u0435\u0441\u043b\u0438 \u0445\u043e\u0442\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u0440\u0442\u044b \u0431\u044b\u043b\u0438 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u0441 \u0432\u043d\u0435\u0448\u043d\u0438\u0445 \u0445\u043e\u0441\u0442\u043e\u0432.\n\n#### Manticore Columnar Library \u0438 Manticore Buddy\n\nDocker-\u043e\u0431\u0440\u0430\u0437 Manticore Search \u043f\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0441 \u043f\u0440\u0435\u0434\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u043c\u0438 [Manticore Columnar Library](https://github.com/manticoresoftware/columnar) \u0438 [Manticore Buddy](https://github.com/manticoresoftware/manticoresearch-buddy)\n\n#### Docker-compose\n\n\u0412\u043e \u043c\u043d\u043e\u0433\u0438\u0445 \u0441\u043b\u0443\u0447\u0430\u044f\u0445 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0437\u0430\u0445\u043e\u0442\u0435\u0442\u044c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c Manticore \u0432\u043c\u0435\u0441\u0442\u0435 \u0441 \u0434\u0440\u0443\u0433\u0438\u043c\u0438 \u043e\u0431\u0440\u0430\u0437\u0430\u043c\u0438, \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u043c\u0438 \u0432 Docker Compose YAML \u0444\u0430\u0439\u043b\u0435. \u041d\u0438\u0436\u0435 \u043f\u0440\u0438\u0432\u0435\u0434\u0435\u043d\u0430 \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u043c\u0430\u044f \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u0434\u043b\u044f Manticore Search \u0432 \u0444\u0430\u0439\u043b\u0435 docker-compose.yml:\n\nCODE_BLOCK_4\n\n\u041f\u043e\u043c\u0438\u043c\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u043e\u0442\u043a\u0440\u044b\u0442\u044b\u0445 \u043f\u043e\u0440\u0442\u043e\u0432 9306 \u0438 9308, \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u043e\u0439\u0442\u0438 \u0432 \u0438\u043d\u0441\u0442\u0430\u043d\u0441, \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0432 `docker-compose exec manticore mysql`.\n\n#### HTTP \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\n\nHTTP \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u043d\u0430 \u043f\u043e\u0440\u0442\u0443 9308. \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e \u043f\u0440\u043e\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u044d\u0442\u043e\u0442 \u043f\u043e\u0440\u0442 \u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e curl:\n\nCODE_BLOCK_5\n\n<!-- example create -->\n\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u0443:\n\n<!-- request JSON -->\nCODE_BLOCK_6\n<!-- end -->\n<!-- example insert -->\n\u0412\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442:\n\n<!-- request JSON -->\nCODE_BLOCK_7\n<!-- end -->\n<!-- example search -->\n\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u043f\u043e\u0438\u0441\u043a:\n\n<!-- request JSON -->\nCODE_BLOCK_8\n<!-- end -->\n\n### \u041b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\n\n\u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0441\u0435\u0440\u0432\u0435\u0440 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d \u043d\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0443 \u043b\u043e\u0433\u043e\u0432 \u0432 `/dev/stdout`, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043d\u0430 \u0445\u043e\u0441\u0442\u0435 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e:\n\nCODE_BLOCK_9\n\n\u041b\u043e\u0433 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u043c\u043e\u0436\u043d\u043e \u043d\u0430\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0432 \u043b\u043e\u0433 Docker, \u043f\u0435\u0440\u0435\u0434\u0430\u0432 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e `QUERY_LOG_TO_STDOUT=true`.\n\n\n#### \u041c\u043d\u043e\u0433\u043e\u0437\u0432\u0435\u043d\u043d\u044b\u0439 \u043a\u043b\u0430\u0441\u0442\u0435\u0440 \u0441 \u0440\u0435\u043f\u043b\u0438\u043a\u0430\u0446\u0438\u0435\u0439\n\n\u0412\u043e\u0442 \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u043f\u0440\u0438\u043c\u0435\u0440 `docker-compose.yml` \u0434\u043b\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0430 \u0441 \u0434\u0432\u0443\u043c\u044f \u0443\u0437\u043b\u0430\u043c\u0438:\n\nCODE_BLOCK_10\n* \u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u0435 \u0435\u0433\u043e: `docker-compose up`\n* \u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u043a\u043b\u0430\u0441\u0442\u0435\u0440:\nCODE_BLOCK_11\n* \u041f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u0435\u0441\u044c \u043a \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0443 \u043d\u0430 \u0432\u0442\u043e\u0440\u043e\u043c \u0438\u043d\u0441\u0442\u0430\u043d\u0441\u0435\nCODE_BLOCK_12\n* \u0415\u0441\u043b\u0438 \u0442\u0435\u043f\u0435\u0440\u044c \u0432\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043a \u043f\u0435\u0440\u0432\u043e\u043c\u0443 \u0438\u043d\u0441\u0442\u0430\u043d\u0441\u0443, \u0432\u044b \u0443\u0432\u0438\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u0443\u044e \u0437\u0430\u043f\u0438\u0441\u044c:\nCODE_BLOCK_13\n\n### \u0411\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0430 \u043f\u0430\u043c\u044f\u0442\u0438 \u0438 \u043b\u0438\u043c\u0438\u0442\u044b\n\n\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u043f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0435 ulimits docker \u0434\u043b\u044f \u0438\u043d\u0441\u0442\u0430\u043d\u0441\u0430 Manticore:\n\nCODE_BLOCK_14\n\n\u0414\u043b\u044f \u043b\u0443\u0447\u0448\u0435\u0439 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b \u0442\u0430\u0431\u043b\u0438\u0446 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \"mlocked\" \u0432 \u043f\u0430\u043c\u044f\u0442\u044c. \u041f\u0440\u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0435 Manticore \u043f\u043e\u0434 Docker, \u0438\u043d\u0441\u0442\u0430\u043d\u0441\u0443 \u0442\u0440\u0435\u0431\u0443\u044e\u0442\u0441\u044f \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u0440\u0430\u0432\u0430 \u0434\u043b\u044f \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0438 \u043f\u0430\u043c\u044f\u0442\u0438. \u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043e\u043f\u0446\u0438\u0438 \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u044b \u043f\u0440\u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0435 \u0438\u043d\u0441\u0442\u0430\u043d\u0441\u0430:\n\nCODE_BLOCK_15\n\n### \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 Manticore Search \u0441 Docker\n\n\u0415\u0441\u043b\u0438 \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0442\u044c Manticore \u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0439 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0435\u0439, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0442\u0430\u0431\u043b\u0438\u0446, \u0432\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u0441\u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e \u0432 \u0438\u043d\u0441\u0442\u0430\u043d\u0441:\n\nCODE_BLOCK_16\n\n\u0418\u043c\u0435\u0439\u0442\u0435 \u0432 \u0432\u0438\u0434\u0443, \u0447\u0442\u043e Manticore search \u0432\u043d\u0443\u0442\u0440\u0438 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442\u0441\u044f \u043e\u0442 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f `manticore`. \u041e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u0441 \u0444\u0430\u0439\u043b\u0430\u043c\u0438 \u0442\u0430\u0431\u043b\u0438\u0446 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0438\u043b\u0438 \u0440\u043e\u0442\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0441\u0442\u044b\u0445 \u0442\u0430\u0431\u043b\u0438\u0446) \u0442\u0430\u043a\u0436\u0435 \u0434\u043e\u043b\u0436\u043d\u044b \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c\u0441\u044f \u043e\u0442 \u0438\u043c\u0435\u043d\u0438 `manticore`. \u0418\u043d\u0430\u0447\u0435 \u0444\u0430\u0439\u043b\u044b \u0431\u0443\u0434\u0443\u0442 \u0441\u043e\u0437\u0434\u0430\u043d\u044b \u043f\u043e\u0434 `root` \u0438 \u0434\u0435\u043c\u043e\u043d\u0443 \u043f\u043e\u0438\u0441\u043a\u0430 \u043d\u0435 \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u043e \u0438\u0445 \u043e\u0442\u043a\u0440\u044b\u0442\u044c. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0432\u043e\u0442 \u043a\u0430\u043a \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0440\u043e\u0442\u0430\u0446\u0438\u044e \u0432\u0441\u0435\u0445 \u0442\u0430\u0431\u043b\u0438\u0446:\n\nCODE_BLOCK_17\n\n\u0412\u044b \u0442\u0430\u043a\u0436\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 `searchd` \u0438 `common`, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f Docker.\n\n\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0441 \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u043e\u043c \u0438\u043c\u0435\u043d\u0438 \u0441\u0435\u043a\u0446\u0438\u0438, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0434\u043b\u044f `mysql_version_string` \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f \u0434\u043e\u043b\u0436\u043d\u0430 \u043d\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u0441\u044f `searchd_mysql_version_string`:\n\nCODE_BLOCK_18\n\n\u0412 \u0441\u043b\u0443\u0447\u0430\u0435 \u0434\u0438\u0440\u0435\u043a\u0442\u0438\u0432\u044b `listen` \u043d\u043e\u0432\u044b\u0435 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044b \u043f\u0440\u043e\u0441\u043b\u0443\u0448\u0438\u0432\u0430\u043d\u0438\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e Docker `searchd_listen` \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u043a \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u043c. \u041d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432 \u043c\u043e\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0447\u0435\u0440\u0435\u0437 \u0442\u043e\u0447\u043a\u0443 \u0441 \u0437\u0430\u043f\u044f\u0442\u043e\u0439 (\"|\"). \u0414\u043b\u044f \u043f\u0440\u043e\u0441\u043b\u0443\u0448\u0438\u0432\u0430\u043d\u0438\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u043e \u0441\u0435\u0442\u0435\u0432\u043e\u043c\u0443 \u0430\u0434\u0440\u0435\u0441\u0443 \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c `$ip` (\u043f\u043e\u043b\u0443\u0447\u0430\u0435\u043c\u044b\u0439 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0435 \u0447\u0435\u0440\u0435\u0437 `hostname -i`) \u043a\u0430\u043a \u043f\u0441\u0435\u0432\u0434\u043e\u043d\u0438\u043c \u0430\u0434\u0440\u0435\u0441\u0430.\n\n\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, `-e searchd_listen='9316:http|9307:mysql|$ip:5443:mysql_vip'` \u0434\u043e\u0431\u0430\u0432\u0438\u0442 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 SQL \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 \u043d\u0430 \u043f\u043e\u0440\u0442\u0443 9307, SQL VIP \u0441\u043b\u0443\u0448\u0430\u0442\u0435\u043b\u044c \u043d\u0430 \u043f\u043e\u0440\u0442\u0443 5443, \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0449\u0438\u0439 \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0430 IP \u0438\u043d\u0441\u0442\u0430\u043d\u0441\u0430, \u0438 HTTP \u0441\u043b\u0443\u0448\u0430\u0442\u0435\u043b\u044c \u043d\u0430 \u043f\u043e\u0440\u0442\u0443 9316, \u043f\u043e\u043c\u0438\u043c\u043e \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0445 \u043d\u0430 9306 \u0438 9308 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e.\n\nCODE_BLOCK_19\n\n#### \u0424\u043b\u0430\u0433\u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\n\n\u0427\u0442\u043e\u0431\u044b \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c Manticore \u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u043c\u0438 \u0444\u043b\u0430\u0433\u0430\u043c\u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0430, \u0443\u043a\u0430\u0436\u0438\u0442\u0435 \u0438\u0445 \u043a\u0430\u043a \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u044b \u043f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 docker run. \u0423\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044c, \u0447\u0442\u043e \u043d\u0435 \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u0443 `searchd` \u0438 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0435 \u0444\u043b\u0430\u0433 `--nodetach`. \u0412\u043e\u0442 \u043f\u0440\u0438\u043c\u0435\u0440:\nCODE_BLOCK_20\n\n#### \u0417\u0430\u043f\u0443\u0441\u043a \u043f\u043e\u0434 non-root \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c\n\u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u043f\u0440\u043e\u0446\u0435\u0441\u0441 Manticore `searchd` \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0432 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0435 \u043f\u043e\u0434 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c `manticore`, \u043d\u043e \u0441\u043a\u0440\u0438\u043f\u0442, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u043f\u0440\u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0435 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430, \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043f\u043e\u0434 \u0432\u0430\u0448\u0438\u043c \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c docker, \u043a\u043e\u0442\u043e\u0440\u044b\u043c \u0447\u0430\u0449\u0435 \u0432\u0441\u0435\u0433\u043e \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f `root`. \u0415\u0441\u043b\u0438 \u044d\u0442\u043e \u043d\u0435 \u0442\u043e, \u0447\u0442\u043e \u0432\u0430\u043c \u043d\u0443\u0436\u043d\u043e, \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c `docker ... --user manticore` \u0438\u043b\u0438 `user: manticore` \u0432 docker compose yaml, \u0447\u0442\u043e\u0431\u044b \u0432\u0441\u0451 \u0440\u0430\u0431\u043e\u0442\u0430\u043b\u043e \u043f\u043e\u0434 `manticore`. \u041d\u0438\u0436\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u044b \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u044b\u0435 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u0441 \u043f\u0440\u0430\u0432\u0430\u043c\u0438 \u043d\u0430 \u0442\u043e\u043c\u0430 \u0438 \u0441\u043f\u043e\u0441\u043e\u0431\u044b \u0438\u0445 \u0440\u0435\u0448\u0435\u043d\u0438\u044f."
        },
        "is_code_or_comment": false,
        "model": "openai:gpt-4.1-mini",
        "updated_at": 1766339863
    },
    "b1995e6640c7985c0af47086e95e2194f193c7c352a8f03c4994fdf9c581ea2f": {
        "original": "# Starting and using Manticore in Docker\n\nThe image is based on [current release of Manticore package](https://manticoresearch.com/install/).\n\n[comment]: # (the below should be in sync with https://github.com/manticoresoftware/docker/blob/master/README.md)\n\nThe default configuration includes a sample Real-Time table and listens on the default ports:\n\n  * `9306` for connections from a MySQL client\n  * `9308` for connections via HTTP\n  * `9312` for connections via a binary protocol (e.g. in case you run a cluster)\n\nThe image comes with libraries for easy indexing data from MySQL, PostgreSQL, XML and CSV files.\n\n## How to run Manticore Search Docker image\n\n### Quick usage\n\nThe below is the simplest way to start Manticore in a container and log in to it via the mysql client:\n\nCODE_BLOCK_0\n\nNote that upon exiting the MySQL client, the Manticore container will be stopped and removed, resulting in no saved data. For information on using Manticore in a production environment, please see below.\n\nThe image comes with a sample table that can be loaded like this:\n\nCODE_BLOCK_1\n\nAlso, the mysql client has several sample queries in its history that you can run on the above table, just use Up/Down keys in the client to see and run them.\n\n### Production use\n\n#### Ports and mounting points\n\nFor data persistence the folder `/var/lib/manticore/` should be mounted to local storage or other desired storage engine.\n\nThe configuration file inside the instance is located at   `/etc/manticoresearch/manticore.conf`. For custom settings, this file should be mounted to your own configuration file.\n\nThe ports are 9306/9308/9312 for SQL/HTTP/Binary, expose them depending on how you are going to use Manticore. For example:\n\nCODE_BLOCK_2\n\nor\n\nCODE_BLOCK_3\n\nMake sure to remove `127.0.0.1:` if you want the ports to be available for external hosts.\n\n#### Manticore Columnar Library and Manticore Buddy\n\nThe Manticore Search Docker image comes with pre-installed [Manticore Columnar Library](https://github.com/manticoresoftware/columnar) and [Manticore Buddy](https://github.com/manticoresoftware/manticoresearch-buddy)\n\n#### Docker-compose\n\nIn many cases, you may want to use Manticore in conjunction with other images specified in a Docker Compose YAML file. Below is the minimal recommended configuration for Manticore Search in a docker-compose.yml file:\n\nCODE_BLOCK_4\n\nBesides using the exposed ports 9306 and 9308, you can log into the instance by running `docker-compose exec manticore mysql`.\n\n#### HTTP protocol\n\nHTTP protocol is exposed on port 9308. You can map the port locally and connect using curl.:\n\nCODE_BLOCK_5\n\n<!-- example create -->\nCreate a table:\n\n<!-- request JSON -->\nCODE_BLOCK_6\n<!-- end -->\n<!-- example insert -->\nInsert a document:\n\n<!-- request JSON -->\nCODE_BLOCK_7\n<!-- end -->\n<!-- example search -->\nPerform a simple search:\n\n<!-- request JSON -->\nCODE_BLOCK_8\n<!-- end -->\n\n### Logging\n\nBy default, the server is set to send its logging to `/dev/stdout`, which can be viewed from the host with:\n\nCODE_BLOCK_9\n\nThe query log can be diverted to Docker log by passing the variable `QUERY_LOG_TO_STDOUT=true`.\n\n#### Multi-node cluster with replication\n\nHere is a simple `docker-compose.yml` for defining a two node cluster:\n\nCODE_BLOCK_10\n* Start it: `docker-compose up`\n* Create a cluster:\nCODE_BLOCK_11\n* Join to the the cluster on the 2nd instance\nCODE_BLOCK_12\n* If you now go back to the first instance you'll see the new record:\nCODE_BLOCK_13\n\n### Memory locking and limits\n\nIt's recommended to overwrite the default ulimits of docker for the Manticore instance:\n\nCODE_BLOCK_14\n\nFor best performance, table components can be \"mlocked\" into memory. When Manticore is run under Docker, the instance requires additional privileges to allow memory locking. The following options must be added when running the instance:\n\nCODE_BLOCK_15\n\n### Configuring Manticore Search with Docker\n\nIf you want to run Manticore with a custom configuration that includes table definitions, you will need to mount the configuration to the instance:\n\nCODE_BLOCK_16\n\nTake into account that Manticore search inside the container is run under user `manticore`. Performing operations with table files (like creating or rotating plain tables) should be also done under `manticore`. Otherwise the files will be created under `root` and the search daemon won't have rights to open them. For example here is how you can rotate all tables:\n\nCODE_BLOCK_17\n\nYou can also set individual `searchd` and `common` configuration settings using Docker environment variables.\n\nThe settings must be prefixed with their section name, example for in case of `mysql_version_string` the variable must be named `searchd_mysql_version_string`:\n\nCODE_BLOCK_18\n\nIn case of the `listen` directive, new listening interfaces using the Docker variable `searchd_listen`  in addition to the default ones. Multiple interfaces can be declared, separated by a semi-colon (\"|\"). To listen only on a network address, the `$ip` (retrieved internally from `hostname -i`) can be used as address alias.\n\nFor example `-e searchd_listen='9316:http|9307:mysql|$ip:5443:mysql_vip'` will add an additional SQL interface on port 9307, an SQL VIP listener on port 5443 running only on the instance's IP, and an HTTP listener on port 9316, in addition to the defaults on 9306 and 9308, respectively.\n\nCODE_BLOCK_19\n\n#### Startup flags\n\nTo start Manticore with custom startup flags, specify them as arguments when using docker run. Ensure you do not include the `searchd` command and include the `--nodetach` flag. Here's an example:\nCODE_BLOCK_20\n\n#### Running under non-root\nBy default, the main Manticore process `searchd` is running under user `manticore` inside the container, but the script which runs on starting the container is run under your default docker user which in most cases is `root`. If that's not what you want you can use `docker ... --user manticore` or `user: manticore` in docker compose yaml to make everything run under `manticore`. Read below about possible volume permissions issue you can get and how to solve it.",
        "translations": {
            "chinese": "# \u4f7f\u7528 Docker \u542f\u52a8\u548c\u4f7f\u7528 Manticore\n\n\u8be5\u955c\u50cf\u662f\u57fa\u4e8e [Manticore \u5305\u7684\u5f53\u524d\u7248\u672c](https://manticoresearch.com/install/)\u3002\n\n[\u6ce8\u91ca]: # (\u4ee5\u4e0b\u5185\u5bb9\u5e94\u4e0e https://github.com/manticoresoftware/docker/blob/master/README.md \u4e2d\u7684\u5185\u5bb9\u4fdd\u6301\u4e00\u81f4)\n\n\u9ed8\u8ba4\u914d\u7f6e\u5305\u62ec\u4e00\u4e2a\u793a\u4f8b\u5b9e\u65f6\u8868\uff0c\u5e76\u76d1\u542c\u9ed8\u8ba4\u7aef\u53e3\uff1a\n\n  * `9306` \u7528\u4e8e MySQL \u5ba2\u6237\u7aef\u8fde\u63a5\n  * `9308` \u7528\u4e8e HTTP \u8fde\u63a5\n  * `9312` \u7528\u4e8e\u4e8c\u8fdb\u5236\u534f\u8bae\u8fde\u63a5\uff08\u4f8b\u5982\uff0c\u5982\u679c\u60a8\u8fd0\u884c\u96c6\u7fa4\uff09\n\n\u8be5\u955c\u50cf\u5305\u542b\u7528\u4e8e\u4ece MySQL\u3001PostgreSQL\u3001XML \u548c CSV \u6587\u4ef6\u4e2d\u8f7b\u677e\u7d22\u5f15\u6570\u636e\u7684\u5e93\u3002\n\n## \u5982\u4f55\u8fd0\u884c Manticore Search Docker \u955c\u50cf\n\n### \u5feb\u901f\u4f7f\u7528\n\n\u4ee5\u4e0b\u662f\u6700\u7b80\u5355\u7684\u65b9\u6cd5\u6765\u542f\u52a8 Manticore \u5bb9\u5668\u5e76\u5728\u5176\u4e2d\u4f7f\u7528 mysql \u5ba2\u6237\u7aef\u767b\u5f55\uff1a\n\nCODE_BLOCK_0\n\n\u8bf7\u6ce8\u610f\uff0c\u9000\u51fa mysql \u5ba2\u6237\u7aef\u540e\uff0cManticore \u5bb9\u5668\u5c06\u505c\u6b62\u5e76\u5220\u9664\uff0c\u5bfc\u81f4\u6ca1\u6709\u4fdd\u5b58\u7684\u6570\u636e\u3002\u6709\u5173\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528 Manticore \u7684\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u4ee5\u4e0b\u5185\u5bb9\u3002\n\n\u8be5\u955c\u50cf\u5305\u542b\u4e00\u4e2a\u53ef\u4ee5\u50cf\u8fd9\u6837\u52a0\u8f7d\u7684\u793a\u4f8b\u8868\uff1a\n\nCODE_BLOCK_1\n\n\u6b64\u5916\uff0cmysql \u5ba2\u6237\u7aef\u4e2d\u6709\u4e00\u4e9b\u793a\u4f8b\u67e5\u8be2\uff0c\u60a8\u53ef\u4ee5\u5728\u4e0a\u9762\u7684\u8868\u4e0a\u8fd0\u884c\u8fd9\u4e9b\u67e5\u8be2\uff0c\u53ea\u9700\u5728\u5ba2\u6237\u7aef\u4e2d\u4f7f\u7528\u4e0a/\u4e0b\u7bad\u5934\u952e\u67e5\u770b\u548c\u8fd0\u884c\u5b83\u4eec\u5373\u53ef\u3002\n\n### \u751f\u4ea7\u4f7f\u7528\n\n#### \u7aef\u53e3\u548c\u6302\u8f7d\u70b9\n\n\u4e3a\u4e86\u6570\u636e\u6301\u4e45\u5316\uff0c`/var/lib/manticore/` \u6587\u4ef6\u5939\u5e94\u6302\u8f7d\u5230\u672c\u5730\u5b58\u50a8\u6216\u5176\u4ed6\u6240\u9700\u7684\u5b58\u50a8\u5f15\u64ce\u3002\n\n\u5b9e\u4f8b\u4e2d\u7684\u914d\u7f6e\u6587\u4ef6\u4f4d\u4e8e `/etc/manticoresearch/manticore.conf`\u3002\u5bf9\u4e8e\u81ea\u5b9a\u4e49\u8bbe\u7f6e\uff0c\u5e94\u5c06\u8be5\u6587\u4ef6\u6302\u8f7d\u5230\u60a8\u81ea\u5df1\u7684\u914d\u7f6e\u6587\u4ef6\u3002\n\n\u7aef\u53e3\u4e3a 9306/9308/9312 \u7528\u4e8e SQL/HTTP/\u4e8c\u8fdb\u5236\uff0c\u6839\u636e\u60a8\u5982\u4f55\u4f7f\u7528 Manticore \u6765\u66b4\u9732\u5b83\u4eec\u3002\u4f8b\u5982\uff1a\n\nCODE_BLOCK_2\n\n\u6216\n\nCODE_BLOCK_3\n\n\u8bf7\u786e\u4fdd\u5220\u9664 `127.0.0.1:`\uff0c\u4ee5\u4fbf\u7aef\u53e3\u5bf9\u5916\u90e8\u4e3b\u673a\u53ef\u7528\u3002\n\n#### Manticore \u5217\u8868\u5e93\u548c Manticore Buddy\n\nManticore Search Docker \u955c\u50cf\u9884\u88c5\u4e86 [Manticore \u5217\u8868\u5e93](https://github.com/manticoresoftware/columnar) \u548c [Manticore Buddy](https://github.com/manticoresoftware/manticoresearch-buddy)\u3002\n\n#### Docker-compose\n\n\u5728\u8bb8\u591a\u60c5\u51b5\u4e0b\uff0c\u60a8\u53ef\u80fd\u5e0c\u671b\u4f7f\u7528 Manticore \u4e0e\u5176\u4ed6\u6307\u5b9a\u5728 Docker Compose YAML \u6587\u4ef6\u4e2d\u7684\u955c\u50cf\u4e00\u8d77\u4f7f\u7528\u3002\u4ee5\u4e0b\u662f\u5728 docker-compose.yml \u6587\u4ef6\u4e2d\u63a8\u8350\u7684 Manticore Search \u7684\u6700\u5c0f\u914d\u7f6e\uff1a\n\nCODE_BLOCK_4\n\n\u9664\u4e86\u4f7f\u7528\u66b4\u9732\u7684\u7aef\u53e3 9306 \u548c 9308\uff0c\u60a8\u8fd8\u53ef\u4ee5\u901a\u8fc7\u8fd0\u884c `docker-compose exec manticore mysql` \u767b\u5f55\u5b9e\u4f8b\u3002\n\n#### HTTP \u534f\u8bae\n\nHTTP \u534f\u8bae\u5728\u7aef\u53e3 9308 \u4e0a\u66b4\u9732\u3002\u60a8\u53ef\u4ee5\u5c06\u7aef\u53e3\u6620\u5c04\u5230\u672c\u5730\u5e76\u4f7f\u7528 curl \u8fde\u63a5\uff1a\n\nCODE_BLOCK_5\n\n<!-- \u793a\u4f8b\u521b\u5efa -->\n\u521b\u5efa\u4e00\u4e2a\u8868\uff1a\n\n<!-- \u8bf7\u6c42 JSON -->\nCODE_BLOCK_6\n<!-- \u7ed3\u675f -->\n<!-- \u793a\u4f8b\u63d2\u5165 -->\n\u63d2\u5165\u4e00\u4e2a\u6587\u6863\uff1a\n\n<!-- \u8bf7\u6c42 JSON -->\nCODE_BLOCK_7\n<!-- \u7ed3\u675f -->\n<!-- \u793a\u4f8b\u641c\u7d22 -->\n\u6267\u884c\u4e00\u4e2a\u7b80\u5355\u7684\u641c\u7d22\uff1a\n\n<!-- \u8bf7\u6c42 JSON -->\nCODE_BLOCK_8\n<!-- \u7ed3\u675f -->\n\n### \u65e5\u5fd7\n\n\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u670d\u52a1\u5668\u5c06\u65e5\u5fd7\u53d1\u9001\u5230 `/dev/stdout`\uff0c\u53ef\u4ee5\u4ece\u4e3b\u673a\u67e5\u770b\uff1a\n\nCODE_BLOCK_9\n\n\u53ef\u4ee5\u901a\u8fc7\u4f20\u9012\u53d8\u91cf `QUERY_LOG_TO_STDOUT=true` \u5c06\u67e5\u8be2\u65e5\u5fd7\u91cd\u5b9a\u5411\u5230 Docker \u65e5\u5fd7\u3002\n\n#### \u591a\u8282\u70b9\u96c6\u7fa4\u4e0e\u590d\u5236\n\n\u4ee5\u4e0b\u662f\u4e00\u4e2a\u7b80\u5355\u7684 `docker-compose.yml` \u6587\u4ef6\uff0c\u7528\u4e8e\u5b9a\u4e49\u4e00\u4e2a\u4e24\u8282\u70b9\u96c6\u7fa4\uff1a\n\nCODE_BLOCK_10\n* \u542f\u52a8\u5b83\uff1a`docker-compose up`\n* \u521b\u5efa\u96c6\u7fa4\uff1a\nCODE_BLOCK_11\n* \u5728\u7b2c\u4e8c\u4e2a\u5b9e\u4f8b\u4e0a\u52a0\u5165\u96c6\u7fa4\nCODE_BLOCK_12\n* \u5982\u679c\u60a8\u73b0\u5728\u56de\u5230\u7b2c\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u60a8\u5c06\u770b\u5230\u65b0\u7684\u8bb0\u5f55\uff1a\nCODE_BLOCK_13\n\n### \u5185\u5b58\u9501\u5b9a\u548c\u9650\u5236\n\n\u5efa\u8bae\u4e3a Manticore \u5b9e\u4f8b\u8986\u76d6 Docker \u7684\u9ed8\u8ba4 ulimits\uff1a\n\nCODE_BLOCK_14\n\n\u4e3a\u4e86\u83b7\u5f97\u6700\u4f73\u6027\u80fd\uff0c\u53ef\u4ee5\u5c06\u8868\u7ec4\u4ef6\u201c\u9501\u5b9a\u201d\u5230\u5185\u5b58\u4e2d\u3002\u5f53 Manticore \u5728 Docker \u4e0b\u8fd0\u884c\u65f6\uff0c\u5b9e\u4f8b\u9700\u8981\u989d\u5916\u7684\u6743\u9650\u4ee5\u5141\u8bb8\u5185\u5b58\u9501\u5b9a\u3002\u8fd0\u884c\u5b9e\u4f8b\u65f6\u5fc5\u987b\u6dfb\u52a0\u4ee5\u4e0b\u9009\u9879\uff1a\n\nCODE_BLOCK_15\n\n### \u4f7f\u7528 Docker \u914d\u7f6e Manticore Search\n\n\u5982\u679c\u60a8\u60f3\u4f7f\u7528\u81ea\u5b9a\u4e49\u914d\u7f6e\u8fd0\u884c Manticore\uff0c\u8be5\u914d\u7f6e\u5305\u62ec\u8868\u5b9a\u4e49\uff0c\u60a8\u9700\u8981\u5c06\u914d\u7f6e\u6302\u8f7d\u5230\u5b9e\u4f8b\u4e2d\uff1a\n\nCODE_BLOCK_16\n\n\u8bf7\u6ce8\u610f\uff0cManticore \u641c\u7d22\u5728\u5bb9\u5668\u5185\u4ee5\u7528\u6237 `manticore` \u8fd0\u884c\u3002\u5bf9\u8868\u6587\u4ef6\uff08\u5982\u521b\u5efa\u6216\u65cb\u8f6c\u7eaf\u8868\uff09\u7684\u64cd\u4f5c\u4e5f\u5e94\u5728 `manticore` \u7528\u6237\u4e0b\u8fdb\u884c\u3002\u5426\u5219\uff0c\u6587\u4ef6\u5c06\u7531 `root` \u521b\u5efa\uff0c\u641c\u7d22\u5b88\u62a4\u8fdb\u7a0b\u5c06\u6ca1\u6709\u6743\u9650\u6253\u5f00\u5b83\u4eec\u3002\u4f8b\u5982\uff0c\u8fd9\u91cc\u662f\u5982\u4f55\u65cb\u8f6c\u6240\u6709\u8868\u7684\uff1a\n\nCODE_BLOCK_17\n\n\u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528 Docker \u73af\u5883\u53d8\u91cf\u8bbe\u7f6e\u5355\u72ec\u7684 `searchd` \u548c `common` \u914d\u7f6e\u8bbe\u7f6e\u3002\n\n\u8bbe\u7f6e\u5fc5\u987b\u5e26\u6709\u5b83\u4eec\u7684\u8282\u540d\u524d\u7f00\uff0c\u4f8b\u5982\u5bf9\u4e8e `mysql_version_string`\uff0c\u53d8\u91cf\u5fc5\u987b\u547d\u540d\u4e3a `searchd_mysql_version_string`\uff1a\n\nCODE_BLOCK_18\n\n\u5bf9\u4e8e `listen` \u6307\u4ee4\uff0c\u53ef\u4ee5\u4f7f\u7528 Docker \u53d8\u91cf `searchd_listen` \u9644\u52a0\u65b0\u7684\u76d1\u542c\u63a5\u53e3\uff0c\u9664\u4e86\u9ed8\u8ba4\u7684\u63a5\u53e3\u3002\u53ef\u4ee5\u58f0\u660e\u591a\u4e2a\u63a5\u53e3\uff0c\u7528\u5206\u53f7\uff08`;`\uff09\u5206\u9694\u3002\u8981\u4ec5\u76d1\u542c\u7f51\u7edc\u5730\u5740\uff0c\u53ef\u4ee5\u4f7f\u7528 `$ip`\uff08\u4ece `hostname -i` \u5185\u90e8\u68c0\u7d22\uff09\u4f5c\u4e3a\u5730\u5740\u522b\u540d\u3002\n\n\u4f8b\u5982 `-e searchd_listen='9316:http|9307:mysql|$ip:5443:mysql_vip'` \u5c06\u6dfb\u52a0\u4e00\u4e2a\u9644\u52a0\u7684 SQL \u63a5\u53e3\u5728\u7aef\u53e3 9307\uff0c\u4e00\u4e2a SQL VIP \u76d1\u542c\u5668\u5728\u7aef\u53e3 5443 \u4ec5\u8fd0\u884c\u5728\u5b9e\u4f8b\u7684 IP \u4e0a\uff0c\u4ee5\u53ca\u4e00\u4e2a HTTP \u63a5\u53e3\u5728\u7aef\u53e3 9316\uff0c\u6b64\u5916\u8fd8\u6709\u9ed8\u8ba4\u7684 9306 \u548c 9308\u3002\n\nCODE_BLOCK_19\n\n#### \u542f\u52a8\u6807\u5fd7\n\n\u8981\u4ee5\u81ea\u5b9a\u4e49\u542f\u52a8\u6807\u5fd7\u542f\u52a8 Manticore\uff0c\u8bf7\u5728\u4f7f\u7528 `docker run` \u65f6\u6307\u5b9a\u5b83\u4eec\u3002\u786e\u4fdd\u4e0d\u8981\u5305\u542b `searchd` \u547d\u4ee4\uff0c\u5e76\u5305\u542b `--nodetach` \u6807\u5fd7\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u793a\u4f8b\uff1a\nCODE_BLOCK_20\n\n#### \u4ee5\u975e root \u7528\u6237\u8fd0\u884c\n\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4e3b\u8981\u7684 Manticore \u8fdb\u7a0b `searchd` \u5728\u5bb9\u5668\u5185\u4ee5\u7528\u6237 `manticore` \u8fd0\u884c\uff0c\u4f46\u542f\u52a8\u5bb9\u5668\u7684\u811a\u672c\u4ee5\u9ed8\u8ba4\u7684 Docker \u7528\u6237\u8fd0\u884c\uff0c\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u662f `root`\u3002\u5982\u679c\u60a8\u4e0d\u5e0c\u671b\u8fd9\u6837\uff0c\u53ef\u4ee5\u4f7f\u7528 `docker ... --user manticore` \u6216\u5728 docker compose yaml \u4e2d\u4f7f\u7528 `user: manticore` \u4f7f\u4e00\u5207\u90fd\u5728 `manticore` \u7528\u6237\u4e0b\u8fd0\u884c\u3002\u8bf7\u53c2\u9605\u4ee5\u4e0b\u5185\u5bb9\u4ee5\u4e86\u89e3\u53ef\u80fd\u9047\u5230\u7684\u5377\u6743\u9650\u95ee\u9898\u53ca\u5176\u89e3\u51b3\u65b9\u6848\u3002",
            "russian": "# \u0417\u0430\u043f\u0443\u0441\u043a \u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 Manticore \u0432 Docker\n\n\u041e\u0431\u0440\u0430\u0437 \u043e\u0441\u043d\u043e\u0432\u0430\u043d \u043d\u0430 [\u0442\u0435\u043a\u0443\u0449\u0435\u043c \u0440\u0435\u043b\u0438\u0437\u0435 \u043f\u0430\u043a\u0435\u0442\u0430 Manticore](https://manticoresearch.com/install/).\n\n[comment]: # (\u043d\u0438\u0436\u0435\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0441\u0438\u043d\u0445\u0440\u043e\u043d\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u0441 https://github.com/manticoresoftware/docker/blob/master/README.md)\n\n\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u043f\u0440\u0438\u043c\u0435\u0440 \u0442\u0430\u0431\u043b\u0438\u0446\u044b Real-Time \u0438 \u043f\u0440\u043e\u0441\u043b\u0443\u0448\u0438\u0432\u0430\u0435\u0442 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0435 \u043f\u043e\u0440\u0442\u044b:\n\n  * `9306` \u0434\u043b\u044f \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0439 \u043e\u0442 \u043a\u043b\u0438\u0435\u043d\u0442\u0430 MySQL\n  * `9308` \u0434\u043b\u044f \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0439 \u0447\u0435\u0440\u0435\u0437 HTTP\n  * `9312` \u0434\u043b\u044f \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0439 \u0447\u0435\u0440\u0435\u0437 \u0431\u0438\u043d\u0430\u0440\u043d\u044b\u0439 \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0435\u0441\u043b\u0438 \u0432\u044b \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442\u0435 \u043a\u043b\u0430\u0441\u0442\u0435\u0440)\n\n\u041e\u0431\u0440\u0430\u0437 \u043f\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0441 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430\u043c\u0438 \u0434\u043b\u044f \u0443\u0434\u043e\u0431\u043d\u043e\u0433\u043e \u0438\u043d\u0434\u0435\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u0438\u0437 MySQL, PostgreSQL, XML \u0438 CSV \u0444\u0430\u0439\u043b\u043e\u0432.\n\n## \u041a\u0430\u043a \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c Docker-\u043e\u0431\u0440\u0430\u0437 Manticore Search\n\n### \u0411\u044b\u0441\u0442\u0440\u043e\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\n\n\u041d\u0438\u0436\u0435 \u043f\u0440\u0438\u0432\u0435\u0434\u0435\u043d \u0441\u0430\u043c\u044b\u0439 \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u0441\u043f\u043e\u0441\u043e\u0431 \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c Manticore \u0432 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0435 \u0438 \u0432\u043e\u0439\u0442\u0438 \u0432 \u043d\u0435\u0433\u043e \u0447\u0435\u0440\u0435\u0437 mysql-\u043a\u043b\u0438\u0435\u043d\u0442:\n\nCODE_BLOCK_0\n\n\u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435, \u0447\u0442\u043e \u043f\u043e\u0441\u043b\u0435 \u0432\u044b\u0445\u043e\u0434\u0430 \u0438\u0437 MySQL-\u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440 Manticore \u0431\u0443\u0434\u0435\u0442 \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d \u0438 \u0443\u0434\u0430\u043b\u0435\u043d, \u0447\u0442\u043e \u043f\u0440\u0438\u0432\u0435\u0434\u0435\u0442 \u043a \u043f\u043e\u0442\u0435\u0440\u0435 \u0432\u0441\u0435\u0445 \u0434\u0430\u043d\u043d\u044b\u0445. \u0414\u043b\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e\u0431 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 Manticore \u0432 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0439 \u0441\u0440\u0435\u0434\u0435, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0441\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043d\u0438\u0436\u0435.\n\n\u041e\u0431\u0440\u0430\u0437 \u043f\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0441 \u043f\u0440\u0438\u043c\u0435\u0440\u043e\u043c \u0442\u0430\u0431\u043b\u0438\u0446\u044b, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043c\u043e\u0436\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c:\n\nCODE_BLOCK_1\n\n\u0422\u0430\u043a\u0436\u0435, mysql-\u043a\u043b\u0438\u0435\u043d\u0442 \u0438\u043c\u0435\u0435\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043f\u0440\u0438\u043c\u0435\u0440\u043e\u0432 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0432 \u0441\u0432\u043e\u0435\u0439 \u0438\u0441\u0442\u043e\u0440\u0438\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043d\u0430 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0439 \u0432\u044b\u0448\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u0435, \u043f\u0440\u043e\u0441\u0442\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043a\u043b\u0430\u0432\u0438\u0448\u0438 \u0412\u0432\u0435\u0440\u0445/\u0412\u043d\u0438\u0437 \u0432 \u043a\u043b\u0438\u0435\u043d\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u0443\u0432\u0438\u0434\u0435\u0442\u044c \u0438 \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0438\u0445.\n\n### \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0432 production\n\n#### \u041f\u043e\u0440\u0442\u044b \u0438 \u0442\u043e\u0447\u043a\u0438 \u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f\n\n\u0414\u043b\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u0430\u043f\u043a\u0430 `/var/lib/manticore/` \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0441\u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0430 \u043d\u0430 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e\u0435 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435 \u0438\u043b\u0438 \u0434\u0440\u0443\u0433\u043e\u0439 \u0436\u0435\u043b\u0430\u0435\u043c\u044b\u0439 \u043c\u0435\u0445\u0430\u043d\u0438\u0437\u043c \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f.\n\n\u0424\u0430\u0439\u043b \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u0432\u043d\u0443\u0442\u0440\u0438 \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u0430 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u043f\u043e \u043f\u0443\u0442\u0438 `/etc/manticoresearch/manticore.conf`. \u0414\u043b\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0445 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a \u044d\u0442\u043e\u0442 \u0444\u0430\u0439\u043b \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0441\u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d \u043d\u0430 \u0432\u0430\u0448 \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b.\n\n\u041f\u043e\u0440\u0442\u044b: 9306/9308/9312 \u0434\u043b\u044f SQL/HTTP/Binary, \u043f\u0440\u043e\u0431\u0440\u0430\u0441\u044b\u0432\u0430\u0439\u0442\u0435 \u0438\u0445 \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0442\u043e\u0433\u043e, \u043a\u0430\u043a \u0432\u044b \u0441\u043e\u0431\u0438\u0440\u0430\u0435\u0442\u0435\u0441\u044c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c Manticore. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440:\n\nCODE_BLOCK_2\n\n\u0438\u043b\u0438\n\nCODE_BLOCK_3\n\n\u0423\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044c, \u0447\u0442\u043e \u0443\u0434\u0430\u043b\u0438\u043b\u0438 `127.0.0.1:`, \u0435\u0441\u043b\u0438 \u0445\u043e\u0442\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u0440\u0442\u044b \u0431\u044b\u043b\u0438 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u0434\u043b\u044f \u0432\u043d\u0435\u0448\u043d\u0438\u0445 \u0445\u043e\u0441\u0442\u043e\u0432.\n\n#### Manticore Columnar Library \u0438 Manticore Buddy\n\nDocker-\u043e\u0431\u0440\u0430\u0437 Manticore Search \u043f\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0441 \u043f\u0440\u0435\u0434\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u043c\u0438 [Manticore Columnar Library](https://github.com/manticoresoftware/columnar) \u0438 [Manticore Buddy](https://github.com/manticoresoftware/manticoresearch-buddy)\n\n#### Docker-compose\n\n\u0412\u043e \u043c\u043d\u043e\u0433\u0438\u0445 \u0441\u043b\u0443\u0447\u0430\u044f\u0445 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0437\u0430\u0445\u043e\u0442\u0435\u0442\u044c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c Manticore \u0432\u043c\u0435\u0441\u0442\u0435 \u0441 \u0434\u0440\u0443\u0433\u0438\u043c\u0438 \u043e\u0431\u0440\u0430\u0437\u0430\u043c\u0438, \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u043c\u0438 \u0432 YAML-\u0444\u0430\u0439\u043b\u0435 Docker Compose. \u041d\u0438\u0436\u0435 \u043f\u0440\u0438\u0432\u0435\u0434\u0435\u043d\u0430 \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u043c\u0430\u044f \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u0434\u043b\u044f Manticore Search \u0432 \u0444\u0430\u0439\u043b\u0435 docker-compose.yml:\n\nCODE_BLOCK_4\n\n\u041f\u043e\u043c\u0438\u043c\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u043f\u0440\u043e\u0431\u0440\u043e\u0448\u0435\u043d\u043d\u044b\u0445 \u043f\u043e\u0440\u0442\u043e\u0432 9306 \u0438 9308, \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u043e\u0439\u0442\u0438 \u0432 \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440, \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0432 `docker-compose exec manticore mysql`.\n\n#### HTTP \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\n\nHTTP \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u043d\u0430 \u043f\u043e\u0440\u0442\u0443 9308. \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u043f\u043e\u0440\u0442 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e \u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e curl.:\n\nCODE_BLOCK_5\n\n<!-- example create -->\n\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0443:\n\n<!-- request JSON -->\nCODE_BLOCK_6\n<!-- end -->\n<!-- example insert -->\n\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442:\n\n<!-- request JSON -->\nCODE_BLOCK_7\n<!-- end -->\n<!-- example search -->\n\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u043f\u043e\u0438\u0441\u043a:\n\n<!-- request JSON -->\nCODE_BLOCK_8\n<!-- end -->\n\n### \u041b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\n\n\u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0441\u0435\u0440\u0432\u0435\u0440 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d \u043d\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0443 \u0441\u0432\u043e\u0438\u0445 \u043b\u043e\u0433\u043e\u0432 \u0432 `/dev/stdout`, \u0447\u0442\u043e \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441 \u0445\u043e\u0441\u0442\u0430 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e:\n\nCODE_BLOCK_9\n\n\u041b\u043e\u0433 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0435\u0440\u0435\u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d \u0432 \u043b\u043e\u0433 Docker \u043f\u0443\u0442\u0435\u043c \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0438 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 `QUERY_LOG_TO_STDOUT=true`.\n\n#### \u041a\u043b\u0430\u0441\u0442\u0435\u0440 \u0438\u0437 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0443\u0437\u043b\u043e\u0432 \u0441 \u0440\u0435\u043f\u043b\u0438\u043a\u0430\u0446\u0438\u0435\u0439\n\n\u0412\u043e\u0442 \u043f\u0440\u043e\u0441\u0442\u043e\u0439 `docker-compose.yml` \u0434\u043b\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0430 \u0438\u0437 \u0434\u0432\u0443\u0445 \u0443\u0437\u043b\u043e\u0432:\n\nCODE_BLOCK_10\n* \u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u0435 \u0435\u0433\u043e: `docker-compose up`\n* \u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u043a\u043b\u0430\u0441\u0442\u0435\u0440:\nCODE_BLOCK_11\n* \u041f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u0435\u0441\u044c \u043a \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0443 \u043d\u0430 2-\u043c \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u0435\nCODE_BLOCK_12\n* \u0415\u0441\u043b\u0438 \u0432\u044b \u0442\u0435\u043f\u0435\u0440\u044c \u0432\u0435\u0440\u043d\u0435\u0442\u0435\u0441\u044c \u043a \u043f\u0435\u0440\u0432\u043e\u043c\u0443 \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u0443, \u0432\u044b \u0443\u0432\u0438\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u0443\u044e \u0437\u0430\u043f\u0438\u0441\u044c:\nCODE_BLOCK_13\n\n### \u0411\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0430 \u043f\u0430\u043c\u044f\u0442\u0438 \u0438 \u043b\u0438\u043c\u0438\u0442\u044b\n\n\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u043f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043b\u0438\u043c\u0438\u0442\u044b Docker \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0434\u043b\u044f \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u0430 Manticore:\n\nCODE_BLOCK_14\n\n\u0414\u043b\u044f \u043d\u0430\u0438\u043b\u0443\u0447\u0448\u0435\u0439 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b \u0442\u0430\u0431\u043b\u0438\u0446 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \"\u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d\u044b \u0432 \u043f\u0430\u043c\u044f\u0442\u0438\" (mlocked). \u041a\u043e\u0433\u0434\u0430 Manticore \u0437\u0430\u043f\u0443\u0449\u0435\u043d \u043f\u043e\u0434 Docker, \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u0443 \u0442\u0440\u0435\u0431\u0443\u044e\u0442\u0441\u044f \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u0440\u0438\u0432\u0438\u043b\u0435\u0433\u0438\u0438 \u0434\u043b\u044f \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u044f \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0438 \u043f\u0430\u043c\u044f\u0442\u0438. \u041f\u0440\u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0435 \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u0430 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043e\u043f\u0446\u0438\u0438:\n\nCODE_BLOCK_15\n\n### \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 Manticore Search \u0441 Docker\n\n\u0415\u0441\u043b\u0438 \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c Manticore \u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0439 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0435\u0439, \u0432\u043a\u043b\u044e\u0447\u0430\u044e\u0449\u0435\u0439 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0442\u0430\u0431\u043b\u0438\u0446, \u0432\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u0441\u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e \u0432 \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440:\n\nCODE_BLOCK_16\n\n\u0423\u0447\u0438\u0442\u044b\u0432\u0430\u0439\u0442\u0435, \u0447\u0442\u043e Manticore search \u0432\u043d\u0443\u0442\u0440\u0438 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442\u0441\u044f \u043f\u043e\u0434 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c `manticore`. \u041e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u0441 \u0444\u0430\u0439\u043b\u0430\u043c\u0438 \u0442\u0430\u0431\u043b\u0438\u0446 (\u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0438\u043b\u0438 \u0440\u043e\u0442\u0430\u0446\u0438\u044f plain-\u0442\u0430\u0431\u043b\u0438\u0446) \u0442\u0430\u043a\u0436\u0435 \u0434\u043e\u043b\u0436\u043d\u044b \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c\u0441\u044f \u043f\u043e\u0434 `manticore`. \u0412 \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u0444\u0430\u0439\u043b\u044b \u0431\u0443\u0434\u0443\u0442 \u0441\u043e\u0437\u0434\u0430\u043d\u044b \u043f\u043e\u0434 `root`, \u0438 \u043f\u043e\u0438\u0441\u043a\u043e\u0432\u044b\u0439 \u0434\u0435\u043c\u043e\u043d \u043d\u0435 \u0431\u0443\u0434\u0435\u0442 \u0438\u043c\u0435\u0442\u044c \u043f\u0440\u0430\u0432 \u043d\u0430 \u0438\u0445 \u043e\u0442\u043a\u0440\u044b\u0442\u0438\u0435. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0432\u043e\u0442 \u043a\u0430\u043a \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0440\u043e\u0442\u0430\u0446\u0438\u044e \u0432\u0441\u0435\u0445 \u0442\u0430\u0431\u043b\u0438\u0446:\n\nCODE_BLOCK_17\n\n\u0412\u044b \u0442\u0430\u043a\u0436\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u0437\u0430\u0434\u0430\u0442\u044c \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 `searchd` \u0438 `common`, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f Docker.\n\n\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0434\u043e\u043b\u0436\u043d\u044b \u0438\u043c\u0435\u0442\u044c \u043f\u0440\u0435\u0444\u0438\u043a\u0441 \u0441 \u0438\u043c\u0435\u043d\u0435\u043c \u0438\u0445 \u0441\u0435\u043a\u0446\u0438\u0438, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0434\u043b\u044f `mysql_version_string` \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f \u0434\u043e\u043b\u0436\u043d\u0430 \u043d\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u0441\u044f `searchd_mysql_version_string`:\n\nCODE_BLOCK_18\n\n\u0412 \u0441\u043b\u0443\u0447\u0430\u0435 \u0434\u0438\u0440\u0435\u043a\u0442\u0438\u0432\u044b `listen`, \u043d\u043e\u0432\u044b\u0435 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044b \u043f\u0440\u043e\u0441\u043b\u0443\u0448\u0438\u0432\u0430\u043d\u0438\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 Docker `searchd_listen` \u0432 \u0434\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u043a \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u043c. \u041c\u043e\u0436\u043d\u043e \u043e\u0431\u044a\u044f\u0432\u0438\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432, \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0445 \u0442\u043e\u0447\u043a\u043e\u0439 \u0441 \u0437\u0430\u043f\u044f\u0442\u043e\u0439 (\"|\"). \u0414\u043b\u044f \u043f\u0440\u043e\u0441\u043b\u0443\u0448\u0438\u0432\u0430\u043d\u0438\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0430 \u0441\u0435\u0442\u0435\u0432\u043e\u043c \u0430\u0434\u0440\u0435\u0441\u0435 \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c `$ip` (\u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0439 \u0432\u043d\u0443\u0442\u0440\u0438 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e `hostname -i`) \u043a\u0430\u043a \u043f\u0441\u0435\u0432\u0434\u043e\u043d\u0438\u043c \u0430\u0434\u0440\u0435\u0441\u0430.\n\n\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, `-e searchd_listen='9316:http|9307:mysql|$ip:5443:mysql_vip'` \u0434\u043e\u0431\u0430\u0432\u0438\u0442 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 SQL-\u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 \u043d\u0430 \u043f\u043e\u0440\u0442\u0443 9307, VIP-\u0441\u043b\u0443\u0448\u0430\u0442\u0435\u043b\u044c SQL \u043d\u0430 \u043f\u043e\u0440\u0442\u0443 5443, \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0449\u0438\u0439 \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0430 IP \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u0430, \u0438 HTTP-\u0441\u043b\u0443\u0448\u0430\u0442\u0435\u043b\u044c \u043d\u0430 \u043f\u043e\u0440\u0442\u0443 9316, \u0432 \u0434\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u043a \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u043c \u043d\u0430 9306 \u0438 9308 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e.\n\nCODE_BLOCK_19\n\n#### \u0424\u043b\u0430\u0433\u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\n\n\u0427\u0442\u043e\u0431\u044b \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c Manticore \u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u043c\u0438 \u0444\u043b\u0430\u0433\u0430\u043c\u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0430, \u0443\u043a\u0430\u0436\u0438\u0442\u0435 \u0438\u0445 \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u043e\u0432 \u043f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 docker run. \u0423\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044c, \u0447\u0442\u043e \u0432\u044b \u043d\u0435 \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u0443 `searchd` \u0438 \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0435 \u0444\u043b\u0430\u0433 `--nodetach`. \u0412\u043e\u0442 \u043f\u0440\u0438\u043c\u0435\u0440:\nCODE_BLOCK_20\n\n#### \u0417\u0430\u043f\u0443\u0441\u043a \u043f\u043e\u0434 \u043d\u0435\u043f\u0440\u0438\u0432\u0438\u043b\u0435\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c\n\u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u043f\u0440\u043e\u0446\u0435\u0441\u0441 Manticore `searchd` \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442\u0441\u044f \u043f\u043e\u0434 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c `manticore` \u0432\u043d\u0443\u0442\u0440\u0438 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430, \u043d\u043e \u0441\u043a\u0440\u0438\u043f\u0442, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u043f\u0440\u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0435 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430, \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442\u0441\u044f \u043f\u043e\u0434 \u0432\u0430\u0448\u0438\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c Docker \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e, \u043a\u043e\u0442\u043e\u0440\u044b\u043c \u0432 \u0431\u043e\u043b\u044c\u0448\u0438\u043d\u0441\u0442\u0432\u0435 \u0441\u043b\u0443\u0447\u0430\u0435\u0432 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f `root`. \u0415\u0441\u043b\u0438 \u044d\u0442\u043e \u043d\u0435 \u0442\u043e, \u0447\u0442\u043e \u0432\u0430\u043c \u043d\u0443\u0436\u043d\u043e, \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c `docker ... --user manticore` \u0438\u043b\u0438 `user: manticore` \u0432 yaml-\u0444\u0430\u0439\u043b\u0435 docker compose, \u0447\u0442\u043e\u0431\u044b \u0432\u0441\u0435 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u0434 `manticore`. \u0427\u0438\u0442\u0430\u0439\u0442\u0435 \u043d\u0438\u0436\u0435 \u043e \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0439 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0435 \u0441 \u043f\u0440\u0430\u0432\u0430\u043c\u0438 \u043d\u0430 \u0442\u043e\u043c, \u0441 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0441\u0442\u043e\u043b\u043a\u043d\u0443\u0442\u044c\u0441\u044f, \u0438 \u043a\u0430\u043a \u0435\u0435 \u0440\u0435\u0448\u0438\u0442\u044c."
        },
        "is_code_or_comment": false,
        "model": "deepseek/deepseek-v3.2",
        "updated_at": 1766374230
    },
    "__meta": {
        "source_text": "# Starting and using Manticore in Docker\n\nThe image is based on [current release of Manticore package](https://manticoresearch.com/install/).\n\n[comment]: # (the below should be in sync with https://github.com/manticoresoftware/docker/blob/master/README.md)\n\nThe default configuration includes a sample Real-Time table and listens on the default ports:\n\n  * `9306` for connections from a MySQL client\n  * `9308` for connections via HTTP\n  * `9312` for connections via a binary protocol (e.g. in case you run a cluster)\n\nThe image comes with libraries for easy indexing data from MySQL, PostgreSQL, XML and CSV files.\n\n## How to run Manticore Search Docker image\n\n### Quick usage\n\nThe below is the simplest way to start Manticore in a container and log in to it via the mysql client:\n\n```bash\ndocker run --name manticore --rm -d manticoresearch/manticore && echo \"Waiting for Manticore docker to start. Consider mapping the data_dir to make it start faster next time\" && until docker logs manticore 2>&1 | grep -q \"accepting connections\"; do sleep 1; echo -n .; done && echo && docker exec -it manticore mysql && docker stop manticore\n```\n\nNote that upon exiting the MySQL client, the Manticore container will be stopped and removed, resulting in no saved data. For information on using Manticore in a production environment, please see below.\n\nThe image comes with a sample table that can be loaded like this:\n\n```sql\nmysql> source /sandbox.sql\n```\n\nAlso, the mysql client has several sample queries in its history that you can run on the above table, just use Up/Down keys in the client to see and run them.\n\n### Production use\n\n\n#### Ports and mounting points\n\nFor data persistence the folder `/var/lib/manticore/` should be mounted to local storage or other desired storage engine.\n\nThe configuration file inside the instance is located at   `/etc/manticoresearch/manticore.conf`. For custom settings, this file should be mounted to your own configuration file.\n\nThe ports are 9306/9308/9312 for SQL/HTTP/Binary, expose them depending on how you are going to use Manticore. For example:\n\n```bash\ndocker run --name manticore -v $(pwd)/data:/var/lib/manticore -p 127.0.0.1:9306:9306 -p 127.0.0.1:9308:9308 -d manticoresearch/manticore\n```\n\nor\n\n```bash\ndocker run --name manticore -v $(pwd)/manticore.conf:/etc/manticoresearch/manticore.conf -v $(pwd)/data:/var/lib/manticore/ -p 127.0.0.1:9306:9306 -p 127.0.0.1:9308:9308 -d manticoresearch/manticore\n```\n\nMake sure to remove `127.0.0.1:` if you want the ports to be available for external hosts.\n\n#### Manticore Columnar Library and Manticore Buddy\n\nThe Manticore Search Docker image comes with pre-installed [Manticore Columnar Library](https://github.com/manticoresoftware/columnar) and [Manticore Buddy](https://github.com/manticoresoftware/manticoresearch-buddy)\n\n#### Docker-compose\n\nIn many cases, you may want to use Manticore in conjunction with other images specified in a Docker Compose YAML file. Below is the minimal recommended configuration for Manticore Search in a docker-compose.yml file:\n\n```yaml\nversion: '2.2'\n\nservices:\n  manticore:\n    container_name: manticore\n    image: manticoresearch/manticore\n    restart: always\n    ports:\n      - 127.0.0.1:9306:9306\n      - 127.0.0.1:9308:9308\n    ulimits:\n      nproc: 65535\n      nofile:\n         soft: 65535\n         hard: 65535\n      memlock:\n        soft: -1\n        hard: -1\n    volumes:\n      - ./data:/var/lib/manticore\n#      - ./manticore.conf:/etc/manticoresearch/manticore.conf # uncomment if you use a custom config\n```\n\nBesides using the exposed ports 9306 and 9308, you can log into the instance by running `docker-compose exec manticore mysql`.\n\n#### HTTP protocol\n\nHTTP protocol is exposed on port 9308. You can map the port locally and connect using curl.:\n\n```bash\ndocker run --name manticore -p 9308:9308 -d manticoresearch/manticore\n```\n\n<!-- example create -->\nCreate a table:\n\n<!-- request JSON -->\n```json\nPOST /cli -d 'CREATE TABLE testrt ( title text, content text, gid integer)'\n```\n<!-- end -->\n<!-- example insert -->\nInsert a document:\n\n<!-- request JSON -->\n```json\nPOST /insert\n-d'{\"table\":\"testrt\",\"id\":1,\"doc\":{\"title\":\"Hello\",\"content\":\"world\",\"gid\":1}}'\n```\n<!-- end -->\n<!-- example search -->\nPerform a simple search:\n\n<!-- request JSON -->\n```json\nPOST /search -d '{\"table\":\"testrt\",\"query\":{\"match\":{\"*\":\"hello world\"}}}'\n```\n<!-- end -->\n\n### Logging\n\nBy default, the server is set to send its logging to `/dev/stdout`, which can be viewed from the host with:\n\n\n```bash\ndocker logs manticore\n```\n\nThe query log can be diverted to Docker log by passing the variable `QUERY_LOG_TO_STDOUT=true`.\n\n\n#### Multi-node cluster with replication\n\nHere is a simple `docker-compose.yml` for defining a two node cluster:\n\n```yaml\nversion: '2.2'\n\nservices:\n\n  manticore-1:\n    image: manticoresearch/manticore\n    restart: always\n    ulimits:\n      nproc: 65535\n      nofile:\n         soft: 65535\n         hard: 65535\n      memlock:\n        soft: -1\n        hard: -1\n    networks:\n      - manticore\n  manticore-2:\n    image: manticoresearch/manticore\n    restart: always\n    ulimits:\n      nproc: 65535\n      nofile:\n        soft: 65535\n        hard: 65535\n      memlock:\n        soft: -1\n        hard: -1\n    networks:\n      - manticore\nnetworks:\n  manticore:\n    driver: bridge\n```\n* Start it: `docker-compose up`\n* Create a cluster:\n  ```sql\n  $ docker-compose exec manticore-1 mysql\n\n  mysql> CREATE TABLE testrt ( title text, content text, gid integer);\n\n  mysql> CREATE CLUSTER posts;\n  Query OK, 0 rows affected (0.24 sec)\n\n  mysql> ALTER CLUSTER posts ADD testrt;\n  Query OK, 0 rows affected (0.07 sec)\n\n  MySQL [(none)]> exit\n  Bye\n  ```\n* Join to the the cluster on the 2nd instance\n  ```sql\n  $ docker-compose exec manticore-2 mysql\n\n  mysql> JOIN CLUSTER posts AT 'manticore-1:9312';\n  mysql> INSERT INTO posts:testrt(title,content,gid)  VALUES('hello','world',1);\n  Query OK, 1 row affected (0.00 sec)\n\n  MySQL [(none)]> exit\n  Bye\n  ```\n* If you now go back to the first instance you'll see the new record:\n  ```sql\n  $ docker-compose exec manticore-1 mysql\n\n  MySQL [(none)]> select * from testrt;\n  +---------------------+------+-------+---------+\n  | id                  | gid  | title | content |\n  +---------------------+------+-------+---------+\n  | 3891565839006040065 |    1 | hello | world   |\n  +---------------------+------+-------+---------+\n  1 row in set (0.00 sec)\n\n  MySQL [(none)]> exit\n  Bye\n  ```\n\n### Memory locking and limits\n\nIt's recommended to overwrite the default ulimits of docker for the Manticore instance:\n\n```bash\n --ulimit nofile=65536:65536\n```\n\nFor best performance, table components can be \"mlocked\" into memory. When Manticore is run under Docker, the instance requires additional privileges to allow memory locking. The following options must be added when running the instance:\n\n```bash\n  --cap-add=IPC_LOCK --ulimit memlock=-1:-1\n```\n\n### Configuring Manticore Search with Docker\n\nIf you want to run Manticore with a custom configuration that includes table definitions, you will need to mount the configuration to the instance:\n\n```bash\ndocker run --name manticore -v $(pwd)/manticore.conf:/etc/manticoresearch/manticore.conf -v $(pwd)/data/:/var/lib/manticore -p 127.0.0.1:9306:9306 -d manticoresearch/manticore\n```\n\nTake into account that Manticore search inside the container is run under user `manticore`. Performing operations with table files (like creating or rotating plain tables) should be also done under `manticore`. Otherwise the files will be created under `root` and the search daemon won't have rights to open them. For example here is how you can rotate all tables:\n\n```bash\ndocker exec -it manticore gosu manticore indexer --all --rotate\n```\n\nYou can also set individual `searchd` and `common` configuration settings using Docker environment variables.\n\nThe settings must be prefixed with their section name, example for in case of `mysql_version_string` the variable must be named `searchd_mysql_version_string`:\n\n\n```bash\ndocker run --name manticore  -p 127.0.0.1:9306:9306  -e searchd_mysql_version_string='5.5.0' -d manticoresearch/manticore\n```\n\nIn case of the `listen` directive, new listening interfaces using the Docker variable `searchd_listen`  in addition to the default ones. Multiple interfaces can be declared, separated by a semi-colon (\"|\"). To listen only on a network address, the `$ip` (retrieved internally from `hostname -i`) can be used as address alias.\n\nFor example `-e searchd_listen='9316:http|9307:mysql|$ip:5443:mysql_vip'` will add an additional SQL interface on port 9307, an SQL VIP listener on port 5443 running only on the instance's IP, and an HTTP listener on port 9316, in addition to the defaults on 9306 and 9308, respectively.\n\n```bash\n$ docker run --rm -p 1188:9307  -e searchd_mysql_version_string='5.5.0' -e searchd_listen='9316:http|9307:mysql|$ip:5443:mysql_vip'  manticore\n[Mon Aug 17 07:31:58.719 2020] [1] using config file '/etc/manticoresearch/manticore.conf' (9130 chars)...\nlistening on all interfaces for http, port=9316\nlistening on all interfaces for mysql, port=9307\nlistening on 172.17.0.17:5443 for VIP mysql\nlistening on all interfaces for mysql, port=9306\nlistening on UNIX socket /var/run/mysqld/mysqld.sock\nlistening on 172.17.0.17:9312 for sphinx\nlistening on all interfaces for http, port=9308\nprereading 0 indexes\nprereaded 0 indexes in 0.000 sec\naccepting connections\n```\n\n#### Startup flags\n\nTo start Manticore with custom startup flags, specify them as arguments when using docker run. Ensure you do not include the `searchd` command and include the `--nodetach` flag. Here's an example:\n```bash\ndocker run --name manticore --rm manticoresearch/manticore:latest --replay-flags=ignore-trx-errors --nodetach\n```\n\n#### Running under non-root\nBy default, the main Manticore process `searchd` is running under user `manticore` inside the container, but the script which runs on starting the container is run under your default docker user which in most cases is `root`. If that's not what you want you can use `docker ... --user manticore` or `user: manticore` in docker compose yaml to make everything run under `manticore`. Read below about possible volume permissions issue you can get and how to solve it.\n\n#### Creating plain tables on startup\nTo build plain tables specified in your custom configuration file, you can use the `CREATE_PLAIN_TABLES=1` environment variable. It will execute `indexer --all` before Manticore starts. This is useful if you don't use volumes, and your tables are easy to recreate.\n```bash\ndocker run -e CREATE_PLAIN_TABLES=1 --name manticore -v $(pwd)/manticore.conf:/etc/manticoresearch/manticore.conf -p 9306:9306 -p 9308:9308 -d manticoresearch/manticore\n```\n\n### Troubleshooting\n\n#### Permissions issue with a mounted volume\n\nIn case you are running Manticore Search docker under non-root (using `docker ... --user manticore` or `user: manticore` in docker compose yaml), you can face a permissions issue, for example:\n```bash\nFATAL: directory /var/lib/manticore write error: failed to open /var/lib/manticore/tmp: Permission denied\n```\n\nThis can happen because the user which is used to run processes inside the container may have no permissions to modify the directory you have mounted to the container. To fix it you can `chown` or `chmod` the mounted directory. If you run the container under user `manticore` you need to do:\n```bash\nchown -R 999:999 data\n```\n\nsince user `manticore` has ID 999 inside the container.\n\n<!-- proofread -->\n\n",
        "updated_at": 1768530797,
        "source_md5": "2bb994024bc95687d7c279ef1d633b3e"
    }
}