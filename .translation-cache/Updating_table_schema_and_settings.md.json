{
  "6503aa21d6cb294c2bbf0322c46e741c5dca396135ff9f3d838edb17770fa12b": {
    "original": "<!-- request Example -->\n\nCODE_BLOCK_18\n\n<!-- end -->\n\n<!-- proofread -->",
    "translations": {
      "chinese": "<!-- request Example -->\n\nCODE_BLOCK_18\n\n<!-- end -->\n\n<!-- proofread -->",
      "russian": "<!-- request Example -->\n\nCODE_BLOCK_18\n\n<!-- end -->\n\n<!-- proofread -->"
    },
    "is_code_or_comment": true
  },
  "587a8e49604976188a9baea9bd73da4980f221a9ac23c2c763d5c51b287c0ebc": {
    "original": "# Updating table schema\n\n## Updating table schema in RT mode\n\n<!-- example ALTER -->\n\nCODE_BLOCK_0\n\nThis feature only supports adding one field at a time for RT tables or the expansion of an `int` column to `bigint`. The supported data types are:\n\n* `int` - integer attribute\n\n* `timestamp` - timestamp attribute\n\n* `bigint` - big integer attribute\n\n* `float` - float attribute\n\n* `bool` - boolean attribute\n\n* `multi` - multi-valued integer attribute\n\n* `multi64` - multi-valued bigint attribute\n\n* `json` - json attribute\n\n* `string` / `text attribute` / `string attribute` - string attribute\n\n* `text` / `text indexed stored` / `string indexed stored` - full-text indexed field with original value stored in docstore\n\n* `text indexed` / `string indexed` - full-text indexed field, indexed only (the original value is not stored in docstore)\n\n* `text indexed attribute` / `string indexed attribute` - full text indexed field + string attribute (not storing the original value in docstore)\n\n* `text stored` / `string stored` - the value will be only stored in docstore, not full-text indexed, not a string attribute\n\n* adding `engine='columnar'` to any attribute (except for json) will make it stored in the [columnar storage](Creating_a_table/Data_types.md#Row-wise-and-columnar-attribute-storages)\n\n#### Important notes:\n\n* ❗It's recommended to **backup table files** before `ALTER`ing it to avoid data corruption in case of a sudden power interruption or other similar issues.\n\n* Querying a table is impossible while a column is being added.\n\n* Newly created attribute's values are set to 0.\n\n* `ALTER` will not work for distributed tables and tables without any attributes.\n\n* You can't delete the `id` column.\n\n* When dropping a field which is both a full-text field and a string attribute the first `ALTER DROP` drops the attribute, the second one drops the full-text field.\n\n* Adding/dropping full-text field is only supported in the [RT mode](Read_this_first.md#Real-time-mode-vs-plain-mode).\n\n<!-- request Example -->\n\nCODE_BLOCK_1\n\n<!-- end -->\n\n## Updating table FT settings in RT mode\n\n<!-- example ALTER FT -->\n\nCODE_BLOCK_2\n\nYou can use `ALTER` to modify the full-text settings of your table in  [RT mode](Read_this_first.md#Real-time-mode-vs-plain-mode). However, it only affects new documents and not existing ones.\n\nExample:\n\n* create a table with a full-text field and `charset_table` that allows only 3 searchable characters: `a`, `b` and `c`.\n\n* then we insert document 'abcd' and find it by query `abcd`, the `d` just gets ignored since it's not in the `charset_table` array\n\n* then we understand, that we want `d` to be searchable too, so we add it with help of `ALTER`\n\n* but the same query `where match('abcd')` still says it searched by `abc`, because the existing document remembers previous contents of `charset_table`\n\n* then we add another document `abcd` and search by `abcd` again\n\n* now it finds the both documents and `show meta` says it used two keywords: `abc` (to find the old document) and `abcd` (for the new one).\n\n<!-- request Example -->\n\nCODE_BLOCK_3\n\n<!-- end -->\n\n## Renaming a real-time table\n\n<!-- example Renaming RT tables -->\n\nYou can change the name of a real-time table in RT mode.\n\nCODE_BLOCK_4\n\n> NOTE: Renaming a real-time table requires [Manticore Buddy](Installation/Manticore_Buddy.md). If it doesn't work, make sure Buddy is installed.\n\n<!-- request Example -->\n\nCODE_BLOCK_5\n\n<!-- response Example -->\n\nCODE_BLOCK_6\n\n<!-- end -->\n\n## Updating table FT settings in plain mode\n\n<!-- example ALTER RECONFIGURE -->\n\nCODE_BLOCK_7\n\n`ALTER` can also reconfigure an RT table in the [plain mode](Creating_a_table/Local_tables.md#Defining-table-schema-in-config-%28Plain-mode%29), so that new tokenization, morphology and other text processing settings from the configuration file take effect for new documents. Note, that the existing document will be left intact. Internally, it forcibly saves the current RAM chunk as a new disk chunk and adjusts the table header, so that new documents are tokenized using the updated full-text settings.\n\n<!-- request Example -->\n\nCODE_BLOCK_8\n\n<!-- end -->\n\n## Rebuilding a secondary index\n\n<!-- example ALTER REBUILD SECONDARY -->\n\nCODE_BLOCK_9\n\nYou can also use `ALTER` to rebuild secondary indexes in a given table. Sometimes, a secondary index can be disabled for the entire table or for one or multiple attributes within the table:\n\n* When an attribute is updated, its secondary index gets disabled.\n\n* If Manticore loads a table with an old version of secondary indexes that is no longer supported, the secondary indexes will be disabled for the entire table.\n\n`ALTER TABLE table REBUILD SECONDARY` rebuilds secondary indexes from attribute data and enables them again.\n\nAdditionally, an old version of secondary indexes may be supported but will lack certain features. `REBUILD SECONDARY` can be used to update secondary indexes.\n\n<!-- request Example -->\n\nCODE_BLOCK_10\n\n<!-- response Example -->\n\nCODE_BLOCK_11\n\n<!-- end -->\n\n## Rebuilding a KNN index\n\n<!-- example ALTER REBUILD KNN -->\n\nCODE_BLOCK_12\n\nThe command reprocesses all vector data in the table and rebuilds the KNN index from scratch.\n\n<!-- request Example -->\n\nCODE_BLOCK_13\n\n<!-- response Example -->\n\nCODE_BLOCK_14\n\n<!-- end -->\n\n## Updating attribute API key (for embeddings generation) in RT mode\n\n<!-- example api_key -->\n\n`ALTER` can be used to modify an API key when a remote model is used for auto-embeddings:\n\nCODE_BLOCK_15\n\n<!-- request Example -->\n\nCODE_BLOCK_16\n\n<!-- end -->\n\n## Changing a distributed table\n\n<!-- example local_dist -->\n\nTo change the list of local or remote nodes in a distributed table, follow the same syntax you used to [create the table](Creating_a_table/Creating_a_distributed_table/Creating_a_local_distributed_table.md#Creating-a-local-distributed-table). Just replace `CREATE` with `ALTER` in the command and remove `type='distributed'`:\n\nCODE_BLOCK_17\n\n> NOTE: Changing the schema of a distributed table online requires [Manticore Buddy](Installation/Manticore_Buddy.md). If it doesn't work, make sure Buddy is installed.",
    "translations": {
      "chinese": "# 更新表结构\n\n## 在 RT 模式下更新表结构\n\n<!-- example ALTER -->\n\nCODE_BLOCK_0\n\n此功能仅支持一次为 RT 表添加一个字段，或将 `int` 列扩展为 `bigint`。支持的数据类型有：\n\n* `int` - 整数属性\n\n* `timestamp` - 时间戳属性\n\n* `bigint` - 大整数属性\n\n* `float` - 浮点属性\n\n* `bool` - 布尔属性\n\n* `multi` - 多值整数属性\n\n* `multi64` - 多值大整数属性\n\n* `json` - json 属性\n\n* `string` / `text attribute` / `string attribute` - 字符串属性\n\n* `text` / `text indexed stored` / `string indexed stored` - 全文索引字段，原始值存储在文档存储中\n\n* `text indexed` / `string indexed` - 仅全文索引字段（原始值不存储在文档存储中）\n\n* `text indexed attribute` / `string indexed attribute` - 全文索引字段 + 字符串属性（不在文档存储中存储原始值）\n\n* `text stored` / `string stored` - 仅存储在文档存储中，不做全文索引，也不是字符串属性\n\n* 给任何属性（除 json 外）添加 `engine='columnar'` 会使其存储在[列存储](Creating_a_table/Data_types.md#Row-wise-and-columnar-attribute-storages)中\n\n#### 重要说明：\n\n* ❗建议在执行 `ALTER` 之前**备份表文件**，以防突然断电或其他类似问题导致数据损坏。\n\n* 添加列时无法查询表。\n\n* 新创建的属性值默认为 0。\n\n* `ALTER` 不适用于分布式表和没有任何属性的表。\n\n* 不能删除 `id` 列。\n\n* 删除既是全文字段又是字符串属性的字段时，第一次 `ALTER DROP` 删除属性，第二次删除全文字段。\n\n* 添加/删除全文字段仅支持在[RT 模式](Read_this_first.md#Real-time-mode-vs-plain-mode)下。\n\n<!-- request Example -->\n\nCODE_BLOCK_1\n\n<!-- end -->\n\n## 在 RT 模式下更新表全文设置\n\n<!-- example ALTER FT -->\n\nCODE_BLOCK_2\n\n你可以使用 `ALTER` 修改表在[RT 模式](Read_this_first.md#Real-time-mode-vs-plain-mode)下的全文设置。但这只影响新文档，已有文档不受影响。\n\n示例：\n\n* 创建一个带有全文字段和只允许 3 个可搜索字符（`a`、`b` 和 `c`）的 `charset_table` 的表。\n\n* 然后插入文档 'abcd' 并用查询 `abcd` 查找，`d` 被忽略，因为它不在 `charset_table` 数组中。\n\n* 之后我们想让 `d` 也可搜索，于是用 `ALTER` 添加它。\n\n* 但同样的查询 `where match('abcd')` 仍然只搜索了 `abc`，因为已有文档记住了之前的 `charset_table` 内容。\n\n* 然后我们添加另一个文档 `abcd` 并再次用 `abcd` 查询。\n\n* 现在它找到了两个文档，`show meta` 显示使用了两个关键词：`abc`（用于旧文档）和 `abcd`（用于新文档）。\n\n<!-- request Example -->\n\nCODE_BLOCK_3\n\n<!-- end -->\n\n## 重命名实时表\n\n<!-- example Renaming RT tables -->\n\n你可以在 RT 模式下更改实时表的名称。\n\nCODE_BLOCK_4\n\n> 注意：重命名实时表需要 [Manticore Buddy](Installation/Manticore_Buddy.md)。如果不生效，请确保 Buddy 已安装。\n\n<!-- request Example -->\n\nCODE_BLOCK_5\n\n<!-- response Example -->\n\nCODE_BLOCK_6\n\n<!-- end -->\n\n## 在普通模式下更新表全文设置\n\n<!-- example ALTER RECONFIGURE -->\n\nCODE_BLOCK_7\n\n`ALTER` 也可以重新配置[普通模式](Creating_a_table/Local_tables.md#Defining-table-schema-in-config-%28Plain-mode%29)下的 RT 表，使配置文件中的新分词、形态学和其他文本处理设置对新文档生效。注意，已有文档保持不变。内部实现是强制将当前 RAM 块保存为新的磁盘块，并调整表头，使新文档使用更新后的全文设置进行分词。\n\n<!-- request Example -->\n\nCODE_BLOCK_8\n\n<!-- end -->\n\n## 重建二级索引\n\n<!-- example ALTER REBUILD SECONDARY -->\n\nCODE_BLOCK_9\n\n你也可以使用 `ALTER` 重建指定表的二级索引。有时，二级索引可能被禁用，针对整个表或表内一个或多个属性：\n\n* 当属性被更新时，其二级索引会被禁用。\n\n* 如果 Manticore 加载了不再支持的旧版本二级索引，整个表的二级索引会被禁用。\n\n`ALTER TABLE table REBUILD SECONDARY` 会从属性数据重建二级索引并重新启用它们。\n\n此外，旧版本的二级索引可能仍被支持，但缺少某些功能。`REBUILD SECONDARY` 可用于更新二级索引。\n\n<!-- request Example -->\n\nCODE_BLOCK_10\n\n<!-- response Example -->\n\nCODE_BLOCK_11\n\n<!-- end -->\n\n## 重建 KNN 索引\n\n<!-- example ALTER REBUILD KNN -->\n\nCODE_BLOCK_12\n\n该命令会重新处理表中所有向量数据，并从头重建 KNN 索引。\n\n<!-- request Example -->\n\nCODE_BLOCK_13\n\n<!-- response Example -->\n\nCODE_BLOCK_14\n\n<!-- end -->\n\n## 在 RT 模式下更新属性 API 密钥（用于生成嵌入）\n\n<!-- example api_key -->\n\n当使用远程模型自动生成嵌入时，可以用 `ALTER` 修改 API 密钥：\n\nCODE_BLOCK_15\n\n<!-- request Example -->\n\nCODE_BLOCK_16\n\n<!-- end -->\n\n## 更改分布式表\n\n<!-- example local_dist -->\n\n要更改分布式表中的本地或远程节点列表，使用与[创建表](Creating_a_table/Creating_a_distributed_table/Creating_a_local_distributed_table.md#Creating-a-local-distributed-table)时相同的语法。只需将命令中的 `CREATE` 替换为 `ALTER`，并移除 `type='distributed'`：\n\nCODE_BLOCK_17\n\n> 注意：在线更改分布式表的结构需要 [Manticore Buddy](Installation/Manticore_Buddy.md)。如果不生效，请确保 Buddy 已安装。",
      "russian": "# Обновление схемы таблицы\n\n## Обновление схемы таблицы в режиме RT\n\n<!-- example ALTER -->\n\nCODE_BLOCK_0\n\nЭта функция поддерживает только добавление одного поля за раз для RT таблиц или расширение столбца `int` до `bigint`. Поддерживаемые типы данных:\n\n* `int` - целочисленный атрибут\n\n* `timestamp` - атрибут временной метки\n\n* `bigint` - атрибут большого целого числа\n\n* `float` - атрибут с плавающей точкой\n\n* `bool` - булев атрибут\n\n* `multi` - мультизначный целочисленный атрибут\n\n* `multi64` - мультизначный атрибут большого целого числа\n\n* `json` - json атрибут\n\n* `string` / `text attribute` / `string attribute` - строковый атрибут\n\n* `text` / `text indexed stored` / `string indexed stored` - полнотекстовое индексированное поле с оригинальным значением, сохранённым в docstore\n\n* `text indexed` / `string indexed` - полнотекстовое индексированное поле, только индексируется (оригинальное значение не сохраняется в docstore)\n\n* `text indexed attribute` / `string indexed attribute` - полнотекстовое индексированное поле + строковый атрибут (оригинальное значение не сохраняется в docstore)\n\n* `text stored` / `string stored` - значение будет только сохранено в docstore, не полнотекстово индексировано, не строковый атрибут\n\n* добавление `engine='columnar'` к любому атрибуту (кроме json) сделает его сохранённым в [колоночном хранилище](Creating_a_table/Data_types.md#Row-wise-and-columnar-attribute-storages)\n\n#### Важные замечания:\n\n* ❗Рекомендуется **создавать резервную копию файлов таблицы** перед выполнением `ALTER`, чтобы избежать повреждения данных в случае внезапного отключения питания или других подобных проблем.\n\n* Запросы к таблице невозможны во время добавления столбца.\n\n* Значения нового атрибута устанавливаются в 0.\n\n* `ALTER` не работает для распределённых таблиц и таблиц без атрибутов.\n\n* Нельзя удалять столбец `id`.\n\n* При удалении поля, которое является и полнотекстовым полем, и строковым атрибутом, первый `ALTER DROP` удаляет атрибут, второй — полнотекстовое поле.\n\n* Добавление/удаление полнотекстового поля поддерживается только в [RT режиме](Read_this_first.md#Real-time-mode-vs-plain-mode).\n\n<!-- request Example -->\n\nCODE_BLOCK_1\n\n<!-- end -->\n\n## Обновление настроек полнотекстового поиска в режиме RT\n\n<!-- example ALTER FT -->\n\nCODE_BLOCK_2\n\nВы можете использовать `ALTER` для изменения настроек полнотекстового поиска вашей таблицы в [RT режиме](Read_this_first.md#Real-time-mode-vs-plain-mode). Однако это влияет только на новые документы, а не на существующие.\n\nПример:\n\n* создаём таблицу с полнотекстовым полем и `charset_table`, которая разрешает только 3 символа для поиска: `a`, `b` и `c`.\n\n* затем вставляем документ 'abcd' и ищем его запросом `abcd`, символ `d` игнорируется, так как его нет в массиве `charset_table`\n\n* затем понимаем, что хотим, чтобы `d` тоже искался, и добавляем его с помощью `ALTER`\n\n* но тот же запрос `where match('abcd')` всё ещё ищет по `abc`, потому что существующий документ помнит прежнее содержимое `charset_table`\n\n* затем добавляем другой документ `abcd` и снова ищем по `abcd`\n\n* теперь находятся оба документа, и `show meta` показывает, что использовались два ключевых слова: `abc` (для старого документа) и `abcd` (для нового).\n\n<!-- request Example -->\n\nCODE_BLOCK_3\n\n<!-- end -->\n\n## Переименование таблицы в режиме реального времени\n\n<!-- example Renaming RT tables -->\n\nВы можете изменить имя таблицы в режиме RT.\n\nCODE_BLOCK_4\n\n> ПРИМЕЧАНИЕ: Переименование таблицы в режиме реального времени требует [Manticore Buddy](Installation/Manticore_Buddy.md). Если не работает, убедитесь, что Buddy установлен.\n\n<!-- request Example -->\n\nCODE_BLOCK_5\n\n<!-- response Example -->\n\nCODE_BLOCK_6\n\n<!-- end -->\n\n## Обновление настроек полнотекстового поиска в plain режиме\n\n<!-- example ALTER RECONFIGURE -->\n\nCODE_BLOCK_7\n\n`ALTER` также может перенастроить RT таблицу в [plain режиме](Creating_a_table/Local_tables.md#Defining-table-schema-in-config-%28Plain-mode%29), чтобы новые настройки токенизации, морфологии и другой обработки текста из конфигурационного файла применялись к новым документам. Обратите внимание, что существующие документы останутся без изменений. Внутренне это принудительно сохраняет текущий RAM-чанк как новый диск-чанк и корректирует заголовок таблицы, чтобы новые документы токенизировались с использованием обновлённых настроек полнотекстового поиска.\n\n<!-- request Example -->\n\nCODE_BLOCK_8\n\n<!-- end -->\n\n## Перестроение вторичного индекса\n\n<!-- example ALTER REBUILD SECONDARY -->\n\nCODE_BLOCK_9\n\nВы также можете использовать `ALTER` для перестроения вторичных индексов в заданной таблице. Иногда вторичный индекс может быть отключён для всей таблицы или для одного или нескольких атрибутов в таблице:\n\n* При обновлении атрибута его вторичный индекс отключается.\n\n* Если Manticore загружает таблицу со старой версией вторичных индексов, которая больше не поддерживается, вторичные индексы будут отключены для всей таблицы.\n\n`ALTER TABLE table REBUILD SECONDARY` перестраивает вторичные индексы из данных атрибутов и снова их включает.\n\nКроме того, старая версия вторичных индексов может поддерживаться, но будет лишена некоторых функций. `REBUILD SECONDARY` можно использовать для обновления вторичных индексов.\n\n<!-- request Example -->\n\nCODE_BLOCK_10\n\n<!-- response Example -->\n\nCODE_BLOCK_11\n\n<!-- end -->\n\n## Перестроение KNN индекса\n\n<!-- example ALTER REBUILD KNN -->\n\nCODE_BLOCK_12\n\nКоманда повторно обрабатывает все векторные данные в таблице и перестраивает KNN индекс с нуля.\n\n<!-- request Example -->\n\nCODE_BLOCK_13\n\n<!-- response Example -->\n\nCODE_BLOCK_14\n\n<!-- end -->\n\n## Обновление API ключа атрибута (для генерации эмбеддингов) в режиме RT\n\n<!-- example api_key -->\n\n`ALTER` можно использовать для изменения API ключа при использовании удалённой модели для автоэмбеддингов:\n\nCODE_BLOCK_15\n\n<!-- request Example -->\n\nCODE_BLOCK_16\n\n<!-- end -->\n\n## Изменение распределённой таблицы\n\n<!-- example local_dist -->\n\nЧтобы изменить список локальных или удалённых узлов в распределённой таблице, используйте тот же синтаксис, что и при [создании таблицы](Creating_a_table/Creating_a_distributed_table/Creating_a_local_distributed_table.md#Creating-a-local-distributed-table). Просто замените `CREATE` на `ALTER` в команде и удалите `type='distributed'`:\n\nCODE_BLOCK_17\n\n> ПРИМЕЧАНИЕ: Изменение схемы распределённой таблицы онлайн требует [Manticore Buddy](Installation/Manticore_Buddy.md). Если не работает, убедитесь, что Buddy установлен."
    },
    "is_code_or_comment": false
  }
}
