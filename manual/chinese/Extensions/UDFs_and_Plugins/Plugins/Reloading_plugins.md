# 重新加载插件

```sql
RELOAD PLUGINS FROM SONAME 'plugin_library'
```

从指定库重新加载所有插件（UDF、排序器等）。从某种意义上说，重新加载过程是事务性的，确保：
1. 所有插件均成功更新到其新版本；
2. 更新是原子的，意味着所有插件同时被替换。此原子性保证了使用重新加载库中多个函数的查询永远不会混用旧版本和新版本。

在 `RELOAD` 期间，插件集保证是一致的；它们要么全部是旧版本，要么全部是新版本。

重新加载过程也是无缝的，因为始终有某个版本的重新加载插件可供并发查询使用，无任何临时中断。这比使用一对 `DROP` 和 `CREATE` 语句重新加载要改进许多。后者在 `DROP` 和随后的 `CREATE` 之间存在一个短暂窗口，在此期间，查询技术上引用了一个未知插件，因此会失败。

如果发生任何失败，`RELOAD PLUGINS` 不执行任何操作，保留旧插件，并报告错误。

在 Windows 上，覆盖或删除当前正在使用的 DLL 库可能会有问题。然而，您仍然可以将其重命名，将新版本以旧名称放置，然后 `RELOAD` 将正常工作。重新加载成功后，您也可以删除重命名的旧库。

```sql
mysql> RELOAD PLUGINS FROM SONAME 'udfexample.dll';
Query OK, 0 rows affected (0.00 sec)
```
<!-- proofread -->

