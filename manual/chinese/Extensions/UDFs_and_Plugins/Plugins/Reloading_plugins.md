# 重新加载插件

```sql
RELOAD PLUGINS FROM SONAME 'plugin_library'
```

从给定库中重新加载所有插件（UDF、排名器等）。从某种意义上说，重新加载过程是事务性的，确保：
1. 所有插件成功更新到其新版本；
2. 更新是原子的，这意味着所有插件同时被替换。这种原子性确保使用来自重新加载库的多个函数的查询永远不会混合旧版本和新版本。

在 `RELOAD` 期间，插件集保证是一致的；它们要么都是旧的，要么都是新的。

重新加载过程也是无缝的，因为某个版本的重新加载插件将始终可用于并发查询，而不会出现任何临时中断。这是相对于使用一对 `DROP` 和 `CREATE` 语句进行重新加载的改进。使用这些语句时，在 `DROP` 和随后的 `CREATE` 之间有一个短暂的窗口，这段时间内查询在技术上引用一个未知的插件，因此会失败。

如果出现任何故障，`RELOAD PLUGINS` 不执行任何操作，保留旧插件，并报告错误。

在 Windows 上，覆盖或删除当前正在使用的 DLL 库可能会有问题。然而，您仍然可以重命名它，将新版本放在旧名称下，然后 `RELOAD` 将正常工作。成功重新加载后，您还可以删除重命名的旧库。

```sql
mysql> RELOAD PLUGINS FROM SONAME 'udfexample.dll';
Query OK, 0 rows affected (0.00 sec)
```
<!-- proofread -->
