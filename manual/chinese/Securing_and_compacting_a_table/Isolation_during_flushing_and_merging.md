# 刷新和合并期间的隔离

Manticore 在实时表的刷新和合并过程中提供隔离，以防止任何更改影响正在运行的查询。

例如，在表压缩期间，一对磁盘块被合并，生成一个新块。在某一时刻，使用新块替换原始对的一个新版本的表被创建。此操作是无缝进行的，因此使用原始块的长时间运行的查询将继续看到表的旧版本，而新查询将看到与合并后块相应的新版本。

同样适用于刷新 RAM 块，其中适当的 RAM 段合并为一个新的磁盘块，而参与的 RAM 块段被放弃。在此操作期间，Manticore 为在操作开始之前启动的查询提供隔离。

此外，这些操作对于替换和更新是透明的。如果您在要与另一个块合并的磁盘块中更新文档的属性，则该更新将应用于该块和生成的合并块。如果您在合并期间删除文档，则将在原始块和生成的合并块中删除该文档，后者将标记该文档为已删除，或者如果删除在合并过程早期发生，则根本没有该文档。 
<!-- proofread -->
