# 刷新和合并期间的隔离

Manticore 在实时表的刷新和合并过程中提供隔离，以防止任何更改影响正在运行的查询。

例如，在表压缩期间，一对磁盘块被合并并生成一个新块。在某个时间点，会创建表的新版本，其中新块替换了原来的那对块。该过程无缝进行，使得使用原始块的长时间运行查询将继续看到旧版本的表，而新的查询将看到包含合并后新块的新版本。

同样适用于刷新 RAM 块，将合适的 RAM 段合并成一个新的磁盘块，并放弃参与的 RAM 块段。在此操作期间，Manticore 为操作开始前启动的查询提供隔离。

此外，这些操作对于替换和更新是透明的。如果您更新了属于正在与另一个块合并的磁盘块中的文档的属性，更新将应用于该块和合并后生成的块。如果在合并期间删除文档，它将在原始块中和合并后生成的块中被删除，合并后块中该文档要么被标记为已删除，要么如果删除发生在合并过程的早期，该文档根本不存在。
<!-- proofread -->

