# MySQL प्रोटोकॉल

Manticore Search एक SQL इंटरफेस को MySQL प्रोटोकॉल का उपयोग करके लागू करता है, जिससे किसी भी MySQL लाइब्रेरी या कनेक्टर और कई MySQL क्लाइंट का उपयोग करके Manticore Search से कनेक्ट किया जा सकता है और इसके साथ काम किया जा सकता है जैसे यह एक MySQL सर्वर हो, Manticore नहीं। 

हालांकि, SQL संवाद भिन्न है और MySQL में उपलब्ध SQL कमांड या फ़ंक्शनों के केवल एक उपसमुच्चय को लागू करता है। इसके अतिरिक्त, कुछ क्लॉज़ और फ़ंक्शन हैं जो Manticore Search के लिए विशिष्ट हैं, जैसे पूर्ण-प्रतिनिधि खोज के लिए `MATCH()` क्लॉज़। 

Manticore Search सर्वर-साइड तैयार बयानों का समर्थन नहीं करता है, लेकिन क्लाइंट-साइड तैयार बयानों का उपयोग किया जा सकता है। यह ध्यान रखना महत्वपूर्ण है कि Manticore मल्टी-वैल्यू (MVA) डेटा प्रकार को लागू करता है, जिसका MySQL या तैयार बयानों को लागू करने वाली लाइब्रेरी में कोई समकक्ष नहीं है। इन मामलों में, MVA मान को कच्चे प्रश्न में तैयार करना होगा। 

कुछ MySQL क्लाइंट/कनेक्टर्स उपयोगकर्ता/पासवर्ड और/या डेटाबेस नाम के लिए मान की आवश्यकता करते हैं। चूंकि Manticore Search में डेटाबेस का कोई अवधारणा नहीं है और कोई उपयोगकर्ता पहुंच नियंत्रण लागू नहीं है, ये मान मनमाने रूप से सेट किए जा सकते हैं क्योंकि Manticore बस इन्हें अनदेखा कर देगा। 

## कॉन्फ़िगरेशन

**SQL इंटरफेस के लिए डिफ़ॉल्ट पोर्ट 9306 है** और यह डिफ़ॉल्ट रूप से सक्षम है। 

आप कॉन्फ़िगरेशन फ़ाइल के searchd अनुभाग में `listen` निर्देश का उपयोग करके MySQL पोर्ट को इस तरह कॉन्फ़िगर कर सकते हैं: 

```ini
searchd {
...
   listen = 127.0.0.1:9306:mysql
...
}
``` 

याद रखें कि Manticore में उपयोगकर्ता प्रमाणीकरण नहीं है, इसलिए सुनिश्चित करें कि MySQL पोर्ट आपके नेटवर्क के बाहर किसी भी व्यक्ति के लिए सुलभ नहीं है। 

### VIP कनेक्शन
"VIP" कनेक्शन करने के लिए एक अलग MySQL पोर्ट का उपयोग किया जा सकता है। जब इस पोर्ट से कनेक्ट किया जाता है, तो धागा पूल को बाइपास किया जाता है, और हमेशा एक नया समर्पित धागा बनाया जाता है। यह गंभीर ओवरलोड के मामलों में उपयोगी है, जहां सर्वर या तो भूसा जाता है या नियमित पोर्ट के माध्यम से कनेक्शन को रोकता है। 

```ini
searchd {
...
   listen = 127.0.0.1:9306:mysql
   listen = 127.0.0.1:9307:mysql_vip
...
}
``` 

## मानक MySQL क्लाइंट के माध्यम से कनेक्ट करना
Manticore से कनेक्ट करने का सबसे आसान तरीका एक मानक MySQL क्लाइंट का उपयोग करना है: 

```shell
mysql -P9306 -h0
```

## सुरक्षित MySQL कनेक्शन

MySQL प्रोटोकॉल [SSL एन्क्रिप्शन](../Security/SSL.md) का समर्थन करता है। सुरक्षित कनेक्शन उसी `mysql` सुनने वाले पोर्ट पर बनाए जा सकते हैं। 

## संकुचित MySQL कनेक्शन

संकुचन MySQL कनेक्शनों के साथ उपयोग किया जा सकता है और यह डिफ़ॉल्ट रूप से क्लाइंट के लिए उपलब्ध है। क्लाइंट को बस यह निर्दिष्ट करना होता है कि कनेक्शन में संकुचन का उपयोग करना चाहिए। 

MySQL क्लाइंट का एक उदाहरण: 

```shell
mysql -P9306 -h0 -C
```

संकुचन सुरक्षित और गैर-सुरक्षित दोनों कनेक्शन में उपयोग किया जा सकता है। 

## MySQL कनेक्टर्स पर नोट्स
आधिकारिक MySQL कनेक्टर्स को Manticore Search से कनेक्ट करने के लिए उपयोग किया जा सकता है, हालाँकि, उन्हें DSN स्ट्रिंग में कुछ सेटिंग्स की आवश्यकता हो सकती है क्योंकि कनेक्टर कुछ SQL कमांड चलाने की कोशिश कर सकता है जो अभी तक Manticore में लागू नहीं हैं। 

JDBC कनेक्टर 6.x और ऊपर को Manticore Search 2.8.2 या उससे अधिक की आवश्यकता होती है और DSN स्ट्रिंग में निम्नलिखित विकल्प शामिल होने चाहिए: 
```ini
jdbc:mysql://IP:PORT/DB/?characterEncoding=utf8&maxAllowedPacket=512000&serverTimezone=XXX
```

डिफ़ॉल्ट रूप से Manticore Search कनेक्टर को अपना संस्करण रिपोर्ट करेगा, हालाँकि, इससे कुछ समस्याएँ पैदा हो सकती हैं। इसे हल करने के लिए `mysql_version_string` निर्देश को कॉन्फ़िगरेशन के searchd अनुभाग में 5.1.1 से कम के संस्करण पर सेट किया जाना चाहिए: 
```ini
searchd {
...
   mysql_version_string = 5.0.37
...
}
``` 

.NET MySQL कनेक्टर डिफ़ॉल्ट रूप से कनेक्शन पूलों का उपयोग करता है। `SHOW META` की सांख्यिकी को सही ढंग से प्राप्त करने के लिए, प्रश्नों के साथ `SHOW META` कमांड को एक एकल मल्टीस्टेटमेंट (`SELECT ...;SHOW META`) के रूप में भेजा जाना चाहिए। यदि पूलिंग सक्षम है, तो कनेक्शन स्ट्रिंग में मल्टीस्टेटमेंट की अनुमति देने के लिए `Allow Batch=True` विकल्प जोड़ा जाना आवश्यक है: 
```ini
Server=127.0.0.1;Port=9306;Database=somevalue;Uid=somevalue;Pwd=;Allow Batch=True;
```

## ODBC कनेक्टिविटी पर नोट्स
Manticore को ODBC का उपयोग करके एक्सेस किया जा सकता है। ODBC स्ट्रिंग में `charset=UTF8` सेट करना अनुशंसित है। कुछ ODBC ड्राइवर Manticore सर्वर द्वारा रिपोर्ट किए गए संस्करण को पसंद नहीं करेंगे क्योंकि वे इसे एक बहुत पुराने MySQL सर्वर के रूप में देखेंगे। इसे `mysql_version_string` विकल्प के साथ ओवरराइड किया जा सकता है। 

## टिप्पणी सिंटैक्स

Manticore SQL MySQL पर C-शैली की टिप्पणी सिंटैक्स का समर्थन करता है। एक उद्घाटन `/*` अनुक्रम से लेकर एक समापन `*/` अनुक्रम तक सब कुछ अनदेखा किया जाता है। टिप्पणियाँ कई पंक्तियों में फैली हो सकती हैं, निगमन नहीं कर सकतीं, और लॉग नहीं की जानी चाहिए। MySQL विशिष्ट `/*! ... */` टिप्पणियाँ भी वर्तमान में अनदेखा की जाती हैं। (जैसा कि टिप्पणियों का समर्थन `mysqldump` द्वारा उत्पन्न डंप के साथ बेहतर संगतता के लिए Rather जोड़ा गया, न कि Manticore और MySQL के बीच सामान्य प्रश्न पारस्परिकता को सुधारने के लिए।) 

```sql
SELECT /*! SQL_CALC_FOUND_ROWS */ col1 FROM table1 WHERE ...
```
<!-- proofread -->

