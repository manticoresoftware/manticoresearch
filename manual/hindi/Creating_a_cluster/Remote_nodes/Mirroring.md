# मिररिंग
[एजेंट](../../Creating_a_table/Creating_a_distributed_table/Remote_tables.md#agent) मिरर्स का उपयोग खोज क्वेरी को संसाधित करते समय एक-दूसरे के स्थान पर किया जा सकता है। मैन्टिकोर उदाहरण (जिसमें वितरित तालिका है जहाँ मिरर एजेंट परिभाषित होते हैं) मिरर स्थिति (जीवित या मृत) और प्रतिक्रिया समय पर नज़र रखते हैं, और इस जानकारी के आधार पर स्वचालित फ़ेलओवर और लोड संतुलन करते हैं।
## एजेंट मिरर्स
```ini
agent = node1|node2|node3:9312:shard2
```
ऊपर दिए गए उदाहरण में यह दर्शाया गया है कि `node1:9312`, `node2:9312`, और `node3:9312` सभी के पास shard2 नाम की एक तालिका है, और इन्हें एक-दूसरे के स्थान पर उपयोग किया जा सकता है। यदि इनमें से कोई सर्वर डाउन होता है, तो क्वेरियाँ शेष दो के बीच वितरित की जाएँगी। जब सर्वर फिर से ऑनलाइन होता है, तो मास्टर इसे पहचान लेगा और सभी तीन नोड्स को फिर से क्वेरियों को रूट करना शुरू करेगा।
एक मिरर में एक व्यक्तिगत तालिका सूची भी शामिल हो सकती है, जैसा कि निम्नलिखित है:
```ini
agent = node1:9312:node1shard2|node2:9312:node2shard2
```
यह पिछले उदाहरण की तरह काम करता है, लेकिन विभिन्न सर्वरों से क्वेरी करते समय विभिन्न तालिका नामों का उपयोग किया जाएगा। उदाहरण के लिए, node1shard2 का उपयोग node1:9312 पर क्वेरी करते समय किया जाएगा, और node2shard का उपयोग node2:9312 पर क्वेरी करते समय किया जाएगा।
डिफ़ॉल्ट रूप से, सभी क्वेरियाँ मिरर्स में सबसे अच्छे पर रूट की जाती हैं। सर्वोत्तम मिरर का चयन हाल की सांख्यिकी के आधार पर किया जाता है, जैसा कि [ha_period_karma](../../Server_settings/Searchd.md#ha_period_karma) कॉन्फ़िगरेशन निर्देश द्वारा नियंत्रित किया जाता है। मास्टर प्रत्येक एजेंट के लिए मैट्रिक्स (कुल क्वेरी संख्या, त्रुटि संख्या, प्रतिक्रिया समय, आदि) संग्रहीत करता है और इन्हें समय अंतराल के अनुसार समूहित करता है। कर्म वह समय अंतराल की लंबाई है। सबसे अच्छा एजेंट मिरर फिर गतिशील रूप से अंतिम दो ऐसे समय अंतराल के आधार पर निर्धारित किया जाता है। मिरर चुनने के लिए उपयोग की जाने वाली विशिष्ट एल्गोरिदम को [ha_strategy](../../Creating_a_cluster/Remote_nodes/Load_balancing.md#ha_strategy) निर्देश के साथ कॉन्फ़िगर किया जा सकता है।
कर्म अवधि सेकंड में होती है और इसका डिफ़ॉल्ट मान 60 सेकंड होता है। मास्टर 15 कर्म फैलाव तक प्रति-एजेंट सांख्यिकी को उपकरण उद्देश्य के लिए संग्रहीत करता है (देखें `SHOW AGENT STATUS` बयान)। हालांकि, इनमें से केवल अंतिम दो फैलावों का उपयोग HA/LB लॉजिक के लिए किया जाता है।
जब कोई क्वेरी नहीं होती है, तो मास्टर सांख्यिकी एकत्र करने और चेक करने के लिए हर [ha_ping_interval](../../Creating_a_cluster/Remote_nodes/Load_balancing.md#ha_ping_interval) मिलीसेकंड में एक नियमित पिंग आदेश भेजता है कि क्या दूरस्थ होस्ट अभी भी जीवित है। ha_ping_interval का डिफ़ॉल्ट मान 1000 मिलीसेकंड होता है। इसे 0 पर सेट करने से पिंग्स अक्षम हो जाते हैं, और सांख्यिकी केवल वास्तविक क्वेरियों के आधार पर एकत्र की जाएँगी।
उदाहरण:
```ini
# 4 सर्वरों पर कुल शार्डिंग तालिका
# केवल 2 शार्ड्स में लेकिन प्रत्येक शार्ड के लिए 2 फ़ेलओवर मिरर्स के साथ
# node1, node2 स्थानीय रूप से shard1 का संचालन करते हैं
# node3, node4 स्थानीय रूप से shard2 का संचालन करते हैं
# node1, node2 पर कॉन्फ़िगरेशन
agent = node3:9312|node4:9312:shard2
# node3, node4 पर कॉन्फ़िगरेशन
agent = node1:9312|node2:9312:shard1
```
<!-- proofread -->














