# Logstash के साथ एकीकरण
> नोट: Logstash के साथ एकीकरण के लिए [Manticore Buddy](../Installation/Manticore_Buddy.md) की आवश्यकता होती है। यदि यह काम नहीं करता है, तो सुनिश्चित करें कि Buddy स्थापित है।
[Logstash](https://www.elastic.co/logstash) एक लॉग प्रबंधन उपकरण है जो विभिन्न स्रोतों से डेटा एकत्र करता है, इसे तुरंत परिवर्तित करता है, और इसे आपके इच्छित गंतव्य पर भेजता है। इसका उपयोग सामान्यतः Elasticsearch के लिए डेटा पाइपलाइन के रूप में किया जाता है, जो एक ओपन-सोर्स एनालिटिक्स और सर्च इंजन है।
अब, Manticore Logstash को एक प्रोसेसिंग पाइपलाइन के रूप में उपयोग करने का समर्थन करता है। यह एकत्रित और परिवर्तित डेटा को Manticore पर उसी तरह भेजने की अनुमति देता है जैसे Elasticsearch पर। वर्तमान में, संस्करण 7.6-7.15 का समर्थन किया जाता है।
आइए `dpkg.log` के लिए उपयोग की जाने वाली Logstash कॉन्फ़िग फ़ाइल का एक सरल उदाहरण देखें, जो Debian पैकेज प्रबंधक की एक मानक लॉग फ़ाइल है। लॉग की अपनी एक सरल संरचना है, जैसा कि नीचे दिखाया गया है:
```
2023-05-31 10:42:55 स्थिति ट्रिगर्स-अपेक्षित ca-certificates-java:all 20190405ubuntu1.1
2023-05-31 10:42:55 ट्रिगप्रोक libc-bin:amd64 2.31-0ubuntu9.9 <कोई नहीं>
2023-05-31 10:42:55 स्थिति आधा-कॉन्फ़िगर किया गया libc-bin:amd64 2.31-0ubuntu9.9
2023-05-31 10:42:55 स्थिति स्थापित libc-bin:amd64 2.31-0ubuntu9.9
2023-05-31 10:42:55 ट्रिगप्रोक सिस्टमd:amd64 245.4-4ubuntu3.21 <कोई नहीं>
```
## Logstash कॉन्फ़िगरेशन
यहाँ एक Logstash कॉन्फ़िगरेशन का उदाहरण है:
```
input {
  file {
    path => ["/var/log/dpkg.log"]
    start_position => "beginning"
    sincedb_path => "/dev/null"
    mode => "read"
    exit_after_read => "true"
   file_completed_action => "log"
   file_completed_log_path => "/dev/null"
  }
}
output {
  elasticsearch {
   index => " dpkg_log"
   hosts => ["http://localhost:9308"]
   ilm_enabled => false
   manage_template => false
  }
}
```
ध्यान दें कि आगे बढ़ने से पहले, एक महत्वपूर्ण चेतावनी को संबोधित करने की आवश्यकता है: Manticore Log Template Management और Elasticsearch के Index Lifecycle Management सुविधाओं का समर्थन नहीं करता है। चूंकि ये सुविधाएँ Logstash में डिफ़ॉल्ट रूप से सक्षम हैं, इसलिए उन्हें कॉन्फ़िगरेशन में स्पष्ट रूप से अक्षम किया जाना चाहिए। इसके अलावा, आउटपुट कॉन्फ़िगरेशन अनुभाग में hosts विकल्प Manticore के HTTP सुनने वाले पोर्ट के अनुरूप होना चाहिए (डिफ़ॉल्ट है localhost:9308)।
## Logstash परिणाम
जैसा कि वर्णित है, कॉन्फ़िगरेशन को समायोजित करने के बाद, आप Logstash चला सकते हैं, और dpkg लॉग से डेटा Manticore को भेजा जाएगा और ठीक से अनुक्रमित होगा।
यहाँ बनाई गई टेबल का परिणाम स्वरूप स्कीमा और डाले गए दस्तावेज़ का एक उदाहरण है:
```
mysql> DESCRIBE dpkg_log;
+------------------+--------+---------------------+
| Field            | Type   | Properties          |
+------------------+--------+---------------------+
| id               | bigint |                     |
| संदेश           | text   | अनुक्रमित संग्रहीत  |
| @version         | text   | अनुक्रमित संग्रहीत  |
| @timestamp       | text   | अनुक्रमित संग्रहीत  |
| path             | text   | अनुक्रमित संग्रहीत  |
| host             | text   | अनुक्रमित संग्रहीत  |
+------------------+--------+---------------------+
```
```
mysql> SELECT * FROM dpkg_log LIMIT 1\G
*************************** 1. row ***************************
id: 7280000849080746110
host: logstash-db848f65f-lnlf9
message: 2023-04-12 02:03:21 स्थिति अनपैक किया गया libc-bin:amd64 2.31-0ubuntu9
path: /var/log/dpkg.log
@timestamp: 2023-06-16T09:23:57.405Z
@version: 1
```
















