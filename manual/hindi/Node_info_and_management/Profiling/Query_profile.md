# क्वेरी प्रोफाइल

<!-- उदाहरण SHOW PROFILE -->

SQL `SHOW PROFILE` वक्तव्य और `"profile": true` JSON इंटरफ़ेस विकल्प दोनों निष्पादित क्वेरी का विस्तार से निष्पादन प्रोफाइल प्रदान करते हैं। SQL के मामले में, प्रोफाइलिंग को वर्तमान सत्र में चलाने से पहले **सक्षम** किया जाना चाहिए। इसे `SET profiling=1` वक्तव्य के साथ पूरा किया जा सकता है। डिफ़ॉल्ट रूप से, प्रदर्शन पर संभावित प्रभावों को रोकने के लिए प्रोफाइलिंग अक्षम होती है, यदि इसे सक्षम नहीं किया गया तो एक खाली प्रोफाइल का परिणाम होता है।

प्रत्येक प्रोफाइलिंग परिणाम में निम्नलिखित क्षेत्रों को शामिल किया गया है:
* `Status` कॉलम संक्षेप में उस विशिष्ट स्थिति का वर्णन करता है जहाँ समय व्यतीत हुआ। नीचे देखें।
* `Duration` कॉलम दीवार घड़ी के समय को, सेकंड में दर्शाता है।
* `Switches` कॉलम प्रदर्शित करता है कि क्वेरी इंजन कितनी बार निर्दिष्ट स्थिति में बदला। ये केवल तार्किक इंजन राज्य स्विच हैं और **नहीं** कोई OS स्तर के संदर्भ स्विच या फ़ंक्शन कॉल (हालांकि कुछ अनुभाग वास्तव में फ़ंक्शन कॉल से संबंधित हो सकते हैं), और उनका प्रदर्शन पर कोई प्रत्यक्ष प्रभाव नहीं होता है। एक अर्थ में, स्विचों की संख्या बस यह है कि संबंधित उपकरण बिंदु कितनी बार हिट हुआ है।
* `Percent` कॉलम दिखाता है कि इस स्थिति में कितना समय प्रतिशत के रूप में व्यतीत हुआ।

प्रोफाइल में राज्यों को पूर्व रिकॉर्डित क्रम में लौटाया जाता है जो लगभग मानचित्रित करता है (लेकिन **नहीं** समान) है वास्तविक क्वेरी क्रम के।

राज्यों की सूची समय के साथ बदल सकती है (और होगी) जैसे-जैसे हम राज्यों को परिष्कृत करते हैं। वर्तमान में प्रोफाइल किए गए राज्यों का एक संक्षिप्त विवरण यहाँ है।

* `unknown`: सामान्य कैच-ऑल स्टेट। अभी तक उपकरणित कोड या छोटे विविध कार्यों के लिए खाते हैं जो वास्तव में किसी अन्य स्थिति में नहीं आते हैं लेकिन अपने स्वयं के राज्य को उचित ठहराने के लिए बहुत छोटे होते हैं।
* `net_read`: नेटवर्क (यानी, ऐप्लिकेशन) से क्वेरी पढ़ना।
* `io`: सामान्य फ़ाइल IO समय।
* `dist_connect`: वितरित तालिका मामले में दूरस्थ एजेंटों से कनेक्ट करना।
* `sql_parse`: SQL सिंटैक्स को पार्स करना।
* `dict_setup`: शब्दकोष और tokenizer सेटअप।
* `parse`: पूर्ण-पाठ क्वेरी सिंटैक्स को पार्स करना।
* `transforms`: पूर्ण-पाठ क्वेरी रूपांतरण (वाइल्डकार्ड और अन्य विस्तारण, सरलकरण, आदि)।
* `init`: क्वेरी मूल्यांकन को प्रारंभ करना।
* `open`: तालिका फ़ाइलों को खोलना।
* `read_docs`: दस्तावेज़ सूचियों को पढ़ने में व्यतीत IO समय।
* `read_hits`: कीवर्ड स्थिति को पढ़ने में व्यतीत IO समय।
* `get_docs`: मेल खाने वाले दस्तावेज़ों की गणना करना।
* `get_hits`: मेल खाने वाले स्थितियों की गणना करना।
* `filter`: पूर्ण-पाठ मेल को फ़िल्टर करना।
* `rank`: प्रासंगिकता रैंक की गणना करना।
* `sort`: मेल को क्रमबद्ध करना।
* `finalize`: प्रति-तालिका खोज परिणाम सेट को अंतिम रूप देना (अंतिम चरण अभिव्यक्तियाँ, आदि)।
* `dist_wait`: वितरित तालिका मामले में एजेंटों से दूरस्थ परिणामों की प्रतीक्षा करना।
* `aggregate`: कई परिणाम सेटों को एकत्रित करना।
* `net_write`: परिणाम सेट को नेटवर्क में लिखना।

<!-- परिचय -->
##### SQL:
<!-- अनुरोध SQL -->

```sql
SET profiling=1;

SELECT id FROM forum WHERE MATCH('the best') LIMIT 1;

SHOW PROFILE;
```

<!-- प्रतिक्रिया SQL -->

```sql
क्वेरी ठीक है, 0 पंक्तियाँ प्रभावित हुईं (0.00 सेकंड)

+--------+
| id     |
+--------+
| 241629 |
+--------+
1 पंक्ति सेट में (0.35 सेकंड)

+--------------+----------+----------+---------+
| स्थिति       | अवधि     | स्विच     | प्रतिशत |
+--------------+----------+----------+---------+
| unknown      | 0.000557 | 5        | 0.16    |
| net_read     | 0.000016 | 1        | 0.00    |
| local_search | 0.000076 | 1        | 0.02    |
| sql_parse    | 0.000121 | 1        | 0.03    |
| dict_setup   | 0.000003 | 1        | 0.00    |
| parse        | 0.000072 | 1        | 0.02    |
| transforms   | 0.000331 | 2        | 0.10    |
| init         | 0.001945 | 3        | 0.56    |
| read_docs    | 0.001257 | 76       | 0.36    |
| read_hits    | 0.002598 | 186      | 0.75    |
| get_docs     | 0.089328 | 2691     | 25.80   |
| get_hits     | 0.189626 | 2799     | 54.78   |
| filter       | 0.009369 | 2613     | 2.71    |
| rank         | 0.029669 | 7760     | 8.57    |
| sort         | 0.019070 | 2531     | 5.51    |
| finalize     | 0.000001 | 1        | 0.00    |
| clone_attrs  | 0.002009 | 1        | 0.58    |
| aggregate    | 0.000054 | 2        | 0.02    |
| net_write    | 0.000076 | 2        | 0.02    |
| eval_post    | 0.000001 | 1        | 0.00    |
| कुल         | 0.346179 | 18678    | 0       |
+--------------+----------+----------+---------+
21 पंक्तियाँ सेट में (0.00 सेकंड)
```

<!-- अनुरोध JSON -->

```json
POST /search
{
  "table": "test",
  "profile": true,
  "query":
  {
    "match_phrase": { "_all" : "had grown quite" }
  }
}
```

<!-- प्रतिक्रिया JSON -->

```json
 "profile": {
    "query": [
      {
        "status": "unknown",
        "duration": 0.000141,
        "switches": 8,
        "percent": 2.17
      },
      {
        "status": "local_df",
        "duration": 0.000870,
        "switches": 1,
        "percent": 13.40
      },
      {
        "status": "local_search",
        "duration": 0.001038,
        "switches": 2,
        "percent": 15.99
      },
      {
        "status": "setup_iter",
        "duration": 0.000154,
        "switches": 14,
        "percent": 2.37
      },
      {
        "status": "dict_setup",
        "duration": 0.000026,
        "switches": 3,
        "percent": 0.40
      },
      {
        "status": "parse",
        "duration": 0.000205,
        "switches": 3,
        "percent": 3.15
      },
      {
        "status": "transforms",
        "duration": 0.000974,
        "switches": 4,
        "percent": 15.01
      },
      {
        "status": "init",
        "duration": 0.002931,
        "switches": 20,
        "percent": 45.16
      },
      {
        "status": "get_docs",
        "duration": 0.000007,
        "switches": 7,
        "percent": 0.10
      },
      {
        "status": "rank",
        "duration": 0.000002,
        "switches": 14,
        "percent": 0.03
      },
      {
        "status": "finalize",
        "duration": 0.000013,
        "switches": 7,
        "percent": 0.20
      },
      {
        "status": "aggregate",
        "duration": 0.000128,
        "switches": 1,
        "percent": 1.97
      },
      {
        "status": "total",
        "duration": 0.006489,
        "switches": 84,
        "percent": 100.00
      }
    ]
  }
```
<!-- end -->

<!-- proofread -->
