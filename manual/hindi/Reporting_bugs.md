# рдмрдЧреНрд╕ рдХреА рд░рд┐рдкреЛрд░реНрдЯрд┐рдВрдЧ

рдЕрдкреНрд░рд┐рдп рд░реВрдк рд╕реЗ, рдореИрдиреНрдЯрд┐рдХреЛрд░ рдЕрднреА 100% рдмрдЧ-рдореБрдХреНрдд рдирд╣реАрдВ рд╣реИ, рд╣рд╛рд▓рд╛рдВрдХрд┐ рд╡рд┐рдХрд╛рд╕ рдЯреАрдо рдЗрд╕ рд▓рдХреНрд╖реНрдп рдХреА рдУрд░ рдореЗрд╣рдирдд рдХрд░ рд░рд╣реА рд╣реИред рдЖрдкрдХреЛ рд╕рдордп-рд╕рдордп рдкрд░ рдХреБрдЫ рд╕рдорд╕реНрдпрд╛рдУрдВ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░рдирд╛ рдкрдбрд╝ рд╕рдХрддрд╛ рд╣реИред 
рдмрдЧ рдХреЛ рдкреНрд░рднрд╛рд╡реА рд░реВрдк рд╕реЗ рдареАрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░рддреНрдпреЗрдХ рдмрдЧ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд┐рддрдиреА рд╕рдВрднрд╡ рд╣реЛ рд╕рдХреЗ рдЬрд╛рдирдХрд╛рд░реА рд░рд┐рдкреЛрд░реНрдЯ рдХрд░рдирд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИред
рдПрдХ рдмрдЧ рдХреЛ рдареАрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдпрд╛ рддреЛ рдЗрд╕реЗ рдкреБрдирд░реБрддреНрдкрд╛рджрд┐рдд рдФрд░ рдареАрдХ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ рдпрд╛ рдЗрд╕рдХреЗ рдХрд╛рд░рдг рдХрд╛ рдЕрдиреБрдорд╛рди рдЙрд╕ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рд▓рдЧрд╛рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП рдЬреЛ рдЖрдк рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВред рдЗрд╕рдореЗрдВ рдорджрдж рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдХреГрдкрдпрд╛ рдиреАрдЪреЗ рджрд┐рдП рдЧрдП рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХрд╛ рдкрд╛рд▓рди рдХрд░реЗрдВред

### рдмрдЧ-рдЯреНрд░реИрдХрд░
рдмрдЧреНрд╕ рдФрд░ рдлреАрдЪрд░ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ [Github](https://github.com/manticoresoftware/manticore/issues) рдкрд░ рдЯреНрд░реИрдХ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдЖрдк рдирдП рдЯрд┐рдХрдЯ рдмрдирд╛рдиреЗ рдФрд░ рдЕрдкрдиреЗ рдмрдЧ рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рд╡рд░реНрдгрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрд╡рд╛рдЧрдд рд╣реИрдВ рддрд╛рдХрд┐ рдЖрдк рдФрд░ рдбреЗрд╡рд▓рдкрд░реНрд╕ рджреЛрдиреЛрдВ рдХрд╛ рд╕рдордп рдмрдЪ рд╕рдХреЗред

### рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдЕрдкрдбреЗрдЯ
рджрд╕реНрддрд╛рд╡реЗрдЬрд╝реЛрдВ (рдЬреЛ рдЖрдк рдЕрдм рдкрдврд╝ рд░рд╣реЗ рд╣реИрдВ) рдореЗрдВ рдЕрдкрдбреЗрдЯ рднреА [Github](https://github.com/manticoresoftware/manticoresearch/tree/master/manual) рдкрд░ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред

### рдХреНрд░реЗрд╢реЗрдЬ

рдореИрдиреНрдЯрд┐рдХреЛрд░ рд╕рд░реНрдЪ C++ рдореЗрдВ рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рд╣реИ, рдЬреЛ рдПрдХ рдирд┐рдореНрди-рд╕реНрддрд░реАрдп рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рднрд╛рд╖рд╛ рд╣реИ рдЬреЛ рддреЗрдЬрд╝ рдкреНрд░рджрд░реНрд╢рди рдХреЗ рд▓рд┐рдП рдХрдВрдкреНрдпреВрдЯрд░ рдХреЗ рд╕рд╛рде рд╕реАрдзреЗ рд╕рдВрд╡рд╛рдж рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЗрд╕ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдореЗрдВ рдПрдХ рдХрдореА рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рджреБрд░реНрд▓рдн рдорд╛рдорд▓реЛрдВ рдореЗрдВ, рд╕рдорд╕реНрдпрд╛ рдХрд╛ рдХрд╛рд░рдг рдмрдирддреА рд╣реБрдИ рдХрдорд╛рдВрдб рдХреА рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ рдХреЛ рдЫреЛрдбрд╝рдХрд░ рд▓реЙрдЧ рдореЗрдВ рддреНрд░реБрдЯрд┐ рд▓рд┐рдЦрдХрд░ рдмрдЧ рдХреЛ рд╕реБрдВрджрд░рддрд╛ рд╕реЗ рд╕рдВрднрд╛рд▓рдирд╛ рд╕рдВрднрд╡ рдирд╣реАрдВ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред рдЗрд╕рдХреЗ рдмрдЬрд╛рдп, рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХреНрд░реИрд╢ рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рдЬрд┐рд╕рдХреЗ рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк рдпрд╣ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд░реБрдХ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдЗрд╕реЗ рдкреБрдирдГ рдкреНрд░рд╛рд░рдВрдн рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред

рдЬрдм рдореИрдиреНрдЯрд┐рдХреЛрд░ рд╕рд░реНрдЪ рдХреНрд░реИрд╢ рд╣реЛрддрд╛ рд╣реИ, рддреЛ рдпрд╣ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХрд┐ рдЖрдк рдореИрдиреНрдЯрд┐рдХреЛрд░ рдЯреАрдо рдХреЛ [рдмрдЧ рд░рд┐рдкреЛрд░реНрдЯ рдЬрдорд╛ рдХрд░рдХреЗ](https://github.com/manticoresoftware/manticoresearch/issues/new?assignees=&labels=&template=bug_report.md&title=) рд╕реВрдЪрд┐рдд рдХрд░реЗрдВ рдпрд╛ рдЕрдкрдиреЗ рдирд┐рдЬреА рд╣реЗрд▓реНрдкрдбреЗрд╕реНрдХ рдореЗрдВ рдореИрдиреНрдЯрд┐рдХреЛрд░ рдХреА рдкреЗрд╢реЗрд╡рд░ рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗред рдореИрдиреНрдЯрд┐рдХреЛрд░ рдЯреАрдо рдХреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЬрд╛рдирдХрд╛рд░реА рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ:

1. рд╕рд░реНрдЪрдб рд▓реЙрдЧ
2. рдХреЛрд░рдбрдВрдк
3. рдХреНрд╡реЗрд░реА рд▓реЙрдЧ

рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдпрджрд┐ рдЖрдк рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрд░ рд╕рдХреЗрдВ рддреЛ рдпрд╣ рд╕рд╣рд╛рдпрдХ рд╣реЛрдЧрд╛:
1. рдХреЛрд░рдбрдВрдк рдХреА рдЬрд╛рдВрдЪ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП gdb рдЪрд▓рд╛рдПрдВ:
```
gdb /usr/bin/searchd </path/to/coredump>
```
2. рдХреЛрд░рдбрдВрдк рдлрд╝рд╛рдЗрд▓ рдирд╛рдо рдореЗрдВ рдХреНрд░реИрд╢ рдереНрд░реЗрдб ID рдЦреЛрдЬреЗрдВ (рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ /proc/sys/kernel/core_pattern рдореЗрдВ `%p` рд╣реИ), рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП `core.work_6.29050.server_name.1637586599` рдХрд╛ рдорддрд▓рдм рд╣реИ thread_id=29050
3. gdb рдореЗрдВ рдЪрд▓рд╛рдПрдВ:
```
set pagination off
info threads
# рдЕрдкрдиреЗ id рджреНрд╡рд╛рд░рд╛ рдереНрд░реЗрдб рдирдВрдмрд░ рдЦреЛрдЬреЗрдВ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП `LWP 29050` рдХреЗ рд▓рд┐рдП рдпрд╣ рдереНрд░реЗрдб рдирдВрдмрд░ 8 рд╣реЛрдЧрд╛)
thread apply all bt
thread <thread number>
bt full
info locals
quit
```
4. рдЖрдЙрдЯрдкреБрдЯ рдкреНрд░рджрд╛рди рдХрд░реЗрдВ

### рдЬрдм рдореИрдиреНрдЯрд┐рдХреЛрд░ рд╕рд░реНрдЪ рд▓рдЯрдХрддрд╛ рд╣реИ рддреЛ рдореБрдЭреЗ рдХреНрдпрд╛ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП?

рдпрджрд┐ рдореИрдиреНрдЯрд┐рдХреЛрд░ рд╕рд░реНрдЪ рд▓рдЯрдХрддрд╛ рд╣реИ, рддреЛ рдЖрдкрдХреЛ рдХреБрдЫ рдЬрд╛рдирдХрд╛рд░реА рдПрдХрддреНрд░ рдХрд░рдиреА рд╣реЛрдЧреА рдЬреЛ рдХрд╛рд░рдг рдХреЛ рд╕рдордЭрдиреЗ рдореЗрдВ рд╕рд╣рд╛рдпрдХ рд╣реЛ рд╕рдХрддреА рд╣реИред рдЖрдк рдЗрд╕реЗ рдХреИрд╕реЗ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:

1. `show threads option format=all` рдХреЛ [VIP рдкреЛрд░реНрдЯ](https://manual.manticoresearch.com/Connecting_to_the_server/HTTP#VIP-connection) рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЪрд▓рд╛рдПрдВред
2. рд▓реНрд╕реЛрдл рдЖрдЙрдЯрдкреБрдЯ рдПрдХрддреНрд░ рдХрд░реЗрдВ, рдХреНрдпреЛрдВрдХрд┐ рд▓рдЯрдХрдиреЗ рдХрд╛ рдХрд╛рд░рдг рдмрд╣реБрдд рдЕрдзрд┐рдХ рдХрдиреЗрдХреНрд╢рди рдпрд╛ рдЦреБрд▓реЗ рдлрд╝рд╛рдЗрд▓ рдбрд┐рд╕реНрдХреНрд░рд┐рдкреНрдЯрд░реНрд╕ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред
```
lsof -p `cat /var/run/manticore/searchd.pid`
```
3. рдХреЛрд░ рдХреЛ рдбрдВрдк рдХрд░реЗрдВ:
```
gcore `cat /var/run/manticore/searchd.pid`
```
(рдпрд╣ рдбрдВрдк рдХреЛ рд╡рд░реНрддрдорд╛рди рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рд╕рд╣реЗрдЬ рджреЗрдЧрд╛ред)

4. gdb рд╕реНрдерд╛рдкрд┐рдд рдФрд░ рдЪрд▓рд╛рдПрдВ:
```
gdb /usr/bin/searchd `cat /var/run/manticore/searchd.pid`
```
рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдпрд╣ рдЖрдкрдХреЗ рдЪрд▓ рд░рд╣реЗ рд╕рд░реНрдЪрдб рдХреЛ рд░реЛрдХ рджреЗрдЧрд╛, рд▓реЗрдХрд┐рди рдпрджрд┐ рдпрд╣ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рд▓рдЯрдХрд╛ рд╣реБрдЖ рд╣реИ, рддреЛ рдпрд╣ рд╕рдорд╕реНрдпрд╛ рдирд╣реАрдВ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдПред
5. gdb рдореЗрдВ рдЪрд▓рд╛рдПрдВ:
```
set pagination off
info threads
thread apply all bt
quit
```
6. рд╕рднреА рдЖрдЙрдЯрдкреБрдЯ рдФрд░ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдПрдХрддреНрд░ рдХрд░реЗрдВ рдФрд░ рдЙрдиреНрд╣реЗрдВ рдПрдХ рдмрдЧ рд░рд┐рдкреЛрд░реНрдЯ рдореЗрдВ рдкреНрд░рджрд╛рди рдХрд░реЗрдВред

рд╡рд┐рд╢реЗрд╖рдЬреНрдЮреЛрдВ рдХреЗ рд▓рд┐рдП: [рдЗрд╕ рдХрдорд┐рдЯ](https://github.com/manticoresoftware/manticoresearch/commit/e317f7aa30aad51cb19d34595458bb7c8811be21) рдореЗрдВ рдЬреЛрдбрд╝реЗ рдЧрдП рдореИрдХреНрд░реЛрдЬрд╝ рдбрд┐рдмрдЧрд┐рдВрдЧ рдореЗрдВ рд╕рд╣рд╛рдпрдХ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред

### рдХреНрд░реИрд╢ рдкрд░ рдХреЛрд░рдбрдВрдк рд╕рд╣реЗрдЬрдиреЗ рдХреЛ рдХреИрд╕реЗ рд╕рдХреНрд╖рдо рдХрд░реЗрдВ?

* рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдЖрдк рд╕рд░реНрдЪрдб рдХреЛ `--coredump` рдХреЗ рд╕рд╛рде рдЪрд▓рд╛рддреЗ рд╣реИрдВред рд╕реНрдХреНрд░рд┐рдкреНрдЯреНрд╕ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдиреЗ рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдк https://manual.manticoresearch.com/Starting_the_server/Linux#Custom-startup-flags-using-systemd , рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП::

```
[root@srv lib]# systemctl set-environment _ADDITIONAL_SEARCHD_PARAMS='--coredump'
[root@srv lib]# systemctl restart manticore
[root@srv lib]# ps aux|grep searchd
mantico+  1955  0.0  0.0  61964  1580 ?        S    11:02   0:00 /usr/bin/searchd --config /etc/manticoresearch/manticore.conf --coredump
mantico+  1956  0.6  0.0 392744  2664 ?        Sl   11:02   0:00 /usr/bin/searchd --config /etc/manticoresearch/manticore.conf --coredump
```

* рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдЖрдкрдХреЗ рдСрдкрд░реЗрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рдХреЛрд░ рдбрдВрдк рдХреЛ рд╕рд╣реЗрдЬрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддреЗ рд╣реБрдП рдХрд┐: `/proc/sys/kernel/core_pattern` рдЦрд╛рд▓реА рдирд╣реАрдВ рд╣реИред рдпрд╣ рд╡рд╣ рд╕реНрдерд╛рди рд╣реИ рдЬрд╣рд╛рдБ рдХреЛрд░ рдбрдВрдк рд╕рд╣реЗрдЬреЗ рдЬрд╛рдПрдВрдЧреЗред рдпрджрд┐ рдХреЛрд░ рдбрдВрдк рдХреЛ `core.searchd.1773.centos-4gb-hel1-1.1636454937` рдЬреИрд╕реЗ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рд╕рд╣реЗрдЬрдирд╛ рд╣реИ, рддреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдЪрд▓рд╛рдПрдВ:
```
echo "/cores/core.%e.%p.%h.%t" > /proc/sys/kernel/core_pattern
```

* рд╕рд░реНрдЪрдб рдХреЛ `ulimit -c unlimited` рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред рдпрджрд┐ рдЖрдк рдореИрдиреНрдЯрд┐рдХреЛрд░ рдХреЛ systemctl рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдкреНрд░рд╛рд░рдВрдн рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдпрд╣ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рд╕реАрдорд╛ рдХреЛ рдЕрдирдВрдд рдореЗрдВ рд╕реЗрдЯ рдХрд░ рджреЗрдЧрд╛ рдЬреИрд╕рд╛ рдХрд┐ рдореИрдиреНрдЯрд┐рдХреЛрд░.service рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдкрдВрдХреНрддрд┐ рдореЗрдВ рдмрддрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ:
```
[root@srv lib]# grep CORE /lib/systemd/system/manticore.service
LimitCORE=infinity
```

### рдореИрдВ рдбрд┐рдмрдЧ рдкреНрд░рддреАрдХреЛрдВ рдХреЛ рдХреИрд╕реЗ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реВрдБ?

рдореИрдиреНрдЯрд┐рдХреЛрд░ рд╕рд░реНрдЪ рдФрд░ рдореИрдиреНрдЯрд┐рдХреЛрд░ рдХреЙрд▓рдореНрдирд░ рд▓рд╛рдЗрдмреНрд░реЗрд░реА C++ рдореЗрдВ рд▓рд┐рдЦреА рдЧрдИ рд╣реИрдВ, рдЬреЛ рдЖрдкрдХреЗ рдСрдкрд░реЗрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рдкрд░ рдСрдкреНрдЯрд┐рдорд▓ рд░реВрдк рд╕реЗ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рд╣реЛрдиреЗ рд╡рд╛рд▓реА рд╕рдВрдХрд▓рд┐рдд рдмрд╛рдЗрдирд░реА рдлрд╝рд╛рдЗрд▓реЛрдВ рдХрд╛ рдкрд░рд┐рдгрд╛рдо рд╣реИред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдПрдХ рдмрд╛рдЗрдирд░реА рдХреЛ рдЪрд▓рд╛рддреЗ рд╕рдордп, рдЖрдкрдХреЗ рд╕рд┐рд╕реНрдЯрдо рдХреЛ рдкрд░рд┐рд╡рд░реНрддрдиреАрдп, рдХрд╛рд░реНрдпреЛрдВ, рд╡рд┐рдзрд┐рдпреЛрдВ, рдФрд░ рдХрдХреНрд╖рд╛рдУрдВ рдХреЗ рдирд╛рдореЛрдВ рддрдХ рдкреВрд░реНрдг рдкрд╣реБрдБрдЪ рдирд╣реАрдВ рд╣реЛрддреА рд╣реИред рдпрд╣ рдЬрд╛рдирдХрд╛рд░реА рдЕрд▓рдЧ "рдбрд┐рдмрдЧрдЗрдиреНрдлреЛ" рдпрд╛ "рд╕рд┐рдВрдмреЛрд▓ рдкреИрдХреЗрдЬ" рдореЗрдВ рдкреНрд░рджрд╛рди рдХреА рдЬрд╛рддреА рд╣реИред

рдбрд┐рдмрдЧ рдкреНрд░рддреАрдХ рд╕рдорд╕реНрдпрд╛ рдирд┐рд╡рд╛рд░рдг рдФрд░ рдбрд┐рдмрдЧрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐ рд╡реЗ рдЖрдкрдХреЛ рдЬрдм рд╕рд┐рд╕реНрдЯрдо рдХреНрд░реИрд╢ рд╣реБрдЖ рддрдм рд╕рд┐рд╕реНрдЯрдо рдХреА рд╕реНрдерд┐рддрд┐ рдХреЛ рджреЗрдЦрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВ, рдЬрд┐рд╕рдореЗрдВ рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рдирд╛рдо рд╢рд╛рдорд┐рд▓ рд╣реИрдВред рдореИрдиреНрдЯрд┐рдХреЛрд░ рд╕рд░реНрдЪ рд╕рд░реНрдЪрдб рд▓реЙрдЧ рдореЗрдВ рдПрдХ рдмреИрдХрдЯреНрд░реЗрд╕ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ рдФрд░ рдпрджрд┐ --coredump рдлрд╝реНрд▓реИрдЧ рдХреЗ рд╕рд╛рде рдЪрд▓рд╛рдпрд╛ рдЬрд╛рдП рддреЛ рдпрд╣ рдПрдХ рдХреЛрд░рдбрдВрдк рдмрдирд╛рддрд╛ рд╣реИред рдмрд┐рдирд╛ рдкреНрд░рддреАрдХреЛрдВ рдХреЗ, рдЖрдк рдХреЗрд╡рд▓ рдЖрдВрддрд░рд┐рдХ рдСрдлрд╕реЗрдЯ рджреЗрдЦреЗрдВрдЧреЗ, рдЬрд┐рд╕рд╕реЗ рдХреНрд░реИрд╢ рдХрд╛ рдХрд╛рд░рдг рдбрд┐рдХреЛрдб рдХрд░рдирд╛ рдХрдард┐рди рдпрд╛ рдЕрд╕рдВрднрд╡ рд╣реЛ рдЬрд╛рдПрдЧрд╛ред рдпрджрд┐ рдЖрдкрдХреЛ рдХреНрд░реИрд╢ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрдЧ рд░рд┐рдкреЛрд░реНрдЯ рдмрдирд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рддреЛ рдореИрдиреНрдЯрд┐рдХреЛрд░ рдЯреАрдо рдЕрдХреНрд╕рд░ рдЖрдкрдХреА рд╕рд╣рд╛рдпрддрд╛ рдХреЗ рд▓рд┐рдП рдбрд┐рдмрдЧ рдкреНрд░рддреАрдХреЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреАред
Manticore Search/Manticore Columnar Library рдбрд┐рдмрдЧ рд╕рд┐рдореНрдмреЙрд▓реНрд╕ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ CentOS рдХреЗ рд▓рд┐рдП `*debuginfo*` рдкреИрдХреЗрдЬ, Ubuntu рдФрд░ Debian рдХреЗ рд▓рд┐рдП `*dbgsym*` рдкреИрдХреЗрдЬ, рдпрд╛ Windows рдФрд░ macOS рдХреЗ рд▓рд┐рдП `*dbgsymbols*` рдкреИрдХреЗрдЬ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреАред рдпреЗ рдкреИрдХреЗрдЬ рд╕реНрдерд╛рдкрд┐рдд Manticore рдХреЗ рд╕рдорд╛рди рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рд╣реЛрдиреЗ рдЪрд╛рд╣рд┐рдПред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдпрджрд┐ рдЖрдкрдиреЗ Centos 8 рдореЗрдВ рдкреИрдХреЗрдЬ https://repo.manticoresearch.com/repository/manticoresearch/release/centos/8/x86_64/manticore-4.0.2_210921.af497f245-1.el8.x86_64.rpm рд╕реЗ Manticore Search рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдпрд╛ рд╣реИ, рддреЛ рд╕рдВрдмрдВрдзрд┐рдд рдкреИрдХреЗрдЬ рдЬрд┐рд╕рдореЗрдВ рд╕рд┐рдореНрдмреЙрд▓реНрд╕ рд╣реЛрдВрдЧреЗ рд╡рд╣ рд╣реЛрдЧрд╛ https://repo.manticoresearch.com/repository/manticoresearch/release/centos/8/x86_64/manticore-debuginfo-4.0.2_210921.af497f245-1.el8.x86_64.rpm

рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рджреЛрдиреЛрдВ рдкреИрдХреЗрдЬреЛрдВ рдХрд╛ рдПрдХ рд╕рдорд╛рди рдХрдорд┐рдЯ рдЖрдИрдбреА `af497f245` рд╣реИ, рдЬреЛ рдЗрд╕ рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рдирд┐рд░реНрдорд╛рдг рдХреЗ рдХрдорд┐рдЯ рд╕реЗ рдореЗрд▓ рдЦрд╛рддрд╛ рд╣реИред

рдпрджрд┐ рдЖрдкрдиреЗ Manticore рдХреЛ Manticore APT/YUM рднрдВрдбрд╛рд░ рд╕реЗ рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдпрд╛ рд╣реИ, рддреЛ рдЖрдк рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЙрдкрдХрд░рдгреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
* CentOS 7 рдореЗрдВ `debuginfo-install`
* CentOS 8 рдореЗрдВ `dnf debuginfo-install`
* Debian рдФрд░ Ubuntu рдореЗрдВ `find-dbgsym-packages`

рдЖрдкрдХреЗ рд▓рд┐рдП рдбрд┐рдмрдЧ рд╕рд┐рдореНрдмреЙрд▓реНрд╕ рдкреИрдХреЗрдЬ рдвреВрдВрдврдиреЗ рдХреЗ рд▓рд┐рдПред

### рдбрд┐рдмрдЧ рд╕рд┐рдореНрдмреЙрд▓реНрд╕ рдХреИрд╕реЗ рдЬрд╛рдВрдЪреЗрдВ?

1. `file /usr/bin/searchd` рдХреЗ рдЖрдЙрдЯрдкреБрдЯ рдореЗрдВ рдирд┐рд░реНрдорд╛рдг рдЖрдИрдбреА рдвреВрдВрдвреЗрдВ:

```
[root@srv lib]# file /usr/bin/searchd
/usr/bin/searchd: ELF 64-bit LSB executable, x86-64, version 1 (GNU/Linux), dynamically linked (uses shared libs), for GNU/Linux 2.6.32, BuildID[sha1]=2c582e9f564ea1fbeb0c68406c271ba27034a6d3, stripped
```

рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдирд┐рд░реНрдорд╛рдг рдЖрдИрдбреА 2c582e9f564ea1fbeb0c68406c271ba27034a6d3 рд╣реИред

2. `/usr/lib/debug/.build-id` рдореЗрдВ рд╕рд┐рдореНрдмреЙрд▓реНрд╕ рдЦреЛрдЬрдирд╛ рдЬреИрд╕реЗ:

```
[root@srv ~]# ls -la /usr/lib/debug/.build-id/2c/582e9f564ea1fbeb0c68406c271ba27034a6d3*
lrwxrwxrwx. 1 root root 23 Nov  9 10:42 /usr/lib/debug/.build-id/2c/582e9f564ea1fbeb0c68406c271ba27034a6d3 -> ../../../../bin/searchd
lrwxrwxrwx. 1 root root 27 Nov  9 10:42 /usr/lib/debug/.build-id/2c/582e9f564ea1fbeb0c68406c271ba27034a6d3.debug -> ../../usr/bin/searchd.debug
```

### рдЕрдкрдиреЗ рдбреЗрдЯрд╛ рдХреЛ рдЕрдкрд▓реЛрдб рдХрд░рдирд╛

<!-- example s3 -->
рдЕрдкрдиреЗ рдмрдЧ рдХреЛ рдареАрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╡рд┐рдХрд╛рд╕рдХрд░реНрддрд╛рдУрдВ рдХреЛ рдЕрдХреНрд╕рд░ рдЗрд╕реЗ рд╕реНрдерд╛рдиреАрдп рд░реВрдк рд╕реЗ рдкреБрди: рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред рдЗрд╕рдХреЗ рд▓рд┐рдП, рдЙрдиреНрд╣реЗрдВ рдЖрдкрдХреА рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓, рдЯреЗрдмрд▓ рдлрд╝рд╛рдЗрд▓реЗрдВ, рдмрд┐рдирд▓реЙрдЧ (рдпрджрд┐ рдореМрдЬреВрдж рд╣реЛрдВ), рдФрд░ рдХрднреА-рдХрднреА рд╕реНрд░реЛрдд рдбреЗрдЯрд╛ (рдЬреИрд╕реЗ рдмрд╛рд╣рд░реА рд╕реНрдЯреЛрд░реЗрдЬ рдпрд╛ XML/CSV рдлрд╝рд╛рдЗрд▓реЛрдВ рд╕реЗ рдбреЗрдЯрд╛) рдФрд░ рдкреНрд░рд╢реНрдиреЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред 

рдЬрдм рдЖрдк [GitHub рдкрд░ рдПрдХ рдЯрд┐рдХрдЯ рдмрдирд╛рддреЗ рд╣реИрдВ](https://github.com/manticoresoftware/manticoresearch/issues/new) рддреЛ рдЕрдкрдиреЗ рдбреЗрдЯрд╛ рдХреЛ рд╕рдВрд▓рдЧреНрди рдХрд░реЗрдВред рдпрджрд┐ рдбреЗрдЯрд╛ рдмрд╣реБрдд рдмрдбрд╝рд╛ рдпрд╛ рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рд╣реИ, рддреЛ рдЖрдк рдЗрд╕реЗ рд╣рдорд╛рд░реЗ write-only S3 рд╕реНрдЯреЛрд░реЗрдЬ рдкрд░ рдЕрдкрд▓реЛрдб рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ `s3://s3.manticoresearch.com/write-only/`ред 

рдЗрд╕реЗ рдЖрд╕рд╛рдиреА рд╕реЗ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо рдПрдХ рдЕрдкрд▓реЛрдб рддрдВрддреНрд░ рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ рдЬреЛ рдПрдХ Docker рдЗрдореЗрдЬ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред рдпрд╣ рдЗрдореЗрдЬ рд╣рдорд╛рд░реЗ рдУрдкрди-рд╕реЛрд░реНрд╕ рд░рд┐рдкреЛрдЬрд┐рдЯрд░реА [github.com/manticoresoftware/s3-upload](https://github.com/manticoresoftware/s3-upload) рд╕реЗ рдмрдирд╛рдИ рдЧрдИ рд╣реИ рдФрд░ рдЖрдкрдХреЛ Manticore рдХреЗ write-only S3 рд╕реНрдЯреЛрд░реЗрдЬ рдореЗрдВ рдбреЗрдЯрд╛ рдЕрдкрд▓реЛрдб рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддреА рд╣реИред рдЖрдк рдЗрд╕реЗ рдЗрд╕ рддрд░рд╣ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
1. рдЙрди рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдЕрдкрд▓реЛрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рдЬрд╛рдПрдВ рдЬрд┐рдиреНрд╣реЗрдВ рдЖрдк рдЕрдкрд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдФрд░ рдЪрд▓рд╛рдПрдВ:
   ```bash
   docker run -it --rm -v $(pwd):/upload manticoresearch/upload
   ```
2. рдпрд╣ рдХрд░реЗрдЧрд╛:
   - рдЖрдкрдХреЛ рд╕рдВрдмрдВрдзрд┐рдд рд╕рдорд╕реНрдпрд╛ рдХрд╛ URL/рд╕рдВрдЦреНрдпрд╛ рджрд░реНрдЬ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкреВрдЫреЗрдЧрд╛
   - рд╣рдорд╛рд░реЗ write-only S3 рд╕реНрдЯреЛрд░реЗрдЬ рдореЗрдВ **рд╡рд░реНрддрдорд╛рди рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдХреА рд╕рднреА рдлрд╝рд╛рдЗрд▓реЗрдВ** рдЕрдкрд▓реЛрдб рдХрд░реЗрдВ
   - рдЕрдВрдд рдореЗрдВ, рдЖрдкрдХреЛ рдПрдХ рдЕрдкрд▓реЛрдб рдкрде рджрд┐рдЦрд╛рдИ рджреЗрдЧрд╛ред рдХреГрдкрдпрд╛ рдЗрд╕ рдкрде рдХреЛ рд╡рд┐рдХрд╛рд╕рдХрд░реНрддрд╛рдУрдВ рдХреЗ рд╕рд╛рде рд╕рд╛рдЭрд╛ рдХрд░реЗрдВред

<!-- intro -->
рдЙрджрд╛рд╣рд░рдг:

<!-- request Example -->
```bash
docker run -it --rm -v $(pwd):/upload manticoresearch/upload
```

<!-- response Example -->
```bash
ЁЯЪА Manticore Search Upload Tool рдореЗрдВ рдЖрдкрдХрд╛ рд╕реНрд╡рд╛рдЧрдд рд╣реИ! ЁЯЪА

ЁЯУВ рдЕрдкрд▓реЛрдб рд╣реЛрдиреЗ рдХреЗ рд▓рд┐рдП рдлрд╝рд╛рдЗрд▓реЗрдВ:
  tt (800)

ЁЯФЧ рдХреГрдкрдпрд╛ рд╕рдВрдмрдВрдзрд┐рдд рд╕рдорд╕реНрдпрд╛ рдХрд╛ URL/рд╕рдВрдЦреНрдпрд╛ рджрд░реНрдЬ рдХрд░реЗрдВ
(рдЬреИрд╕реЗ, https://github.com/manticoresoftware/manticoresearch/issues/123 рдпрд╛ рдмрд╕ 123):
123

ЁЯУд рдЕрдкрд▓реЛрдб рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╢реБрд░реВ рд╣реЛ рд░рд╣реА рд╣реИ...
INFO: рдХреИрд╢ рдлрд╝рд╛рдЗрд▓ рдирд╣реАрдВ рдорд┐рд▓реА рдпрд╛ рдЦрд╛рд▓реА рд╣реИ, рдЗрд╕реЗ рдмрдирд╛рдиреЗ/рднрд░реЗ рдЬрд╛рдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рд╣реИред
INFO: рд╕реНрдерд╛рдиреАрдп рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреА рд╕реВрдЪреА рд╕рдВрдХрд▓рд┐рдд рдХреА рдЬрд╛ рд░рд╣реА рд╣реИ...
INFO: 23 рдлрд╝рд╛рдЗрд▓реЛрдВ рдкрд░ stat() рдЪрд▓рд╛рдирд╛ рдФрд░ MD5 рдорд╛рдиреЛрдВ рдХреЛ рдкрдврд╝рдирд╛/рдЧрдгрдирд╛ рдХрд░рдирд╛, рдЗрд╕рдореЗрдВ рдХреБрдЫ рд╕рдордп рд▓рдЧ рд╕рдХрддрд╛ рд╣реИ...
INFO: рд╕рд╛рд░рд╛рдВрд╢: рдЕрдкрд▓реЛрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП 23 рд╕реНрдерд╛рдиреАрдп рдлрд╝рд╛рдЗрд▓реЗрдВ
upload: './tt/tt.0.spa' -> 's3://write-only/issue-20250219-123/tt/tt.0.spa'  [1 рдХрд╛ 23]
 40 рдореЗрдВ рд╕реЗ 40   100% рдореЗрдВ    2s    15.03 B/s  рдкреВрд░рд╛
upload: './tt/tt.0.spd' -> 's3://write-only/issue-20250219-123/tt/tt.0.spd'  [2 рдХрд╛ 23]
 1 рдХрд╛ 1   100% рдореЗрдВ    0s     1.99 B/s  рдкреВрд░рд╛
upload: './tt/tt.0.spe' -> 's3://write-only/issue-20250219-123/tt/tt.0.spe'  [3 рдХрд╛ 23]
 1 рдХрд╛ 1   100% рдореЗрдВ    0s     2.02 B/s  рдкреВрд░рд╛
upload: './tt/tt.0.sph' -> 's3://write-only/issue-20250219-123/tt/tt.0.sph'  [4 рдХрд╛ 23]
 420 рдореЗрдВ рд╕реЗ 420   100% рдореЗрдВ    0s   895.32 B/s  рдкреВрд░рд╛
upload: './tt/tt.0.sphi' -> 's3://write-only/issue-20250219-123/tt/tt.0.sphi'  [5 рдХрд╛ 23]
 66 рдореЗрдВ рд╕реЗ 66   100% рдореЗрдВ    0s   142.67 B/s  рдкреВрд░рд╛
upload: './tt/tt.0.spi' -> 's3://write-only/issue-20250219-123/tt/tt.0.spi'  [6 рдХрд╛ 23]
 18 рдореЗрдВ рд╕реЗ 18   100% рдореЗрдВ    0s    39.13 B/s  рдкреВрд░рд╛
upload: './tt/tt.0.spidx' -> 's3://write-only/issue-20250219-123/tt/tt.0.spidx'  [7 рдХрд╛ 23]
 145 рдореЗрдВ рд╕реЗ 145   100% рдореЗрдВ    0s   313.38 B/s  рдкреВрд░рд╛
upload: './tt/tt.0.spm' -> 's3://write-only/issue-20250219-123/tt/tt.0.spm'  [8 рдХрд╛ 23]
 4 рдореЗрдВ рд╕реЗ 4   100% рдореЗрдВ    0s     8.36 B/s  рдкреВрд░рд╛
upload: './tt/tt.0.spp' -> 's3://write-only/issue-20250219-123/tt/tt.0.spp'  [9 рдХрд╛ 23]
 1 рдХрд╛ 1   100% рдореЗрдВ    0s     2.15 B/s  рдкреВрд░рд╛
upload: './tt/tt.0.spt' -> 's3://write-only/issue-20250219-123/tt/tt.0.spt'  [10 рдХрд╛ 23]
 36 рдореЗрдВ рд╕реЗ 36   100% рдореЗрдВ    0s    78.35 B/s  рдкреВрд░рд╛
upload: './tt/tt.1.spa' -> 's3://write-only/issue-20250219-123/tt/tt.1.spa'  [11 рдХрд╛ 23]
 48 рдореЗрдВ рд╕реЗ 48   100% рдореЗрдВ    0s    81.35 B/s  рдкреВрд░рд╛
upload: './tt/tt.1.spd' -> 's3://write-only/issue-20250219-123/tt/tt.1.spd'  [12 рдХрд╛ 23]
 1 рдХрд╛ 1   100% рдореЗрдВ    0s     1.65 B/s  рдкреВрд░рд╛
upload: './tt/tt.1.spe' -> 's3://write-only/issue-20250219-123/tt/tt.1.spe'  [13 рдХрд╛ 23]
 1 рдХрд╛ 1   100% рдореЗрдВ    0s     1.95 B/s  рдкреВрд░рд╛
upload: './tt/tt.1.sph' -> 's3://write-only/issue-20250219-123/tt/tt.1.sph'  [14 рдХрд╛ 23]
 420 рдореЗрдВ рд╕реЗ 420   100% рдореЗрдВ    0s   891.58 B/s  рдкреВрд░рд╛
upload: './tt/tt.1.sphi' -> 's3://write-only/issue-20250219-123/tt/tt.1.sphi'  [15 рдХрд╛ 23]
 82 рдореЗрдВ рд╕реЗ 82   100% рдореЗрдВ    0s   166.42 B/s  рдкреВрд░рд╛
рдЕрдкрд▓реЛрдб: './tt/tt.1.spi' -> 's3://write-only/issue-20250219-123/tt/tt.1.spi'  [16 рдореЗрдВ рд╕реЗ 23]
 18 рдореЗрдВ рд╕реЗ 18   100% рдореЗрдВ    0рд╕реЗ    39.46 B/s  рдкреВрд░реНрдг
рдЕрдкрд▓реЛрдб: './tt/tt.1.spidx' -> 's3://write-only/issue-20250219-123/tt/tt.1.spidx'  [17 рдореЗрдВ рд╕реЗ 23]
 183 рдореЗрдВ рд╕реЗ 183   100% рдореЗрдВ    0рд╕реЗ   374.04 B/s  рдкреВрд░реНрдг
рдЕрдкрд▓реЛрдб: './tt/tt.1.spm' -> 's3://write-only/issue-20250219-123/tt/tt.1.spm'  [18 рдореЗрдВ рд╕реЗ 23]
 4 рдореЗрдВ рд╕реЗ 4   100% рдореЗрдВ    0рд╕реЗ     8.42 B/s  рдкреВрд░реНрдг
рдЕрдкрд▓реЛрдб: './tt/tt.1.spp' -> 's3://write-only/issue-20250219-123/tt/tt.1.spp'  [19 рдореЗрдВ рд╕реЗ 23]
 1 рдореЗрдВ рд╕реЗ 1   100% рдореЗрдВ    0рд╕реЗ     1.28 B/s  рдкреВрд░реНрдг
рдЕрдкрд▓реЛрдб: './tt/tt.1.spt' -> 's3://write-only/issue-20250219-123/tt/tt.1.spt'  [20 рдореЗрдВ рд╕реЗ 23]
 50 рдореЗрдВ рд╕реЗ 50   100% рдореЗрдВ    1рд╕реЗ    34.60 B/s  рдкреВрд░реНрдг
рдЕрдкрд▓реЛрдб: './tt/tt.lock' -> 's3://write-only/issue-20250219-123/tt/tt.lock'  [21 рдореЗрдВ рд╕реЗ 23]
 0 рдореЗрдВ рд╕реЗ 0     0% рдореЗрдВ    0рд╕реЗ     0.00 B/s  рдкреВрд░реНрдг
рдЕрдкрд▓реЛрдб: './tt/tt.meta' -> 's3://write-only/issue-20250219-123/tt/tt.meta'  [22 рдореЗрдВ рд╕реЗ 23]
 456 рдореЗрдВ рд╕реЗ 456   100% рдореЗрдВ    0рд╕реЗ   923.34 B/s  рдкреВрд░реНрдг
рдЕрдкрд▓реЛрдб: './tt/tt.settings' -> 's3://write-only/issue-20250219-123/tt/tt.settings'  [23 рдореЗрдВ рд╕реЗ 23]
 3 рдореЗрдВ рд╕реЗ 3   100% рдореЗрдВ    0рд╕реЗ     6.41 B/s  рдкреВрд░реНрдг

тЬЕ рдЕрдкрд▓реЛрдб рдкреВрд░рд╛!
ЁЯУЛ рдХреГрдкрдпрд╛ рдЗрд╕ рдкрде рдХреЛ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЗ рд╕рд╛рде рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ:
issue-20250219-123

ЁЯТб рдЯрд┐рдк: Manticore рдЯреАрдо рдХреЗ рд╕рд╛рде рд╕рдВрд╡рд╛рдж рдХрд░рддреЗ рд╕рдордп рдЗрд╕ рдкрде рдХреЛ рд╢рд╛рдорд┐рд▓ рдХрд░рдирд╛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ
```
<!-- рдЕрдВрдд -->

рд╡реИрдХрд▓реНрдкрд┐рдХ рд░реВрдк рд╕реЗ, рдЖрдк рдЙрд╕реА рдХреЗ рд▓рд┐рдП S3 [Minio рдХреНрд▓рд╛рдЗрдВрдЯ](https://min.io/docs/minio/linux/reference/minio-mc.html) рдпрд╛ Amazon [s3cmd](https://s3tools.org/s3cmd) рдЙрдкрдХрд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЬреИрд╕реЗ:

1. рдХреНрд▓рд╛рдЗрдВрдЯ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ https://min.io/docs/minio/linux/reference/minio-mc.html#install-mc
рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП 64-рдмрд┐рдЯ рд▓рд┐рдирдХреНрд╕ рдкрд░:
   ```
   curl https://dl.min.io/client/mc/release/linux-amd64/mc \
   --create-dirs \
   -o $HOME/minio-binaries/mc
   chmod +x $HOME/minio-binaries/mc
   export PATH=$PATH:$HOME/minio-binaries/
   ```
2. рд╣рдорд╛рд░рд╛ s3 рд╣реЛрд╕реНрдЯ рдЬреЛрдбрд╝реЗрдВ (рдХреНрд░рд┐рдпрд╛рдиреНрд╡рдпрди рдпреЛрдЧреНрдп рдХрд╛ рдкреВрд░реНрдг рдкрде рдпрд╛ рдЗрд╕рдХреА рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рдмрджрд▓реЗрдВ): `cd $HOME/minio-binaries` рдФрд░ рдлрд┐рд░ `./mc config host add manticore http://s3.manticoresearch.com:9000 manticore manticore`
3. рдЕрдкрдиреА рдлрд╝рд╛рдЗрд▓реЗрдВ рдХреЙрдкреА рдХрд░реЗрдВ (рдХреНрд░рд┐рдпрд╛рдиреНрд╡рдпрди рдпреЛрдЧреНрдп рдХрд╛ рдкреВрд░реНрдг рдкрде рдпрд╛ рдЗрд╕рдХреА рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рдмрджрд▓реЗрдВ): `cd $HOME/minio-binaries` рдФрд░ рдлрд┐рд░ `./mc cp -r issue-1234/ manticore/write-only/issue-1234` . рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдлрд╝реЛрд▓реНрдбрд░ рдХрд╛ рдирд╛рдо рдЕрджреНрд╡рд┐рддреАрдп рд╣реИ рдФрд░ рдпрд╣ рд╕рдмрд╕реЗ рдЕрдЪреНрдЫрд╛ рд╣реИ рдпрджрд┐ рдпрд╣ рдЙрд╕ рдореБрджреНрджреЗ рдХреЗ рдЕрдиреБрд░реВрдк рд╣реЛ рдЬрд┐рд╕реЗ рдЖрдкрдиреЗ GitHub рдкрд░ рдмрдЧ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рддреЗ рд╕рдордп рдмрддрд╛рдпрд╛ рдерд╛ред

### DEBUG

```sql
DEBUG [ рдЙрдк-рдХрдорд╛рдВрдб ]
```

`DEBUG` рдХрдерди рдбреЗрд╡рд▓рдкрд░реНрд╕ рдФрд░ рдкрд░реАрдХреНрд╖рдгрдХрд░реНрддрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рд╡рд┐рднрд┐рдиреНрди рдЖрдВрддрд░рд┐рдХ рдпрд╛ VIP рдЖрджреЗрд╢реЛрдВ рдХреЛ рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред рд╣рд╛рд▓рд╛рдБрдХрд┐, рдЗрд╕рдХрд╛ рдЙрддреНрдкрд╛рджрди рдЙрдкрдпреЛрдЧ рдХреЗ рд▓рд┐рдП рдЗрд░рд╛рджрд╛ рдирд╣реАрдВ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ `рдЙрдк-рдХрдорд╛рдВрдб` рдШрдЯрдХ рдХрд╛ рд╕рд┐рдВрдЯреИрдХреНрд╕ рдХрд┐рд╕реА рднреА рдирд┐рд░реНрдорд╛рдг рдореЗрдВ рд╕реНрд╡рддрдВрддреНрд░ рд░реВрдк рд╕реЗ рдмрджрд▓ рд╕рдХрддрд╛ рд╣реИред

рд╡рд░реНрддрдорд╛рди рд╕рдВрджрд░реНрдн рдореЗрдВ рдЙрдкрд▓рдмреНрдз рдЙрдкрдпреЛрдЧреА рдЖрджреЗрд╢реЛрдВ рдФрд░ `DEBUG` рдХрдерди рдЙрдк-рдХрдорд╛рдВрдб рдХреА рд╕реВрдЪреА рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП, рдмрд╕ рдХрд┐рд╕реА рднреА рдкреИрд░рд╛рдореАрдЯрд░ рдХреЗ рдмрд┐рдирд╛ `DEBUG` рдХреЛ рдХреЙрд▓ рдХрд░реЗрдВред

```sql
mysql> debug;
+-------------------------------------------------------------------------+----------------------------------------------------------------------------------------+
| рдЖрджреЗрд╢                                                                    | рдЕрд░реНрде                                                                                  |
+-------------------------------------------------------------------------+----------------------------------------------------------------------------------------+
| рд▓реЙрдЧ рдлреНрд▓рд╢ рдХрд░реЗрдВ                                                          | USR1 рд╕рдВрдХреЗрдд рдХреА рдирдХрд▓ рдХрд░реЗрдВ                                                               |
| рдЕрдиреБрдХреНрд░рдордгрд┐рдХрд╛ рдкреБрдирдГ рд▓реЛрдб рдХрд░реЗрдВ                                               | HUP рд╕рдВрдХреЗрдд рдХреА рдирдХрд▓ рдХрд░реЗрдВ                                                                |
| debug token <password>                                                  | рдкрд╛рд╕рд╡рд░реНрдб рдХреЗ рд▓рд┐рдП рдЯреЛрдХрди рдХреА рдЧрдгрдирд╛ рдХрд░реЗрдВ                                                    |
| debug malloc_stats                                                      | 'malloc_stats' рдХрд░реЗрдВ, рдЦреЛрдЬd.log рдореЗрдВ рдкрд░рд┐рдгрд╛рдо                                             |
| debug malloc_trim                                                       | 'malloc_trim' рдХреЙрд▓ рдХрд░реЗрдВ                                                                |
| debug sleep <N>                                                         | <N> рд╕реЗрдХрдВрдб рдХреЗ рд▓рд┐рдП рд╕реЛ рдЬрд╛рдУ                                                             |
| debug tasks                                                             | рд╡реИрд╢реНрд╡рд┐рдХ рдХрд╛рд░реНрдп рд╕рд╛рдВрдЦреНрдпрд┐рдХреА рджрд┐рдЦрд╛рдПрдВ (@@system.tasks рд╕реЗ рдЪрдпрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ)                   |
| debug sched                                                             | рдХрд╛рд░реНрдп рдкреНрд░рдмрдВрдзрдХ рдХреА рд╢реЗрдбреНрдпреВрд▓ рджрд┐рдЦрд╛рдПрдВ (@@system.sched рд╕реЗ рдЪрдпрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ)               |
| debug merge <TBL> [chunk] <X> [into] [chunk] <Y> [option sync=1,byid=0] | RT рддрд╛рд▓рд┐рдХрд╛ <TBL> рдХреЗ рд▓рд┐рдП рдбрд┐рд╕реНрдХ рдЦрдВрдб X рдХреЛ рдбрд┐рд╕реНрдХ рдЦрдВрдб Y рдореЗрдВ рдорд░реНрдЬ рдХрд░реЗрдВ                      |
| debug drop [chunk] <X> [from] <TBL> [option sync=1]                    | RT рддрд╛рд▓рд┐рдХрд╛ <TBL> рдХреЗ рд▓рд┐рдП рдбрд┐рд╕реНрдХ рдЦрдВрдб X рдХреЛ рд╣рдЯрд╛ рджреЗрдВ                                      |
| debug files <TBL> [option format=all|external]                          | <TBL> рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреА рд╕реВрдЪреА рдмрдирд╛рдПрдВред 'all' - рдмрд╛рд╣рд░реА (рд╢рдмреНрдж рд░реВрдк, рд╕реНрдЯреЙрдкрд╡рд░реНрдб, рдЖрджрд┐) рд╕рд╣рд┐рдд   |
| debug close                                                             | рд╕рд░реНрд╡рд░ рд╕реЗ рдЕрдкрдирд╛ рдХрдиреЗрдХреНрд╢рди рдмрдВрдж рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╣реЗрдВ                                          |
| debug compress <TBL> [chunk] <X> [option sync=1]                        | RT рддрд╛рд▓рд┐рдХрд╛ <TBL> рдХреЗ рдбрд┐рд╕реНрдХ рдЦрдВрдб X рдХреЛ рд╕рдВрдХреБрдЪрд┐рдд рдХрд░реЗрдВ (рд╣рдЯрд╛рдИ рдЧрдИ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝реЛрдВ рдХреЛ рдорд┐рдЯрд╛ рджреЗрдВ)      |
| debug split <TBL> [chunk] <X> on @<uservar> [option sync=1]             | @uservar рд╕реЗ DocIDs рдХреЗ рд╕реЗрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ RT рддрд╛рд▓рд┐рдХрд╛ <TBL> рдХреЗ рдбрд┐рд╕реНрдХ рдЦрдВрдб X рдХреЛ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд░реЗрдВ  |
| debug wait <cluster> [like 'xx'] [option timeout=3]                     | <cluster> рддреИрдпрд╛рд░ рд╣реЛрдиреЗ рдХрд╛ рдЗрдВрддрдЬрд╛рд░ рдХрд░реЗрдВ, рд▓реЗрдХрд┐рди рдЕрдзрд┐рдХрддрдо 3 рд╕реЗрдХрдВрдбред                        |
| debug wait <cluster> status <N> [like 'xx'] [option timeout=13]         | <cluster> рдХрдорд┐рдЯ <N> рддрдХ рдкрд╣реБрдБрдЪрдиреЗ рдХрд╛ рдЗрдВрддрдЬрд╝рд╛рд░ рдХрд░реЗрдВ, рд▓реЗрдХрд┐рди рдЕрдзрд┐рдХрддрдо 13 рд╕реЗрдХрдВрдб                 |
| debug meta                                                              | max_matches/pseudo_shards рджрд┐рдЦрд╛рдПрдБред profiling=1 рд╕реЗрдЯ рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ                                    |
| debug trace OFF|'path/to/file' [<N>]                                    | рдЯреНрд░реЗрд╕ рдлреНрд▓реЛ рдХреЛ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рддрдм рддрдХ рд▓рд┐рдЦреЗрдВ рдЬрдм рддрдХ N рдмрд╛рдЗрдЯреНрд╕ рдирд╣реАрдВ рд▓рд┐рдЦреА рдЬрд╛рддреАрдВ, рдпрд╛ 'trace OFF'                               |
| debug curl <URL>                                                        | libcurl рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рджреА рдЧрдИ url рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░реЗрдВ                                                          |
+-------------------------------------------------------------------------+----------------------------------------------------------------------------------------+
19 rows in set (0.00 sec)
```

VIP рдХрдиреЗрдХреНрд╢рди рд╕реЗ рд╕рдорд╛рди:
```sql
mysql> debug;
+-------------------------------------------------------------------------+----------------------------------------------------------------------------------------+
| command                                                                 | meaning                                                                                |
+-------------------------------------------------------------------------+----------------------------------------------------------------------------------------+
| flush logs                                                              | USR1 рд╕рд┐рдЧреНрдирд▓ рдХрд╛ рдЕрдиреБрдХрд░рдг рдХрд░реЗрдВ                                                                    |
| reload indexes                                                          | HUP рд╕рд┐рдЧреНрдирд▓ рдХрд╛ рдЕрдиреБрдХрд░рдг рдХрд░реЗрдВ                                                                     |
| debug shutdown <password>                                               | TERM рд╕рд┐рдЧреНрдирд▓ рдХрд╛ рдЕрдиреБрдХрд░рдг рдХрд░реЗрдВ                                                                    |
| debug crash <password>                                                  | рдбреЗрдорди рдХреЛ рдХреНрд░реИрд╢ рдХрд░реЗрдВ (SIGSEGV рдХрд╛рд░реНрдп рдмрдирд╛рдПрдБ)                                                     |
| debug token <password>                                                  | рдкрд╛рд╕рд╡рд░реНрдб рдХреЗ рд▓рд┐рдП рдЯреЛрдХрди рдХрд╛ рдЕрдиреБрдорд╛рди рд▓рдЧрд╛рдПрдБ                                                           |
| debug malloc_stats                                                      | 'malloc_stats' рдХрд░реЗрдВ, рдкрд░рд┐рдгрд╛рдо searchd.log рдореЗрдВ                                              |
| debug malloc_trim                                                       | 'malloc_trim' рдХреЙрд▓ рдХрд░реЗрдВ                                                             |
| debug procdump                                                          | рд╡реЙрдЪрдбреЙрдЧ рд╕реЗ рд╣рдореЗрдВ рдбрдВрдк рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╣реЗрдВ                                                                |
| debug setgdb on|off                                                     | gdb рдХреЗ рд╕рд╛рде рд╕рдВрднрд╛рд╡рд┐рдд рдЦрддрд░рдирд╛рдХ рдХреНрд░реИрд╢ рдбрдВрдкрд┐рдВрдЧ рд╕рдХреНрд╖рдо рдпрд╛ рдЕрдХреНрд╖рдо рдХрд░реЗрдВ                         |
| debug setgdb status                                                     | gdb рдбрдВрдкрд┐рдВрдЧ рдХреА рд╡рд░реНрддрдорд╛рди рд╕реНрдерд┐рддрд┐ рджрд┐рдЦрд╛рдПрдБ                                                       |
| debug sleep <N>                                                         | <N> рд╕реЗрдХрдВрдб рдХреЗ рд▓рд┐рдП рд╕реЛрдПрдБ                                                                  |
| debug tasks                                                             | рд╡реИрд╢реНрд╡рд┐рдХ рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рдЖрдВрдХрдбрд╝реЗ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░реЗрдВ (рдЗрд╕рдХреЗ рдмрдЬрд╛рдП @@system.tasks рд╕реЗ рд╕реЗрд▓реЗрдХреНрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ)                     |
| debug sched                                                             | рдХрд╛рд░реНрдп рдкреНрд░рдмрдВрдзрдХ рдЕрдиреБрд╕реВрдЪреА рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░реЗрдВ (рдЗрд╕рдХреЗ рдмрдЬрд╛рдП @@system.sched рд╕реЗ рд╕реЗрд▓реЗрдХреНрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ)                 |
| debug merge <TBL> [chunk] <X> [into] [chunk] <Y> [option sync=1,byid=0] | RT рддрд╛рд▓рд┐рдХрд╛ <TBL> рдХреЗ рд▓рд┐рдП рдбрд┐рд╕реНрдХ рдЪрдВрдХ X рдХреЛ рдбрд┐рд╕реНрдХ рдЪрдВрдХ Y рдореЗрдВ рдорд░реНрдЬ рдХрд░реЗрдВ                                |
| debug drop [chunk] <X> [from] <TBL> [option sync=1]                     | RT рддрд╛рд▓рд┐рдХрд╛ <TBL> рдХреЗ рд▓рд┐рдП рдбрд┐рд╕реНрдХ рдЪрдВрдХ X рдХреЛ рдбреНрд░реЙрдк рдХрд░реЗрдВ                                                   |
| debug files <TBL> [option format=all|external]                          | <TBL> рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреА рд╕реВрдЪреА рдмрдирд╛рдПрдВред 'all' - рдмрд╛рд╣рд░реА (рд╢рдмреНрджрд░реВрдк, рд╕реНрдЯреЙрдкрд╡рд░реНрдбреНрд╕, рдЖрджрд┐) рд╕рд╣рд┐рдд |
| debug close                                                             | рд╕рд░реНрд╡рд░ рд╕реЗ рдХрдиреЗрдХреНрд╢рди рдмрдВрдж рдХрд░рдиреЗ рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░реЗрдВ                                          |
| debug compress <TBL> [chunk] <X> [option sync=1]                        | RT рддрд╛рд▓рд┐рдХрд╛ <TBL> рдХреЗ рдбрд┐рд╕реНрдХ рдЪрдВрдХ X рдХреЛ рд╕рдВрдХреБрдЪрд┐рдд рдХрд░реЗрдВ (рдорд┐рдЯрд╛рдП рдЧрдП рджрд╕реНрддрд╛рд╡реЗрдЬрд╝реЛрдВ рдХреЛ рд╣рдЯрд╛ рджреЗрдВ)                   |
| debug split <TBL> [chunk] <X> on @<uservar> [option sync=1]             | RT рддрд╛рд▓рд┐рдХрд╛ <TBL> рдХреЗ рдбрд┐рд╕реНрдХ рдЪрдВрдХ X рдХреЛ @uservar рд╕реЗ DocIDs рдХреЗ рд╕реЗрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд░реЗрдВ                 |
| debug wait <cluster> [like 'xx'] [option timeout=3]                     | <cluster> рддреИрдпрд╛рд░ рд╣реЛрдиреЗ рдХреА рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░реЗрдВ, рд▓реЗрдХрд┐рди 3 рд╕реЗрдХрдВрдб рд╕реЗ рдЕрдзрд┐рдХ рдирд╣реАрдВред                                         |
| debug wait <cluster> status <N> [like 'xx'] [option timeout=13]         | <cluster> рдХрдорд┐рдЯ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░реЗрдВ <N>, рд▓реЗрдХрд┐рди 13 рд╕реЗрдХрдВрдб рд╕реЗ рдЕрдзрд┐рдХ рдирд╣реАрдВ                            |
| debug meta                                                              | max_matches/pseudo_shards рджрд┐рдЦрд╛рдПрдБред profiling=1 рд╕реЗрдЯ рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ                                  |
| debug trace OFF|'path/to/file' [<N>]                                    | рдЯреНрд░реЗрд╕ рдлреНрд▓реЛ рдХреЛ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рддрдм рддрдХ рд▓рд┐рдЦреЗрдВ рдЬрдм рддрдХ N рдмрд╛рдЗрдЯреНрд╕ рдирд╣реАрдВ рд▓рд┐рдЦреА рдЬрд╛рддреАрдВ, рдпрд╛ 'trace OFF'                               |
| debug curl <URL>                                                        | libcurl рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рджреА рдЧрдИ url рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░реЗрдВ                                                          |
+-------------------------------------------------------------------------+----------------------------------------------------------------------------------------+
24 rows in set (0.00 sec)
```

рд╕рднреА `debug XXX` рдХрдорд╛рдВрдб рдХреЛ рдЕрд╕реНрдерд╛рдпреА рдорд╛рдирд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП рдФрд░ рдХрд┐рд╕реА рднреА рд╕рдордп рд╕рдВрд╢реЛрдзрди рдХреЗ рдЕрдзреАрди рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рдпрджрд┐ рд╡реЗ рдмрджрд▓рддреЗ рд╣реИрдВ рддреЛ рдЖрд╢реНрдЪрд░реНрдпрдЪрдХрд┐рдд рди рд╣реЛрдВред рдпрд╣ рдЙрджрд╛рд╣рд░рдг рдЖрдЙрдЯрдкреБрдЯ рдЙрдкрд▓рдмреНрдз рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдХрдорд╛рдВрдбреЛрдВ рдХреЛ рдкреНрд░рддрд┐рдмрд┐рдВрдмрд┐рдд рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЕрдкрдиреЗ рд╕рд┐рд╕реНрдЯрдо рдкрд░ рдХреЛрд╢рд┐рд╢ рдХрд░реЗрдВ рдпрд╣ рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рдЖрдкрдХреА рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдкрд░ рдХреНрдпрд╛ рдЙрдкрд▓рдмреНрдз рд╣реИред рдЗрд╕рдХреЗ рдЕрддрд┐рд░рд┐рдХреНрдд, рдЗрд╕ рдЫреЛрдЯреЗ 'рдЕрд░реНрде' рдХреЙрд▓рдо рдХреЗ рдЕрд▓рд╛рд╡рд╛ рдХреЛрдИ рд╡рд┐рд╕реНрддреГрдд рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдкреНрд░рджрд╛рди рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред
рдПрдХ рддреНрд╡рд░рд┐рдд рдЙрджрд╛рд╣рд░рдг рдХреЗ рд░реВрдк рдореЗрдВ, рджреЛ рдЖрджреЗрд╢ рдЬреЛ рдХреЗрд╡рд▓ VIP рдЧреНрд░рд╛рд╣рдХреЛрдВ рдХреЗ рд▓рд┐рдП рдЙрдкрд▓рдмреНрдз рд╣реИрдВ, рдиреАрдЪреЗ рд╡рд░реНрдгрд┐рдд рд╣реИрдВ - рд╢рдЯрдбрд╛рдЙрди рдФрд░ рдХреНрд░реИрд╢ред рджреЛрдиреЛрдВ рдХреЛ рдПрдХ рдЯреЛрдХрди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рдЬрд┐рд╕реЗ рдбрд┐рдмрдЧ рдЯреЛрдХрди рдЙрдк-рдЖрджреЗрд╢ рдХреЗ рд╕рд╛рде рдЙрддреНрдкрдиреНрди рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдФрд░ рдЗрд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧ рдлрд╝рд╛рдЗрд▓ рдХреЗ рд╕рд░реНрдЪрдбреА рд╕реЗрдХреНрд╢рди рдореЗрдВ [shutdown_token](Server_settings/Searchd.md#shutdown_token) рдкреИрд░рд╛рдореАрдЯрд░ рдореЗрдВ рдЬреЛрдбрд╝рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдпрджрд┐ рдРрд╕реА рдХреЛрдИ рдЕрдиреБрднрд╛рдЧ рдореМрдЬреВрдж рдирд╣реАрдВ рд╣реИ, рдпрд╛ рдпрджрд┐ рдкреНрд░рджрд╛рди рдХрд┐рдпрд╛ рдЧрдпрд╛ рдкрд╛рд╕рд╡рд░реНрдб рд╣реИрд╢ рдХреЙрдиреНрдлрд╝рд┐рдЧ рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдЯреЛрдХрди рд╕реЗ рдореЗрд▓ рдирд╣реАрдВ рдЦрд╛рддрд╛ рд╣реИ, рддреЛ рдЙрдк-рдЖрджреЗрд╢ рдХреБрдЫ рдирд╣реАрдВ рдХрд░реЗрдВрдЧреЗред

```sql
mysql> debug token hello;
+-------------+------------------------------------------+
| command     | result                                   |
+-------------+------------------------------------------+
| debug token | aaf4c61ddcc5e8a2dabede0f3b482cd9aea9434d |
+-------------+------------------------------------------+
1 row in set (0,00 sec)
```

рдЙрдк-рдЖрджреЗрд╢ `shutdown` рд╕рд░реНрд╡рд░ рдХреЛ TERM рд╕рд┐рдЧреНрдирд▓ рднреЗрдЬреЗрдЧрд╛, рдЬрд┐рд╕рд╕реЗ рд╡рд╣ рдмрдВрдж рд╣реЛ рдЬрд╛рдПрдЧрд╛ред рдпрд╣ рдЦрддрд░рдирд╛рдХ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдХреЛрдИ рднреА рдЙрддреНрдкрд╛рджрди рд╕реЗрд╡рд╛ рдХреЛ рдЧрд▓рддреА рд╕реЗ рдмрдВрдж рдХрд░рдирд╛ рдирд╣реАрдВ рдЪрд╛рд╣рддрд╛ред рдЗрд╕рд▓рд┐рдП, рдЗрд╕рдХреЗ рд▓рд┐рдП VIP рдХрдиреЗрдХреНрд╢рди рдФрд░ рдЙрдкрдпреЛрдЧ рдХреЗ рд▓рд┐рдП рдкрд╛рд╕рд╡рд░реНрдб рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред

рдЙрдк-рдЖрджреЗрд╢ `crash` рд╕рдЪрдореБрдЪ рдПрдХ рдХреНрд░реИрд╢ рдХрд╛ рдХрд╛рд░рдг рдмрдирддрд╛ рд╣реИред рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдкрд░реАрдХреНрд╖рдг рдХреЗ рдЙрджреНрджреЗрд╢реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЬреИрд╕реЗ рдпрд╣ рдкрд░реАрдХреНрд╖рдг рдХрд░рдирд╛ рдХрд┐ рд╕рд┐рд╕реНрдЯрдо рдкреНрд░рдмрдВрдзрдХ рд╕реЗрд╡рд╛ рдХреА рдЬреАрд╡рдВрддрддрд╛ рдХреЛ рдХреИрд╕реЗ рдмрдирд╛рдП рд░рдЦрддрд╛ рд╣реИ рдпрд╛ рдХреЛрд░рдбрдВрдк рдХреЛ рдЯреНрд░реИрдХ рдХрд░рдиреЗ рдХреА рд╡реНрдпрд╡рд╣рд╛рд░реНрдпрддрд╛ рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░рдирд╛ред

рдпрджрд┐ рдХреБрдЫ рдЖрджреЗрд╢ рдЕрдзрд┐рдХ рд╕рд╛рдорд╛рдиреНрдп рд╕рдВрджрд░реНрдн рдореЗрдВ рдЙрдкрдпреЛрдЧреА рдкрд╛рдП рдЬрд╛рддреЗ рд╣реИрдВ, рддреЛ рдЙрдиреНрд╣реЗрдВ рдбрд┐рдмрдЧ рдЙрдк-рдЖрджреЗрд╢реЛрдВ рд╕реЗ рдПрдХ рдЕрдзрд┐рдХ рд╕реНрдерд┐рд░ рдФрд░ рд╕рд╛рдорд╛рдиреНрдп рд╕реНрдерд╛рди рдкрд░ рд▓реЗ рдЬрд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ (рдЬреИрд╕реЗ `debug tasks` рдФрд░ `debug sched` рдореЗрдВ рдЙрджрд╛рд╣рд░рдгрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ)ред

<!-- proofread -->


