# क्वेरी स्ट्रिंग में वर्णों का एस्केप करना

चूँकि कुछ विशेष वर्ण क्वेरी स्ट्रिंग में ऑपरेटर के रूप में कार्य करते हैं, इन्हें क्वेरी त्रुटियों या अनपेक्षित मिलान स्थितियों से बचने के लिए एस्केप करना आवश्यक है।

निम्नलिखित वर्णों को बैकस्लैश (`\`) का उपयोग करके एस्केप किया जाना चाहिए:

```
!    "    $    '    (    )    -    /    <    @    \    ^    |    ~
```

## MySQL कमांड लाइन क्लाइंट में

एकल उद्धरण (') को एस्केप करने के लिए, एक बैकस्लैश का उपयोग करें:
```sql
SELECT * FROM your_index WHERE MATCH('l\'italiano');
```


पहले उल्लिखित सूची में अन्य वर्ण, जो कि ऑपरेटर या क्वेरी संरचनाएँ हैं, को इंजन द्वारा साधारण वर्णों की तरह माना जाना चाहिए, जिसमें उनके पहले एक एस्केप वर्ण हो।
बैकस्लैश को भी एस्केप करना आवश्यक है, जिसके परिणामस्वरूप दो बैकस्लैश उत्पन्न होते हैं:

```sql
SELECT * FROM your_index WHERE MATCH('r\\&b | \\(official video\\)');
```

एक वर्ण के रूप में बैकस्लैश का उपयोग करने के लिए, आपको बैकस्लैश को एक साधारण वर्ण के रूप में और एस्केप ऑपरेटर के रूप में एस्केप करना होगा, जिसके लिए चार बैकस्लैश की आवश्यकता होती है:

```sql
SELECT * FROM your_index WHERE MATCH('\\\\ABC');
```

जब आप Manticore Search में JSON डेटा के साथ काम कर रहे हों और JSON स्ट्रिंग के भीतर डबल उद्धरण (`"`) शामिल करने की आवश्यकता हो, तो इसे सही एस्केपिंग के साथ संभालना महत्वपूर्ण है। JSON में, किसी स्ट्रिंग के भीतर डबल उद्धरण को बैकस्लैश (`\`) का उपयोग करके एस्केप किया जाता है। हालांकि, जब SQL क्वेरी के माध्यम से JSON डेटा डाला जाता है, तो Manticore Search स्ट्रिंग्स के भीतर बैकस्लैश (`\`) को एक एस्केप वर्ण के रूप में व्याख्यायित करता है।

यह सुनिश्चित करने के लिए कि JSON डेटा में डबल उद्धरण सही ढंग से डाला गया है, आपको स्वयं बैकस्लैश को एस्केप करना होगा। इसका परिणाम डबल उद्धरण से पहले दो बैकस्लैश (`\\`) के उपयोग में होता है। उदाहरण के लिए:

```sql
insert into tbl(j) values('{"a": "\\"abc\\""}');
```

## MySQL ड्राइवर का उपयोग करना

MySQL ड्राइवर एस्केपिंग फ़ंक्शंस प्रदान करते हैं (जैसे, PHP में `mysqli_real_escape_string` या Python में `conn.escape_string`), लेकिन वे केवल विशिष्ट वर्णों को एस्केप करते हैं।
आपको पहले उल्लिखित सूची में उन वर्णों के लिए एस्केपिंग जोड़नी होगी जिन्हें उनके संबंधित फ़ंक्शन द्वारा एस्केप नहीं किया गया है।
चूंकि ये फ़ंक्शंस आपके लिए बैकस्लैश को एस्केप कर देते हैं, आपको केवल एक बैकस्लैश जोड़ने की आवश्यकता है।

यह उन ड्राइवरों पर भी लागू होता है जो (क्लाइंट-साइड) प्रिपेयर्ड स्टेटमेंट्स का समर्थन करते हैं। उदाहरण के लिए, PHP PDO प्रिपेयर्ड स्टेटमेंट्स के साथ, आपको `$` चर के लिए एक बैकस्लैश जोड़ना होगा:

```php
$statement = $ln_sph->prepare( "SELECT * FROM index WHERE MATCH(:match)");
$match = '\$manticore';
$statement->bindParam(':match',$match,PDO::PARAM_STR);
$results = $statement->execute();
```

इसका परिणाम अंतिम क्वेरी में होता है `SELECT * FROM index WHERE MATCH('\\$manticore');`

## HTTP JSON API में

SQL प्रोटोकॉल के लिए समान नियम लागू होते हैं, इस अपवाद के साथ कि JSON में, डबल उद्धरण को एकल बैकस्लैश के साथ एस्केप करना चाहिए, जबकि शेष वर्णों के लिए डबल एस्केपिंग आवश्यक होती है।

JSON लाइब्रेरीज़ या उन फ़ंक्शनों का उपयोग करते समय जो डेटा संरचनाओं को JSON स्ट्रिंग्स में कनवर्ट करते हैं, डबल उद्धरण और एकल बैकस्लैश स्वचालित रूप से एस्केप हो जाते हैं और उन्हें स्पष्ट रूप से एस्केप करने की आवश्यकता नहीं होती।



## क्लाइंट्स में

[आधिकारिक क्लाइंट्स](https://github.com/manticoresoftware/) अपने संबंधित प्रोग्रामिंग भाषाओं में उपलब्ध सामान्य JSON लाइब्रेरीज़/फ़ंक्शन्स का उपयोग करते हैं। उपर्युक्त एस्केपिंग नियम यहाँ भी लागू होते हैं।


## एस्टरिस्क का एस्केप करना

ऐस्टरिस्क (`*`) एक अद्वितीय वर्ण है जो दो कार्य करता है:
* वाइल्डकार्ड उपसर्ग/परिशिष्ट विस्तारक के रूप में
* वाक्यांश खोज में किसी भी शब्द को संशोधित करने वाले के रूप में

अन्य विशेष वर्णों के विपरीत जो ऑपरेटर के रूप में कार्य करते हैं, ऐस्टरिस्क को एस्केप नहीं किया जा सकता जब वह अपनी किसी कार्यक्षमता को प्रदान करने की स्थिति में होता है।

गैर-वाइल्डकार्ड क्वेरीज़ में, ऐस्टरिस्क को एस्केप करने की आवश्यकता नहीं होती है, चाहे वह `charset_table` में हो या नहीं।

वाइल्डकार्ड क्वेरीज़ में, किसी शब्द के मध्य में स्थित ऐस्टरिस्क को एस्केप करने की आवश्यकता नहीं होती है। एक वाइल्डकार्ड ऑपरेटर के रूप में (शब्द की शुरुआत या अंत में), ऐस्टरिस्क हमेशा वाइल्डकार्ड ऑपरेटर के रूप में व्याख्यायित किया जाएगा, भले ही एस्केपिंग लागू की गई हो।

## SQL में JSON नोड नामों का एस्केप करना

JSON नोड्स में विशेष वर्णों को एस्केप करने के लिए, बैकटिक का उपयोग करें। उदाहरण के लिए:

```sql
MySQL [(none)]> select * from t where json.`a=b`=234;
+---------------------+-------------+------+
| id                  | json        | text |
+---------------------+-------------+------+
| 8215557549554925578 | {"a=b":234} |      |
+---------------------+-------------+------+

MySQL [(none)]> select * from t where json.`a:b`=123;
+---------------------+-------------+------+
| id                  | json        | text |
+---------------------+-------------+------+
| 8215557549554925577 | {"a:b":123} |      |
+---------------------+-------------+------+
```
<!-- proofread -->
