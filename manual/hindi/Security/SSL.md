# SSL

कई मामलों में, आप अपने क्लाइंट और सर्वर के बीच यातायात को एन्क्रिप्ट करना चाह सकते हैं। ऐसा करने के लिए, आप यह निर्दिष्ट कर सकते हैं कि सर्वर HTTP के बजाय [HTTPS प्रोटोकॉल](../Server_settings/Searchd.md#listen) का उपयोग करना चाहिए।

<!-- example CA 1 -->

HTTPS सक्षम करने के लिए, कॉन्फ़िगरेशन के [searchd](../Server_settings/Searchd.md) खंड में कम से कम निम्नलिखित दो निर्देश निर्धारित किए जाने चाहिए, और कम से कम एक [listener](../Server_settings/Searchd.md#listen) को `https` पर सेट किया जाना चाहिए।

* [ssl_cert](../Server_settings/Searchd.md#ssl_cert) प्रमाणपत्र फ़ाइल
* [ssl_key](../Server_settings/Searchd.md#ssl_key) कुंजी फ़ाइल

इसके अलावा, आप प्रमाण पत्र प्राधिकरण का प्रमाणपत्र (जिसे रूट प्रमाणपत्र भी कहते हैं) निर्दिष्ट कर सकते हैं:

* [ssl_ca](../Server_settings/Searchd.md#ssl_ca) प्रमाण पत्र प्राधिकरण का प्रमाणपत्र फ़ाइल


<!-- intro -->
##### CA के साथ:

<!-- request with CA -->
CA के साथ उदाहरण:

```ini
ssl_ca = ca-cert.pem
ssl_cert = server-cert.pem
ssl_key = server-key.pem
```

<!-- request without CA -->
CA के बिना उदाहरण:

```ini
ssl_cert = server-cert.pem
ssl_key = server-key.pem
```
<!-- end -->

## SSL फ़ाइलों का निर्माण

ये चरण आपको 'openssl' टूल का उपयोग करके SSL प्रमाणपत्र बनाने में मदद करेंगे।

सर्वर प्रमाणपत्रों के हस्ताक्षर को सत्यापित करने के लिए एक प्रमाण पत्र प्राधिकरण का उपयोग कर सकता है, लेकिन यह केवल एक निजी कुंजी और प्रमाणपत्र (CA प्रमाणपत्र के बिना) के साथ भी काम कर सकता है।

#### CA कुंजी उत्पन्न करें

```bash
openssl genrsa 2048 > ca-key.pem
```

#### CA कुंजी से CA प्रमाणपत्र उत्पन्न करें

निजी कुंजी से एक स्वयं-हस्ताक्षरित CA (रूट) प्रमाणपत्र उत्पन्न करने के लिए (यह सुनिश्चित करें कि "कॉमन नाम" में कम से कम भरें), निम्नलिखित कमांड का उपयोग करें:

```bash
openssl req -new -x509 -nodes -days 365 -key ca-key.pem -out ca-cert.pem
```

#### सर्वर प्रमाणपत्र

सर्वर क्लाइंट के साथ संचार को सुरक्षित करने के लिए सर्वर प्रमाणपत्र का उपयोग करता है। प्रमाणपत्र अनुरोध और सर्वर निजी कुंजी उत्पन्न करने के लिए (यह सुनिश्चित करें कि आप कम से कम "कॉमन नाम" में भरें और यह रूट प्रमाणपत्र के सामान्य नाम से भिन्न हो), निम्नलिखित कमांड निष्पादित करें:

```bash
openssl req -newkey rsa:2048 -days 365 -nodes -keyout server-key.pem -out server-req.pem
openssl rsa -in server-key.pem -out server-key.pem
openssl x509 -req -in server-req.pem -days 365 -CA ca-cert.pem -CAkey ca-key.pem -set_serial 01 -out server-cert.pem
```

एक बार पूरा हो जाने पर, आप निम्नलिखित कमांड चलाकर यह सत्यापित कर सकते हैं कि कुंजी और प्रमाणपत्र फ़ाइलें सही ढंग से उत्पन्न हुई थीं:

```bash
openssl verify -CAfile ca-cert.pem server-cert.pem
```

## सुरक्षित कनेक्शन व्यवहार

जब आपकी SSL कॉन्फ़िगरेशन मान्य होती है, तो निम्नलिखित सुविधाएँ उपलब्ध होती हैं:

 * आप HTTPS के माध्यम से मल्टी-प्रोटोकॉल पोर्ट से कनेक्ट कर सकते हैं (जब कोई [listener type](../Server_settings/Searchd.md#listen) निर्दिष्ट नहीं किया गया हो) और प्रश्न चला सकते हैं। अनुरोध और प्रतिक्रिया दोनों SSL से एन्क्रिप्ट की जाएगी।
 * आप HTTP के साथ समर्पित https पोर्ट से कनेक्ट कर सकते हैं और प्रश्न चला सकते हैं। कनेक्शन सुरक्षित होगा (सामान्य HTTP के माध्यम से इस पोर्ट से कनेक्ट करने का प्रयास 400 त्रुटि कोड के साथ अस्वीकृत कर दिया जाएगा)।
 * आप सुरक्षित कनेक्शन का उपयोग करके MySQL क्लाइंट के साथ MySQL पोर्ट से कनेक्ट कर सकते हैं। सत्र सुरक्षित रहेगा। ध्यान रहे कि लिनक्स `mysql` क्लाइंट डिफ़ॉल्ट रूप से SSL का उपयोग करने की कोशिश करता है, इसलिए एक मान्य SSL कॉन्फ़िगरेशन के साथ Manticore से एक सामान्य कनेक्शन सबसे संभावित रूप से सुरक्षित होगा। आप कनेक्ट करने के बाद SQL 'status' कमांड चलाकर इसे जांच सकते हैं।

यदि आपकी SSL कॉन्फ़िगरेशन किसी भी कारण से मान्य नहीं है (जिसे डेमोन उस तथ्य के द्वारा पहचानता है कि एक सुरक्षित कनेक्शन स्थापित नहीं किया जा सकता), तो एक अमान्य कॉन्फ़िगरेशन के अलावा अन्य कारण भी हो सकते हैं, जैसे कि उपयुक्त SSL लाइब्रेरी को लोड करने में असमर्थता। इस मामले में, निम्नलिखित बातें काम नहीं करेंगी या असुरक्षित तरीके से काम करेंगी:

* आप HTTPS के साथ मल्टी-प्रोटोकॉल पोर्ट से कनेक्ट नहीं कर सकते। कनेक्शन रद्द कर दिया जाएगा।
* आप समर्पित `https` पोर्ट से कनेक्ट नहीं कर सकते। HTTPS कनेक्शन रद्द कर दिए जाएंगे।
* MySQL क्लाइंट के माध्यम से `mysql` पोर्ट से कनेक्शन SSL सुरक्षित करने का समर्थन नहीं करेगा। यदि क्लाइंट को SSL की आवश्यकता है, तो कनेक्शन विफल हो जाएगा। यदि SSL की आवश्यकता नहीं है, तो यह सामान्य MySQL या संकुचित कनेक्शन का उपयोग करेगा।

### चेतावनी:

* बाइनरी एपीआई कनेक्शन (जैसे पुराने क्लाइंट से कनेक्शन या इंटर-डीमन्स मास्टर-एजेंट संचार) सुरक्षित नहीं होते हैं।
* पुनरुत्पादन के लिए SSL को अलग से सेटअप करने की आवश्यकता है। हालाँकि, चूंकि पुनरुत्पादन का SST चरण बाइनरी एपीआई कनेक्शन के माध्यम से किया जाता है, यह भी सुरक्षित नहीं है।
* आप अपनी कनेक्शनों को सुरक्षित करने के लिए किसी भी बाहरी प्रॉक्सी (जैसे, SSH टनलिंग) का उपयोग कर सकते हैं। 
<!-- proofread -->
