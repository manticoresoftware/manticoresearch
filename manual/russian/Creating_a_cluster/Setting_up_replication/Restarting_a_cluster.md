# Перезапуск кластера

В кластере с мульти-мастер репликацией необходимо установить опорную точку, прежде чем другие узлы смогут присоединиться и сформировать кластер. Это называется инициализацией кластера и включает запуск одного узла как `primary component`. Перезапуск одного узла или повторное подключение после выключения можно выполнять в обычном режиме.

В случае полного выключения кластера сервер, который был остановлен последним, должен быть запущен первым с опцией командной строки `--new-cluster` или путем запуска `manticore_new_cluster` через systemd. Чтобы убедиться, что сервер может быть опорной точкой, файл `grastate.dat`, расположенный в [пути](../../Creating_a_cluster/Setting_up_replication/Setting_up_replication.md#Replication-cluster) кластера, должен быть обновлен значением 1 для опции `safe_to_bootstrap`. Должны быть выполнены оба условия: `--new-cluster` и `safe_to_bootstrap=1`. Если любой другой узел будет запущен без этих установленных опций, возникнет ошибка. Опция командной строки `--new-cluster-force` может быть использована для принудительного обхода этой защиты и запуска кластера с другого сервера. Альтернативно, можно запустить `manticore_new_cluster --force` для использования systemd.

В случае жесткого сбоя или некорректного выключения всех серверов в кластере необходимо определить наиболее продвинутый узел с наибольшим `seqno` в файле `grastate.dat`, расположенном в [пути](../../Creating_a_cluster/Setting_up_replication/Setting_up_replication.md#Replication-cluster) кластера, и запустить его с ключом командной строки `--new-cluster-force`.

<!-- proofread -->

