# Перезапуск кластера

В кластере с многомастеровой репликацией необходимо установить отправную точку, прежде чем другие узлы смогут присоединиться и сформировать кластер. Это называется загрузкой кластера (bootstrap) и включает запуск одного узла в качестве `primary component`. Перезапуск одного узла или повторное подключение после отключения можно выполнять как обычно.

В случае полного отключения кластера первый должен быть запущен сервер, который был остановлен последним, с параметром командной строки `--new-cluster` или путем запуска `manticore_new_cluster` через systemd. Чтобы гарантировать, что сервер может служить отправной точкой, файл `grastate.dat`, расположенный в [папке кластера](../../Creating_a_cluster/Setting_up_replication/Setting_up_replication.md#Replication-cluster), должен содержать значение 1 для опции `safe_to_bootstrap`. Обе условия, `--new-cluster` и `safe_to_bootstrap=1`, должны быть выполнены. Если любой другой узел будет запущен без этих параметров, возникнет ошибка. Для обхода этой защиты и принудительного запуска кластера с другого сервера можно использовать параметр командной строки `--new-cluster-force`. Альтернативно можно запустить `manticore_new_cluster --force` через systemd.

В случае жесткого сбоя или некорректного завершения работы всех серверов в кластере следует определить наиболее продвинутый узел с наибольшим значением `seqno` в файле `grastate.dat`, расположенном в [папке кластера](../../Creating_a_cluster/Setting_up_replication/Setting_up_replication.md#Replication-cluster), и запустить его с ключом командной строки `--new-cluster-force`.

<!-- proofread -->

