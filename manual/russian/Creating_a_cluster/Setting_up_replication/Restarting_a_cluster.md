# Перезапуск кластера

В кластере с мульти-мастер репликацией необходимо установить точку отсчёта, прежде чем другие узлы смогут присоединиться и сформировать кластер. Это называется инициализацией кластера и включает запуск одного узла как `primary component`. Перезапуск одного узла или переподключение после остановки могут выполняться в обычном режиме.

В случае полной остановки кластера, сервер, который был остановлен последним, должен быть запущен первым с опцией командной строки `--new-cluster` или выполнением `manticore_new_cluster` через systemd. Чтобы гарантировать, что сервер способен быть точкой отсчёта, файл `grastate.dat`, расположенный по пути кластера [path](../../Creating_a_cluster/Setting_up_replication/Setting_up_replication.md#Replication-cluster), должен быть обновлён с значением 1 для параметра `safe_to_bootstrap`. Для запуска должны быть выполнены оба условия: `--new-cluster` и `safe_to_bootstrap=1`. Если любой другой узел запущен без этих условий, произойдёт ошибка. Опция командной строки `--new-cluster-force` может использоваться для принудительного запуска кластера с другого сервера, обходя эту защиту. Либо можно выполнить `manticore_new_cluster --force` для использования systemd.

В случае жёсткого сбоя или некорректного завершения работы всех серверов в кластере необходимо определить и запустить наиболее продвинутый узел с наибольшим значением `seqno` в файле `grastate.dat`, расположенном по пути кластера [path](../../Creating_a_cluster/Setting_up_replication/Setting_up_replication.md#Replication-cluster), с использованием ключа командной строки `--new-cluster-force`.

<!-- proofread -->

