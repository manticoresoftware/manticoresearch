# Геопространственные функции

### GEODIST()
`GEODIST(lat1, lon1, lat2, lon2, [...])` функция вычисляет расстояние по геосфере между двумя точками, заданными их координатами. Обратите внимание, что по умолчанию широты и долготы должны быть в **радианах**, а результат будет в **метрах**. Вы можете использовать произвольные выражения для любых четырех координат. Оптимизированный маршрут будет выбран, когда одна пара аргументов напрямую ссылается на пару атрибутов, а другая является постоянной.

`GEODIST()` также принимает необязательный 5-й аргумент, который позволяет легко конвертировать между входными и выходными единицами и выбирать конкретную формулу геодистанции для использования. Полный синтаксис и несколько примеров следующие:

```sql
GEODIST(lat1, lon1, lat2, lon2, { option=value, ... })

GEODIST(40.7643929, -73.9997683, 40.7642578, -73.9994565, {in=degrees, out=feet})

GEODIST(51.50, -0.12, 29.98, 31.13, {in=deg, out=mi})
```

Известные опции и их значения:

* `in = {deg | degrees | rad | radians}`, указывает входные единицы;
* `out = {m | meters | km | kilometers | ft | feet | mi | miles | yd | yards | in | inch | cm | centimeters | mm | millimeters | NM | nmi | nauticalmiles}`, указывает выходные единицы;
* `method = {adaptive | haversine}`, указывает метод вычисления геодистанции.

Метод по умолчанию – "adaptive". Это хорошо оптимизированное выполнение, которое всегда является более точным *и* гораздо более быстрым, чем "haversine".

### GEOPOLY2D()
`GEOPOLY2D(lat1,lon1,lat2,lon2,lat3,lon3...)` создает многоугольник, который может быть использован с функцией [CONTAINS()](../Functions/Arrays_and_conditions_functions.md#CONTAINS%28%29). Эта функция учитывает кривизну Земли, разбивая многоугольник на более мелкие, и должна использоваться для больших площадей. Для небольших площадей можно использовать функцию [POLY2D()](../Functions/Geo_spatial_functions.md#POLY2D%28%29) вместо этого. Функция ожидает, что координаты будут парами широты/долготы в градусах; если используются радианы, она даст тот же результат, что и `POLY2D()`.

### POLY2D()
`POLY2D(x1,y1,x2,y2,x3,y3...)` создает многоугольник, который может быть использован с функцией [CONTAINS()](../Functions/Arrays_and_conditions_functions.md#CONTAINS%28%29). Этот многоугольник предполагает плоскую Землю, поэтому он не должен быть слишком большим; для больших площадей следует использовать функцию [GEOPOLY2D()](../Functions/Geo_spatial_functions.md#GEOPOLY2D%28%29), которая учитывает кривизну Земли.

<!-- proofread -->
