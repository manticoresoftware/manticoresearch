# Интеграция с DBeaver

> ПРИМЕЧАНИЕ: Для интеграции с DBeaver требуется [Manticore Buddy](../Installation/Manticore_Buddy.md). Если это не работает, убедитесь, что Buddy установлен.

[DBeaver](https://dbeaver.io/) — это приложение-клиент SQL и инструмент администрирования баз данных. Для баз данных MySQL оно использует интерфейс программирования приложений JDBC для взаимодействия через JDBC-драйвер.

Manticore позволяет использовать DBeaver для работы с данными, хранящимися в таблицах Manticore, так же, как если бы они хранились в базе данных MySQL.

## Настройки для использования

Чтобы начать работу с Manticore в DBeaver, выполните следующие шаги:

- Выберите опцию `New database connection` в интерфейсе DBeaver
- Выберите `SQL` -> `MySQL` в качестве драйвера базы данных DBeaver
- Установите параметры `Server host` и `Port`, соответствующие хосту и порту вашего экземпляра Manticore (поле `database` оставьте пустым)
- Установите в качестве учетных данных `root/<empty password>`


## Доступные функции

Поскольку Manticore не полностью поддерживает MySQL, доступна только часть функционала DBeaver при работе с Manticore.

Вам будет доступно:
- Просмотр, создание, удаление и переименование таблиц
- Добавление и удаление столбцов таблиц
- Вставка, удаление и обновление данных столбцов

Вам будет недоступно:
- Использование механизмов проверки целостности базы данных (в качестве единственного доступного движка хранения будет установлен `MyISAM`)
- Использование процедур, триггеров, событий MySQL и т.п.
- Управление пользователями базы данных
- Настройка других параметров администрирования базы данных


## Обработка типов данных

Некоторые типы данных MySQL в настоящее время не поддерживаются Manticore и, следовательно, не могут использоваться при создании новой таблицы с помощью DBeaver. Кроме того, некоторые поддерживаемые типы данных преобразуются в наиболее похожие типы Manticore, при этом точность типов игнорируется. Ниже приведён список поддерживаемых типов данных MySQL и соответствующих им типов Manticore:

- `BIGINT UNSIGNED` => `bigint`
- `BOOL` => `boolean`
- `DATE`, `DATETIME`, `TIMESTAMP`  => `timestamp`
- `FLOAT` => `float`
- `INT` => `int`
- `INT UNSIGNED`, `SMALLINT UNSIGNED`, `TINYINT UNSIGNED`, `BIT` => `uint`
- `JSON` => `json`
- `TEXT`, `LONGTEXT`, `MEDIUMTEXT`, `TINYTEXT`, `BLOB`, `LONGBLOB`, `MEDIUMBLOB`, `TINYBLOB`  => `text`
- `VARCHAR`, `LONG VARCHAR`, `BINARY`, `CHAR`, `VARBINARY`, `LONG VARBINARY`  => `string`

Подробнее о типах данных Manticore можно узнать [здесь](../Creating_a_table/Data_types.md#Data-types).

### О типах даты

Manticore способен работать с типами данных `DATE`, `DATETIME` и `TIMESTAMP`, однако для этого требуется включённый [Buddy](../Starting_the_server/Docker.md#Manticore-Columnar-Library-and-Manticore-Buddy) Manticore. В противном случае попытка работать с одним из этих типов приведёт к ошибке.

Обратите внимание, что тип `TIME` не поддерживается.

## Возможные нюансы

- В настройках DBeaver `Preferences` -> `Connections` -> `Client identification` не должен быть отключён или переопределён.
  Для корректной работы с DBeaver Manticore должен отличать его запросы от других. Для этого используется информация об идентификации клиента, отправляемая DBeaver в заголовках запросов. Отключение идентификации клиента нарушит это обнаружение и, соответственно, корректную работу Manticore.

- При первой попытке обновить данные в вашей таблице появится всплывающее сообщение `No unique key` и будет предложено определить пользовательский уникальный ключ.
  При появлении этого сообщения выполните следующие действия:

  - Выберите опцию `Custom Unique Key`
  - В списке столбцов выберите только столбец `id`
  - Нажмите `Ok`

  После этого вы сможете безопасно обновлять данные.

