# Интеграция с DBeaver

> ПРИМЕЧАНИЕ: Интеграция с DBeaver требует [Manticore Buddy](../Installation/Manticore_Buddy.md). Если она не работает, убедитесь, что Buddy установлен.

[DBeaver](https://dbeaver.io/) — это программное обеспечение-клиент SQL и инструмент администрирования баз данных. Для баз данных MySQL он использует интерфейс программирования приложений JDBC для взаимодействия с ними через JDBC-драйвер.

Manticore позволяет использовать DBeaver для работы с данными, хранящимися в таблицах Manticore, так же, как если бы они хранились в базе данных MySQL. В настоящее время тестируется и рекомендуется версия 25.2.0. Другие версии могут работать, но могут вызвать проблемы.

## Настройки для использования

Чтобы начать работу с Manticore в DBeaver, выполните следующие шаги:

- Выберите опцию `New database connection` в интерфейсе DBeaver
- Выберите `SQL` -> `MySQL` в качестве драйвера базы данных DBeaver
- Установите параметры `Server host` и `Port`, соответствующие хосту и порту вашего экземпляра Manticore (поле `database` оставьте пустым)
- Установите `root/<empty password>` в качестве учетных данных для аутентификации


## Доступные функции

Поскольку Manticore не полностью поддерживает MySQL, при работе с Manticore доступна только часть функционала DBeaver.

Вы сможете:
- Просматривать, создавать, удалять и переименовывать таблицы
- Добавлять и удалять столбцы таблиц
- Вставлять, удалять и обновлять данные в столбцах

Вы не сможете:
- Использовать механизмы проверки целостности базы данных (в качестве единственного доступного движка хранения будет установлен `MyISAM`)
- Использовать процедуры MySQL, триггеры, события и т. д.
- Управлять пользователями базы данных
- Устанавливать другие параметры администрирования базы данных


## Обработка типов данных

Некоторые типы данных MySQL в настоящее время не поддерживаются Manticore и, следовательно, не могут использоваться при создании новой таблицы с помощью DBeaver. Также некоторые поддерживаемые типы данных преобразуются в наиболее похожие типы Manticore с игнорированием точности типа при таком преобразовании. Ниже приведен список поддерживаемых типов данных MySQL и соответствующих им типов Manticore:

- `BIGINT UNSIGNED` => `bigint`
- `BOOL` => `boolean`
- `DATE`, `DATETIME`, `TIMESTAMP`  => `timestamp`
- `FLOAT` => `float`
- `INT` => `int`
- `INT UNSIGNED`, `SMALLINT UNSIGNED`, `TINYINT UNSIGNED`, `BIT` => `uint`
- `JSON` => `json`
- `TEXT`, `LONGTEXT`, `MEDIUMTEXT`, `TINYTEXT`, `BLOB`, `LONGBLOB`, `MEDIUMBLOB`, `TINYBLOB`  => `text`
- `VARCHAR`, `LONG VARCHAR`, `BINARY`, `CHAR`, `VARBINARY`, `LONG VARBINARY`  => `string`

Более подробную информацию о типах данных Manticore можно найти [здесь](../Creating_a_table/Data_types.md#Data-types).

### О типах даты

Manticore может обрабатывать типы данных `DATE`, `DATETIME` и `TIMESTAMP`, однако для этого требуется включенный [Buddy](../Starting_the_server/Docker.md#Manticore-Columnar-Library-and-Manticore-Buddy) Manticore. В противном случае попытка работать с одним из этих типов приведет к ошибке.

Обратите внимание, что тип `TIME` не поддерживается.

## Возможные нюансы

- Опция `Preferences` -> `Connections` -> `Client identification` в DBeaver не должна быть отключена или переопределена.
  Для корректной работы с DBeaver Manticore должен отличать его запросы от других. Для этого он использует информацию об идентификации клиента, отправляемую DBeaver в заголовках запросов. Отключение уведомления клиента нарушит это определение и, следовательно, корректную работу Manticore.

- При первой попытке обновить данные в вашей таблице вы увидите всплывающее сообщение `No unique key` и вам будет предложено определить пользовательский уникальный ключ.
  При появлении этого сообщения выполните следующие действия:

  - Выберите опцию `Custom Unique Key`
  - Выберите только столбец `id` в списке столбцов
  - Нажмите `Ok`

  После этого вы сможете безопасно обновлять свои данные.

