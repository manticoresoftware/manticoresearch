# Булева оптимизация
Запросы могут автоматически оптимизироваться, если указано `OPTION boolean_simplify=1`. Некоторые преобразования, выполняемые этой оптимизацией, включают:

* Лишние скобки: `((A | B) | C)` становится `(A | B | C)`; `((A B) C)` становится `(A B C)`
* Лишнее AND NOT: `((A !N1) !N2)` становится `(A !(N1 | N2))`
* Общее NOT: `((A !N) | (B !N))` становится `((A | B) !N)`
* Общее составное NOT: `((A !(N AA)) | (B !(N BB)))` становится `(((A | B) !N) | (A !AA) | (B !BB))`, если стоимость оценки N больше, чем сумма оценки A и B
* Общий подпараметр: `((A (N | AA)) | (B (N | BB)))` становится `(((A | B) N) | (A AA) | (B BB))`, если стоимость оценки N больше, чем сумма оценки A и B
* Общие ключевые слова: `(A | "A B"~N)` становится `A`; `("A B" | "A B C")` становится `"A B"`; `("A B"~N | "A B C"~N)` становится `("A B"~N)`
* Общая фраза: `("X A B" | "Y A B")` становится `("("X"|"Y") A B")`
* Общее AND NOT: `((A !X) | (A !Y) | (A !Z))` становится `(A !(X Y Z))`
* Общее OR NOT: `((A !(N | N1)) | (B !(N | N2)))` становится `(( (A !N1) | (B !N2) ) !N)`
Обратите внимание, что оптимизация запросов потребляет время ЦП, поэтому для простых запросов или ручной оптимизации запросов вы получите лучшие результаты со значением по умолчанию `boolean_simplify=0`. Упрощения часто полезны для сложных запросов или алгоритмически сгенерированных запросов.

> ЗАМЕТКА: Это экспериментальная функция и её следует использовать с осторожностью. Рекомендуется проверить, что запрос возвращает одни и те же документы с добавлением и без добавления `OPTION boolean_simplify=1`. Хотя эта оптимизация может упростить и улучшить производительность сложных или алгоритмически сгенерированных запросов, она также потребляет дополнительное время ЦП. Для более простых или вручную оптимизированных запросов значение по умолчанию `boolean_simplify=0` может дать лучшие результаты.

Запросы вроде `-dog`, которые потенциально могут включать все документы из коллекции, по умолчанию не разрешены. Чтобы разрешить их, вы должны указать `not_terms_only_allowed=1` либо как [глобальную настройку](../../Server_settings/Searchd.md#not_terms_only_allowed), либо как [опцию поиска](../../Server_settings/Searchd.md#not_terms_only_allowed).

<!-- proofread -->
