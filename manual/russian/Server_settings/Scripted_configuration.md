# Скриптовая конфигурация

Конфигурация Manticore поддерживает синтаксис shebang, позволяя записывать конфигурацию на языке программирования и интерпретировать её при загрузке. Это обеспечивает динамические настройки, такие как генерация таблиц путём запроса к таблице базы данных, изменение настроек на основе внешних факторов или включение внешних файлов, содержащих декларации таблиц и источников.

Конфигурационный файл парсится объявленным интерпретатором, и результат используется в качестве фактической конфигурации. Это происходит каждый раз, когда конфигурация считывается, а не только при запуске searchd.

Примечание: Эта функция недоступна на платформе Windows.

В следующем примере PHP используется для создания нескольких таблиц с различными именами и для сканирования конкретной папки на наличие файлов, содержащих дополнительные декларации таблиц:

```php
#!/usr/bin/php
...
<?php for ($i=1; $i<=6; $i++) { ?>
table test_<?=$i?> {
  type = rt
  path = /var/lib/manticore/data/test_<?=$i?>
  rt_field = subject
  ...
 }
 <?php } ?>
 ...

 <?php
 $confd_folder='/etc/manticore.conf.d/';
 $files = scandir($confd_folder);
 foreach($files as $file)
 {
         if(($file == '.') || ($file =='..'))
         {} else {
                 $fp = new SplFileInfo($confd_folder.$file);
                 if('conf' == $fp->getExtension()){
                         include ($confd_folder.$file);
                 }
         }
 }
 ?>
```
<!-- proofread -->
