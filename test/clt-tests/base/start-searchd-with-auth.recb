––– input –––
echo '{"users":[{"username":"admin","salt":"aabbccddeeff00112233aabbccddeeff00112233","hashes":{"password_sha1_no_salt":"74913f5cd5f61ec0bcfdb775414c2fb3d161b620","password_sha256":"000c85c81d3b9292c8f239a9d691b10a3436ab3b28108e1cb0a85dfb479fe7bc","bearer_sha256":"4b72aa7367f065146c7a028bc739c69c8e4bdebf7fe2d1133255c51bf36d8056"}}],"permissions":[{"username":"admin","action":"read","target":"*","allow":true},{"username":"admin","action":"write","target":"*","allow":true},{"username":"admin","action":"schema","target":"*","allow":true},{"username":"admin","action":"admin","target":"*","allow":true}]}' > /var/lib/manticore/auth.json && chmod 600 /var/lib/manticore/auth.json && sed -i '/^searchd/a\    auth = 1' /etc/manticoresearch/manticore.conf && echo "Auth configured"
––– output –––
Auth configured
––– input –––
rm -f /var/log/manticore/searchd.log; stdbuf -oL searchd $SEARCHD_FLAGS > /dev/null; if timeout 10 grep -qm1 '\[BUDDY\] started' <(tail -n 1000 -f /var/log/manticore/searchd.log); then echo 'Buddy started!'; else echo 'Timeout or failed!'; cat /var/log/manticore/searchd.log;fi
––– output –––
Buddy started!
