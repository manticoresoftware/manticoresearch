––– block: ../base/start-searchd –––
––– input –––
apt-get install jq -y > /dev/null; echo $?
––– output –––
debconf: delaying package configuration, since apt-utils is not installed
0
––– input –––
diff <(curl -s -X POST "http://localhost:9308/sql?mode=raw" -d "query=SHOW%20TABLES") <(curl -s "http://localhost:9308/sql?mode=raw&query=SHOW%20TABLES") && echo "Test 1: SHOW TABLES - PASSED" || echo "Test 1: SHOW TABLES - FAILED"
––– output –––
––– input –––
diff <(curl -s -X POST "http://localhost:9308/sql?mode=raw" -d "query=SHOW%20VARIABLES") <(curl -s "http://localhost:9308/sql?mode=raw&query=SHOW%20VARIABLES") && echo "Test 2: SHOW VARIABLES - PASSED" || echo "Test 2: SHOW VARIABLES - FAILED"
––– output –––
––– input –––
diff <(curl -s -X POST "http://localhost:9308/sql?mode=raw" -d "query=SHOW%20STATUS" | jq 'walk(if type == "object" then del(.Value) else . end)') <(curl -s "http://localhost:9308/sql?mode=raw&query=SHOW%20STATUS" | jq 'walk(if type == "object" then del(.Value) else . end)') && echo "Test 3: SHOW STATUS - PASSED" || echo "Test 3: SHOW STATUS - FAILED"
––– output –––
––– input –––
diff <(curl -s -X POST "http://localhost:9308/sql?mode=raw" -d "query=SHOW%20META") <(curl -s "http://localhost:9308/sql?mode=raw&query=SHOW%20META") && echo "Test 4: SHOW META - PASSED" || echo "Test 4: SHOW META - FAILED"
––– output –––
––– input –––
diff <(curl -s -X POST "http://localhost:9308/sql?raw_response=true" -d "query=SHOW%20TABLES") <(curl -s "http://localhost:9308/sql?raw_response=true&query=SHOW%20TABLES") && echo "Test 5: SHOW TABLES - PASSED" || echo "Test 1: SHOW TABLES - FAILED"
––– output –––
––– input –––
diff <(curl -s -X POST "http://localhost:9308/sql?raw_response=true" -d "query=SHOW%20VARIABLES") <(curl -s "http://localhost:9308/sql?raw_response=true&query=SHOW%20VARIABLES") && echo "Test 6: SHOW VARIABLES - PASSED" || echo "Test 2: SHOW VARIABLES - FAILED"
––– output –––
––– input –––
diff <(curl -s -X POST "http://localhost:9308/sql?raw_response=true" -d "query=SHOW%20STATUS" | jq 'walk(if type == "object" then del(.Value) else . end)') <(curl -s "http://localhost:9308/sql?raw_response=true&query=SHOW%20STATUS" | jq 'walk(if type == "object" then del(.Value) else . end)') && echo "Test 7: SHOW STATUS - PASSED" || echo "Test 3: SHOW STATUS - FAILED"
––– output –––
––– input –––
diff <(curl -s -X POST "http://localhost:9308/sql?raw_response=true" -d "query=SHOW%20META") <(curl -s "http://localhost:9308/sql?raw_response=true&query=SHOW%20META") && echo "Test 4: SHOW META - PASSED" || echo "Test 8: SHOW META - FAILED"
––– output –––
––– input –––
diff <(curl -s -X POST "http://localhost:9308/sql?mode=raw" -d "query=SHOW%20QUERIES" | jq 'map(del(.time))') <(curl -s "http://localhost:9308/sql?mode=raw&query=SHOW%20QUERIES" | jq 'map(del(.time))')
––– output –––
––– input –––
diff <(curl -s -X POST "http://localhost:9308/sql?raw_response=true" -d "query=SHOW%20QUERIES" | jq 'if type == "array" then .[0].data[] |= del(.time) else empty end') <(curl -s "http://localhost:9308/sql?raw_response=true&query=SHOW%20QUERIES" | jq 'if type == "array" then .[0].data[] |= del(.time) else empty end') && echo "Test 10: SHOW QUERIES - PASSED" || echo "Test 10: SHOW QUERIES - FAILED"
––– output –––
––– input –––
curl -s -X POST "http://localhost:9308/sql?raw_response=true" -d "query=SHOW%20QUERIES"; echo
––– output –––
––– input –––
curl -s "http://localhost:9308/sql?raw_response=true&query=SHOW%20QUERIES"; echo
––– output –––
