––– input –––
mkdir -p /var/lib/manticore && chmod -R 755 /var/lib/manticore
––– output –––
––– input –––
rm -f /var/log/manticore/searchd.log; stdbuf -oL searchd > /dev/null; if timeout 10 grep -qm1 '\[BUDDY\] started' <(tail -n 1000 -f /var/log/manticore/searchd.log); then echo 'Buddy started!'; else echo 'Timeout or failed!'; cat /var/log/manticore/searchd.log;fi
––– output –––
Buddy started!
––– comment –––
1.1 Checking existing system variables
––– input –––
mysql -h0 -P9306 -e "SELECT @@session.auto_increment_increment;"
––– output –––
+------------------------------------+
| @@session.auto_increment_increment |
+------------------------------------+
|                                  1 |
+------------------------------------+
––– input –––
mysql -h0 -P9306 -e "SELECT @@character_set_client;"
––– output –––
+------------------------+
| @@character_set_client |
+------------------------+
| utf8                   |
+------------------------+
––– input –––
mysql -h0 -P9306 -e "SELECT @@character_set_connection;"
––– output –––
+----------------------------+
| @@character_set_connection |
+----------------------------+
| utf8                       |
+----------------------------+
––– input –––
mysql -h0 -P9306 -e "SELECT @@max_allowed_packet;"
––– output –––
+----------------------+
| @@max_allowed_packet |
+----------------------+
|            134217728 |
+----------------------+
––– input –––
mysql -h0 -P9306 -e "SELECT @@version_comment;"
––– output –––
+-----------------------------------+
| @@version_comment                 |
+-----------------------------------+
| git branch master...origin/master |
+-----------------------------------+
––– input –––
mysql -h0 -P9306 -e "SELECT @@lower_case_table_names;"
––– output –––
+--------------------------+
| @@lower_case_table_names |
+--------------------------+
|                        1 |
+--------------------------+
––– input –––
mysql -h0 -P9306 -e "SELECT @@session.last_insert_id;"
––– output –––
+--------------------------+
| @@session.last_insert_id |
+--------------------------+
|                          |
+--------------------------+
––– input –––
mysql -h0 -P9306 -e "SELECT @@autocommit;"
––– output –––
+--------------+
| @@autocommit |
+--------------+
|            1 |
+--------------+
––– comment –––
1.2 Checking for non-existent system variables
––– input –––
mysql -h0 -P9306 -e "SELECT @@tx_isolation_eahhahfefhehfehf;"
––– output –––
+---------------------------------+
| @@tx_isolation_eahhahfefhehfehf |
+---------------------------------+
|                               0 |
+---------------------------------+
––– input –––
mysql -h0 -P9306 -e "SELECT @@nonexistent_variable;"
––– output –––
+------------------------+
| @@nonexistent_variable |
+------------------------+
|                      0 |
+------------------------+
––– input –––
mysql -h0 -P9306 -e "SELECT @@random_name;"
––– output –––
+---------------+
| @@random_name |
+---------------+
|             0 |
+---------------+
––– comment –––
1.3 Checking partial matches of variables
––– input –––
mysql -h0 -P9306 -e "SELECT @@autocomm;"
––– output –––
+------------+
| @@autocomm |
+------------+
|          0 |
+------------+
––– input –––
mysql -h0 -P9306 -e "SELECT @@character_set;"
––– output –––
+-----------------+
| @@character_set |
+-----------------+
|               0 |
+-----------------+
––– input –––
mysql -h0 -P9306 -e "SELECT @@version;"
––– output –––
+-----------+
| @@version |
+-----------+
|         0 |
+-----------+
––– comment –––
4.1 Checking user variables @var
––– input –––
mysql -h0 -P9306 -e "SELECT @user_variable;"
––– output –––
ERROR 1064 (42000) at line 1: P09: syntax error, unexpected TOK_USERVAR near ''
––– input –––
mysql -h0 -P9306 -e "SET @user_variable = 123; SELECT @user_variable;"
––– output –––
ERROR 1064 (42000) at line 1: sphinxql: only 0 and 1 could be used as boolean values near '123'
––– comment –––
5.1 Checking for strange variable names
––– input –––
mysql -h0 -P9306 -e "SELECT @@123;"
––– output –––
ERROR 1064 (42000) at line 1: Failed to parse query
––– input –––
mysql -h0 -P9306 -e "SELECT @@'quoted_name';"
––– output –––
ERROR 1064 (42000) at line 1: P01: syntax error, unexpected string, expecting $end near ''quoted_name''
––– input –––
mysql -h0 -P9306 -e "SELECT @@very_long_variable_name_that_exceeds_normal_length_limits;"
––– output –––
+-------------------------------------------------------------+
| @@very_long_variable_name_that_exceeds_normal_length_limits |
+-------------------------------------------------------------+
|                                                           0 |
+-------------------------------------------------------------+
––– comment –––
5.2 Checking case-sensitivity of system variables
––– input –––
mysql -h0 -P9306 -e "SELECT @@AUTOCOMMIT;"
––– output –––
+--------------+
| @@autocommit |
+--------------+
|            1 |
+--------------+
––– input –––
mysql -h0 -P9306 -e "SELECT @@AutoCommit;"
––– output –––
+--------------+
| @@autocommit |
+--------------+
|            1 |
+--------------+
––– input –––
mysql -h0 -P9306 -e "SELECT @@autocommit;"
––– output –––
+--------------+
| @@autocommit |
+--------------+
|            1 |
+--------------+
