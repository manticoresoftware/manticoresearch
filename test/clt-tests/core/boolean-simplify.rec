––– block: ../base/start-searchd –––
––– input –––
mysql -P9306 -h0 -e "drop table if exists t; create table t(f text); insert into t values(1, 'a'); set profiling=1; select * from t where match(' (A | \"A B\"~1)'); show plan;"
––– output –––
+------+------+
| id   | f    |
+------+------+
|    1 | a    |
+------+------+
+------------------+-----------------------------+
| Variable         | Value                       |
+------------------+-----------------------------+
| transformed_tree | AND(KEYWORD(a, querypos=1)) |
+------------------+-----------------------------+
––– input –––
searchd --stopwait > /dev/null
––– output –––
––– input –––
sed -i '/^searchd {/a\    boolean_simplify = 0' /etc/manticoresearch/manticore.conf
––– output –––
––– input –––
cat /etc/manticoresearch/manticore.conf|grep boolean_simplify 2>/dev/null
––– output –––
boolean_simplify = 0
––– block: ../base/start-searchd –––
––– input –––
mysql -P9306 -h0 -e "drop table if exists t; create table t(f text); insert into t values(1, 'a'); set profiling=1; select * from t where match(' (A | \"A B\"~1)'); show plan;"
––– output –––
+------+------+
| id   | f    |
+------+------+
|    1 | a    |
+------+------+
+------------------+--------------------------------------------------------------------------------------------------------------+
| Variable         | Value                                                                                                        |
+------------------+--------------------------------------------------------------------------------------------------------------+
| transformed_tree | OR(
  AND(KEYWORD(a, querypos=1)), 
  PROXIMITY(distance=1, KEYWORD(a, querypos=2), KEYWORD(b, querypos=3))) |
+------------------+--------------------------------------------------------------------------------------------------------------+
––– input –––
searchd --stopwait > /dev/null
––– output –––
––– input –––
sed -i 's/^\(\s*boolean_simplify\s*=\s*\)0/\11/' /etc/manticoresearch/manticore.conf
––– output –––
––– input –––
cat /etc/manticoresearch/manticore.conf|grep boolean_simplify
––– output –––
boolean_simplify = 1
––– block: ../base/start-searchd –––
––– input –––
mysql -P9306 -h0 -e "drop table if exists t; create table t(f text); insert into t values(1, 'a'); set profiling=1; select * from t where match(' (A | \"A B\"~1)'); show plan;"
––– output –––
+------+------+
| id   | f    |
+------+------+
|    1 | a    |
+------+------+
+------------------+-----------------------------+
| Variable         | Value                       |
+------------------+-----------------------------+
| transformed_tree | AND(KEYWORD(a, querypos=1)) |
+------------------+-----------------------------+