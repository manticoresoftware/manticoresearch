â€“â€“â€“ block: ../../base/start-searchd-with-buddy â€“â€“â€“
â€“â€“â€“ input â€“â€“â€“
set -b
â€“â€“â€“ output â€“â€“â€“
â€“â€“â€“ input â€“â€“â€“
export PATH=/usr/bin:/usr/local/bin:/usr/sbin:/sbin:/bin
â€“â€“â€“ output â€“â€“â€“
â€“â€“â€“ input â€“â€“â€“
apt-get update > /dev/null 2>&1 && apt-get install -y curl jq > /dev/null 2>&1; echo $?
â€“â€“â€“ output â€“â€“â€“
0
â€“â€“â€“ input â€“â€“â€“
bash << 'SCRIPT'
# Static list of TESTED versions
TESTED_VERSIONS="7.17
8.0
8.1
8.2
8.3
8.4
8.5
8.6
8.7
8.8
8.9
8.10
8.11
8.12
8.13
8.14
8.15
8.16
8.17
8.18
8.19
9.0
9.1
9.2"

# Check for NEW versions (after latest tested)
LATEST_TESTED_VERSION="9.2"
NEW_VERSIONS=$(curl -s "https://hub.docker.com/v2/repositories/library/logstash/tags/?page_size=100" \
| jq -r ".results[].name" \
| grep "^[0-9][0-9]*\.[0-9][0-9]*\.[0-9][0-9]*$" \
| sed "s/\.[0-9]*$//" \
| awk '!/rc|beta|alpha/' \
| sort -t. -k1,1n -k2,2n | uniq \
| awk -v latest="$LATEST_TESTED_VERSION" '
function version_compare(v1, v2) {
    split(v1, a, ".")
    split(v2, b, ".")
    if (a[1] != b[1]) return a[1] - b[1]
    return a[2] - b[2]
}
version_compare($0, latest) > 0')

if [ -n "$NEW_VERSIONS" ]; then
    echo "ðŸ†• NEW Logstash versions detected:"
    echo "$NEW_VERSIONS"
    echo ""
    echo "âŒ Need to test new versions and update the following:"
    echo ""
    echo "ðŸ“ Files to update:"
    echo "  1. test/clt-tests/integrations/logstash/test-integrations-check-logstash-versions.rec"
    echo "     - Update TESTED_VERSIONS list"
    echo "     - Update LATEST_TESTED_VERSION='$LATEST_TESTED_VERSION' -> new version"
    echo ""
    echo "  2. test/clt-tests/integrations/logstash/test-integrations-test-logstash-versions.rec"
    echo "     - Add new test section for new version"
    echo ""
    echo "  3. Update documentation with new version support:"
    echo "     - manual/english/Integration/Logstash.md"
    echo "     - Search for: 'versions up to X.X'"
    echo "     - Update version number to latest tested"
    echo ""
    echo "  4. Update website content (separate repository):"
    echo "     - https://github.com/manticoresoftware/site"
    echo "     - content/english/blog/integration-of-manticore-with-logstash-filebeat/index.md"
    echo "     - Search for: 'Logstash versions up to X.X'"
    echo "     - Update version number to latest tested"
    echo ""
    exit 1
else
    echo "âœ… No new versions found after $LATEST_TESTED_VERSION"
fi

# Use static list for testing
echo "Using tested versions:"
echo "$TESTED_VERSIONS"
SCRIPT
â€“â€“â€“ output â€“â€“â€“
âœ… No new versions found after 9.2
Using tested versions:
7.17
8.0
8.1
8.2
8.3
8.4
8.5
8.6
8.7
8.8
8.9
8.10
8.11
8.12
8.13
8.14
8.15
8.16
8.17
8.18
8.19
9.0
9.1
9.2

