––– block: ../base/start-searchd –––
––– input –––
apt-get update -qq && apt-get install -y unzip -qq 2>&1 | grep -i "Setting up unzip"
––– output –––
Setting up unzip (6.0-26ubuntu3.2) ...
––– input –––
wget -O products_reviews.sql.zip "https://github.com/user-attachments/files/18365659/products_reviews.sql.zip" 2>&1 | grep "products_reviews.sql.zip.*saved" | sed -E 's/.*(products_reviews\.sql\.zip).*saved.*/\1 saved/'
––– output –––
products_reviews.sql.zip saved
––– input –––
manticore-load --drop --batch-size=1000 --threads=5 --total=10000 --init="CREATE TABLE products(name text, category multi)" --load="INSERT INTO products(id, name,category) VALUES(<increment>, '<text/2/10>',(<array/1/3/1/1000>))" --together --drop --batch-size=10000 --threads=5 --total=10000000 --init="create table reviews(product_id bigint, user_id int, rating int, comment text)" --load="insert into reviews(product_id, user_id, rating, comment) values(<int/1/10000>, <int/1/1000>, <int/1/100>, '<text/20/100>')" --quiet
––– output –––
Threads ; Batch     ; Time        ; Total Docs  ; Docs/Sec    ; Avg QPS     ; p99 QPS     ; p95 QPS     ; p5 QPS      ; p1 QPS      ; Lat Avg     ; Lat p50     ; Lat p95     ; Lat p99     ;
5       ; 1000      ; %{NUMBER}:%{NUMBER}       ; 10000       ; %{NUMBER}          ; 0           ; 0           ; 0           ; 0           ; 0           ; #!/[0-9]{3}.[0-9]{1}/!#       ; #!/[0-9]{3}.[0-9]{1}/!#       ; #!/[0-9]{3}.[0-9]{1}/!#       ; #!/[0-9]{3}.[0-9]{1}/!#       ;
––– input –––
mysql -P9306 -h0 -e "SELECT COUNT(*) FROM products; SELECT COUNT(*) FROM reviews;"
––– output –––
+----------+
| count(*) |
+----------+
|    10000 |
+----------+
+----------+
| count(*) |
+----------+
|    50000 |
+----------+