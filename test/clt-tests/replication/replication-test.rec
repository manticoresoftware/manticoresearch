––– input –––
export INSTANCE=1
––– output –––
––– input –––
mkdir -p /var/{run,lib,log}/manticore-${INSTANCE}/{a,b,c,d,e,f,g,h,i,j}
––– output –––
––– input –––
stdbuf -oL searchd -c test/clt-tests/base/searchd-with-flexible-ports.conf | grep -v precach
––– output –––
Manticore %{SEMVER} %{COMMITDATE}#!/(\sdev)?\s/!#(columnar %{SEMVER} %{COMMITDATE}) (secondary %{SEMVER} %{COMMITDATE}) (knn %{SEMVER} %{COMMITDATE})
Copyright (c) 2001-2016, Andrew Aksyonoff
Copyright (c) 2008-2016, Sphinx Technologies Inc (http://sphinxsearch.com)
Copyright (c) 2017-%{YEAR}, Manticore Software LTD (https://manticoresearch.com)
[#!/[a-zA-Z]{3}\s[a-zA-Z]{3}\s+[0-9]{1,2}\s[0-9]{2}:[0-9]{2}:[0-9]{2}.[0-9]{3}\s[0-9]{4}/!#] [%{NUMBER}] using config file '/.clt/test/clt-tests/base/searchd-with-flexible-ports.conf' (%{NUMBER} chars)...
starting daemon version '%{SEMVER} %{COMMITDATE} dev (columnar %{SEMVER} %{COMMITDATE}) (secondary %{SEMVER} %{COMMITDATE}) (knn %{SEMVER} %{COMMITDATE})' ...
listening on all interfaces for mysql, port=%{NUMBER}
listening on all interfaces for sphinx and http(s), port=%{NUMBER}
listening on all interfaces for sphinx and http(s), port=%{NUMBER}
––– input –––
if timeout 10 grep -qm1 'accepting connections' <(tail -n 1000 -f /var/log/manticore-${INSTANCE}/searchd.log); then echo 'Accepting connections!'; else echo 'Timeout or failed!'; fi
––– output –––
Accepting connections!
––– input –––
export INSTANCE=2
––– output –––
––– input –––
mkdir -p /var/{run,lib,log}/manticore-${INSTANCE}/{a,b,c,d,e,f,g,h,i,j}
––– output –––
––– input –––
stdbuf -oL searchd -c test/clt-tests/base/searchd-with-flexible-ports.conf | grep -v precach
––– output –––
Manticore %{SEMVER} %{COMMITDATE}#!/(\sdev)?\s/!#(columnar %{SEMVER} %{COMMITDATE}) (secondary %{SEMVER} %{COMMITDATE}) (knn %{SEMVER} %{COMMITDATE})
Copyright (c) 2001-2016, Andrew Aksyonoff
Copyright (c) 2008-2016, Sphinx Technologies Inc (http://sphinxsearch.com)
Copyright (c) 2017-%{YEAR}, Manticore Software LTD (https://manticoresearch.com)
[#!/[a-zA-Z]{3}\s[a-zA-Z]{3}\s+[0-9]{1,2}\s[0-9]{2}:[0-9]{2}:[0-9]{2}.[0-9]{3}\s[0-9]{4}/!#] [%{NUMBER}] using config file '/.clt/test/clt-tests/base/searchd-with-flexible-ports.conf' (%{NUMBER} chars)...
starting daemon version '%{SEMVER} %{COMMITDATE} dev (columnar %{SEMVER} %{COMMITDATE}) (secondary %{SEMVER} %{COMMITDATE}) (knn %{SEMVER} %{COMMITDATE})' ...
listening on all interfaces for mysql, port=%{NUMBER}
listening on all interfaces for sphinx and http(s), port=%{NUMBER}
listening on all interfaces for sphinx and http(s), port=%{NUMBER}
––– input –––
if timeout 10 grep -qm1 'accepting connections' <(tail -n 1000 -f /var/log/manticore-${INSTANCE}/searchd.log); then echo 'Accepting connections!'; else echo 'Timeout or failed!'; fi
––– output –––
Accepting connections!
––– input –––
export INSTANCE=3
––– output –––
––– input –––
mkdir -p /var/{run,lib,log}/manticore-${INSTANCE}/{a,b,c,d,e,f,g,h,i,j}
––– output –––
––– input –––
stdbuf -oL searchd -c test/clt-tests/base/searchd-with-flexible-ports.conf | grep -v precach
––– output –––
Manticore %{SEMVER} %{COMMITDATE}#!/(\sdev)?\s/!#(columnar %{SEMVER} %{COMMITDATE}) (secondary %{SEMVER} %{COMMITDATE}) (knn %{SEMVER} %{COMMITDATE})
Copyright (c) 2001-2016, Andrew Aksyonoff
Copyright (c) 2008-2016, Sphinx Technologies Inc (http://sphinxsearch.com)
Copyright (c) 2017-%{YEAR}, Manticore Software LTD (https://manticoresearch.com)
[#!/[a-zA-Z]{3}\s[a-zA-Z]{3}\s+[0-9]{1,2}\s[0-9]{2}:[0-9]{2}:[0-9]{2}.[0-9]{3}\s[0-9]{4}/!#] [%{NUMBER}] using config file '/.clt/test/clt-tests/base/searchd-with-flexible-ports.conf' (%{NUMBER} chars)...
starting daemon version '%{SEMVER} %{COMMITDATE} dev (columnar %{SEMVER} %{COMMITDATE}) (secondary %{SEMVER} %{COMMITDATE}) (knn %{SEMVER} %{COMMITDATE})' ...
listening on all interfaces for mysql, port=%{NUMBER}
listening on all interfaces for sphinx and http(s), port=%{NUMBER}
listening on all interfaces for sphinx and http(s), port=%{NUMBER}
––– input –––
if timeout 10 grep -qm1 'accepting connections' <(tail -n 1000 -f /var/log/manticore-${INSTANCE}/searchd.log); then echo 'Accepting connections!'; else echo 'Timeout or failed!'; fi
––– output –––
Accepting connections!
––– input –––
export INSTANCE=4
––– output –––
––– input –––
mkdir -p /var/{run,lib,log}/manticore-${INSTANCE}/{a,b,c,d,e,f,g,h,i,j}
––– output –––
––– input –––
stdbuf -oL searchd -c test/clt-tests/base/searchd-with-flexible-ports.conf | grep -v precach
––– output –––
Manticore %{SEMVER} %{COMMITDATE}#!/(\sdev)?\s/!#(columnar %{SEMVER} %{COMMITDATE}) (secondary %{SEMVER} %{COMMITDATE}) (knn %{SEMVER} %{COMMITDATE})
Copyright (c) 2001-2016, Andrew Aksyonoff
Copyright (c) 2008-2016, Sphinx Technologies Inc (http://sphinxsearch.com)
Copyright (c) 2017-%{YEAR}, Manticore Software LTD (https://manticoresearch.com)
[#!/[a-zA-Z]{3}\s[a-zA-Z]{3}\s+[0-9]{1,2}\s[0-9]{2}:[0-9]{2}:[0-9]{2}.[0-9]{3}\s[0-9]{4}/!#] [%{NUMBER}] using config file '/.clt/test/clt-tests/base/searchd-with-flexible-ports.conf' (%{NUMBER} chars)...
starting daemon version '%{SEMVER} %{COMMITDATE} dev (columnar %{SEMVER} %{COMMITDATE}) (secondary %{SEMVER} %{COMMITDATE}) (knn %{SEMVER} %{COMMITDATE})' ...
listening on all interfaces for mysql, port=%{NUMBER}
listening on all interfaces for sphinx and http(s), port=%{NUMBER}
listening on all interfaces for sphinx and http(s), port=%{NUMBER}
––– input –––
if timeout 10 grep -qm1 'accepting connections' <(tail -n 1000 -f /var/log/manticore-${INSTANCE}/searchd.log); then echo 'Accepting connections!'; else echo 'Timeout or failed!'; fi
––– output –––
Accepting connections!
––– input –––
export INSTANCE=5
––– output –––
––– input –––
mkdir -p /var/{run,lib,log}/manticore-${INSTANCE}/{a,b,c,d,e,f,g,h,i,j}
––– output –––
––– input –––
stdbuf -oL searchd -c test/clt-tests/base/searchd-with-flexible-ports.conf | grep -v precach
––– output –––
Manticore %{SEMVER} %{COMMITDATE}#!/(\sdev)?\s/!#(columnar %{SEMVER} %{COMMITDATE}) (secondary %{SEMVER} %{COMMITDATE}) (knn %{SEMVER} %{COMMITDATE})
Copyright (c) 2001-2016, Andrew Aksyonoff
Copyright (c) 2008-2016, Sphinx Technologies Inc (http://sphinxsearch.com)
Copyright (c) 2017-%{YEAR}, Manticore Software LTD (https://manticoresearch.com)
[#!/[a-zA-Z]{3}\s[a-zA-Z]{3}\s+[0-9]{1,2}\s[0-9]{2}:[0-9]{2}:[0-9]{2}.[0-9]{3}\s[0-9]{4}/!#] [%{NUMBER}] using config file '/.clt/test/clt-tests/base/searchd-with-flexible-ports.conf' (%{NUMBER} chars)...
starting daemon version '%{SEMVER} %{COMMITDATE} dev (columnar %{SEMVER} %{COMMITDATE}) (secondary %{SEMVER} %{COMMITDATE}) (knn %{SEMVER} %{COMMITDATE})' ...
listening on all interfaces for mysql, port=%{NUMBER}
listening on all interfaces for sphinx and http(s), port=%{NUMBER}
listening on all interfaces for sphinx and http(s), port=%{NUMBER}
––– input –––
if timeout 10 grep -qm1 'accepting connections' <(tail -n 1000 -f /var/log/manticore-${INSTANCE}/searchd.log); then echo 'Accepting connections!'; else echo 'Timeout or failed!'; fi
––– output –––
Accepting connections!
––– input –––
export CLUSTER_NAME=replication
––– output –––
––– input –––
mysql -h0 -P1306 -e "create cluster ${CLUSTER_NAME}"
––– output –––
––– input –––
mysql -h0 -P1306 -e "show status like 'cluster_${CLUSTER_NAME}_status'\G"
––– output –––
*************************** 1. row ***************************
Counter: cluster_#!/[a-z]+/!#_status
Value: primary
––– input –––
export CLUSTER_NAME=replication
––– output –––
––– input –––
for n in `seq 2 $INSTANCE`; do mysql -h0 -P${n}306 -e "join cluster ${CLUSTER_NAME} at '127.0.0.1:1312'"; done;
––– output –––
––– input –––
mysql -h0 -P${INSTANCE}306 -e "show status like 'cluster_${CLUSTER_NAME}_status'\G"
––– output –––
*************************** 1. row ***************************
Counter: cluster_#!/[a-z]+/!#_status
Value: primary
––– input –––
mysql -h0 -P1306 -e "CREATE TABLE testrt (title text, content text, gid uint);"
––– output –––
––– input –––
mysql -h0 -P1306 -e "ALTER CLUSTER replication ADD testrt;"
––– output –––
––– input –––
mysql -h0 -P1306 -e "SHOW STATUS LIKE 'cluster_replication_indexes';"
––– output –––
+-----------------------------+--------+
| Counter                     | Value  |
+-----------------------------+--------+
| cluster_replication_indexes | testrt |
+-----------------------------+--------+
––– input –––
mysql -h0 -P1306 -e "INSERT INTO replication:testrt VALUES(6775836565403860993,'List of HP business laptops','Elitebook Probook',1);"
––– output –––
––– input –––
mysql -h0 -P1306 -e "INSERT INTO replication:testrt VALUES(6775836565403860994,'List of Dell business laptops','Latitude Precision Vostro',2);"
––– output –––
––– input –––
mysql -h0 -P1306 -e "SHOW CREATE TABLE testrt;"
––– output –––
+--------+--------------------------------------------------------------------------+
| Table  | Create Table                                                             |
+--------+--------------------------------------------------------------------------+
| testrt | CREATE TABLE testrt (
id bigint,
title text,
content text,
gid integer
) |
+--------+--------------------------------------------------------------------------+
––– input –––
export INSTANCE=5
––– output –––
––– input –––
searchd --stopwait -c test/clt-tests/base/searchd-with-flexible-ports.conf
––– output –––
Manticore %{SEMVER} %{COMMITDATE}#!/(\sdev)?\s/!#(columnar %{SEMVER} %{COMMITDATE}) (secondary %{SEMVER} %{COMMITDATE}) (knn %{SEMVER} %{COMMITDATE})
Copyright (c) 2001-2016, Andrew Aksyonoff
Copyright (c) 2008-2016, Sphinx Technologies Inc (http://sphinxsearch.com)
Copyright (c) 2017-%{YEAR}, Manticore Software LTD (https://manticoresearch.com)
[#!/[0-9]{2}:[0-9]{2}.[0-9]{3}/!#] [%{NUMBER}] using config file '%{PATH}' (%{NUMBER} chars)...
[#!/[0-9]{2}:[0-9]{2}.[0-9]{3}/!#] [%{NUMBER}] stop: successfully sent SIGTERM to pid %{NUMBER}
––– input –––
mysql -h0 -P1306 -e "INSERT INTO replication:testrt VALUES(6775836565403860995,'List of HP business laptops','Macbook',3);"; echo $?
––– output –––
0
––– input –––
export INSTANCE=5
––– output –––
––– input –––
mkdir -p /var/{run,lib,log}/manticore-${INSTANCE}/{a,b,c,d,e,f,g,h,i,j}
––– output –––
––– input –––
stdbuf -oL searchd -c test/clt-tests/base/searchd-with-flexible-ports.conf | grep -v precach
––– output –––
Manticore %{SEMVER} %{COMMITDATE}#!/(\sdev)?\s/!#(columnar %{SEMVER} %{COMMITDATE}) (secondary %{SEMVER} %{COMMITDATE}) (knn %{SEMVER} %{COMMITDATE})
Copyright (c) 2001-2016, Andrew Aksyonoff
Copyright (c) 2008-2016, Sphinx Technologies Inc (http://sphinxsearch.com)
Copyright (c) 2017-%{YEAR}, Manticore Software LTD (https://manticoresearch.com)
[#!/[a-zA-Z]{3}\s[a-zA-Z]{3}\s+[0-9]{1,2}\s[0-9]{2}:[0-9]{2}:[0-9]{2}.[0-9]{3}\s[0-9]{4}/!#] [%{NUMBER}] using config file '/.clt/test/clt-tests/base/searchd-with-flexible-ports.conf' (%{NUMBER} chars)...
starting daemon version '%{SEMVER} %{COMMITDATE} dev (columnar %{SEMVER} %{COMMITDATE}) (secondary %{SEMVER} %{COMMITDATE}) (knn %{SEMVER} %{COMMITDATE})' ...
listening on all interfaces for mysql, port=%{NUMBER}
listening on all interfaces for sphinx and http(s), port=%{NUMBER}
listening on all interfaces for sphinx and http(s), port=%{NUMBER}
––– input –––
if timeout 10 grep -qm1 'accepting connections' <(tail -n 1000 -f /var/log/manticore-${INSTANCE}/searchd.log); then echo 'Accepting connections!'; else echo 'Timeout or failed!'; fi
––– output –––
Accepting connections!
––– input –––
sleep 5; mysql -h0 -P5306 -e "SELECT * FROM testrt ORDER BY id ASC\G"
––– output –––
*************************** 1. row ***************************
id: 6775836565403860993
title: List of HP business laptops
content: Elitebook Probook
gid: 1
*************************** 2. row ***************************
id: 6775836565403860994
title: List of Dell business laptops
content: Latitude Precision Vostro
gid: 2
*************************** 3. row ***************************
id: 6775836565403860995
title: List of HP business laptops
content: Macbook
gid: 3
––– input –––
export INSTANCE=2
––– output –––
––– input –––
searchd --stopwait -c test/clt-tests/base/searchd-with-flexible-ports.conf
––– output –––
Manticore %{SEMVER} %{COMMITDATE}#!/(\sdev)?\s/!#(columnar %{SEMVER} %{COMMITDATE}) (secondary %{SEMVER} %{COMMITDATE}) (knn %{SEMVER} %{COMMITDATE})
Copyright (c) 2001-2016, Andrew Aksyonoff
Copyright (c) 2008-2016, Sphinx Technologies Inc (http://sphinxsearch.com)
Copyright (c) 2017-%{YEAR}, Manticore Software LTD (https://manticoresearch.com)
[#!/[0-9]{2}:[0-9]{2}.[0-9]{3}/!#] [%{NUMBER}] using config file '%{PATH}' (%{NUMBER} chars)...
[#!/[0-9]{2}:[0-9]{2}.[0-9]{3}/!#] [%{NUMBER}] stop: successfully sent SIGTERM to pid %{NUMBER}
––– input –––
mysql -h0 -P3306 -e "INSERT INTO replication:testrt VALUES(6775836565403860996,'NEW','TABLE',4);"; echo $?
––– output –––
0
––– input –––
mkdir -p /var/{run,lib,log}/manticore-${INSTANCE}/{a,b,c,d,e,f,g,h,i,j}
––– output –––
––– input –––
stdbuf -oL searchd -c test/clt-tests/base/searchd-with-flexible-ports.conf | grep -v precach
––– output –––
Manticore %{SEMVER} %{COMMITDATE}#!/(\sdev)?\s/!#(columnar %{SEMVER} %{COMMITDATE}) (secondary %{SEMVER} %{COMMITDATE}) (knn %{SEMVER} %{COMMITDATE})
Copyright (c) 2001-2016, Andrew Aksyonoff
Copyright (c) 2008-2016, Sphinx Technologies Inc (http://sphinxsearch.com)
Copyright (c) 2017-%{YEAR}, Manticore Software LTD (https://manticoresearch.com)
[#!/[a-zA-Z]{3}\s[a-zA-Z]{3}\s+[0-9]{1,2}\s[0-9]{2}:[0-9]{2}:[0-9]{2}.[0-9]{3}\s[0-9]{4}/!#] [%{NUMBER}] using config file '/.clt/test/clt-tests/base/searchd-with-flexible-ports.conf' (%{NUMBER} chars)...
starting daemon version '%{SEMVER} %{COMMITDATE} dev (columnar %{SEMVER} %{COMMITDATE}) (secondary %{SEMVER} %{COMMITDATE}) (knn %{SEMVER} %{COMMITDATE})' ...
listening on all interfaces for mysql, port=%{NUMBER}
listening on all interfaces for sphinx and http(s), port=%{NUMBER}
listening on all interfaces for sphinx and http(s), port=%{NUMBER}
––– input –––
if timeout 10 grep -qm1 'accepting connections' <(tail -n 1000 -f /var/log/manticore-${INSTANCE}/searchd.log); then echo 'Accepting connections!'; else echo 'Timeout or failed!'; fi
––– output –––
Accepting connections!
––– input –––
sleep 5;mysql -h0 -P2306 -e "SELECT * FROM testrt ORDER BY id ASC\G"
––– output –––
*************************** 1. row ***************************
id: 6775836565403860993
title: List of HP business laptops
content: Elitebook Probook
gid: 1
*************************** 2. row ***************************
id: 6775836565403860994
title: List of Dell business laptops
content: Latitude Precision Vostro
gid: 2
*************************** 3. row ***************************
id: 6775836565403860995
title: List of HP business laptops
content: Macbook
gid: 3
*************************** 4. row ***************************
id: 6775836565403860996
title: NEW
content: TABLE
gid: 4
––– input –––
mysql -h0 -P3306 -e "SELECT * FROM testrt ORDER BY id ASC\G"
––– output –––
*************************** 1. row ***************************
id: 6775836565403860993
title: List of HP business laptops
content: Elitebook Probook
gid: 1
*************************** 2. row ***************************
id: 6775836565403860994
title: List of Dell business laptops
content: Latitude Precision Vostro
gid: 2
*************************** 3. row ***************************
id: 6775836565403860995
title: List of HP business laptops
content: Macbook
gid: 3
*************************** 4. row ***************************
id: 6775836565403860996
title: NEW
content: TABLE
gid: 4
––– input –––
mysql -h0 -P4306 -e "SELECT * FROM testrt ORDER BY id ASC\G"
––– output –––
*************************** 1. row ***************************
id: 6775836565403860993
title: List of HP business laptops
content: Elitebook Probook
gid: 1
*************************** 2. row ***************************
id: 6775836565403860994
title: List of Dell business laptops
content: Latitude Precision Vostro
gid: 2
*************************** 3. row ***************************
id: 6775836565403860995
title: List of HP business laptops
content: Macbook
gid: 3
*************************** 4. row ***************************
id: 6775836565403860996
title: NEW
content: TABLE
gid: 4
––– input –––
mysql -h0 -P5306 -e "SELECT * FROM testrt ORDER BY id ASC\G"
––– output –––
*************************** 1. row ***************************
id: 6775836565403860993
title: List of HP business laptops
content: Elitebook Probook
gid: 1
*************************** 2. row ***************************
id: 6775836565403860994
title: List of Dell business laptops
content: Latitude Precision Vostro
gid: 2
*************************** 3. row ***************************
id: 6775836565403860995
title: List of HP business laptops
content: Macbook
gid: 3
*************************** 4. row ***************************
id: 6775836565403860996
title: NEW
content: TABLE
gid: 4
––– input –––
export INSTANCE=4
––– output –––
––– input –––
searchd --stopwait -c test/clt-tests/base/searchd-with-flexible-ports.conf
––– output –––
Manticore %{SEMVER} %{COMMITDATE}#!/(\sdev)?\s/!#(columnar %{SEMVER} %{COMMITDATE}) (secondary %{SEMVER} %{COMMITDATE}) (knn %{SEMVER} %{COMMITDATE})
Copyright (c) 2001-2016, Andrew Aksyonoff
Copyright (c) 2008-2016, Sphinx Technologies Inc (http://sphinxsearch.com)
Copyright (c) 2017-%{YEAR}, Manticore Software LTD (https://manticoresearch.com)
[#!/[0-9]{2}:[0-9]{2}.[0-9]{3}/!#] [%{NUMBER}] using config file '%{PATH}' (%{NUMBER} chars)...
[#!/[0-9]{2}:[0-9]{2}.[0-9]{3}/!#] [%{NUMBER}] stop: successfully sent SIGTERM to pid %{NUMBER}
––– input –––
sleep 5;mysql -h0 -P2306 -e "DELETE FROM replication:testrt WHERE id = 6775836565403860994"; echo $?
––– output –––
0
––– input –––
mysql -h0 -P2306 -e "SELECT * FROM testrt ORDER BY id ASC" > /tmp/output_2306.txt;
––– output –––
––– input –––
export INSTANCE=4
––– output –––
––– input –––
mkdir -p /var/{run,lib,log}/manticore-${INSTANCE}/{a,b,c,d,e,f,g,h,i,j}
––– output –––
––– input –––
stdbuf -oL searchd -c test/clt-tests/base/searchd-with-flexible-ports.conf | grep -v precach
––– output –––
Manticore %{SEMVER} %{COMMITDATE}#!/(\sdev)?\s/!#(columnar %{SEMVER} %{COMMITDATE}) (secondary %{SEMVER} %{COMMITDATE}) (knn %{SEMVER} %{COMMITDATE})
Copyright (c) 2001-2016, Andrew Aksyonoff
Copyright (c) 2008-2016, Sphinx Technologies Inc (http://sphinxsearch.com)
Copyright (c) 2017-%{YEAR}, Manticore Software LTD (https://manticoresearch.com)
[#!/[a-zA-Z]{3}\s[a-zA-Z]{3}\s+[0-9]{1,2}\s[0-9]{2}:[0-9]{2}:[0-9]{2}.[0-9]{3}\s[0-9]{4}/!#] [%{NUMBER}] using config file '/.clt/test/clt-tests/base/searchd-with-flexible-ports.conf' (%{NUMBER} chars)...
starting daemon version '%{SEMVER} %{COMMITDATE} dev (columnar %{SEMVER} %{COMMITDATE}) (secondary %{SEMVER} %{COMMITDATE}) (knn %{SEMVER} %{COMMITDATE})' ...
listening on all interfaces for mysql, port=%{NUMBER}
listening on all interfaces for sphinx and http(s), port=%{NUMBER}
listening on all interfaces for sphinx and http(s), port=%{NUMBER}
––– input –––
if timeout 10 grep -qm1 'accepting connections' <(tail -n 1000 -f /var/log/manticore-${INSTANCE}/searchd.log); then echo 'Accepting connections!'; else echo 'Timeout or failed!'; fi
––– output –––
Accepting connections!
––– input –––
sleep 5;mysql -h0 -P1306 -e "SELECT * FROM testrt ORDER BY id ASC" > /tmp/output_1306.txt;
––– output –––
––– input –––
mysql -h0 -P3306 -e "SELECT * FROM testrt ORDER BY id ASC" > /tmp/output_3306.txt;
––– output –––
––– input –––
mysql -h0 -P4306 -e "SELECT * FROM testrt ORDER BY id ASC" > /tmp/output_4306.txt;
––– output –––
––– input –––
mysql -h0 -P5306 -e "SELECT * FROM testrt ORDER BY id ASC" > /tmp/output_5306.txt;
––– output –––
––– input –––
diff /tmp/output_1306.txt /tmp/output_2306.txt; echo $?
––– output –––
0
––– input –––
diff /tmp/output_1306.txt /tmp/output_3306.txt; echo $?
––– output –––
0
––– input –––
diff /tmp/output_1306.txt /tmp/output_4306.txt; echo $?
––– output –––
0
––– input –––
diff /tmp/output_1306.txt /tmp/output_5306.txt; echo $?
––– output –––
0
––– input –––
mysql -h0 -P1306 -e "REPLACE INTO replication:testrt SET content='Updated Content', title='List of Dell business laptops', gid=2 WHERE id=6775836565403860994;"; echo $?
––– output –––
0
––– input –––
mysql -h0 -P1306 -e "SELECT * FROM replication:testrt WHERE id=6775836565403860994\G"
––– output –––
*************************** 1. row ***************************
id: 6775836565403860994
title: List of Dell business laptops
content: Updated Content
gid: 2
––– input –––
mysql -h0 -P2306 -e "SELECT * FROM replication:testrt WHERE id=6775836565403860994\G"
––– output –––
*************************** 1. row ***************************
id: 6775836565403860994
title: List of Dell business laptops
content: Updated Content
gid: 2
––– input –––
mysql -h0 -P3306 -e "SELECT * FROM replication:testrt WHERE id=6775836565403860994\G"
––– output –––
*************************** 1. row ***************************
id: 6775836565403860994
title: List of Dell business laptops
content: Updated Content
gid: 2
––– input –––
mysql -h0 -P4306 -e "SELECT * FROM replication:testrt WHERE id=6775836565403860994\G"
––– output –––
*************************** 1. row ***************************
id: 6775836565403860994
title: List of Dell business laptops
content: Updated Content
gid: 2
––– input –––
mysql -h0 -P5306 -e "SELECT * FROM replication:testrt WHERE id=6775836565403860994\G"
––– output –––
*************************** 1. row ***************************
id: 6775836565403860994
title: List of Dell business laptops
content: Updated Content
gid: 2
––– input –––
mysqldump -etc -h0 -P1306 --skip-comments manticore testrt > /tmp/manticore_backup.sql
––– output –––
-- Warning: version string returned by server is incorrect.
-- Warning: column statistics not supported by the server.
––– input –––
mysql -h0 -P1306 -e "ALTER CLUSTER replication DROP testrt;" && for port in 1306 2306 3306 4306 5306; do mysql -h0 -P$port -e "DROP TABLE testrt;"; done && for port in 1306 2306 3306 4306 5306; do echo "Checking tables on port $port"; mysql -h0 -P$port -e "SHOW TABLES;"; done
––– output –––
Checking tables on port 1306
Checking tables on port 2306
Checking tables on port 3306
Checking tables on port 4306
Checking tables on port 5306
––– input –––
mysql -h0 -P1306 -e "CREATE TABLE testrt (title text, content text, gid uint);"
––– output –––
––– input –––
mysql -h0 -P1306 < /tmp/manticore_backup.sql && mysql -h0 -P1306 -e "ALTER CLUSTER replication ADD testrt;" && for port in 1306 2306 3306 4306 5306; do echo "Checking tables on port $port"; mysql -h0 -P$port -e "SHOW TABLES;"; mysql -h0 -P$port -e "SELECT * FROM testrt ORDER BY id ASC\G"; done
––– output –––
Checking tables on port 1306
+--------+------+
| Table  | Type |
+--------+------+
| testrt | rt   |
+--------+------+
*************************** 1. row ***************************
id: 6775836565403860993
title: List of HP business laptops
content: Elitebook Probook
gid: 1
*************************** 2. row ***************************
id: 6775836565403860994
title: List of Dell business laptops
content: Updated Content
gid: 2
*************************** 3. row ***************************
id: 6775836565403860995
title: List of HP business laptops
content: Macbook
gid: 3
*************************** 4. row ***************************
id: 6775836565403860996
title: NEW
content: TABLE
gid: 4
Checking tables on port 2306
+--------+------+
| Table  | Type |
+--------+------+
| testrt | rt   |
+--------+------+
*************************** 1. row ***************************
id: 6775836565403860993
title: List of HP business laptops
content: Elitebook Probook
gid: 1
*************************** 2. row ***************************
id: 6775836565403860994
title: List of Dell business laptops
content: Updated Content
gid: 2
*************************** 3. row ***************************
id: 6775836565403860995
title: List of HP business laptops
content: Macbook
gid: 3
*************************** 4. row ***************************
id: 6775836565403860996
title: NEW
content: TABLE
gid: 4
Checking tables on port 3306
+--------+------+
| Table  | Type |
+--------+------+
| testrt | rt   |
+--------+------+
*************************** 1. row ***************************
id: 6775836565403860993
title: List of HP business laptops
content: Elitebook Probook
gid: 1
*************************** 2. row ***************************
id: 6775836565403860994
title: List of Dell business laptops
content: Updated Content
gid: 2
*************************** 3. row ***************************
id: 6775836565403860995
title: List of HP business laptops
content: Macbook
gid: 3
*************************** 4. row ***************************
id: 6775836565403860996
title: NEW
content: TABLE
gid: 4
Checking tables on port 4306
+--------+------+
| Table  | Type |
+--------+------+
| testrt | rt   |
+--------+------+
*************************** 1. row ***************************
id: 6775836565403860993
title: List of HP business laptops
content: Elitebook Probook
gid: 1
*************************** 2. row ***************************
id: 6775836565403860994
title: List of Dell business laptops
content: Updated Content
gid: 2
*************************** 3. row ***************************
id: 6775836565403860995
title: List of HP business laptops
content: Macbook
gid: 3
*************************** 4. row ***************************
id: 6775836565403860996
title: NEW
content: TABLE
gid: 4
Checking tables on port 5306
+--------+------+
| Table  | Type |
+--------+------+
| testrt | rt   |
+--------+------+
*************************** 1. row ***************************
id: 6775836565403860993
title: List of HP business laptops
content: Elitebook Probook
gid: 1
*************************** 2. row ***************************
id: 6775836565403860994
title: List of Dell business laptops
content: Updated Content
gid: 2
*************************** 3. row ***************************
id: 6775836565403860995
title: List of HP business laptops
content: Macbook
gid: 3
*************************** 4. row ***************************
id: 6775836565403860996
title: NEW
content: TABLE
gid: 4
