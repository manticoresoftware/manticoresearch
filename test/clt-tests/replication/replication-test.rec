––– input –––
export INSTANCE=1
––– output –––
––– input –––
mkdir -p /tmp/manticore-${INSTANCE}
––– output –––
––– input –––
chmod -R 777 /tmp/manticore-${INSTANCE}
––– output –––
––– input –––
stdbuf -oL searchd -c test/clt-tests/base/searchd-with-flexible-ports.conf | grep -v precach
––– output –––
Manticore %{SEMVER} %{COMMITDATE}#!/(\sdev)?\s/!#(columnar %{SEMVER} %{COMMITDATE}) (secondary %{SEMVER} %{COMMITDATE}) (knn %{SEMVER} %{COMMITDATE})
Copyright (c) 2001-2016, Andrew Aksyonoff
Copyright (c) 2008-2016, Sphinx Technologies Inc (http://sphinxsearch.com)
Copyright (c) 2017-%{YEAR}, Manticore Software LTD (https://manticoresearch.com)
[#!/[a-zA-Z]{3}\s[a-zA-Z]{3}\s+[0-9]{1,2}\s[0-9]{2}:[0-9]{2}:[0-9]{2}.[0-9]{3}\s[0-9]{4}/!#] [%{NUMBER}] using config file '/.clt/test/clt-tests/base/searchd-with-flexible-ports.conf' (%{NUMBER} chars)...
starting daemon version '%{SEMVER} %{COMMITDATE} dev (columnar %{SEMVER} %{COMMITDATE}) (secondary %{SEMVER} %{COMMITDATE}) (knn %{SEMVER} %{COMMITDATE})' ...
listening on all interfaces for mysql, port=%{NUMBER}
listening on all interfaces for sphinx and http(s), port=%{NUMBER}
listening on all interfaces for sphinx and http(s), port=%{NUMBER}
––– input –––
if timeout 10 grep -qm1 'accepting connections' <(tail -n 1000 -f /tmp/manticore-${INSTANCE}/searchd.log); then echo 'Accepting connections!'; else echo 'Timeout or failed!'; fi
––– output –––
Accepting connections!
––– input –––
export INSTANCE=2
––– output –––
––– input –––
mkdir -p /tmp/manticore-${INSTANCE}
––– output –––
––– input –––
chmod -R 777 /tmp/manticore-${INSTANCE}
––– output –––
––– input –––
stdbuf -oL searchd -c test/clt-tests/base/searchd-with-flexible-ports.conf | grep -v precach
––– output –––
Manticore %{SEMVER} %{COMMITDATE}#!/(\sdev)?\s/!#(columnar %{SEMVER} %{COMMITDATE}) (secondary %{SEMVER} %{COMMITDATE}) (knn %{SEMVER} %{COMMITDATE})
Copyright (c) 2001-2016, Andrew Aksyonoff
Copyright (c) 2008-2016, Sphinx Technologies Inc (http://sphinxsearch.com)
Copyright (c) 2017-%{YEAR}, Manticore Software LTD (https://manticoresearch.com)
[#!/[a-zA-Z]{3}\s[a-zA-Z]{3}\s+[0-9]{1,2}\s[0-9]{2}:[0-9]{2}:[0-9]{2}.[0-9]{3}\s[0-9]{4}/!#] [%{NUMBER}] using config file '/.clt/test/clt-tests/base/searchd-with-flexible-ports.conf' (%{NUMBER} chars)...
starting daemon version '%{SEMVER} %{COMMITDATE} dev (columnar %{SEMVER} %{COMMITDATE}) (secondary %{SEMVER} %{COMMITDATE}) (knn %{SEMVER} %{COMMITDATE})' ...
listening on all interfaces for mysql, port=%{NUMBER}
listening on all interfaces for sphinx and http(s), port=%{NUMBER}
listening on all interfaces for sphinx and http(s), port=%{NUMBER}
––– input –––
if timeout 10 grep -qm1 'accepting connections' <(tail -n 1000 -f /tmp/manticore-${INSTANCE}/searchd.log); then echo 'Accepting connections!'; else echo 'Timeout or failed!'; fi
––– output –––
Accepting connections!
––– input –––
export INSTANCE=3
––– output –––
––– input –––
mkdir -p /tmp/manticore-${INSTANCE}
––– output –––
––– input –––
chmod -R 777 /tmp/manticore-${INSTANCE}
––– output –––
––– input –––
stdbuf -oL searchd -c test/clt-tests/base/searchd-with-flexible-ports.conf | grep -v precach
––– output –––
Manticore %{SEMVER} %{COMMITDATE}#!/(\sdev)?\s/!#(columnar %{SEMVER} %{COMMITDATE}) (secondary %{SEMVER} %{COMMITDATE}) (knn %{SEMVER} %{COMMITDATE})
Copyright (c) 2001-2016, Andrew Aksyonoff
Copyright (c) 2008-2016, Sphinx Technologies Inc (http://sphinxsearch.com)
Copyright (c) 2017-%{YEAR}, Manticore Software LTD (https://manticoresearch.com)
[#!/[a-zA-Z]{3}\s[a-zA-Z]{3}\s+[0-9]{1,2}\s[0-9]{2}:[0-9]{2}:[0-9]{2}.[0-9]{3}\s[0-9]{4}/!#] [%{NUMBER}] using config file '/.clt/test/clt-tests/base/searchd-with-flexible-ports.conf' (%{NUMBER} chars)...
starting daemon version '%{SEMVER} %{COMMITDATE} dev (columnar %{SEMVER} %{COMMITDATE}) (secondary %{SEMVER} %{COMMITDATE}) (knn %{SEMVER} %{COMMITDATE})' ...
listening on all interfaces for mysql, port=%{NUMBER}
listening on all interfaces for sphinx and http(s), port=%{NUMBER}
listening on all interfaces for sphinx and http(s), port=%{NUMBER}
––– input –––
if timeout 10 grep -qm1 'accepting connections' <(tail -n 1000 -f /tmp/manticore-${INSTANCE}/searchd.log); then echo 'Accepting connections!'; else echo 'Timeout or failed!'; fi
––– output –––
Accepting connections!
––– input –––
export INSTANCE=4
––– output –––
––– input –––
mkdir -p /tmp/manticore-${INSTANCE}
––– output –––
––– input –––
chmod -R 777 /tmp/manticore-${INSTANCE}
––– output –––
––– input –––
stdbuf -oL searchd -c test/clt-tests/base/searchd-with-flexible-ports.conf | grep -v precach
––– output –––
Manticore %{SEMVER} %{COMMITDATE}#!/(\sdev)?\s/!#(columnar %{SEMVER} %{COMMITDATE}) (secondary %{SEMVER} %{COMMITDATE}) (knn %{SEMVER} %{COMMITDATE})
Copyright (c) 2001-2016, Andrew Aksyonoff
Copyright (c) 2008-2016, Sphinx Technologies Inc (http://sphinxsearch.com)
Copyright (c) 2017-%{YEAR}, Manticore Software LTD (https://manticoresearch.com)
[#!/[a-zA-Z]{3}\s[a-zA-Z]{3}\s+[0-9]{1,2}\s[0-9]{2}:[0-9]{2}:[0-9]{2}.[0-9]{3}\s[0-9]{4}/!#] [%{NUMBER}] using config file '/.clt/test/clt-tests/base/searchd-with-flexible-ports.conf' (%{NUMBER} chars)...
starting daemon version '%{SEMVER} %{COMMITDATE} dev (columnar %{SEMVER} %{COMMITDATE}) (secondary %{SEMVER} %{COMMITDATE}) (knn %{SEMVER} %{COMMITDATE})' ...
listening on all interfaces for mysql, port=%{NUMBER}
listening on all interfaces for sphinx and http(s), port=%{NUMBER}
listening on all interfaces for sphinx and http(s), port=%{NUMBER}
––– input –––
if timeout 10 grep -qm1 'accepting connections' <(tail -n 1000 -f /tmp/manticore-${INSTANCE}/searchd.log); then echo 'Accepting connections!'; else echo 'Timeout or failed!'; fi
––– output –––
Accepting connections!
––– input –––
export INSTANCE=5
––– output –––
––– input –––
mkdir -p /tmp/manticore-${INSTANCE}
––– output –––
––– input –––
chmod -R 777 /tmp/manticore-${INSTANCE}
––– output –––
––– input –––
stdbuf -oL searchd -c test/clt-tests/base/searchd-with-flexible-ports.conf | grep -v precach
––– output –––
Manticore %{SEMVER} %{COMMITDATE}#!/(\sdev)?\s/!#(columnar %{SEMVER} %{COMMITDATE}) (secondary %{SEMVER} %{COMMITDATE}) (knn %{SEMVER} %{COMMITDATE})
Copyright (c) 2001-2016, Andrew Aksyonoff
Copyright (c) 2008-2016, Sphinx Technologies Inc (http://sphinxsearch.com)
Copyright (c) 2017-%{YEAR}, Manticore Software LTD (https://manticoresearch.com)
[#!/[a-zA-Z]{3}\s[a-zA-Z]{3}\s+[0-9]{1,2}\s[0-9]{2}:[0-9]{2}:[0-9]{2}.[0-9]{3}\s[0-9]{4}/!#] [%{NUMBER}] using config file '/.clt/test/clt-tests/base/searchd-with-flexible-ports.conf' (%{NUMBER} chars)...
starting daemon version '%{SEMVER} %{COMMITDATE} dev (columnar %{SEMVER} %{COMMITDATE}) (secondary %{SEMVER} %{COMMITDATE}) (knn %{SEMVER} %{COMMITDATE})' ...
listening on all interfaces for mysql, port=%{NUMBER}
listening on all interfaces for sphinx and http(s), port=%{NUMBER}
listening on all interfaces for sphinx and http(s), port=%{NUMBER}
––– input –––
if timeout 10 grep -qm1 'accepting connections' <(tail -n 1000 -f /tmp/manticore-${INSTANCE}/searchd.log); then echo 'Accepting connections!'; else echo 'Timeout or failed!'; fi
––– output –––
Accepting connections!
––– input –––
export CLUSTER_NAME=replication
––– output –––
––– input –––
mysql -h0 -P1306 -e "create cluster ${CLUSTER_NAME}"
––– output –––
––– input –––
mysql -h0 -P1306 -e "show status like 'cluster_${CLUSTER_NAME}_status'\G"
––– output –––
*************************** 1. row ***************************
Counter: cluster_#!/[a-z]+/!#_status
Value: primary
––– input –––
export CLUSTER_NAME=replication
––– output –––
––– input –––
for n in `seq 2 $INSTANCE`; do mysql -h0 -P${n}306 -e "join cluster ${CLUSTER_NAME} at '127.0.0.1:1312'"; done;
––– output –––
––– input –––
mysql -h0 -P${INSTANCE}306 -e "show status like 'cluster_${CLUSTER_NAME}_status'\G"
––– output –––
*************************** 1. row ***************************
Counter: cluster_#!/[a-z]+/!#_status
Value: primary
––– input –––
mysql -h0 -P1306 -e "CREATE TABLE testrt (id BIGINT, model TEXT, storage_capacity INTEGER, color string, release_year INTEGER, price FLOAT, discounted_price FLOAT, sold BOOL, date_added TIMESTAMP, product_codes MULTI, values MULTI64, additional_info JSON, vector float_vector knn_type='hnsw' knn_dims='4' hnsw_similarity='l2');"; echo $?
––– output –––
0
––– input –––
mysql -h0 -P1306 -e "ALTER CLUSTER replication ADD testrt;"
––– output –––
––– input –––
mysql -h0 -P1306 -e "SHOW STATUS LIKE 'cluster_replication_indexes';"
––– output –––
+-----------------------------+--------+
| Counter                     | Value  |
+-----------------------------+--------+
| cluster_replication_indexes | testrt |
+-----------------------------+--------+
––– input –––
mysql -h0 -P1306 -e "INSERT INTO replication:testrt VALUES (6775836565403860993, 'iPhone 13 Pro', 256, 'silver', 2021, 1099.99, 989.99, 1, '1591362342000', (1,2,3), (523456764345678976, 98765409877866654098, 1109876543450987650987), '{\"features\": [\"ProMotion display\", \"A15 Bionic chip\", \"Ceramic Shield front cover\"]}', (0.773448, 0.312478, 0.137971, 0.459821));"; echo $?
––– output –––
0
––– input –––
mysql -h0 -P1306 -e "INSERT INTO replication:testrt VALUES (6775836565403860994, 'Galaxy S21 Ultra', 128, 'black', 2021, 1199.99, 1099.99, 0, '1609459200000', (4,5,6), (1234567890123456789, 9876543210987654321), '{\"features\": [\"Dynamic AMOLED 2X\", \"Exynos 2100\", \"108MP camera\"]}', (0.5, 0.4, 0.3, 0.2));"; echo $?
––– output –––
0
––– input –––
mysql -h0 -P1306 -e "SHOW CREATE TABLE testrt;"
––– output –––
+--------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table  | Create Table                                                                                                                                                                                                                                                                                                                  |
+--------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| testrt | CREATE TABLE testrt (
id bigint,
model text,
storage_capacity integer,
color string attribute,
release_year integer,
price float,
discounted_price float,
sold bool,
date_added timestamp,
product_codes multi,
values multi64,
additional_info json,
vector float_vector knn_type='hnsw' knn_dims='4' hnsw_similarity='L2'
) |
+--------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
––– input –––
export INSTANCE=5
––– output –––
––– input –––
searchd --stopwait -c test/clt-tests/base/searchd-with-flexible-ports.conf
––– output –––
Manticore %{SEMVER} %{COMMITDATE}#!/(\sdev)?\s/!#(columnar %{SEMVER} %{COMMITDATE}) (secondary %{SEMVER} %{COMMITDATE}) (knn %{SEMVER} %{COMMITDATE})
Copyright (c) 2001-2016, Andrew Aksyonoff
Copyright (c) 2008-2016, Sphinx Technologies Inc (http://sphinxsearch.com)
Copyright (c) 2017-%{YEAR}, Manticore Software LTD (https://manticoresearch.com)
[#!/[0-9]{2}:[0-9]{2}.[0-9]{3}/!#] [%{NUMBER}] using config file '%{PATH}' (%{NUMBER} chars)...
[#!/[0-9]{2}:[0-9]{2}.[0-9]{3}/!#] [%{NUMBER}] stop: successfully sent SIGTERM to pid %{NUMBER}
––– input –––
mysql -h0 -P1306 -e "INSERT INTO replication:testrt VALUES (6775836565403860995, 'Google Pixel 6', 128, 'sorta seafoam', 2021, 699.99, 599.99, 1, '1635317932000', (33,34,35), (623456764345678976, 98765409877866654097, 1109876543450987650986), '{\"features\": [\"Google Tensor chip\", \"Flat OLED display\", \"Dual-camera system\"]}', (0.823448, 0.362478, 0.187971, 0.509821));"; echo $?
––– output –––
0
––– input –––
export INSTANCE=5
––– output –––
––– input –––
mkdir -p /tmp/manticore-${INSTANCE}
––– output –––
––– input –––
chmod -R 777 /tmp/manticore-${INSTANCE}
––– output –––
––– input –––
stdbuf -oL searchd -c test/clt-tests/base/searchd-with-flexible-ports.conf | grep -v precach
––– output –––
Manticore %{SEMVER} %{COMMITDATE}#!/(\sdev)?\s/!#(columnar %{SEMVER} %{COMMITDATE}) (secondary %{SEMVER} %{COMMITDATE}) (knn %{SEMVER} %{COMMITDATE})
Copyright (c) 2001-2016, Andrew Aksyonoff
Copyright (c) 2008-2016, Sphinx Technologies Inc (http://sphinxsearch.com)
Copyright (c) 2017-%{YEAR}, Manticore Software LTD (https://manticoresearch.com)
[#!/[a-zA-Z]{3}\s[a-zA-Z]{3}\s+[0-9]{1,2}\s[0-9]{2}:[0-9]{2}:[0-9]{2}.[0-9]{3}\s[0-9]{4}/!#] [%{NUMBER}] using config file '/.clt/test/clt-tests/base/searchd-with-flexible-ports.conf' (%{NUMBER} chars)...
starting daemon version '%{SEMVER} %{COMMITDATE} dev (columnar %{SEMVER} %{COMMITDATE}) (secondary %{SEMVER} %{COMMITDATE}) (knn %{SEMVER} %{COMMITDATE})' ...
listening on all interfaces for mysql, port=%{NUMBER}
listening on all interfaces for sphinx and http(s), port=%{NUMBER}
listening on all interfaces for sphinx and http(s), port=%{NUMBER}
––– input –––
if timeout 10 grep -qm1 'accepting connections' <(tail -n 1000 -f /tmp/manticore-${INSTANCE}/searchd.log); then echo 'Accepting connections!'; else echo 'Timeout or failed!'; fi
––– output –––
Accepting connections!
––– input –––
sleep 5; mysql -h0 -P5306 -e "SELECT * FROM testrt ORDER BY id ASC\G"
––– output –––
*************************** 1. row ***************************
id: 6775836565403860993
model: iPhone 13 Pro
storage_capacity: 256
color: silver
release_year: 2021
price: 1099.989990
discounted_price: 989.989990
sold: 1
date_added: 2224442480
product_codes: 1,2,3
values: 523456764345678976,9223372036854775807
additional_info: {"features":["ProMotion display","A15 Bionic chip","Ceramic Shield front cover"]}
vector: 0.773448,0.312478,0.137971,0.459821
*************************** 2. row ***************************
id: 6775836565403860994
model: Galaxy S21 Ultra
storage_capacity: 128
color: black
release_year: 2021
price: 1199.989990
discounted_price: 1099.989990
sold: 0
date_added: 3141431296
product_codes: 4,5,6
values: 1234567890123456789,9223372036854775807
additional_info: {"features":["Dynamic AMOLED 2X","Exynos 2100","108MP camera"]}
vector: 0.500000,0.400000,0.300000,0.200000
*************************** 3. row ***************************
id: 6775836565403860995
model: Google Pixel 6
storage_capacity: 128
color: sorta seafoam
release_year: 2021
price: 699.989990
discounted_price: 599.989990
sold: 1
date_added: 3230359520
product_codes: 33,34,35
values: 623456764345678976,9223372036854775807
additional_info: {"features":["Google Tensor chip","Flat OLED display","Dual-camera system"]}
vector: 0.823448,0.362478,0.187971,0.509821
––– input –––
export INSTANCE=2
––– output –––
––– input –––
searchd --stopwait -c test/clt-tests/base/searchd-with-flexible-ports.conf
––– output –––
Manticore %{SEMVER} %{COMMITDATE}#!/(\sdev)?\s/!#(columnar %{SEMVER} %{COMMITDATE}) (secondary %{SEMVER} %{COMMITDATE}) (knn %{SEMVER} %{COMMITDATE})
Copyright (c) 2001-2016, Andrew Aksyonoff
Copyright (c) 2008-2016, Sphinx Technologies Inc (http://sphinxsearch.com)
Copyright (c) 2017-%{YEAR}, Manticore Software LTD (https://manticoresearch.com)
[#!/[0-9]{2}:[0-9]{2}.[0-9]{3}/!#] [%{NUMBER}] using config file '%{PATH}' (%{NUMBER} chars)...
[#!/[0-9]{2}:[0-9]{2}.[0-9]{3}/!#] [%{NUMBER}] stop: successfully sent SIGTERM to pid %{NUMBER}
––– input –––
mysql -h0 -P1306 -e "INSERT INTO replication:testrt VALUES (6775836565403860996, 'OnePlus 9', 256, 'winter mist', 2021, 729.99, 629.99, 0, '1648044532000', (36,37,38), (723456764345678976, 98765409877866654096, 1109876543450987650985), '{\"features\": [\"Qualcomm Snapdragon 888\", \"Fluid AMOLED display\", \"Hasselblad Camera for Mobile\"]}', (0.021106, 0.918278, 0.261892, 0.074594));"; echo $?
––– output –––
0
––– input –––
mkdir -p /tmp/manticore-${INSTANCE}
––– output –––
––– input –––
chmod -R 777 /tmp/manticore-${INSTANCE}
––– output –––
––– input –––
stdbuf -oL searchd -c test/clt-tests/base/searchd-with-flexible-ports.conf | grep -v precach
––– output –––
Manticore %{SEMVER} %{COMMITDATE}#!/(\sdev)?\s/!#(columnar %{SEMVER} %{COMMITDATE}) (secondary %{SEMVER} %{COMMITDATE}) (knn %{SEMVER} %{COMMITDATE})
Copyright (c) 2001-2016, Andrew Aksyonoff
Copyright (c) 2008-2016, Sphinx Technologies Inc (http://sphinxsearch.com)
Copyright (c) 2017-%{YEAR}, Manticore Software LTD (https://manticoresearch.com)
[#!/[a-zA-Z]{3}\s[a-zA-Z]{3}\s+[0-9]{1,2}\s[0-9]{2}:[0-9]{2}:[0-9]{2}.[0-9]{3}\s[0-9]{4}/!#] [%{NUMBER}] using config file '/.clt/test/clt-tests/base/searchd-with-flexible-ports.conf' (%{NUMBER} chars)...
starting daemon version '%{SEMVER} %{COMMITDATE} dev (columnar %{SEMVER} %{COMMITDATE}) (secondary %{SEMVER} %{COMMITDATE}) (knn %{SEMVER} %{COMMITDATE})' ...
listening on all interfaces for mysql, port=%{NUMBER}
listening on all interfaces for sphinx and http(s), port=%{NUMBER}
listening on all interfaces for sphinx and http(s), port=%{NUMBER}
––– input –––
if timeout 10 grep -qm1 'accepting connections' <(tail -n 1000 -f /tmp/manticore-${INSTANCE}/searchd.log); then echo 'Accepting connections!'; else echo 'Timeout or failed!'; fi
––– output –––
Accepting connections!
––– input –––
sleep 5;mysql -h0 -P2306 -e "SELECT * FROM testrt ORDER BY id ASC\G"
––– output –––
*************************** 1. row ***************************
id: 6775836565403860993
model: iPhone 13 Pro
storage_capacity: 256
color: silver
release_year: 2021
price: 1099.989990
discounted_price: 989.989990
sold: 1
date_added: 2224442480
product_codes: 1,2,3
values: 523456764345678976,9223372036854775807
additional_info: {"features":["ProMotion display","A15 Bionic chip","Ceramic Shield front cover"]}
vector: 0.773448,0.312478,0.137971,0.459821
*************************** 2. row ***************************
id: 6775836565403860994
model: Galaxy S21 Ultra
storage_capacity: 128
color: black
release_year: 2021
price: 1199.989990
discounted_price: 1099.989990
sold: 0
date_added: 3141431296
product_codes: 4,5,6
values: 1234567890123456789,9223372036854775807
additional_info: {"features":["Dynamic AMOLED 2X","Exynos 2100","108MP camera"]}
vector: 0.500000,0.400000,0.300000,0.200000
*************************** 3. row ***************************
id: 6775836565403860995
model: Google Pixel 6
storage_capacity: 128
color: sorta seafoam
release_year: 2021
price: 699.989990
discounted_price: 599.989990
sold: 1
date_added: 3230359520
product_codes: 33,34,35
values: 623456764345678976,9223372036854775807
additional_info: {"features":["Google Tensor chip","Flat OLED display","Dual-camera system"]}
vector: 0.823448,0.362478,0.187971,0.509821
*************************** 4. row ***************************
id: 6775836565403860996
model: OnePlus 9
storage_capacity: 256
color: winter mist
release_year: 2021
price: 729.989990
discounted_price: 629.989990
sold: 0
date_added: 3072057632
product_codes: 36,37,38
values: 723456764345678976,9223372036854775807
additional_info: {"features":["Qualcomm Snapdragon 888","Fluid AMOLED display","Hasselblad Camera for Mobile"]}
vector: 0.021106,0.918278,0.261892,0.074594
––– input –––
sleep 5;mysql -h0 -P2306 -e "SELECT * FROM testrt ORDER BY id ASC\G"
––– output –––
*************************** 1. row ***************************
id: 6775836565403860993
model: iPhone 13 Pro
storage_capacity: 256
color: silver
release_year: 2021
price: 1099.989990
discounted_price: 989.989990
sold: 1
date_added: 2224442480
product_codes: 1,2,3
values: 523456764345678976,9223372036854775807
additional_info: {"features":["ProMotion display","A15 Bionic chip","Ceramic Shield front cover"]}
vector: 0.773448,0.312478,0.137971,0.459821
*************************** 2. row ***************************
id: 6775836565403860994
model: Galaxy S21 Ultra
storage_capacity: 128
color: black
release_year: 2021
price: 1199.989990
discounted_price: 1099.989990
sold: 0
date_added: 3141431296
product_codes: 4,5,6
values: 1234567890123456789,9223372036854775807
additional_info: {"features":["Dynamic AMOLED 2X","Exynos 2100","108MP camera"]}
vector: 0.500000,0.400000,0.300000,0.200000
*************************** 3. row ***************************
id: 6775836565403860995
model: Google Pixel 6
storage_capacity: 128
color: sorta seafoam
release_year: 2021
price: 699.989990
discounted_price: 599.989990
sold: 1
date_added: 3230359520
product_codes: 33,34,35
values: 623456764345678976,9223372036854775807
additional_info: {"features":["Google Tensor chip","Flat OLED display","Dual-camera system"]}
vector: 0.823448,0.362478,0.187971,0.509821
*************************** 4. row ***************************
id: 6775836565403860996
model: OnePlus 9
storage_capacity: 256
color: winter mist
release_year: 2021
price: 729.989990
discounted_price: 629.989990
sold: 0
date_added: 3072057632
product_codes: 36,37,38
values: 723456764345678976,9223372036854775807
additional_info: {"features":["Qualcomm Snapdragon 888","Fluid AMOLED display","Hasselblad Camera for Mobile"]}
vector: 0.021106,0.918278,0.261892,0.074594
––– input –––
sleep 5;mysql -h0 -P2306 -e "SELECT * FROM testrt ORDER BY id ASC\G"
––– output –––
*************************** 1. row ***************************
id: 6775836565403860993
model: iPhone 13 Pro
storage_capacity: 256
color: silver
release_year: 2021
price: 1099.989990
discounted_price: 989.989990
sold: 1
date_added: 2224442480
product_codes: 1,2,3
values: 523456764345678976,9223372036854775807
additional_info: {"features":["ProMotion display","A15 Bionic chip","Ceramic Shield front cover"]}
vector: 0.773448,0.312478,0.137971,0.459821
*************************** 2. row ***************************
id: 6775836565403860994
model: Galaxy S21 Ultra
storage_capacity: 128
color: black
release_year: 2021
price: 1199.989990
discounted_price: 1099.989990
sold: 0
date_added: 3141431296
product_codes: 4,5,6
values: 1234567890123456789,9223372036854775807
additional_info: {"features":["Dynamic AMOLED 2X","Exynos 2100","108MP camera"]}
vector: 0.500000,0.400000,0.300000,0.200000
*************************** 3. row ***************************
id: 6775836565403860995
model: Google Pixel 6
storage_capacity: 128
color: sorta seafoam
release_year: 2021
price: 699.989990
discounted_price: 599.989990
sold: 1
date_added: 3230359520
product_codes: 33,34,35
values: 623456764345678976,9223372036854775807
additional_info: {"features":["Google Tensor chip","Flat OLED display","Dual-camera system"]}
vector: 0.823448,0.362478,0.187971,0.509821
*************************** 4. row ***************************
id: 6775836565403860996
model: OnePlus 9
storage_capacity: 256
color: winter mist
release_year: 2021
price: 729.989990
discounted_price: 629.989990
sold: 0
date_added: 3072057632
product_codes: 36,37,38
values: 723456764345678976,9223372036854775807
additional_info: {"features":["Qualcomm Snapdragon 888","Fluid AMOLED display","Hasselblad Camera for Mobile"]}
vector: 0.021106,0.918278,0.261892,0.074594
––– input –––
mysql -h0 -P3306 -e "SELECT * FROM testrt ORDER BY id ASC\G"
––– output –––
*************************** 1. row ***************************
id: 6775836565403860993
model: iPhone 13 Pro
storage_capacity: 256
color: silver
release_year: 2021
price: 1099.989990
discounted_price: 989.989990
sold: 1
date_added: 2224442480
product_codes: 1,2,3
values: 523456764345678976,9223372036854775807
additional_info: {"features":["ProMotion display","A15 Bionic chip","Ceramic Shield front cover"]}
vector: 0.773448,0.312478,0.137971,0.459821
*************************** 2. row ***************************
id: 6775836565403860994
model: Galaxy S21 Ultra
storage_capacity: 128
color: black
release_year: 2021
price: 1199.989990
discounted_price: 1099.989990
sold: 0
date_added: 3141431296
product_codes: 4,5,6
values: 1234567890123456789,9223372036854775807
additional_info: {"features":["Dynamic AMOLED 2X","Exynos 2100","108MP camera"]}
vector: 0.500000,0.400000,0.300000,0.200000
*************************** 3. row ***************************
id: 6775836565403860995
model: Google Pixel 6
storage_capacity: 128
color: sorta seafoam
release_year: 2021
price: 699.989990
discounted_price: 599.989990
sold: 1
date_added: 3230359520
product_codes: 33,34,35
values: 623456764345678976,9223372036854775807
additional_info: {"features":["Google Tensor chip","Flat OLED display","Dual-camera system"]}
vector: 0.823448,0.362478,0.187971,0.509821
*************************** 4. row ***************************
id: 6775836565403860996
model: OnePlus 9
storage_capacity: 256
color: winter mist
release_year: 2021
price: 729.989990
discounted_price: 629.989990
sold: 0
date_added: 3072057632
product_codes: 36,37,38
values: 723456764345678976,9223372036854775807
additional_info: {"features":["Qualcomm Snapdragon 888","Fluid AMOLED display","Hasselblad Camera for Mobile"]}
vector: 0.021106,0.918278,0.261892,0.074594
––– input –––
mysql -h0 -P4306 -e "SELECT * FROM testrt ORDER BY id ASC\G"
––– output –––
*************************** 1. row ***************************
id: 6775836565403860993
model: iPhone 13 Pro
storage_capacity: 256
color: silver
release_year: 2021
price: 1099.989990
discounted_price: 989.989990
sold: 1
date_added: 2224442480
product_codes: 1,2,3
values: 523456764345678976,9223372036854775807
additional_info: {"features":["ProMotion display","A15 Bionic chip","Ceramic Shield front cover"]}
vector: 0.773448,0.312478,0.137971,0.459821
*************************** 2. row ***************************
id: 6775836565403860994
model: Galaxy S21 Ultra
storage_capacity: 128
color: black
release_year: 2021
price: 1199.989990
discounted_price: 1099.989990
sold: 0
date_added: 3141431296
product_codes: 4,5,6
values: 1234567890123456789,9223372036854775807
additional_info: {"features":["Dynamic AMOLED 2X","Exynos 2100","108MP camera"]}
vector: 0.500000,0.400000,0.300000,0.200000
*************************** 3. row ***************************
id: 6775836565403860995
model: Google Pixel 6
storage_capacity: 128
color: sorta seafoam
release_year: 2021
price: 699.989990
discounted_price: 599.989990
sold: 1
date_added: 3230359520
product_codes: 33,34,35
values: 623456764345678976,9223372036854775807
additional_info: {"features":["Google Tensor chip","Flat OLED display","Dual-camera system"]}
vector: 0.823448,0.362478,0.187971,0.509821
*************************** 4. row ***************************
id: 6775836565403860996
model: OnePlus 9
storage_capacity: 256
color: winter mist
release_year: 2021
price: 729.989990
discounted_price: 629.989990
sold: 0
date_added: 3072057632
product_codes: 36,37,38
values: 723456764345678976,9223372036854775807
additional_info: {"features":["Qualcomm Snapdragon 888","Fluid AMOLED display","Hasselblad Camera for Mobile"]}
vector: 0.021106,0.918278,0.261892,0.074594
––– input –––
mysql -h0 -P5306 -e "SELECT * FROM testrt ORDER BY id ASC\G"
––– output –––
*************************** 1. row ***************************
id: 6775836565403860993
model: iPhone 13 Pro
storage_capacity: 256
color: silver
release_year: 2021
price: 1099.989990
discounted_price: 989.989990
sold: 1
date_added: 2224442480
product_codes: 1,2,3
values: 523456764345678976,9223372036854775807
additional_info: {"features":["ProMotion display","A15 Bionic chip","Ceramic Shield front cover"]}
vector: 0.773448,0.312478,0.137971,0.459821
*************************** 2. row ***************************
id: 6775836565403860994
model: Galaxy S21 Ultra
storage_capacity: 128
color: black
release_year: 2021
price: 1199.989990
discounted_price: 1099.989990
sold: 0
date_added: 3141431296
product_codes: 4,5,6
values: 1234567890123456789,9223372036854775807
additional_info: {"features":["Dynamic AMOLED 2X","Exynos 2100","108MP camera"]}
vector: 0.500000,0.400000,0.300000,0.200000
*************************** 3. row ***************************
id: 6775836565403860995
model: Google Pixel 6
storage_capacity: 128
color: sorta seafoam
release_year: 2021
price: 699.989990
discounted_price: 599.989990
sold: 1
date_added: 3230359520
product_codes: 33,34,35
values: 623456764345678976,9223372036854775807
additional_info: {"features":["Google Tensor chip","Flat OLED display","Dual-camera system"]}
vector: 0.823448,0.362478,0.187971,0.509821
*************************** 4. row ***************************
id: 6775836565403860996
model: OnePlus 9
storage_capacity: 256
color: winter mist
release_year: 2021
price: 729.989990
discounted_price: 629.989990
sold: 0
date_added: 3072057632
product_codes: 36,37,38
values: 723456764345678976,9223372036854775807
additional_info: {"features":["Qualcomm Snapdragon 888","Fluid AMOLED display","Hasselblad Camera for Mobile"]}
vector: 0.021106,0.918278,0.261892,0.074594
––– input –––
export INSTANCE=4
––– output –––
––– input –––
searchd --stopwait -c test/clt-tests/base/searchd-with-flexible-ports.conf
––– output –––
Manticore %{SEMVER} %{COMMITDATE}#!/(\sdev)?\s/!#(columnar %{SEMVER} %{COMMITDATE}) (secondary %{SEMVER} %{COMMITDATE}) (knn %{SEMVER} %{COMMITDATE})
Copyright (c) 2001-2016, Andrew Aksyonoff
Copyright (c) 2008-2016, Sphinx Technologies Inc (http://sphinxsearch.com)
Copyright (c) 2017-%{YEAR}, Manticore Software LTD (https://manticoresearch.com)
[#!/[0-9]{2}:[0-9]{2}.[0-9]{3}/!#] [%{NUMBER}] using config file '%{PATH}' (%{NUMBER} chars)...
[#!/[0-9]{2}:[0-9]{2}.[0-9]{3}/!#] [%{NUMBER}] stop: successfully sent SIGTERM to pid %{NUMBER}
––– input –––
sleep 5;mysql -h0 -P2306 -e "DELETE FROM replication:testrt WHERE id = 6775836565403860994;"; echo $?
––– output –––
0
––– input –––
mysql -h0 -P2306 -e "SELECT * FROM testrt ORDER BY id ASC" > /tmp/output_2306.txt;
––– output –––
––– input –––
export INSTANCE=4
––– output –––
––– input –––
mkdir -p /tmp/manticore-${INSTANCE}
––– output –––
––– input –––
chmod -R 777 /tmp/manticore-${INSTANCE}
––– output –––
––– input –––
stdbuf -oL searchd -c test/clt-tests/base/searchd-with-flexible-ports.conf | grep -v precach
––– output –––
Manticore %{SEMVER} %{COMMITDATE}#!/(\sdev)?\s/!#(columnar %{SEMVER} %{COMMITDATE}) (secondary %{SEMVER} %{COMMITDATE}) (knn %{SEMVER} %{COMMITDATE})
Copyright (c) 2001-2016, Andrew Aksyonoff
Copyright (c) 2008-2016, Sphinx Technologies Inc (http://sphinxsearch.com)
Copyright (c) 2017-%{YEAR}, Manticore Software LTD (https://manticoresearch.com)
[#!/[a-zA-Z]{3}\s[a-zA-Z]{3}\s+[0-9]{1,2}\s[0-9]{2}:[0-9]{2}:[0-9]{2}.[0-9]{3}\s[0-9]{4}/!#] [%{NUMBER}] using config file '/.clt/test/clt-tests/base/searchd-with-flexible-ports.conf' (%{NUMBER} chars)...
starting daemon version '%{SEMVER} %{COMMITDATE} dev (columnar %{SEMVER} %{COMMITDATE}) (secondary %{SEMVER} %{COMMITDATE}) (knn %{SEMVER} %{COMMITDATE})' ...
listening on all interfaces for mysql, port=%{NUMBER}
listening on all interfaces for sphinx and http(s), port=%{NUMBER}
listening on all interfaces for sphinx and http(s), port=%{NUMBER}
––– input –––
if timeout 10 grep -qm1 'accepting connections' <(tail -n 1000 -f /tmp/manticore-${INSTANCE}/searchd.log); then echo 'Accepting connections!'; else echo 'Timeout or failed!'; fi
––– output –––
Accepting connections!
––– input –––
sleep 5;mysql -h0 -P1306 -e "SELECT * FROM testrt ORDER BY id ASC" > /tmp/output_1306.txt;
––– output –––
––– input –––
mysql -h0 -P2306 -e "SELECT * FROM testrt ORDER BY id ASC" > /tmp/output_2306.txt;
––– output –––
––– input –––
mysql -h0 -P3306 -e "SELECT * FROM testrt ORDER BY id ASC" > /tmp/output_3306.txt;
––– output –––
––– input –––
mysql -h0 -P4306 -e "SELECT * FROM testrt ORDER BY id ASC" > /tmp/output_4306.txt;
––– output –––
––– input –––
mysql -h0 -P5306 -e "SELECT * FROM testrt ORDER BY id ASC" > /tmp/output_5306.txt;
––– output –––
––– input –––
diff /tmp/output_1306.txt /tmp/output_2306.txt; echo $?
––– output –––
0
––– input –––
diff /tmp/output_1306.txt /tmp/output_3306.txt; echo $?
––– output –––
0
––– input –––
diff /tmp/output_1306.txt /tmp/output_4306.txt; echo $?
––– output –––
0
––– input –––
diff /tmp/output_1306.txt /tmp/output_5306.txt; echo $?
––– output –––
0
––– input –––
mysql -h0 -P1306 -e "REPLACE INTO replication:testrt (id, model, storage_capacity, color, release_year, price, discounted_price, sold, date_added, product_codes, values, additional_info, vector) VALUES (6775836565403860993, 'Updated iPhone 13 Pro', 256, 'silver', 2021, 1099.99, 989.99, 1, '1591362342000', (1,2,3), (523456764345678976, 98765409877866654098, 1109876543450987650987), '{\"features\": [\"Updated ProMotion display\", \"A15 Bionic chip\", \"Ceramic Shield front cover\"]}', (0.773448, 0.312478, 0.137971, 0.459821));"; echo $?
––– output –––
0
––– input –––
mysql -h0 -P1306 -e "SELECT * FROM testrt WHERE id=6775836565403860993\G"
––– output –––
*************************** 1. row ***************************
id: 6775836565403860993
model: Updated iPhone 13 Pro
storage_capacity: 256
color: silver
release_year: 2021
price: 1099.989990
discounted_price: 989.989990
sold: 1
date_added: 2224442480
product_codes: 1,2,3
values: 523456764345678976,9223372036854775807
additional_info: {"features":["Updated ProMotion display","A15 Bionic chip","Ceramic Shield front cover"]}
vector: 0.773448,0.312478,0.137971,0.459821
––– input –––
mysql -h0 -P2306 -e "SELECT * FROM testrt WHERE id=6775836565403860993\G"
––– output –––
*************************** 1. row ***************************
id: 6775836565403860993
model: Updated iPhone 13 Pro
storage_capacity: 256
color: silver
release_year: 2021
price: 1099.989990
discounted_price: 989.989990
sold: 1
date_added: 2224442480
product_codes: 1,2,3
values: 523456764345678976,9223372036854775807
additional_info: {"features":["Updated ProMotion display","A15 Bionic chip","Ceramic Shield front cover"]}
vector: 0.773448,0.312478,0.137971,0.459821
––– input –––
mysql -h0 -P3306 -e "SELECT * FROM testrt WHERE id=6775836565403860993\G"
––– output –––
*************************** 1. row ***************************
id: 6775836565403860993
model: Updated iPhone 13 Pro
storage_capacity: 256
color: silver
release_year: 2021
price: 1099.989990
discounted_price: 989.989990
sold: 1
date_added: 2224442480
product_codes: 1,2,3
values: 523456764345678976,9223372036854775807
additional_info: {"features":["Updated ProMotion display","A15 Bionic chip","Ceramic Shield front cover"]}
vector: 0.773448,0.312478,0.137971,0.459821
––– input –––
mysql -h0 -P4306 -e "SELECT * FROM testrt WHERE id=6775836565403860993\G"
––– output –––
*************************** 1. row ***************************
id: 6775836565403860993
model: Updated iPhone 13 Pro
storage_capacity: 256
color: silver
release_year: 2021
price: 1099.989990
discounted_price: 989.989990
sold: 1
date_added: 2224442480
product_codes: 1,2,3
values: 523456764345678976,9223372036854775807
additional_info: {"features":["Updated ProMotion display","A15 Bionic chip","Ceramic Shield front cover"]}
vector: 0.773448,0.312478,0.137971,0.459821
––– input –––
mysql -h0 -P5306 -e "SELECT * FROM testrt WHERE id=6775836565403860993\G"
––– output –––
*************************** 1. row ***************************
id: 6775836565403860993
model: Updated iPhone 13 Pro
storage_capacity: 256
color: silver
release_year: 2021
price: 1099.989990
discounted_price: 989.989990
sold: 1
date_added: 2224442480
product_codes: 1,2,3
values: 523456764345678976,9223372036854775807
additional_info: {"features":["Updated ProMotion display","A15 Bionic chip","Ceramic Shield front cover"]}
vector: 0.773448,0.312478,0.137971,0.459821
––– input –––
mysql -h0 -P1306 -e "FLUSH RAMCHUNK testrt;"
––– output –––
––– input –––
mysql -h0 -P1306 -e 'set global cluster_user=replication'
––– output –––
––– input –––
mysqldump -etc --replace -u replication -h0 -P1306 --skip-comments manticore replication:testrt | mysql -P1306 -h0
––– output –––
-- Warning: version string returned by server is incorrect.
-- Warning: column statistics not supported by the server.
––– input –––
for port in 1306 2306 3306 4306 5306; do echo "Checking tables on port $port"; mysql -h0 -P$port -e "SHOW TABLES;"; mysql -h0 -P$port -e "SELECT * FROM testrt ORDER BY id ASC\G"; done
––– output –––
Checking tables on port 1306
+--------+------+
| Table  | Type |
+--------+------+
| testrt | rt   |
+--------+------+
*************************** 1. row ***************************
id: 6775836565403860993
model: Updated iPhone 13 Pro
storage_capacity: 256
color: silver
release_year: 2021
price: 1099.989990
discounted_price: 989.989990
sold: 1
date_added: 2224442480
product_codes: 1,2,3
values: 523456764345678976,9223372036854775807
additional_info: {"features":["Updated ProMotion display","A15 Bionic chip","Ceramic Shield front cover"]}
vector: 0.773448,0.312478,0.137971,0.459821
*************************** 2. row ***************************
id: 6775836565403860995
model: Google Pixel 6
storage_capacity: 128
color: sorta seafoam
release_year: 2021
price: 699.989990
discounted_price: 599.989990
sold: 1
date_added: 3230359520
product_codes: 33,34,35
values: 623456764345678976,9223372036854775807
additional_info: {"features":["Google Tensor chip","Flat OLED display","Dual-camera system"]}
vector: 0.823448,0.362478,0.187971,0.509821
*************************** 3. row ***************************
id: 6775836565403860996
model: OnePlus 9
storage_capacity: 256
color: winter mist
release_year: 2021
price: 729.989990
discounted_price: 629.989990
sold: 0
date_added: 3072057632
product_codes: 36,37,38
values: 723456764345678976,9223372036854775807
additional_info: {"features":["Qualcomm Snapdragon 888","Fluid AMOLED display","Hasselblad Camera for Mobile"]}
vector: 0.021106,0.918278,0.261892,0.074594
Checking tables on port 2306
+--------+------+
| Table  | Type |
+--------+------+
| testrt | rt   |
+--------+------+
*************************** 1. row ***************************
id: 6775836565403860993
model: Updated iPhone 13 Pro
storage_capacity: 256
color: silver
release_year: 2021
price: 1099.989990
discounted_price: 989.989990
sold: 1
date_added: 2224442480
product_codes: 1,2,3
values: 523456764345678976,9223372036854775807
additional_info: {"features":["Updated ProMotion display","A15 Bionic chip","Ceramic Shield front cover"]}
vector: 0.773448,0.312478,0.137971,0.459821
*************************** 2. row ***************************
id: 6775836565403860995
model: Google Pixel 6
storage_capacity: 128
color: sorta seafoam
release_year: 2021
price: 699.989990
discounted_price: 599.989990
sold: 1
date_added: 3230359520
product_codes: 33,34,35
values: 623456764345678976,9223372036854775807
additional_info: {"features":["Google Tensor chip","Flat OLED display","Dual-camera system"]}
vector: 0.823448,0.362478,0.187971,0.509821
*************************** 3. row ***************************
id: 6775836565403860996
model: OnePlus 9
storage_capacity: 256
color: winter mist
release_year: 2021
price: 729.989990
discounted_price: 629.989990
sold: 0
date_added: 3072057632
product_codes: 36,37,38
values: 723456764345678976,9223372036854775807
additional_info: {"features":["Qualcomm Snapdragon 888","Fluid AMOLED display","Hasselblad Camera for Mobile"]}
vector: 0.021106,0.918278,0.261892,0.074594
Checking tables on port 3306
+--------+------+
| Table  | Type |
+--------+------+
| testrt | rt   |
+--------+------+
*************************** 1. row ***************************
id: 6775836565403860993
model: Updated iPhone 13 Pro
storage_capacity: 256
color: silver
release_year: 2021
price: 1099.989990
discounted_price: 989.989990
sold: 1
date_added: 2224442480
product_codes: 1,2,3
values: 523456764345678976,9223372036854775807
additional_info: {"features":["Updated ProMotion display","A15 Bionic chip","Ceramic Shield front cover"]}
vector: 0.773448,0.312478,0.137971,0.459821
*************************** 2. row ***************************
id: 6775836565403860995
model: Google Pixel 6
storage_capacity: 128
color: sorta seafoam
release_year: 2021
price: 699.989990
discounted_price: 599.989990
sold: 1
date_added: 3230359520
product_codes: 33,34,35
values: 623456764345678976,9223372036854775807
additional_info: {"features":["Google Tensor chip","Flat OLED display","Dual-camera system"]}
vector: 0.823448,0.362478,0.187971,0.509821
*************************** 3. row ***************************
id: 6775836565403860996
model: OnePlus 9
storage_capacity: 256
color: winter mist
release_year: 2021
price: 729.989990
discounted_price: 629.989990
sold: 0
date_added: 3072057632
product_codes: 36,37,38
values: 723456764345678976,9223372036854775807
additional_info: {"features":["Qualcomm Snapdragon 888","Fluid AMOLED display","Hasselblad Camera for Mobile"]}
vector: 0.021106,0.918278,0.261892,0.074594
Checking tables on port 4306
+--------+------+
| Table  | Type |
+--------+------+
| testrt | rt   |
+--------+------+
*************************** 1. row ***************************
id: 6775836565403860993
model: Updated iPhone 13 Pro
storage_capacity: 256
color: silver
release_year: 2021
price: 1099.989990
discounted_price: 989.989990
sold: 1
date_added: 2224442480
product_codes: 1,2,3
values: 523456764345678976,9223372036854775807
additional_info: {"features":["Updated ProMotion display","A15 Bionic chip","Ceramic Shield front cover"]}
vector: 0.773448,0.312478,0.137971,0.459821
*************************** 2. row ***************************
id: 6775836565403860995
model: Google Pixel 6
storage_capacity: 128
color: sorta seafoam
release_year: 2021
price: 699.989990
discounted_price: 599.989990
sold: 1
date_added: 3230359520
product_codes: 33,34,35
values: 623456764345678976,9223372036854775807
additional_info: {"features":["Google Tensor chip","Flat OLED display","Dual-camera system"]}
vector: 0.823448,0.362478,0.187971,0.509821
*************************** 3. row ***************************
id: 6775836565403860996
model: OnePlus 9
storage_capacity: 256
color: winter mist
release_year: 2021
price: 729.989990
discounted_price: 629.989990
sold: 0
date_added: 3072057632
product_codes: 36,37,38
values: 723456764345678976,9223372036854775807
additional_info: {"features":["Qualcomm Snapdragon 888","Fluid AMOLED display","Hasselblad Camera for Mobile"]}
vector: 0.021106,0.918278,0.261892,0.074594
Checking tables on port 5306
+--------+------+
| Table  | Type |
+--------+------+
| testrt | rt   |
+--------+------+
*************************** 1. row ***************************
id: 6775836565403860993
model: Updated iPhone 13 Pro
storage_capacity: 256
color: silver
release_year: 2021
price: 1099.989990
discounted_price: 989.989990
sold: 1
date_added: 2224442480
product_codes: 1,2,3
values: 523456764345678976,9223372036854775807
additional_info: {"features":["Updated ProMotion display","A15 Bionic chip","Ceramic Shield front cover"]}
vector: 0.773448,0.312478,0.137971,0.459821
*************************** 2. row ***************************
id: 6775836565403860995
model: Google Pixel 6
storage_capacity: 128
color: sorta seafoam
release_year: 2021
price: 699.989990
discounted_price: 599.989990
sold: 1
date_added: 3230359520
product_codes: 33,34,35
values: 623456764345678976,9223372036854775807
additional_info: {"features":["Google Tensor chip","Flat OLED display","Dual-camera system"]}
vector: 0.823448,0.362478,0.187971,0.509821
*************************** 3. row ***************************
id: 6775836565403860996
model: OnePlus 9
storage_capacity: 256
color: winter mist
release_year: 2021
price: 729.989990
discounted_price: 629.989990
sold: 0
date_added: 3072057632
product_codes: 36,37,38
values: 723456764345678976,9223372036854775807
additional_info: {"features":["Qualcomm Snapdragon 888","Fluid AMOLED display","Hasselblad Camera for Mobile"]}
vector: 0.021106,0.918278,0.261892,0.074594
––– input –––
mysql -h0 -P1306 -e "CREATE TABLE tbl_none (id INT, f TEXT, a INT, b FLOAT, j JSON, m MULTI, s STRING, e BOOL, d TIMESTAMP, v MULTI64, fv FLOAT_VECTOR KNN_TYPE='hnsw' KNN_DIMS='4' HNSW_SIMILARITY='l2') ENGINE='columnar' rt_mem_limit='128M';"; echo $?
––– output –––
0
––– input –––
echo 'the, and, of' > /tmp/stopwords.txt; mysql -h0 -P2306 -e "CREATE TABLE tbl_stopwords (id INT, f TEXT, a INT, b FLOAT, j JSON, m MULTI, s STRING, e BOOL, d TIMESTAMP, v MULTI64, fv FLOAT_VECTOR KNN_TYPE='hnsw' KNN_DIMS='4' HNSW_SIMILARITY='l2') ENGINE='columnar' morphology='stem_en' stopwords='/tmp/stopwords.txt' rt_mem_limit='256M';"; echo $?
––– output –––
0
––– input –––
echo 'cat => feline, dog => canine' > /tmp/exceptions.txt; mysql -h0 -P3306 -e "CREATE TABLE tbl_exceptions (id INT, f TEXT, a INT, b FLOAT, j JSON, m MULTI, s STRING, e BOOL, d TIMESTAMP, v MULTI64, fv FLOAT_VECTOR KNN_TYPE='hnsw' KNN_DIMS='4' HNSW_SIMILARITY='l2') ENGINE='columnar' exceptions='/tmp/exceptions.txt' morphology='stem_ru' rt_mem_limit='512M';"; echo $?
––– output –––
0
––– input –––
echo 'fast, faster' > /tmp/wordforms.txt; mysql -h0 -P4306 -e "CREATE TABLE tbl_wordforms (id INT, f TEXT, a INT, b FLOAT, j JSON, m MULTI, s STRING, e BOOL, d TIMESTAMP, v MULTI64, fv FLOAT_VECTOR KNN_TYPE='hnsw' KNN_DIMS='4' HNSW_SIMILARITY='l2') ENGINE='columnar' wordforms='/tmp/wordforms.txt' rt_mem_limit='1024M';"; echo $?
––– output –––
+ 0
––– input –––
mysql -h0 -P1306 -e "INSERT INTO tbl_none (id, f, a, b, j, m, s, e, d, v, fv) VALUES (1, 'Example text', 42, 3.14, '{\"key\":\"value\",\"list\":[1,2,3]}', (1,2,3), 'string_value', 1, '2024-12-16 12:00:00', (123456789012345678, 987654321098765432), (0.1, 0.2, 0.3, 0.4));"; echo $?
––– output –––
0
––– input –––
mysql -h0 -P2306 -e "INSERT INTO tbl_stem_en (id, f, a, b, j, m, s, e, d, v, fv) VALUES (2, 'Stemmed text', 24, 1.41, '{\"key\":\"value2\",\"list\":[4,5,6]}', (4,5,6), 'another_string', 0, '2023-11-15 08:30:00', (987654321098765432, 123456789012345678), (0.4, 0.3, 0.2, 0.1));"; echo $?
––– output –––
0
––– input –––
mysql -h0 -P3306 -e "INSERT INTO tbl_stem_ru (id, f, a, b, j, m, s, e, d, v, fv) VALUES (3, 'Русский текст', 84, 2.71, '{\"ключ\":\"значение\",\"массив\":[7,8,9]}', (7,8,9), 'строка', 1, '2022-05-20 15:45:00', (234567890123456789, 876543210987654321), (0.6, 0.7, 0.8, 0.9));"; echo $?
––– output –––
0
––– input –––
mysql -h0 -P4306 -e "INSERT INTO tbl_wordforms (id, f, a, b, j, m, s, e, d, v, fv) VALUES (4, 'Fast text', 99, 9.81, '{\"feature\":\"speed\",\"list\":[10,11,12]}', (10,11,12), 'quick_string', 0, '2021-01-01 00:00:00', (345678901234567890, 765432109876543210), (0.5, 0.5, 0.5, 0.5));"; echo $?
––– output –––
0
––– input –––
mysql -h0 -P1306 -e "FLUSH RAMCHUNK tbl_none;"
––– output –––
––– input –––
mysql -h0 -P2306 -e "FLUSH RAMCHUNK tbl_stem_en;"
––– output –––
––– input –––
mysql -h0 -P3306 -e "FLUSH RAMCHUNK tbl_stem_ru;"
––– output –––
––– input –––
mysql -h0 -P4306 -e "FLUSH RAMCHUNK tbl_wordforms;"
––– output –––
––– input –––
mysql -h0 -P1306 -e "ALTER CLUSTER replication ADD tbl_none;"; echo $?
––– output –––
0
––– input –––
mysql -h0 -P2306 -e "ALTER CLUSTER replication ADD tbl_stem_en;"; echo $?
––– output –––
0
––– input –––
mysql -h0 -P3306 -e "ALTER CLUSTER replication ADD tbl_stem_ru;"; echo $?
––– output –––
0
––– input –––
mysql -h0 -P4306 -e "ALTER CLUSTER replication ADD tbl_wordforms;"; echo $?
––– output –––
0
––– input –––
mysql -h0 -P1306 -e "SHOW STATUS LIKE 'cluster_replication_indexes';"
––– output –––
+-----------------------------+-------------------------------------------------------+
| Counter                     | Value                                                 |
+-----------------------------+-------------------------------------------------------+
| cluster_replication_indexes | testrt,tbl_none,tbl_stem_en,tbl_stem_ru,tbl_wordforms |
+-----------------------------+-------------------------------------------------------+
––– input –––
mysqldump -etc --replace -u replication -h0 -P1306 --skip-comments manticore replication:tbl_none replication:tbl_stem_en replication:tbl_stem_ru replication:tbl_wordforms | mysql -P2306 -h0; echo $?
––– output –––
-- Warning: version string returned by server is incorrect.
-- Warning: column statistics not supported by the server.
0
––– input –––
for port in 1306 2306 3306 4306 5306; do mysql -h0 -P$port -e "SHOW TABLES;"; done
––– output –––
+---------------+------+
| Table         | Type |
+---------------+------+
| tbl_none      | rt   |
| tbl_stem_en   | rt   |
| tbl_stem_ru   | rt   |
| tbl_wordforms | rt   |
| testrt        | rt   |
+---------------+------+
+---------------+------+
| Table         | Type |
+---------------+------+
| tbl_none      | rt   |
| tbl_stem_en   | rt   |
| tbl_stem_ru   | rt   |
| tbl_stopwords | rt   |
| tbl_wordforms | rt   |
| testrt        | rt   |
+---------------+------+
+----------------+------+
| Table          | Type |
+----------------+------+
| tbl_exceptions | rt   |
| tbl_none       | rt   |
| tbl_stem_en    | rt   |
| tbl_stem_ru    | rt   |
| tbl_wordforms  | rt   |
| testrt         | rt   |
+----------------+------+
+---------------+------+
| Table         | Type |
+---------------+------+
| tbl_none      | rt   |
| tbl_stem_en   | rt   |
| tbl_stem_ru   | rt   |
| tbl_wordforms | rt   |
| testrt        | rt   |
+---------------+------+
+---------------+------+
| Table         | Type |
+---------------+------+
| tbl_none      | rt   |
| tbl_stem_en   | rt   |
| tbl_stem_ru   | rt   |
| tbl_wordforms | rt   |
| testrt        | rt   |
+---------------+------+
––– input –––
for port in 1306 2306 3306 4306 5306; do mysql -h0 -P$port -e "SELECT * FROM tbl_none;"; mysql -h0 -P$port -e "SELECT * FROM tbl_stem_en;"; mysql -h0 -P$port -e "SELECT * FROM tbl_stem_ru;"; mysql -h0 -P$port -e "SELECT * FROM tbl_wordforms;"; done
––– output –––
+------+--------------+------+----------+--------------------------------+-------+--------------+------+------+---------------------------------------+-------------------------------------+
| id   | f            | a    | b        | j                              | m     | s            | e    | d    | v                                     | fv                                  |
+------+--------------+------+----------+--------------------------------+-------+--------------+------+------+---------------------------------------+-------------------------------------+
|    1 | Example text |   42 | 3.140000 | {"key":"value","list":[1,2,3]} | 1,2,3 | string_value |    1 |    0 | 123456789012345678,987654321098765432 | 0.100000,0.200000,0.300000,0.400000 |
+------+--------------+------+----------+--------------------------------+-------+--------------+------+------+---------------------------------------+-------------------------------------+
+------+--------------+----------------+---------------------+------+----------+---------------------------------+-------+------+---------------------------------------+------+
| id   | f            | s              | d                   | a    | b        | j                               | m     | e    | v                                     | fv   |
+------+--------------+----------------+---------------------+------+----------+---------------------------------+-------+------+---------------------------------------+------+
|    2 | Stemmed text | another_string | 2023-11-15 08:30:00 |   24 | 1.410000 | {"key":"value2","list":[4,5,6]} | 4,5,6 |    0 | 123456789012345678,987654321098765432 | 0    |
+------+--------------+----------------+---------------------+------+----------+---------------------------------+-------+------+---------------------------------------+------+
+------+---------------------------+--------------+---------------------+------+----------+--------------------------------------------------------+-------+------+---------------------------------------+------+
| id   | f                         | s            | d                   | a    | b        | j                                                      | m     | e    | v                                     | fv   |
+------+---------------------------+--------------+---------------------+------+----------+--------------------------------------------------------+-------+------+---------------------------------------+------+
|    3 | Русский текст             | строка       | 2022-05-20 15:45:00 |   84 | 2.710000 | {"ключ":"значение","массив":[7,8,9]}                   | 7,8,9 |    1 | 234567890123456789,876543210987654321 | 0    |
+------+---------------------------+--------------+---------------------+------+----------+--------------------------------------------------------+-------+------+---------------------------------------+------+
+------+-----------+------+----------+---------------------------------------+----------+--------------+------+------+---------------------------------------+-------------------------------------+
| id   | f         | a    | b        | j                                     | m        | s            | e    | d    | v                                     | fv                                  |
+------+-----------+------+----------+---------------------------------------+----------+--------------+------+------+---------------------------------------+-------------------------------------+
|    4 | Fast text |   99 | 9.810000 | {"feature":"speed","list":[10,11,12]} | 10,11,12 | quick_string |    0 |    0 | 345678901234567890,765432109876543210 | 0.500000,0.500000,0.500000,0.500000 |
+------+-----------+------+----------+---------------------------------------+----------+--------------+------+------+---------------------------------------+-------------------------------------+
+------+--------------+------+----------+--------------------------------+-------+--------------+------+------+---------------------------------------+-------------------------------------+
| id   | f            | a    | b        | j                              | m     | s            | e    | d    | v                                     | fv                                  |
+------+--------------+------+----------+--------------------------------+-------+--------------+------+------+---------------------------------------+-------------------------------------+
|    1 | Example text |   42 | 3.140000 | {"key":"value","list":[1,2,3]} | 1,2,3 | string_value |    1 |    0 | 123456789012345678,987654321098765432 | 0.100000,0.200000,0.300000,0.400000 |
+------+--------------+------+----------+--------------------------------+-------+--------------+------+------+---------------------------------------+-------------------------------------+
+------+--------------+----------------+---------------------+------+----------+---------------------------------+-------+------+---------------------------------------+------+
| id   | f            | s              | d                   | a    | b        | j                               | m     | e    | v                                     | fv   |
+------+--------------+----------------+---------------------+------+----------+---------------------------------+-------+------+---------------------------------------+------+
|    2 | Stemmed text | another_string | 2023-11-15 08:30:00 |   24 | 1.410000 | {"key":"value2","list":[4,5,6]} | 4,5,6 |    0 | 123456789012345678,987654321098765432 | 0    |
+------+--------------+----------------+---------------------+------+----------+---------------------------------+-------+------+---------------------------------------+------+
+------+---------------------------+--------------+---------------------+------+----------+--------------------------------------------------------+-------+------+---------------------------------------+------+
| id   | f                         | s            | d                   | a    | b        | j                                                      | m     | e    | v                                     | fv   |
+------+---------------------------+--------------+---------------------+------+----------+--------------------------------------------------------+-------+------+---------------------------------------+------+
|    3 | Русский текст             | строка       | 2022-05-20 15:45:00 |   84 | 2.710000 | {"ключ":"значение","массив":[7,8,9]}                   | 7,8,9 |    1 | 234567890123456789,876543210987654321 | 0    |
+------+---------------------------+--------------+---------------------+------+----------+--------------------------------------------------------+-------+------+---------------------------------------+------+
+------+-----------+------+----------+---------------------------------------+----------+--------------+------+------+---------------------------------------+-------------------------------------+
| id   | f         | a    | b        | j                                     | m        | s            | e    | d    | v                                     | fv                                  |
+------+-----------+------+----------+---------------------------------------+----------+--------------+------+------+---------------------------------------+-------------------------------------+
|    4 | Fast text |   99 | 9.810000 | {"feature":"speed","list":[10,11,12]} | 10,11,12 | quick_string |    0 |    0 | 345678901234567890,765432109876543210 | 0.500000,0.500000,0.500000,0.500000 |
+------+-----------+------+----------+---------------------------------------+----------+--------------+------+------+---------------------------------------+-------------------------------------+
+------+--------------+------+----------+--------------------------------+-------+--------------+------+------+---------------------------------------+-------------------------------------+
| id   | f            | a    | b        | j                              | m     | s            | e    | d    | v                                     | fv                                  |
+------+--------------+------+----------+--------------------------------+-------+--------------+------+------+---------------------------------------+-------------------------------------+
|    1 | Example text |   42 | 3.140000 | {"key":"value","list":[1,2,3]} | 1,2,3 | string_value |    1 |    0 | 123456789012345678,987654321098765432 | 0.100000,0.200000,0.300000,0.400000 |
+------+--------------+------+----------+--------------------------------+-------+--------------+------+------+---------------------------------------+-------------------------------------+
+------+--------------+----------------+---------------------+------+----------+---------------------------------+-------+------+---------------------------------------+------+
| id   | f            | s              | d                   | a    | b        | j                               | m     | e    | v                                     | fv   |
+------+--------------+----------------+---------------------+------+----------+---------------------------------+-------+------+---------------------------------------+------+
|    2 | Stemmed text | another_string | 2023-11-15 08:30:00 |   24 | 1.410000 | {"key":"value2","list":[4,5,6]} | 4,5,6 |    0 | 123456789012345678,987654321098765432 | 0    |
+------+--------------+----------------+---------------------+------+----------+---------------------------------+-------+------+---------------------------------------+------+
+------+---------------------------+--------------+---------------------+------+----------+--------------------------------------------------------+-------+------+---------------------------------------+------+
| id   | f                         | s            | d                   | a    | b        | j                                                      | m     | e    | v                                     | fv   |
+------+---------------------------+--------------+---------------------+------+----------+--------------------------------------------------------+-------+------+---------------------------------------+------+
|    3 | Русский текст             | строка       | 2022-05-20 15:45:00 |   84 | 2.710000 | {"ключ":"значение","массив":[7,8,9]}                   | 7,8,9 |    1 | 234567890123456789,876543210987654321 | 0    |
+------+---------------------------+--------------+---------------------+------+----------+--------------------------------------------------------+-------+------+---------------------------------------+------+
+------+-----------+------+----------+---------------------------------------+----------+--------------+------+------+---------------------------------------+-------------------------------------+
| id   | f         | a    | b        | j                                     | m        | s            | e    | d    | v                                     | fv                                  |
+------+-----------+------+----------+---------------------------------------+----------+--------------+------+------+---------------------------------------+-------------------------------------+
|    4 | Fast text |   99 | 9.810000 | {"feature":"speed","list":[10,11,12]} | 10,11,12 | quick_string |    0 |    0 | 345678901234567890,765432109876543210 | 0.500000,0.500000,0.500000,0.500000 |
+------+-----------+------+----------+---------------------------------------+----------+--------------+------+------+---------------------------------------+-------------------------------------+
+------+--------------+------+----------+--------------------------------+-------+--------------+------+------+---------------------------------------+-------------------------------------+
| id   | f            | a    | b        | j                              | m     | s            | e    | d    | v                                     | fv                                  |
+------+--------------+------+----------+--------------------------------+-------+--------------+------+------+---------------------------------------+-------------------------------------+
|    1 | Example text |   42 | 3.140000 | {"key":"value","list":[1,2,3]} | 1,2,3 | string_value |    1 |    0 | 123456789012345678,987654321098765432 | 0.100000,0.200000,0.300000,0.400000 |
+------+--------------+------+----------+--------------------------------+-------+--------------+------+------+---------------------------------------+-------------------------------------+
+------+--------------+----------------+---------------------+------+----------+---------------------------------+-------+------+---------------------------------------+------+
| id   | f            | s              | d                   | a    | b        | j                               | m     | e    | v                                     | fv   |
+------+--------------+----------------+---------------------+------+----------+---------------------------------+-------+------+---------------------------------------+------+
|    2 | Stemmed text | another_string | 2023-11-15 08:30:00 |   24 | 1.410000 | {"key":"value2","list":[4,5,6]} | 4,5,6 |    0 | 123456789012345678,987654321098765432 | 0    |
+------+--------------+----------------+---------------------+------+----------+---------------------------------+-------+------+---------------------------------------+------+
+------+---------------------------+--------------+---------------------+------+----------+--------------------------------------------------------+-------+------+---------------------------------------+------+
| id   | f                         | s            | d                   | a    | b        | j                                                      | m     | e    | v                                     | fv   |
+------+---------------------------+--------------+---------------------+------+----------+--------------------------------------------------------+-------+------+---------------------------------------+------+
|    3 | Русский текст             | строка       | 2022-05-20 15:45:00 |   84 | 2.710000 | {"ключ":"значение","массив":[7,8,9]}                   | 7,8,9 |    1 | 234567890123456789,876543210987654321 | 0    |
+------+---------------------------+--------------+---------------------+------+----------+--------------------------------------------------------+-------+------+---------------------------------------+------+
+------+-----------+------+----------+---------------------------------------+----------+--------------+------+------+---------------------------------------+-------------------------------------+
| id   | f         | a    | b        | j                                     | m        | s            | e    | d    | v                                     | fv                                  |
+------+-----------+------+----------+---------------------------------------+----------+--------------+------+------+---------------------------------------+-------------------------------------+
|    4 | Fast text |   99 | 9.810000 | {"feature":"speed","list":[10,11,12]} | 10,11,12 | quick_string |    0 |    0 | 345678901234567890,765432109876543210 | 0.500000,0.500000,0.500000,0.500000 |
+------+-----------+------+----------+---------------------------------------+----------+--------------+------+------+---------------------------------------+-------------------------------------+
+------+--------------+------+----------+--------------------------------+-------+--------------+------+------+---------------------------------------+-------------------------------------+
| id   | f            | a    | b        | j                              | m     | s            | e    | d    | v                                     | fv                                  |
+------+--------------+------+----------+--------------------------------+-------+--------------+------+------+---------------------------------------+-------------------------------------+
|    1 | Example text |   42 | 3.140000 | {"key":"value","list":[1,2,3]} | 1,2,3 | string_value |    1 |    0 | 123456789012345678,987654321098765432 | 0.100000,0.200000,0.300000,0.400000 |
+------+--------------+------+----------+--------------------------------+-------+--------------+------+------+---------------------------------------+-------------------------------------+
+------+--------------+----------------+---------------------+------+----------+---------------------------------+-------+------+---------------------------------------+------+
| id   | f            | s              | d                   | a    | b        | j                               | m     | e    | v                                     | fv   |
+------+--------------+----------------+---------------------+------+----------+---------------------------------+-------+------+---------------------------------------+------+
|    2 | Stemmed text | another_string | 2023-11-15 08:30:00 |   24 | 1.410000 | {"key":"value2","list":[4,5,6]} | 4,5,6 |    0 | 123456789012345678,987654321098765432 | 0    |
+------+--------------+----------------+---------------------+------+----------+---------------------------------+-------+------+---------------------------------------+------+
+------+---------------------------+--------------+---------------------+------+----------+--------------------------------------------------------+-------+------+---------------------------------------+------+
| id   | f                         | s            | d                   | a    | b        | j                                                      | m     | e    | v                                     | fv   |
+------+---------------------------+--------------+---------------------+------+----------+--------------------------------------------------------+-------+------+---------------------------------------+------+
|    3 | Русский текст             | строка       | 2022-05-20 15:45:00 |   84 | 2.710000 | {"ключ":"значение","массив":[7,8,9]}                   | 7,8,9 |    1 | 234567890123456789,876543210987654321 | 0    |
+------+---------------------------+--------------+---------------------+------+----------+--------------------------------------------------------+-------+------+---------------------------------------+------+
+------+-----------+------+----------+---------------------------------------+----------+--------------+------+------+---------------------------------------+-------------------------------------+
| id   | f         | a    | b        | j                                     | m        | s            | e    | d    | v                                     | fv                                  |
+------+-----------+------+----------+---------------------------------------+----------+--------------+------+------+---------------------------------------+-------------------------------------+
|    4 | Fast text |   99 | 9.810000 | {"feature":"speed","list":[10,11,12]} | 10,11,12 | quick_string |    0 |    0 | 345678901234567890,765432109876543210 | 0.500000,0.500000,0.500000,0.500000 |
+------+-----------+------+----------+---------------------------------------+----------+--------------+------+------+---------------------------------------+-------------------------------------+
––– input –––
for port1 in 1306 2306 3306 4306 5306; do for port2 in 1306 2306 3306 4306 5306; do if [ $port1 -ne $port2 ]; then diff <(mysql -h0 -P$port1 -e "SELECT * FROM tbl_none;") <(mysql -h0 -P$port2 -e "SELECT * FROM tbl_none;"); diff <(mysql -h0 -P$port1 -e "SELECT * FROM tbl_stem_en;") <(mysql -h0 -P$port2 -e "SELECT * FROM tbl_stem_en;"); diff <(mysql -h0 -P$port1 -e "SELECT * FROM tbl_stem_ru;") <(mysql -h0 -P$port2 -e "SELECT * FROM tbl_stem_ru;"); diff <(mysql -h0 -P$port1 -e "SELECT * FROM tbl_wordforms;") <(mysql -h0 -P$port2 -e "SELECT * FROM tbl_wordforms;"); fi; done; done
––– output –––
––– input –––
export INSTANCE=1
––– output –––
––– input –––
echo "index tbl_plain { type = plain; path = /var/lib/manticore/tbl_plain; rt_mem_limit = 512M; rt_field = f; rt_attr_uint = a; rt_attr_float = b; rt_attr_multi = m; rt_attr_string = s; rt_attr_bool = e; rt_attr_timestamp = d; rt_attr_multi_64 = v; rt_attr_json = j; rt_attr_vector = fv float_vector; }" > /var/lib/manticore/tbl_plain.conf; echo $?
––– output –––
0
––– input –––
mysql -h0 -P1306 -e "INSERT INTO tbl_plain (id, f, a, b, m, s, e, d, v, j, fv) VALUES (1, 'Plain example', 42, 3.14, (1,2,3), 'plain_string', 1, '2024-12-16 12:00:00', (123456789012345678, 987654321098765432), '{\"key\":\"value\"}', (0.1, 0.2, 0.3, 0.4));"; echo $?
––– output –––
0
––– input –––
mysql -h0 -P1306 -e "ALTER CLUSTER replication ADD tbl_plain;"; echo $?
––– output –––
0
––– input –––
mysql -h0 -P1306 -e "SHOW STATUS LIKE 'cluster_replication_indexes';"
––– output –––
+-----------------------------+-----------------------------------------------------------------+
| Counter                     | Value                                                           |
+-----------------------------+-----------------------------------------------------------------+
| cluster_replication_indexes | testrt,tbl_none,tbl_stem_en,tbl_stem_ru,tbl_wordforms,tbl_plain |
+-----------------------------+-----------------------------------------------------------------+
––– input –––
mysqldump -etc --replace -u replication -h0 -P1306 --skip-comments manticore replication:tbl_plain | mysql -h0 -P2306; echo $?
––– output –––
-- Warning: version string returned by server is incorrect.
-- Warning: column statistics not supported by the server.
0
––– input –––
for port in 1306 2306 3306 4306 5306; do mysql -h0 -P$port -e "SELECT * FROM tbl_plain;"; echo $?; done
––– output –––
+------+---------------+--------------+---------------------+------+----------+-------+------+---------------------------------------+-----------------+------+
| id   | f             | s            | d                   | a    | b        | m     | e    | v                                     | j               | fv   |
+------+---------------+--------------+---------------------+------+----------+-------+------+---------------------------------------+-----------------+------+
|    1 | Plain example | plain_string | 2024-12-16 12:00:00 |   42 | 3.140000 | 1,2,3 |    1 | 123456789012345678,987654321098765432 | {"key":"value"} | 0    |
+------+---------------+--------------+---------------------+------+----------+-------+------+---------------------------------------+-----------------+------+
0
+------+---------------+--------------+---------------------+------+----------+-------+------+---------------------------------------+-----------------+------+
| id   | f             | s            | d                   | a    | b        | m     | e    | v                                     | j               | fv   |
+------+---------------+--------------+---------------------+------+----------+-------+------+---------------------------------------+-----------------+------+
|    1 | Plain example | plain_string | 2024-12-16 12:00:00 |   42 | 3.140000 | 1,2,3 |    1 | 123456789012345678,987654321098765432 | {"key":"value"} | 0    |
+------+---------------+--------------+---------------------+------+----------+-------+------+---------------------------------------+-----------------+------+
0
+------+---------------+--------------+---------------------+------+----------+-------+------+---------------------------------------+-----------------+------+
| id   | f             | s            | d                   | a    | b        | m     | e    | v                                     | j               | fv   |
+------+---------------+--------------+---------------------+------+----------+-------+------+---------------------------------------+-----------------+------+
|    1 | Plain example | plain_string | 2024-12-16 12:00:00 |   42 | 3.140000 | 1,2,3 |    1 | 123456789012345678,987654321098765432 | {"key":"value"} | 0    |
+------+---------------+--------------+---------------------+------+----------+-------+------+---------------------------------------+-----------------+------+
0
+------+---------------+--------------+---------------------+------+----------+-------+------+---------------------------------------+-----------------+------+
| id   | f             | s            | d                   | a    | b        | m     | e    | v                                     | j               | fv   |
+------+---------------+--------------+---------------------+------+----------+-------+------+---------------------------------------+-----------------+------+
|    1 | Plain example | plain_string | 2024-12-16 12:00:00 |   42 | 3.140000 | 1,2,3 |    1 | 123456789012345678,987654321098765432 | {"key":"value"} | 0    |
+------+---------------+--------------+---------------------+------+----------+-------+------+---------------------------------------+-----------------+------+
0
+------+---------------+--------------+---------------------+------+----------+-------+------+---------------------------------------+-----------------+------+
| id   | f             | s            | d                   | a    | b        | m     | e    | v                                     | j               | fv   |
+------+---------------+--------------+---------------------+------+----------+-------+------+---------------------------------------+-----------------+------+
|    1 | Plain example | plain_string | 2024-12-16 12:00:00 |   42 | 3.140000 | 1,2,3 |    1 | 123456789012345678,987654321098765432 | {"key":"value"} | 0    |
+------+---------------+--------------+---------------------+------+----------+-------+------+---------------------------------------+-----------------+------+
0
––– input –––
for port in 1306 2306 3306 4306 5306; do mysql -h0 -P$port -e "SHOW TABLES;"; done
––– output –––
+---------------+------+
| Table         | Type |
+---------------+------+
| tbl_none      | rt   |
| tbl_plain     | rt   |
| tbl_stem_en   | rt   |
| tbl_stem_ru   | rt   |
| tbl_wordforms | rt   |
| testrt        | rt   |
+---------------+------+
+---------------+------+
| Table         | Type |
+---------------+------+
| tbl_none      | rt   |
| tbl_plain     | rt   |
| tbl_stem_en   | rt   |
| tbl_stem_ru   | rt   |
| tbl_stopwords | rt   |
| tbl_wordforms | rt   |
| testrt        | rt   |
+---------------+------+
+----------------+------+
| Table          | Type |
+----------------+------+
| tbl_exceptions | rt   |
| tbl_none       | rt   |
| tbl_plain      | rt   |
| tbl_stem_en    | rt   |
| tbl_stem_ru    | rt   |
| tbl_wordforms  | rt   |
| testrt         | rt   |
+----------------+------+
+---------------+------+
| Table         | Type |
+---------------+------+
| tbl_none      | rt   |
| tbl_plain     | rt   |
| tbl_stem_en   | rt   |
| tbl_stem_ru   | rt   |
| tbl_wordforms | rt   |
| testrt        | rt   |
+---------------+------+
+---------------+------+
| Table         | Type |
+---------------+------+
| tbl_none      | rt   |
| tbl_plain     | rt   |
| tbl_stem_en   | rt   |
| tbl_stem_ru   | rt   |
| tbl_wordforms | rt   |
| testrt        | rt   |
+---------------+------+
––– input –––
for port1 in 1306 2306 3306 4306 5306; do for port2 in 1306 2306 3306 4306 5306; do if [ $port1 -ne $port2 ]; then diff <(mysql -h0 -P$port1 -e "SELECT * FROM tbl_plain;") <(mysql -h0 -P$port2 -e "SELECT * FROM tbl_plain;"); fi; done; done
––– output –––
