––– input –––
mkdir -p /var/{run,lib,log}/manticore-1
cat << EOF > /tmp/1.conf
searchd {
	listen = 1306:mysql41
	listen = 1312
	listen = 1308:http
	log = /var/log/manticore-1/searchd.log
	query_log = /var/log/manticore-1/query.log
	pid_file = /var/log/manticore-1/searchd.pid
	data_dir = /var/log/manticore-1
	query_log_format = sphinxql
	query_log_commands = 1
}
EOF
stdbuf -oL searchd -c /tmp/1.conf  --logreplication > /dev/null 2>&1
––– output –––
––– input –––
mkdir -p /var/{run,lib,log}/manticore-2
cat << EOF > /tmp/2.conf
searchd {
	listen = 2306:mysql41
	listen = 2312
	listen = 2308:http
	log = /var/log/manticore-2/searchd.log
	query_log = /var/log/manticore-2/query.log
	pid_file = /var/log/manticore-2/searchd.pid
	data_dir = /var/log/manticore-2
	query_log_format = sphinxql
	query_log_commands = 1
}
EOF
stdbuf -oL searchd -c /tmp/2.conf  --logreplication > /dev/null 2>&1
––– output –––
––– input –––
mysql -h0 -P1306 -e "create cluster c"
––– output –––
––– input –––
mysql -h0 -P2306 -e "join cluster c at '127.0.0.1:1312'"
––– output –––
––– input –––
mysql -h0 -P1306 -e "create table c:tbl1(id bigint) shards=2 rf=2 timeout=5";
––– output –––
0
--- input ---
cat  /var/log/manticore-1/query.log
--- output ---
--- input ---
cat  /var/log/manticore-1/query.log
--- output ---
