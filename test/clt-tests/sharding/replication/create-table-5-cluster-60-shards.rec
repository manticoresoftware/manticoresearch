––– input –––
export INSTANCE=1
––– output –––
––– block: ../../base/replication/start-searchd-precach –––
––– input –––
export INSTANCE=2
––– output –––
––– block: ../../base/replication/start-searchd-precach –––
––– input –––
export INSTANCE=3
––– output –––
––– block: ../../base/replication/start-searchd-precach –––
––– input –––
export INSTANCE=4
––– output –––
––– block: ../../base/replication/start-searchd-precach –––
––– input –––
export INSTANCE=5
––– output –––
––– block: ../../base/replication/start-searchd-precach –––
––– input –––
export CLUSTER_NAME=c
––– output –––
––– block: ../base/replication/create-cluster –––
––– input –––
export CLUSTER_NAME=c
––– output –––
––– block: ../base/replication/join-cluster-on-all-nodes –––
––– input –––
mysql -h0 -P1306 -e "create table c:t(id bigint) shards=60 rf=3"
––– output –––
––– input –––
for i in 1 2 3 4 5; do mysql -h0 -P${i}306 -e "show tables\G"; done | grep 'Table: t' | sort -V
––– output –––
Table: t
Table: t
Table: t
Table: t
Table: t
Table: t_s0
Table: t_s0
Table: t_s0
Table: t_s1
Table: t_s1
Table: t_s1
Table: t_s2
Table: t_s2
Table: t_s2
Table: t_s3
Table: t_s3
Table: t_s3
Table: t_s4
Table: t_s4
Table: t_s4
Table: t_s6
Table: t_s6
Table: t_s6
Table: t_s7
Table: t_s7
Table: t_s7
Table: t_s8
Table: t_s8
Table: t_s8
Table: t_s9
Table: t_s9
Table: t_s9
Table: t_s11
Table: t_s11
Table: t_s11
Table: t_s12
Table: t_s12
Table: t_s12
Table: t_s13
Table: t_s13
Table: t_s13
Table: t_s14
Table: t_s14
Table: t_s14
Table: t_s15
Table: t_s15
Table: t_s15
Table: t_s16
Table: t_s16
Table: t_s16
Table: t_s17
Table: t_s17
Table: t_s17
Table: t_s18
Table: t_s18
Table: t_s18
Table: t_s19
Table: t_s19
Table: t_s19
Table: t_s20
Table: t_s20
Table: t_s20
Table: t_s21
Table: t_s21
Table: t_s21
Table: t_s22
Table: t_s22
Table: t_s22
Table: t_s23
Table: t_s23
Table: t_s23
Table: t_s24
Table: t_s24
Table: t_s24
Table: t_s25
Table: t_s25
Table: t_s25
Table: t_s26
Table: t_s26
Table: t_s26
Table: t_s27
Table: t_s27
Table: t_s27
Table: t_s28
Table: t_s28
Table: t_s28
Table: t_s29
Table: t_s29
Table: t_s30
Table: t_s30
Table: t_s30
Table: t_s31
Table: t_s31
Table: t_s31
Table: t_s32
Table: t_s32
Table: t_s32
Table: t_s33
Table: t_s33
Table: t_s33
Table: t_s34
Table: t_s34
Table: t_s34
Table: t_s35
Table: t_s35
Table: t_s35
Table: t_s36
Table: t_s36
Table: t_s36
Table: t_s37
Table: t_s37
Table: t_s37
Table: t_s38
Table: t_s38
Table: t_s38
Table: t_s39
Table: t_s39
Table: t_s39
Table: t_s40
Table: t_s40
Table: t_s40
Table: t_s41
Table: t_s41
Table: t_s41
Table: t_s42
Table: t_s42
Table: t_s42
Table: t_s43
Table: t_s43
Table: t_s43
Table: t_s44
Table: t_s44
Table: t_s44
Table: t_s45
Table: t_s45
Table: t_s45
Table: t_s46
Table: t_s46
Table: t_s46
Table: t_s47
Table: t_s47
Table: t_s47
Table: t_s48
Table: t_s48
Table: t_s48
Table: t_s49
Table: t_s49
Table: t_s49
Table: t_s50
Table: t_s50
Table: t_s50
Table: t_s51
Table: t_s51
Table: t_s51
Table: t_s52
Table: t_s52
Table: t_s52
Table: t_s53
Table: t_s53
Table: t_s53
Table: t_s54
Table: t_s54
Table: t_s54
Table: t_s55
Table: t_s55
Table: t_s55
Table: t_s56
Table: t_s56
Table: t_s56
Table: t_s57
Table: t_s57
Table: t_s57
Table: t_s58
Table: t_s58
Table: t_s58
Table: t_s59
Table: t_s59
Table: t_s59
––– input –––
for i in 1 2 3 4 5; do mysql -h0 -P${i}306 -e "show create table t\G" | grep 'Create Table'; done
––– output –––
Create Table: CREATE TABLE t type='distributed' %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD}
Create Table: CREATE TABLE t type='distributed' %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD}
Create Table: CREATE TABLE t type='distributed' %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD}
Create Table: CREATE TABLE t type='distributed' %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD}
Create Table: CREATE TABLE t type='distributed' %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD} %{DISTRIBUTED_TABLE_T_SHARD}
––– input –––
for i in 1 2 3 4 5; do mysql -h0 -P${i}306 -e "show tables\G" | grep 'Table: t_' | wc -l; done
––– output –––
36
36
36
36
36
