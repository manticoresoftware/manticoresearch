––– block: ./init –––
––– input –––
export INSTANCE=1
––– output –––
––– block: ../base/flexible/start-searchd –––
––– input –––
export INSTANCE=2
––– output –––
––– block: ../base/flexible/start-searchd –––
––– input –––
export CLUSTER_NAME=c
––– output –––
––– block: ../base/flexible/create-cluster –––
––– block: ../base/flexible/join-cluster-on-all-nodes –––
––– input –––
sleep 5; mysql -h0 -P1306 -e "create table c:testrt(id bigint, title text, content text, gid uint) shards=2 rf=1;"; echo $?
––– output –––
0
––– input –––
mysql -h0 -P1306 -e "show tables;"
––– output –––
––– input –––
mysql -h0 -P1306 -e "INSERT INTO c:testrt (id, title, content, gid) values (1, 'Title 1', 'Content 1', 1);"
––– output –––
––– input –––
mysql -h0 -P1306 -e "INSERT INTO c:testrt (id, title, content, gid) values (2, 'Title 2', 'Content 2', 2);"
––– output –––
––– input –––
mysql -h0 -P1306 -e "SELECT * FROM c:testrt WHERE id IN (1, 2);"
––– output –––
––– input –––
mysql -h0 -P1306 -e "UPDATE c:testrt SET title = 'Updated Title' WHERE id = 1;"
––– output –––
––– input –––
mysql -h0 -P1306 -e "DELETE FROM c:testrt WHERE id = 2;"
––– output –––
––– input –––
mysql -h0 -P1306 -e "ALTER CLUSTER c ADD NODE '127.0.0.1:1313';"
––– output –––
––– input –––
mysql -h0 -P1306 -e "DROP CLUSTER c;"
––– output –––
