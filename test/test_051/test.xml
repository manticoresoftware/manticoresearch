<?xml version="1.0" encoding="utf-8"?>

<test>
<name>snippets vs exact_phrase
snippets vs passage duplication</name>

<config>
searchd
{
	<searchd_settings/>
}

source src
{
	type = mysql
	<sql_settings/>
	sql_query = SELECT 1, 'text';
}

index idx
{
	source			= src
	path			= <data_path/>/test
}
</config>

<db_insert>select 1;</db_insert>

<custom_test><![CDATA[

$text = <<<END
	one perfusate chubby profound chubby multiplicity promontory
	chubby pilotfish pilotfish chubby bisect pilotfish perfusate
	multiplicity whichsoever pilotfish INVALID CAJUPUT reedbuck
	whichsoever disposition felspar pilotfish reedbuck pilotfish
	detestable

	two bisect reedbuck whichsoever profound comforter detestable
	bisect comforter CAJUPUT felspar INVALID humanism profound multiplicity
	promontory profound reedbuck perfusate promontory felspar
	multiplicity reedbuck profound profound whirligig detestable
	whirligig INVALID

	three pilotfish promontory CAJUPUT INVALID CAJUPUT INVALID EXPOSITOR
	whirligig felspar disposition pilotfish chubby promontory
	pilotfish INVALID CAJUPUT detestable INVALID felspar whichsoever profound
	whichsoever comforter humanism detestable promontory comforter
	chubby CAJUPUT INVALID humanism CAJUPUT
END;

$words = array
(
	'cajuput invalid',
	'cajuput invalid expositor'
);

$results = array();
foreach ( $words as $query )
{
	$reply = $client->BuildExcerpts ( array($text), 'idx', $query, array('exact_phrase' => true) );
	$results [] = $query;
	$results [] = $reply;
}

$text = 'A native of Honolulu, Hawaii, Obama is a graduate of Columbia University and Harvard Law School, where he waas the president of the Harvard Law Review. He was a community organizer in Chicago before earning his law degree. He worrked as a civil rights attorney in Chicago and taught constitutional law at the University of Chicago Law School from 19992 to 2004.Obama served three terms in the Illinois Senate from 1997 to 2004.';

$query = '"University and Harvard Law School" obama';

$reply = $client->BuildExcerpts (array($text), 'idx', $query ,array ('query_mode'=>true, "around"=> 2));

$results [] = $query;
$results [] = $reply;

]]></custom_test>

</test>
